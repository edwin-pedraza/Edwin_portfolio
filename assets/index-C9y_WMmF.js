function yB(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function lp(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function L2(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function n(){var i=!1;try{i=this instanceof n}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var Vx={exports:{}},om={},Wx={exports:{}},xn={};var OS;function xB(){if(OS)return xn;OS=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function g(H){return H===null||typeof H!="object"?null:(H=p&&H[p]||H["@@iterator"],typeof H=="function"?H:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,A={};function b(H,X,Z){this.props=H,this.context=X,this.refs=A,this.updater=Z||y}b.prototype.isReactComponent={},b.prototype.setState=function(H,X){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,X,"setState")},b.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function w(){}w.prototype=b.prototype;function C(H,X,Z){this.props=H,this.context=X,this.refs=A,this.updater=Z||y}var E=C.prototype=new w;E.constructor=C,_(E,b.prototype),E.isPureReactComponent=!0;var R=Array.isArray,L=Object.prototype.hasOwnProperty,D={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function O(H,X,Z){var ye,be={},Le=null,pe=null;if(X!=null)for(ye in X.ref!==void 0&&(pe=X.ref),X.key!==void 0&&(Le=""+X.key),X)L.call(X,ye)&&!j.hasOwnProperty(ye)&&(be[ye]=X[ye]);var Ae=arguments.length-2;if(Ae===1)be.children=Z;else if(1<Ae){for(var je=Array(Ae),ft=0;ft<Ae;ft++)je[ft]=arguments[ft+2];be.children=je}if(H&&H.defaultProps)for(ye in Ae=H.defaultProps,Ae)be[ye]===void 0&&(be[ye]=Ae[ye]);return{$$typeof:r,type:H,key:Le,ref:pe,props:be,_owner:D.current}}function I(H,X){return{$$typeof:r,type:H.type,key:X,ref:H.ref,props:H.props,_owner:H._owner}}function U(H){return typeof H=="object"&&H!==null&&H.$$typeof===r}function V(H){var X={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(Z){return X[Z]})}var ee=/\/+/g;function te(H,X){return typeof H=="object"&&H!==null&&H.key!=null?V(""+H.key):X.toString(36)}function ne(H,X,Z,ye,be){var Le=typeof H;(Le==="undefined"||Le==="boolean")&&(H=null);var pe=!1;if(H===null)pe=!0;else switch(Le){case"string":case"number":pe=!0;break;case"object":switch(H.$$typeof){case r:case e:pe=!0}}if(pe)return pe=H,be=be(pe),H=ye===""?"."+te(pe,0):ye,R(be)?(Z="",H!=null&&(Z=H.replace(ee,"$&/")+"/"),ne(be,X,Z,"",function(ft){return ft})):be!=null&&(U(be)&&(be=I(be,Z+(!be.key||pe&&pe.key===be.key?"":(""+be.key).replace(ee,"$&/")+"/")+H)),X.push(be)),1;if(pe=0,ye=ye===""?".":ye+":",R(H))for(var Ae=0;Ae<H.length;Ae++){Le=H[Ae];var je=ye+te(Le,Ae);pe+=ne(Le,X,Z,je,be)}else if(je=g(H),typeof je=="function")for(H=je.call(H),Ae=0;!(Le=H.next()).done;)Le=Le.value,je=ye+te(Le,Ae++),pe+=ne(Le,X,Z,je,be);else if(Le==="object")throw X=String(H),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return pe}function le(H,X,Z){if(H==null)return H;var ye=[],be=0;return ne(H,ye,"","",function(Le){return X.call(Z,Le,be++)}),ye}function de(H){if(H._status===-1){var X=H._result;X=X(),X.then(function(Z){(H._status===0||H._status===-1)&&(H._status=1,H._result=Z)},function(Z){(H._status===0||H._status===-1)&&(H._status=2,H._result=Z)}),H._status===-1&&(H._status=0,H._result=X)}if(H._status===1)return H._result.default;throw H._result}var ie={current:null},J={transition:null},Q={ReactCurrentDispatcher:ie,ReactCurrentBatchConfig:J,ReactCurrentOwner:D};return xn.Children={map:le,forEach:function(H,X,Z){le(H,function(){X.apply(this,arguments)},Z)},count:function(H){var X=0;return le(H,function(){X++}),X},toArray:function(H){return le(H,function(X){return X})||[]},only:function(H){if(!U(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},xn.Component=b,xn.Fragment=t,xn.Profiler=i,xn.PureComponent=C,xn.StrictMode=n,xn.Suspense=l,xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,xn.cloneElement=function(H,X,Z){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var ye=_({},H.props),be=H.key,Le=H.ref,pe=H._owner;if(X!=null){if(X.ref!==void 0&&(Le=X.ref,pe=D.current),X.key!==void 0&&(be=""+X.key),H.type&&H.type.defaultProps)var Ae=H.type.defaultProps;for(je in X)L.call(X,je)&&!j.hasOwnProperty(je)&&(ye[je]=X[je]===void 0&&Ae!==void 0?Ae[je]:X[je])}var je=arguments.length-2;if(je===1)ye.children=Z;else if(1<je){Ae=Array(je);for(var ft=0;ft<je;ft++)Ae[ft]=arguments[ft+2];ye.children=Ae}return{$$typeof:r,type:H.type,key:be,ref:Le,props:ye,_owner:pe}},xn.createContext=function(H){return H={$$typeof:o,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:s,_context:H},H.Consumer=H},xn.createElement=O,xn.createFactory=function(H){var X=O.bind(null,H);return X.type=H,X},xn.createRef=function(){return{current:null}},xn.forwardRef=function(H){return{$$typeof:a,render:H}},xn.isValidElement=U,xn.lazy=function(H){return{$$typeof:h,_payload:{_status:-1,_result:H},_init:de}},xn.memo=function(H,X){return{$$typeof:u,type:H,compare:X===void 0?null:X}},xn.startTransition=function(H){var X=J.transition;J.transition={};try{H()}finally{J.transition=X}},xn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},xn.useCallback=function(H,X){return ie.current.useCallback(H,X)},xn.useContext=function(H){return ie.current.useContext(H)},xn.useDebugValue=function(){},xn.useDeferredValue=function(H){return ie.current.useDeferredValue(H)},xn.useEffect=function(H,X){return ie.current.useEffect(H,X)},xn.useId=function(){return ie.current.useId()},xn.useImperativeHandle=function(H,X,Z){return ie.current.useImperativeHandle(H,X,Z)},xn.useInsertionEffect=function(H,X){return ie.current.useInsertionEffect(H,X)},xn.useLayoutEffect=function(H,X){return ie.current.useLayoutEffect(H,X)},xn.useMemo=function(H,X){return ie.current.useMemo(H,X)},xn.useReducer=function(H,X,Z){return ie.current.useReducer(H,X,Z)},xn.useRef=function(H){return ie.current.useRef(H)},xn.useState=function(H){return ie.current.useState(H)},xn.useSyncExternalStore=function(H,X,Z){return ie.current.useSyncExternalStore(H,X,Z)},xn.useTransition=function(){return ie.current.useTransition()},xn.version="18.2.0",xn}var US;function zd(){return US||(US=1,Wx.exports=xB()),Wx.exports}var jS;function _B(){if(jS)return om;jS=1;var r=zd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,u){var h,p={},g=null,y=null;u!==void 0&&(g=""+u),l.key!==void 0&&(g=""+l.key),l.ref!==void 0&&(y=l.ref);for(h in l)n.call(l,h)&&!s.hasOwnProperty(h)&&(p[h]=l[h]);if(a&&a.defaultProps)for(h in l=a.defaultProps,l)p[h]===void 0&&(p[h]=l[h]);return{$$typeof:e,type:a,key:g,ref:y,props:p,_owner:i.current}}return om.Fragment=t,om.jsx=o,om.jsxs=o,om}var zS;function N2(){return zS||(zS=1,Vx.exports=_B()),Vx.exports}var x=N2(),F=zd();const ns=lp(F),wB=yB({__proto__:null,default:ns},[F]);function Qm(){return Qm=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Qm.apply(this,arguments)}var Dc;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Dc||(Dc={}));const HS="popstate";function bB(r){r===void 0&&(r={});function e(n,i){let{pathname:s,search:o,hash:a}=n.location;return Bw("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){return typeof i=="string"?i:ny(i)}return SB(e,t,null,r)}function Nr(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function cA(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AB(){return Math.random().toString(36).substr(2,8)}function GS(r,e){return{usr:r.state,key:r.key,idx:e}}function Bw(r,e,t,n){return t===void 0&&(t=null),Qm({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?cp(e):e,{state:t,key:e&&e.key||n||AB()})}function ny(r){let{pathname:e="/",search:t="",hash:n=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function cp(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substr(n),r=r.substr(0,n)),r&&(e.pathname=r)}return e}function SB(r,e,t,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,a=Dc.Pop,l=null,u=h();u==null&&(u=0,o.replaceState(Qm({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function p(){a=Dc.Pop;let b=h(),w=b==null?null:b-u;u=b,l&&l({action:a,location:A.location,delta:w})}function g(b,w){a=Dc.Push;let C=Bw(A.location,b,w);u=h()+1;let E=GS(C,u),R=A.createHref(C);try{o.pushState(E,"",R)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;i.location.assign(R)}s&&l&&l({action:a,location:A.location,delta:1})}function y(b,w){a=Dc.Replace;let C=Bw(A.location,b,w);u=h();let E=GS(C,u),R=A.createHref(C);o.replaceState(E,"",R),s&&l&&l({action:a,location:A.location,delta:0})}function _(b){let w=i.location.origin!=="null"?i.location.origin:i.location.href,C=typeof b=="string"?b:ny(b);return Nr(w,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,w)}let A={get action(){return a},get location(){return r(i,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(HS,p),l=b,()=>{i.removeEventListener(HS,p),l=null}},createHref(b){return e(i,b)},createURL:_,encodeLocation(b){let w=_(b);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:g,replace:y,go(b){return o.go(b)}};return A}var VS;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(VS||(VS={}));function EB(r,e,t){t===void 0&&(t="/");let n=typeof e=="string"?cp(e):e,i=uA(n.pathname||"/",t);if(i==null)return null;let s=B2(r);MB(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=kB(s[a],OB(i));return o}function B2(r,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Nr(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=Oc([n,l.relativePath]),h=t.concat(l);s.children&&s.children.length>0&&(Nr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),B2(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:NB(u,s.index),routesMeta:h})};return r.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of k2(s.path))i(s,o,l)}),e}function k2(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=k2(n.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>r.startsWith("/")&&l===""?"/":l)}function MB(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:BB(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const CB=/^:\w+$/,TB=3,RB=2,PB=1,IB=10,LB=-2,WS=r=>r==="*";function NB(r,e){let t=r.split("/"),n=t.length;return t.some(WS)&&(n+=LB),e&&(n+=RB),t.filter(i=>!WS(i)).reduce((i,s)=>i+(CB.test(s)?TB:s===""?PB:IB),n)}function BB(r,e){return r.length===e.length&&r.slice(0,-1).every((n,i)=>n===e[i])?r[r.length-1]-e[e.length-1]:0}function kB(r,e){let{routesMeta:t}=r,n={},i="/",s=[];for(let o=0;o<t.length;++o){let a=t[o],l=o===t.length-1,u=i==="/"?e:e.slice(i.length)||"/",h=DB({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!h)return null;Object.assign(n,h.params);let p=a.route;s.push({params:n,pathname:Oc([i,h.pathname]),pathnameBase:HB(Oc([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=Oc([i,h.pathnameBase]))}return s}function DB(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=FB(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((u,h,p)=>{if(h==="*"){let g=a[p]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}return u[h]=UB(a[p]||"",h),u},{}),pathname:s,pathnameBase:o,pattern:r}}function FB(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),cA(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(n.push(a),"/([^\\/]+)"));return r.endsWith("*")?(n.push("*"),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function OB(r){try{return decodeURI(r)}catch(e){return cA(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function UB(r,e){try{return decodeURIComponent(r)}catch(t){return cA(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+r+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+t+").")),r}}function uA(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function jB(r,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:i=""}=typeof r=="string"?cp(r):r;return{pathname:t?t.startsWith("/")?t:zB(t,e):e,search:GB(n),hash:VB(i)}}function zB(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Jx(r,e,t,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dA(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function hA(r,e,t,n){n===void 0&&(n=!1);let i;typeof r=="string"?i=cp(r):(i=Qm({},r),Nr(!i.pathname||!i.pathname.includes("?"),Jx("?","pathname","search",i)),Nr(!i.pathname||!i.pathname.includes("#"),Jx("#","pathname","hash",i)),Nr(!i.search||!i.search.includes("#"),Jx("#","search","hash",i)));let s=r===""||i.pathname==="",o=s?"/":i.pathname,a;if(n||o==null)a=t;else{let p=e.length-1;if(o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}a=p>=0?e[p]:"/"}let l=jB(i,a),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const Oc=r=>r.join("/").replace(/\/\/+/g,"/"),HB=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),GB=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,VB=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function WB(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const D2=["post","put","patch","delete"];new Set(D2);const JB=["get",...D2];new Set(JB);function ry(){return ry=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},ry.apply(this,arguments)}const fA=F.createContext(null),F2=F.createContext(null),Hd=F.createContext(null),Sy=F.createContext(null),Bl=F.createContext({outlet:null,matches:[],isDataRoute:!1}),O2=F.createContext(null);function XB(r,e){let{relative:t}=e===void 0?{}:e;up()||Nr(!1);let{basename:n,navigator:i}=F.useContext(Hd),{hash:s,pathname:o,search:a}=pA(r,{relative:t}),l=o;return n!=="/"&&(l=o==="/"?n:Oc([n,o])),i.createHref({pathname:l,search:a,hash:s})}function up(){return F.useContext(Sy)!=null}function $c(){return up()||Nr(!1),F.useContext(Sy).location}function U2(r){F.useContext(Hd).static||F.useLayoutEffect(r)}function kl(){let{isDataRoute:r}=F.useContext(Bl);return r?ok():KB()}function KB(){up()||Nr(!1);let r=F.useContext(fA),{basename:e,navigator:t}=F.useContext(Hd),{matches:n}=F.useContext(Bl),{pathname:i}=$c(),s=JSON.stringify(dA(n).map(l=>l.pathnameBase)),o=F.useRef(!1);return U2(()=>{o.current=!0}),F.useCallback(function(l,u){if(u===void 0&&(u={}),!o.current)return;if(typeof l=="number"){t.go(l);return}let h=hA(l,JSON.parse(s),i,u.relative==="path");r==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Oc([e,h.pathname])),(u.replace?t.replace:t.push)(h,u.state,u)},[e,t,s,i,r])}function j2(){let{matches:r}=F.useContext(Bl),e=r[r.length-1];return e?e.params:{}}function pA(r,e){let{relative:t}=e===void 0?{}:e,{matches:n}=F.useContext(Bl),{pathname:i}=$c(),s=JSON.stringify(dA(n).map(o=>o.pathnameBase));return F.useMemo(()=>hA(r,JSON.parse(s),i,t==="path"),[r,s,i,t])}function YB(r,e){return qB(r,e)}function qB(r,e,t){up()||Nr(!1);let{navigator:n}=F.useContext(Hd),{matches:i}=F.useContext(Bl),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let l=$c(),u;if(e){var h;let A=typeof e=="string"?cp(e):e;a==="/"||(h=A.pathname)!=null&&h.startsWith(a)||Nr(!1),u=A}else u=l;let p=u.pathname||"/",g=a==="/"?p:p.slice(a.length)||"/",y=EB(r,{pathname:g}),_=tk(y&&y.map(A=>Object.assign({},A,{params:Object.assign({},o,A.params),pathname:Oc([a,n.encodeLocation?n.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?a:Oc([a,n.encodeLocation?n.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),i,t);return e&&_?F.createElement(Sy.Provider,{value:{location:ry({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Dc.Pop}},_):_}function QB(){let r=sk(),e=WB(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),t?F.createElement("pre",{style:i},t):null,null)}const ZB=F.createElement(QB,null);class $B extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?F.createElement(Bl.Provider,{value:this.props.routeContext},F.createElement(O2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ek(r){let{routeContext:e,match:t,children:n}=r,i=F.useContext(fA);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),F.createElement(Bl.Provider,{value:e},n)}function tk(r,e,t){var n;if(e===void 0&&(e=[]),t===void 0&&(t=null),r==null){var i;if((i=t)!=null&&i.errors)r=t.matches;else return null}let s=r,o=(n=t)==null?void 0:n.errors;if(o!=null){let a=s.findIndex(l=>l.route.id&&o?.[l.route.id]);a>=0||Nr(!1),s=s.slice(0,Math.min(s.length,a+1))}return s.reduceRight((a,l,u)=>{let h=l.route.id?o?.[l.route.id]:null,p=null;t&&(p=l.route.errorElement||ZB);let g=e.concat(s.slice(0,u+1)),y=()=>{let _;return h?_=p:l.route.Component?_=F.createElement(l.route.Component,null):l.route.element?_=l.route.element:_=a,F.createElement(ek,{match:l,routeContext:{outlet:a,matches:g,isDataRoute:t!=null},children:_})};return t&&(l.route.ErrorBoundary||l.route.errorElement||u===0)?F.createElement($B,{location:t.location,revalidation:t.revalidation,component:p,error:h,children:y(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):y()},null)}var kw;(function(r){r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate"})(kw||(kw={}));var Zm;(function(r){r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId"})(Zm||(Zm={}));function nk(r){let e=F.useContext(fA);return e||Nr(!1),e}function rk(r){let e=F.useContext(F2);return e||Nr(!1),e}function ik(r){let e=F.useContext(Bl);return e||Nr(!1),e}function z2(r){let e=ik(),t=e.matches[e.matches.length-1];return t.route.id||Nr(!1),t.route.id}function sk(){var r;let e=F.useContext(O2),t=rk(Zm.UseRouteError),n=z2(Zm.UseRouteError);return e||((r=t.errors)==null?void 0:r[n])}function ok(){let{router:r}=nk(kw.UseNavigateStable),e=z2(Zm.UseNavigateStable),t=F.useRef(!1);return U2(()=>{t.current=!0}),F.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?r.navigate(i):r.navigate(i,ry({fromRouteId:e},s)))},[r,e])}function ak(r){let{to:e,replace:t,state:n,relative:i}=r;up()||Nr(!1);let{matches:s}=F.useContext(Bl),{pathname:o}=$c(),a=kl(),l=hA(e,dA(s).map(h=>h.pathnameBase),o,i==="path"),u=JSON.stringify(l);return F.useEffect(()=>a(JSON.parse(u),{replace:t,state:n,relative:i}),[a,u,i,t,n]),null}function Zo(r){Nr(!1)}function lk(r){let{basename:e="/",children:t=null,location:n,navigationType:i=Dc.Pop,navigator:s,static:o=!1}=r;up()&&Nr(!1);let a=e.replace(/^\/*/,"/"),l=F.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof n=="string"&&(n=cp(n));let{pathname:u="/",search:h="",hash:p="",state:g=null,key:y="default"}=n,_=F.useMemo(()=>{let A=uA(u,a);return A==null?null:{location:{pathname:A,search:h,hash:p,state:g,key:y},navigationType:i}},[a,u,h,p,g,y,i]);return _==null?null:F.createElement(Hd.Provider,{value:l},F.createElement(Sy.Provider,{children:t,value:_}))}function H2(r){let{children:e,location:t}=r;return YB(Dw(e),t)}var JS;(function(r){r[r.pending=0]="pending",r[r.success=1]="success",r[r.error=2]="error"})(JS||(JS={}));new Promise(()=>{});function Dw(r,e){e===void 0&&(e=[]);let t=[];return F.Children.forEach(r,(n,i)=>{if(!F.isValidElement(n))return;let s=[...e,i];if(n.type===F.Fragment){t.push.apply(t,Dw(n.props.children,s));return}n.type!==Zo&&Nr(!1),!n.props.index||!n.props.children||Nr(!1);let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Dw(n.props.children,s)),t.push(o)}),t}function iy(){return iy=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},iy.apply(this,arguments)}function G2(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}function ck(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function uk(r,e){return r.button===0&&(!e||e==="_self")&&!ck(r)}const dk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],hk=["aria-current","caseSensitive","className","end","style","to","children"],fk="startTransition",XS=wB[fk];function pk(r){let{basename:e,children:t,future:n,window:i}=r,s=F.useRef();s.current==null&&(s.current=bB({window:i,v5Compat:!0}));let o=s.current,[a,l]=F.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},h=F.useCallback(p=>{u&&XS?XS(()=>l(p)):l(p)},[l,u]);return F.useLayoutEffect(()=>o.listen(h),[o,h]),F.createElement(lk,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o})}const mk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bd=F.forwardRef(function(e,t){let{onClick:n,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:h}=e,p=G2(e,dk),{basename:g}=F.useContext(Hd),y,_=!1;if(typeof u=="string"&&gk.test(u)&&(y=u,mk))try{let C=new URL(window.location.href),E=u.startsWith("//")?new URL(C.protocol+u):new URL(u),R=uA(E.pathname,g);E.origin===C.origin&&R!=null?u=R+E.search+E.hash:_=!0}catch{}let A=XB(u,{relative:i}),b=yk(u,{replace:o,state:a,target:l,preventScrollReset:h,relative:i});function w(C){n&&n(C),C.defaultPrevented||b(C)}return F.createElement("a",iy({},p,{href:y||A,onClick:_||s?n:w,ref:t,target:l}))}),vk=F.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,children:u}=e,h=G2(e,hk),p=pA(l,{relative:h.relative}),g=$c(),y=F.useContext(F2),{navigator:_}=F.useContext(Hd),A=_.encodeLocation?_.encodeLocation(p).pathname:p.pathname,b=g.pathname,w=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;i||(b=b.toLowerCase(),w=w?w.toLowerCase():null,A=A.toLowerCase());let C=b===A||!o&&b.startsWith(A)&&b.charAt(A.length)==="/",E=w!=null&&(w===A||!o&&w.startsWith(A)&&w.charAt(A.length)==="/"),R=C?n:void 0,L;typeof s=="function"?L=s({isActive:C,isPending:E}):L=[s,C?"active":null,E?"pending":null].filter(Boolean).join(" ");let D=typeof a=="function"?a({isActive:C,isPending:E}):a;return F.createElement(bd,iy({},h,{"aria-current":R,className:L,ref:t,style:D,to:l}),typeof u=="function"?u({isActive:C,isPending:E}):u)});var KS;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher"})(KS||(KS={}));var YS;(function(r){r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(YS||(YS={}));function yk(r,e){let{target:t,replace:n,state:i,preventScrollReset:s,relative:o}=e===void 0?{}:e,a=kl(),l=$c(),u=pA(r,{relative:o});return F.useCallback(h=>{if(uk(h,t)){h.preventDefault();let p=n!==void 0?n:ny(l)===ny(u);a(r,{replace:p,state:i,preventScrollReset:s,relative:o})}},[l,a,u,n,i,t,r,s,o])}const sy="/Edwin_portfolio/assets/LogoEdwin-del_H33r.svg",xk="modulepreload",_k=function(r){return"/Edwin_portfolio/"+r},qS={},gg=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){let u=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};var o=u;document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");i=u(t.map(h=>{if(h=_k(h),h in qS)return;qS[h]=!0;const p=h.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":xk,p||(y.as="script"),y.crossOrigin="",y.href=h,l&&y.setAttribute("nonce",l),document.head.appendChild(y),p)return new Promise((_,A)=>{y.addEventListener("load",_),y.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},wk=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>gg(async()=>{const{default:n}=await Promise.resolve().then(()=>dp);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class mA extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class bk extends mA{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class QS extends mA{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ZS extends mA{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Fw;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(Fw||(Fw={}));var Ak=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(n.next(h))}catch(p){o(p)}}function l(h){try{u(n.throw(h))}catch(p){o(p)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class Sk{constructor(e,{headers:t={},customFetch:n,region:i=Fw.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=wk(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return Ak(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=t;let a={},{region:l}=t;l||(l=this.region);const u=new URL(`${this.url}/${e}`);l&&l!=="any"&&(a["x-region"]=l,u.searchParams.set("forceFunctionRegion",l));let h;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",h=o):typeof o=="string"?(a["Content-Type"]="text/plain",h=o):typeof FormData<"u"&&o instanceof FormData?h=o:(a["Content-Type"]="application/json",h=JSON.stringify(o)));const p=yield this.fetch(u.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:h}).catch(A=>{throw new bk(A)}),g=p.headers.get("x-relay-error");if(g&&g==="true")throw new QS(p);if(!p.ok)throw new ZS(p);let y=((n=p.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),_;return y==="application/json"?_=yield p.json():y==="application/octet-stream"?_=yield p.blob():y==="text/event-stream"?_=p:y==="multipart/form-data"?_=yield p.formData():_=yield p.text(),{data:_,error:null,response:p}}catch(i){return{data:null,error:i,response:i instanceof ZS||i instanceof QS?i.context:void 0}}})}}var ai={},Zh={},$h={},ef={},tf={},nf={},Ek=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Zf=Ek();const Mk=Zf.fetch,V2=Zf.fetch.bind(Zf),W2=Zf.Headers,Ck=Zf.Request,Tk=Zf.Response,dp=Object.freeze(Object.defineProperty({__proto__:null,Headers:W2,Request:Ck,Response:Tk,default:V2,fetch:Mk},Symbol.toStringTag,{value:"Module"})),Rk=L2(dp);var B0={},$S;function J2(){if($S)return B0;$S=1,Object.defineProperty(B0,"__esModule",{value:!0});class r extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return B0.default=r,B0}var eE;function X2(){if(eE)return nf;eE=1;var r=nf&&nf.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(nf,"__esModule",{value:!0});const e=r(Rk),t=r(J2());class n{constructor(s){this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=s.headers,this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=s.shouldThrowOnError,this.signal=s.signal,this.isMaybeSingle=s.isMaybeSingle,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,o){return this.headers=Object.assign({},this.headers),this.headers[s]=o,this}then(s,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var h,p,g;let y=null,_=null,A=null,b=u.status,w=u.statusText;if(u.ok){if(this.method!=="HEAD"){const L=await u.text();L===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?_=L:_=JSON.parse(L))}const E=(h=this.headers.Prefer)===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),R=(p=u.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");E&&R&&R.length>1&&(A=parseInt(R[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(y={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,A=null,b=406,w="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const E=await u.text();try{y=JSON.parse(E),Array.isArray(y)&&u.status===404&&(_=[],y=null,b=200,w="OK")}catch{u.status===404&&E===""?(b=204,w="No Content"):y={message:E}}if(y&&this.isMaybeSingle&&(!((g=y?.details)===null||g===void 0)&&g.includes("0 rows"))&&(y=null,b=200,w="OK"),y&&this.shouldThrowOnError)throw new t.default(y)}return{error:y,data:_,count:A,status:b,statusText:w}});return this.shouldThrowOnError||(l=l.catch(u=>{var h,p,g;return{error:{message:`${(h=u?.name)!==null&&h!==void 0?h:"FetchError"}: ${u?.message}`,details:`${(p=u?.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(g=u?.code)!==null&&g!==void 0?g:""}`},data:null,count:null,status:0,statusText:""}})),l.then(s,o)}returns(){return this}overrideTypes(){return this}}return nf.default=n,nf}var tE;function K2(){if(tE)return tf;tE=1;var r=tf&&tf.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(tf,"__esModule",{value:!0});const e=r(X2());class t extends e.default{select(i){let s=!1;const o=(i??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:s=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.order`:"order",h=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${h?`${h},`:""}${i}.${s?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:o=s}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,s,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(u,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:s=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:u="text"}={}){var h;const p=[i?"analyze":null,s?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),g=(h=this.headers.Accept)!==null&&h!==void 0?h:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${g}"; options=${p};`,u==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return tf.default=t,tf}var nE;function gA(){if(nE)return ef;nE=1;var r=ef&&ef.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ef,"__esModule",{value:!0});const e=r(K2());class t extends e.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}in(i,s){const o=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:o,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const u=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${l}fts${u}.${s}`),this}match(i){return Object.entries(i).forEach(([s,o])=>{this.url.searchParams.append(s,`eq.${o}`)}),this}not(i,s,o){return this.url.searchParams.append(i,`not.${s}.${o}`),this}or(i,{foreignTable:s,referencedTable:o=s}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${i})`),this}filter(i,s,o){return this.url.searchParams.append(i,`${s}.${o}`),this}}return ef.default=t,ef}var rE;function Y2(){if(rE)return $h;rE=1;var r=$h&&$h.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty($h,"__esModule",{value:!0});const e=r(gA());class t{constructor(i,{headers:s={},schema:o,fetch:a}){this.url=i,this.headers=s,this.schema=o,this.fetch=a}select(i,{head:s=!1,count:o}={}){const a=s?"HEAD":"GET";let l=!1;const u=(i??"*").split("").map(h=>/\s/.test(h)&&!l?"":(h==='"'&&(l=!l),h)).join("");return this.url.searchParams.set("select",u),o&&(this.headers.Prefer=`count=${o}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:s,defaultToNull:o=!0}={}){const a="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(i)){const u=i.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(u.length>0){const h=[...new Set(u)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:s,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){const u="POST",h=[`resolution=${o?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&h.push(this.headers.Prefer),a&&h.push(`count=${a}`),l||h.push("missing=default"),this.headers.Prefer=h.join(","),Array.isArray(i)){const p=i.reduce((g,y)=>g.concat(Object.keys(y)),[]);if(p.length>0){const g=[...new Set(p)].map(y=>`"${y}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:s}={}){const o="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),this.headers.Prefer=a.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const s="DELETE",o=[];return i&&o.push(`count=${i}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return $h.default=t,$h}var am={},lm={},iE;function Pk(){return iE||(iE=1,Object.defineProperty(lm,"__esModule",{value:!0}),lm.version=void 0,lm.version="0.0.0-automated"),lm}var sE;function Ik(){if(sE)return am;sE=1,Object.defineProperty(am,"__esModule",{value:!0}),am.DEFAULT_HEADERS=void 0;const r=Pk();return am.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${r.version}`},am}var oE;function Lk(){if(oE)return Zh;oE=1;var r=Zh&&Zh.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Zh,"__esModule",{value:!0});const e=r(Y2()),t=r(gA()),n=Ik();class i{constructor(o,{headers:a={},schema:l,fetch:u}={}){this.url=o,this.headers=Object.assign(Object.assign({},n.DEFAULT_HEADERS),a),this.schemaName=l,this.fetch=u}from(o){const a=new URL(`${this.url}/${o}`);return new e.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new i(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:l=!1,get:u=!1,count:h}={}){let p;const g=new URL(`${this.url}/rpc/${o}`);let y;l||u?(p=l?"HEAD":"GET",Object.entries(a).filter(([A,b])=>b!==void 0).map(([A,b])=>[A,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([A,b])=>{g.searchParams.append(A,b)})):(p="POST",y=a);const _=Object.assign({},this.headers);return h&&(_.Prefer=`count=${h}`),new t.default({method:p,url:g,headers:_,schema:this.schemaName,body:y,fetch:this.fetch,allowEmpty:!1})}}return Zh.default=i,Zh}var aE;function Nk(){if(aE)return ai;aE=1;var r=ai&&ai.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(ai,"__esModule",{value:!0}),ai.PostgrestError=ai.PostgrestBuilder=ai.PostgrestTransformBuilder=ai.PostgrestFilterBuilder=ai.PostgrestQueryBuilder=ai.PostgrestClient=void 0;const e=r(Lk());ai.PostgrestClient=e.default;const t=r(Y2());ai.PostgrestQueryBuilder=t.default;const n=r(gA());ai.PostgrestFilterBuilder=n.default;const i=r(K2());ai.PostgrestTransformBuilder=i.default;const s=r(X2());ai.PostgrestBuilder=s.default;const o=r(J2());return ai.PostgrestError=o.default,ai.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:s.default,PostgrestError:o.default},ai}var Bk=Nk();const kk=lp(Bk),{PostgrestClient:Dk,PostgrestQueryBuilder:BK,PostgrestFilterBuilder:kK,PostgrestTransformBuilder:DK,PostgrestBuilder:FK,PostgrestError:OK}=kk;class Fk{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const t=parseInt(process.versions.node.split(".")[0]);return t>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const n=this.getWebSocketConstructor();return new n(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Ok="2.15.1",Uk=`realtime-js/${Ok}`,jk="1.0.0",Ow=1e4,zk=1e3,Hk=100;var Om;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Om||(Om={}));var Qr;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Qr||(Qr={}));var qo;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(qo||(qo={}));var Uw;(function(r){r.websocket="websocket"})(Uw||(Uw={}));var ud;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(ud||(ud={}));class Gk{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const i=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+i));o=o+i;const l=n.decode(e.slice(o,o+s));o=o+s;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class q2{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var $n;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})($n||($n={}));const lE=(r,e,t={})=>{var n;const i=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((s,o)=>(s[o]=Vk(o,r,e,i),s),{})},Vk=(r,e,t,n)=>{const i=e.find(a=>a.name===r),s=i?.type,o=t[r];return s&&!n.includes(s)?Q2(s,o):jw(o)},Q2=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return Kk(e,t)}switch(r){case $n.bool:return Wk(e);case $n.float4:case $n.float8:case $n.int2:case $n.int4:case $n.int8:case $n.numeric:case $n.oid:return Jk(e);case $n.json:case $n.jsonb:return Xk(e);case $n.timestamp:return Yk(e);case $n.abstime:case $n.date:case $n.daterange:case $n.int4range:case $n.int8range:case $n.money:case $n.reltime:case $n.text:case $n.time:case $n.timestamptz:case $n.timetz:case $n.tsrange:case $n.tstzrange:return jw(e);default:return jw(e)}},jw=r=>r,Wk=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Jk=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},Xk=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},Kk=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,n=r[t];if(r[0]==="{"&&n==="}"){let s;const o=r.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>Q2(e,a))}return r},Yk=r=>typeof r=="string"?r.replace(" ","T"):r,Z2=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Xx{constructor(e,t,n={},i=Ow){this.channel=e,this.event=t,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var cE;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(cE||(cE={}));class Um{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Um.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=Um.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Um.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,i){const s=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(s,(u,h)=>{o[u]||(l[u]=h)}),this.map(o,(u,h)=>{const p=s[u];if(p){const g=h.map(b=>b.presence_ref),y=p.map(b=>b.presence_ref),_=h.filter(b=>y.indexOf(b.presence_ref)<0),A=p.filter(b=>g.indexOf(b.presence_ref)<0);_.length>0&&(a[u]=_),A.length>0&&(l[u]=A)}else a[u]=h}),this.syncDiff(s,{joins:a,leaves:l},n,i)}static syncDiff(e,t,n,i){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var u;const h=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),h.length>0){const p=e[a].map(y=>y.presence_ref),g=h.filter(y=>p.indexOf(y.presence_ref)<0);e[a].unshift(...g)}n(a,h,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const h=l.map(p=>p.presence_ref);u=u.filter(p=>h.indexOf(p.presence_ref)<0),e[a]=u,i(a,u,l),u.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const i=e[n];return"metas"in i?t[n]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[n]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var uE;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(uE||(uE={}));var jm;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(jm||(jm={}));var _l;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(_l||(_l={}));class vA{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Qr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Xx(this,qo.join,this.params,this.timeout),this.rejoinTimer=new q2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Qr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Qr.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Qr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Qr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Qr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(qo.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Um(this),this.broadcastEndpointURL=Z2(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Qr.closed){const{config:{broadcast:s,presence:o,private:a}}=this.params,l=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(g=>g.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[jm.PRESENCE]&&this.bindings[jm.PRESENCE].length>0,h={},p={broadcast:s,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:l,private:a};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(g=>e?.(_l.CHANNEL_ERROR,g)),this._onClose(()=>e?.(_l.CLOSED)),this.updateJoinPayload(Object.assign({config:p},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:g})=>{var y;if(this.socket.setAuth(),g===void 0){e?.(_l.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,A=(y=_?.length)!==null&&y!==void 0?y:0,b=[];for(let w=0;w<A;w++){const C=_[w],{filter:{event:E,schema:R,table:L,filter:D}}=C,j=g&&g[w];if(j&&j.event===E&&j.schema===R&&j.table===L&&j.filter===D)b.push(Object.assign(Object.assign({},C),{id:j.id}));else{this.unsubscribe(),this.state=Qr.errored,e?.(_l.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(_l.SUBSCRIBED);return}}).receive("error",g=>{this.state=Qr.errored,e?.(_l.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e?.(_l.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===Qr.joined&&e===jm.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async send(e,t={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Qr.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(qo.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new Xx(this,qo.leave,{},e),n.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Qr.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const i=new AbortController,s=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),o}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Xx(this,e,t,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Hk){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:h}=qo;if(n&&[a,l,u,h].indexOf(o)>=0&&n!==this._joinRef())return;let g=this._onMessage(o,t,n);if(t&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(y=>{var _,A,b;return((_=y.filter)===null||_===void 0?void 0:_.event)==="*"||((b=(A=y.filter)===null||A===void 0?void 0:A.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(y=>y.callback(g,n)):(s=this.bindings[o])===null||s===void 0||s.filter(y=>{var _,A,b,w,C,E;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const R=y.id,L=(_=y.filter)===null||_===void 0?void 0:_.event;return R&&((A=t.ids)===null||A===void 0?void 0:A.includes(R))&&(L==="*"||L?.toLocaleLowerCase()===((b=t.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const R=(C=(w=y?.filter)===null||w===void 0?void 0:w.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return R==="*"||R===((E=t?.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof g=="object"&&"ids"in g){const _=g.data,{schema:A,table:b,commit_timestamp:w,type:C,errors:E}=_;g=Object.assign(Object.assign({},{schema:A,table:b,commit_timestamp:w,eventType:C,new:{},old:{},errors:E}),this._getPayloadRecords(_))}y.callback(g,n)})}_isClosed(){return this.state===Qr.closed}_isJoined(){return this.state===Qr.joined}_isJoining(){return this.state===Qr.joining}_isLeaving(){return this.state===Qr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:n};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&vA.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(qo.close,{},e)}_onError(e){this._on(qo.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Qr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=lE(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=lE(e.columns,e.old_record)),t}}const dE=()=>{},k0={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},qk=[1e3,2e3,5e3,1e4],Qk=1e4,Zk=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class $k{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ow,this.transport=null,this.heartbeatIntervalMs=k0.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=dE,this.ref=0,this.reconnectTimer=null,this.logger=dE,this.conn=null,this.sendBuffer=[],this.serializer=new Gk,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...o)=>gg(async()=>{const{default:a}=await Promise.resolve().then(()=>dp);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...o)=>s(...o)},!(!((n=t?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Uw.websocket}`,this.httpEndpoint=Z2(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Fk.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:jk}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Om.connecting:return ud.Connecting;case Om.open:return ud.Open;case Om.closing:return ud.Closing;default:return ud.Closed}}isConnected(){return this.connectionState()===ud.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===n);if(i)return i;{const s=new vA(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:n,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${n} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(zk,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},k0.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{t.topic==="phoenix"&&t.event==="phx_reply"&&this.heartbeatCallback(t.payload.status==="ok"?"ok":"error"),t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:s,ref:o}=t,a=o?`(${o})`:"",l=s.status||"";this.log("receive",`${l} ${n} ${i} ${a}`.trim(),s),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(i,s,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(qo.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${n}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([Zk],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(n=>{const i={access_token:t,version:Uk};t&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(qo.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new q2(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},k0.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,i,s,o,a,l,u;if(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(n=e?.timeout)!==null&&n!==void 0?n:Ow,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:k0.HEARTBEAT_INTERVAL,this.worker=(s=e?.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e?.accessToken)!==null&&o!==void 0?o:null,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(a=e?.reconnectAfterMs)!==null&&a!==void 0?a:(h=>qk[h-1]||Qk),this.encode=(l=e?.encode)!==null&&l!==void 0?l:((h,p)=>p(JSON.stringify(h))),this.decode=(u=e?.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class yA extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Zr(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class e3 extends yA{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class zw extends yA{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var t3=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(n.next(h))}catch(p){o(p)}}function l(h){try{u(n.throw(h))}catch(p){o(p)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const $2=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>gg(async()=>{const{default:n}=await Promise.resolve().then(()=>dp);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},n3=()=>t3(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield gg(()=>Promise.resolve().then(()=>dp),void 0)).Response:Response}),Hw=r=>{if(Array.isArray(r))return r.map(t=>Hw(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,n])=>{const i=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=Hw(n)}),e},r3=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)};var Gd=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(n.next(h))}catch(p){o(p)}}function l(h){try{u(n.throw(h))}catch(p){o(p)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const Kx=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),i3=(r,e,t)=>Gd(void 0,void 0,void 0,function*(){const n=yield n3();r instanceof n&&!t?.noResolveJson?r.json().then(i=>{const s=r.status||500,o=i?.statusCode||s+"";e(new e3(Kx(i),s,o))}).catch(i=>{e(new zw(Kx(i),i))}):e(new zw(Kx(r),r))}),s3=(r,e,t,n)=>{const i={method:r,headers:e?.headers||{}};return r==="GET"||!n?i:(r3(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(n)):i.body=n,e?.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t))};function vg(r,e,t,n,i,s){return Gd(this,void 0,void 0,function*(){return new Promise((o,a)=>{r(t,s3(e,n,i,s)).then(l=>{if(!l.ok)throw l;return n?.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>i3(l,a,n))})})}function oy(r,e,t,n){return Gd(this,void 0,void 0,function*(){return vg(r,"GET",e,t,n)})}function Ea(r,e,t,n,i){return Gd(this,void 0,void 0,function*(){return vg(r,"POST",e,n,i,t)})}function Gw(r,e,t,n,i){return Gd(this,void 0,void 0,function*(){return vg(r,"PUT",e,n,i,t)})}function o3(r,e,t,n){return Gd(this,void 0,void 0,function*(){return vg(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function eR(r,e,t,n,i){return Gd(this,void 0,void 0,function*(){return vg(r,"DELETE",e,n,i,t)})}var Zi=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(n.next(h))}catch(p){o(p)}}function l(h){try{u(n.throw(h))}catch(p){o(p)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const a3={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},hE={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class l3{constructor(e,t={},n,i){this.url=e,this.headers=t,this.bucketId=n,this.fetch=$2(i)}uploadOrUpdate(e,t,n,i){return Zi(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},hE),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i?.headers&&(a=Object.assign(Object.assign({},a),i.headers));const u=this._removeEmptyFolders(t),h=this._getFinalPath(u),p=yield(e=="PUT"?Gw:Ea)(this.fetch,`${this.url}/object/${h}`,s,Object.assign({headers:a},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:p.Id,fullPath:p.Key},error:null}}catch(s){if(Zr(s))return{data:null,error:s};throw s}})}upload(e,t,n){return Zi(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,i){return Zi(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:hE.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType);const p=yield Gw(this.fetch,a.toString(),l,{headers:h});return{data:{path:s,fullPath:p.Key},error:null}}catch(l){if(Zr(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return Zi(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);t?.upsert&&(i["x-upsert"]="true");const s=yield Ea(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new yA("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(Zr(n))return{data:null,error:n};throw n}})}update(e,t,n){return Zi(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return Zi(this,void 0,void 0,function*(){try{return{data:yield Ea(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Zr(i))return{data:null,error:i};throw i}})}copy(e,t,n){return Zi(this,void 0,void 0,function*(){try{return{data:{path:(yield Ea(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Zr(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,n){return Zi(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Ea(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(Zr(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,n){return Zi(this,void 0,void 0,function*(){try{const i=yield Ea(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(Zr(i))return{data:null,error:i};throw i}})}download(e,t){return Zi(this,void 0,void 0,function*(){const i=typeof t?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(t?.transform||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield oy(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Zr(a))return{data:null,error:a};throw a}})}info(e){return Zi(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield oy(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Hw(n),error:null}}catch(n){if(Zr(n))return{data:null,error:n};throw n}})}exists(e){return Zi(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield o3(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Zr(n)&&n instanceof zw){const i=n.originalError;if([400,404].includes(i?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),i=[],s=t?.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const a=typeof t?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(t?.transform||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${u}`)}}}remove(e){return Zi(this,void 0,void 0,function*(){try{return{data:yield eR(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Zr(t))return{data:null,error:t};throw t}})}list(e,t,n){return Zi(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},a3),t),{prefix:e||""});return{data:yield Ea(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(Zr(i))return{data:null,error:i};throw i}})}listV2(e,t){return Zi(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Ea(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},t),error:null}}catch(n){if(Zr(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const c3="2.11.0",u3={"X-Client-Info":`storage-js/${c3}`};var rf=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(n.next(h))}catch(p){o(p)}}function l(h){try{u(n.throw(h))}catch(p){o(p)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class d3{constructor(e,t={},n,i){const s=new URL(e);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href,this.headers=Object.assign(Object.assign({},u3),t),this.fetch=$2(n)}listBuckets(){return rf(this,void 0,void 0,function*(){try{return{data:yield oy(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Zr(e))return{data:null,error:e};throw e}})}getBucket(e){return rf(this,void 0,void 0,function*(){try{return{data:yield oy(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Zr(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return rf(this,void 0,void 0,function*(){try{return{data:yield Ea(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Zr(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return rf(this,void 0,void 0,function*(){try{return{data:yield Gw(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Zr(n))return{data:null,error:n};throw n}})}emptyBucket(e){return rf(this,void 0,void 0,function*(){try{return{data:yield Ea(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Zr(t))return{data:null,error:t};throw t}})}deleteBucket(e){return rf(this,void 0,void 0,function*(){try{return{data:yield eR(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Zr(t))return{data:null,error:t};throw t}})}}class h3 extends d3{constructor(e,t={},n,i){super(e,t,n,i)}from(e){return new l3(this.url,this.headers,e,this.fetch)}}const f3="2.55.0";let Nm="";typeof Deno<"u"?Nm="deno":typeof document<"u"?Nm="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Nm="react-native":Nm="node";const p3={"X-Client-Info":`supabase-js-${Nm}/${f3}`},m3={headers:p3},g3={schema:"public"},v3={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},y3={};var x3=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(n.next(h))}catch(p){o(p)}}function l(h){try{u(n.throw(h))}catch(p){o(p)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const _3=r=>{let e;return r?e=r:typeof fetch>"u"?e=V2:e=fetch,(...t)=>e(...t)},w3=()=>typeof Headers>"u"?W2:Headers,b3=(r,e,t)=>{const n=_3(t),i=w3();return(s,o)=>x3(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:r;let u=new i(o?.headers);return u.has("apikey")||u.set("apikey",r),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(s,Object.assign(Object.assign({},o),{headers:u}))})};var A3=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(n.next(h))}catch(p){o(p)}}function l(h){try{u(n.throw(h))}catch(p){o(p)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};function S3(r){return r.endsWith("/")?r:r+"/"}function E3(r,e){var t,n;const{db:i,auth:s,realtime:o,global:a}=r,{db:l,auth:u,realtime:h,global:p}=e,g={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},h),o),storage:{},global:Object.assign(Object.assign(Object.assign({},p),a),{headers:Object.assign(Object.assign({},(t=p?.headers)!==null&&t!==void 0?t:{}),(n=a?.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>A3(this,void 0,void 0,function*(){return""})};return r.accessToken?g.accessToken=r.accessToken:delete g.accessToken,g}const tR="2.71.1",kf=30*1e3,Vw=3,Yx=Vw*kf,M3="http://localhost:9999",C3="supabase.auth.token",T3={"X-Client-Info":`gotrue-js/${tR}`},Ww="X-Supabase-Api-Version",nR={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},R3=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,P3=600*1e3;class xA extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function on(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class I3 extends xA{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function L3(r){return on(r)&&r.name==="AuthApiError"}class rR extends xA{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class eu extends xA{constructor(e,t,n,i){super(e,n,i),this.name=t,this.status=n}}class Lc extends eu{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function N3(r){return on(r)&&r.name==="AuthSessionMissingError"}class D0 extends eu{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class F0 extends eu{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class O0 extends eu{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function B3(r){return on(r)&&r.name==="AuthImplicitGrantRedirectError"}class fE extends eu{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Jw extends eu{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function qx(r){return on(r)&&r.name==="AuthRetryableFetchError"}class pE extends eu{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Xw extends eu{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ay="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),mE=` 	
\r=`.split(""),k3=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<mE.length;e+=1)r[mE[e].charCodeAt(0)]=-2;for(let e=0;e<ay.length;e+=1)r[ay[e].charCodeAt(0)]=e;return r})();function gE(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(ay[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(ay[n]),e.queuedBits-=6}}function iR(r,e,t){const n=k3[r];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function vE(r){const e=[],t=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{O3(o,n,t)};for(let o=0;o<r.length;o+=1)iR(r.charCodeAt(o),i,s);return e.join("")}function D3(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function F3(r,e){for(let t=0;t<r.length;t+=1){let n=r.charCodeAt(t);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(r.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}D3(n,e)}}function O3(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let n=1;n<6;n+=1)if((r>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function U3(r){const e=[],t={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<r.length;i+=1)iR(r.charCodeAt(i),t,n);return new Uint8Array(e)}function j3(r){const e=[];return F3(r,t=>e.push(t)),new Uint8Array(e)}function z3(r){const e=[],t={queue:0,queuedBits:0},n=i=>{e.push(i)};return r.forEach(i=>gE(i,t,n)),gE(null,t,n),e.join("")}function H3(r){return Math.round(Date.now()/1e3)+r}function G3(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const Ko=()=>typeof window<"u"&&typeof document<"u",Vu={tested:!1,writable:!1},sR=()=>{if(!Ko())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Vu.tested)return Vu.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Vu.tested=!0,Vu.writable=!0}catch{Vu.tested=!0,Vu.writable=!1}return Vu.writable};function V3(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return t.searchParams.forEach((n,i)=>{e[i]=n}),e}const oR=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>gg(async()=>{const{default:n}=await Promise.resolve().then(()=>dp);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},W3=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Df=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},Wu=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},bc=async(r,e)=>{await r.removeItem(e)};class Ey{constructor(){this.promise=new Ey.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Ey.promiseConstructor=Promise;function Qx(r){const e=r.split(".");if(e.length!==3)throw new Xw("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!R3.test(e[n]))throw new Xw("JWT not in base64url format");return{header:JSON.parse(vE(e[0])),payload:JSON.parse(vE(e[1])),signature:U3(e[2]),raw:{header:e[0],payload:e[1]}}}async function J3(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function X3(r,e){return new Promise((n,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await r(s);if(!e(s,null,o)){n(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function K3(r){return("0"+r.toString(16)).substr(-2)}function Y3(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,K3).join("")}async function q3(r){const t=new TextEncoder().encode(r),n=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(n);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function Q3(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await q3(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function sf(r,e,t=!1){const n=Y3();let i=n;t&&(i+="/PASSWORD_RECOVERY"),await Df(r,`${e}-code-verifier`,i);const s=await Q3(n);return[s,n===s?"plain":"s256"]}const Z3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function $3(r){const e=r.headers.get(Ww);if(!e||!e.match(Z3))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function eD(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function tD(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const nD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function of(r){if(!nD.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Zx(){const r={};return new Proxy(r,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const n=t.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function yE(r){return JSON.parse(JSON.stringify(r))}var rD=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const id=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),iD=[502,503,504];async function xE(r){var e;if(!W3(r))throw new Jw(id(r),0);if(iD.includes(r.status))throw new Jw(id(r),r.status);let t;try{t=await r.json()}catch(s){throw new rR(id(s),s)}let n;const i=$3(r);if(i&&i.getTime()>=nR["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new pE(id(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Lc}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new pE(id(t),r.status,t.weak_password.reasons);throw new I3(id(t),r.status||500,n)}const sD=(r,e,t,n)=>{const i={method:r,headers:e?.headers||{}};return r==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),t))};async function wn(r,e,t,n){var i;const s=Object.assign({},n?.headers);s[Ww]||(s[Ww]=nR["2024-01-01"].name),n?.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const o=(i=n?.query)!==null&&i!==void 0?i:{};n?.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await oD(r,e,t+a,{headers:s,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(l):{data:Object.assign({},l),error:null}}async function oD(r,e,t,n,i,s){const o=sD(e,n,i,s);let a;try{a=await r(t,Object.assign({},o))}catch(l){throw console.error(l),new Jw(id(l),0)}if(a.ok||await xE(a),n?.noResolveJson)return a;try{return await a.json()}catch(l){await xE(l)}}function xl(r){var e;let t=null;uD(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=H3(r.expires_in)));const n=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:n},error:null}}function _E(r){const e=xl(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=r.weak_password),e}function kc(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function aD(r){return{data:r,error:null}}function lD(r){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:s}=r,o=rD(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function cD(r){return r}function uD(r){return r.access_token&&r.refresh_token&&r.expires_in}const $x=["global","local","others"];var dD=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class hD{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=oR(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=$x[0]){if($x.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${$x.join(", ")}`);try{return await wn(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(on(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await wn(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:kc})}catch(n){if(on(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=dD(e,["options"]),i=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(i.new_email=n?.newEmail,delete i.newEmail),await wn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:lD,redirectTo:t?.redirectTo})}catch(t){if(on(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await wn(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:kc})}catch(t){if(on(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},h=await wn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:cD});if(h.error)throw h.error;const p=await h.json(),g=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(l=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return y.length>0&&(y.forEach(_=>{const A=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(_.split(";")[1].split("=")[1]);u[`${b}Page`]=A}),u.total=parseInt(g)),{data:Object.assign(Object.assign({},p),u),error:null}}catch(u){if(on(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){of(e);try{return await wn(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:kc})}catch(t){if(on(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){of(e);try{return await wn(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:kc})}catch(n){if(on(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){of(e);try{return await wn(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:kc})}catch(n){if(on(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){of(e.userId);try{const{data:t,error:n}=await wn(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:n}}catch(t){if(on(t))return{data:null,error:t};throw t}}async _deleteFactor(e){of(e.userId),of(e.id);try{return{data:await wn(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(on(t))return{data:null,error:t};throw t}}}function wE(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function fD(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const af={debug:!!(globalThis&&sR()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class aR extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class pD extends aR{}async function mD(r,e,t){af.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),af.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){af.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,i.name);try{return await t()}finally{af.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,i.name)}}else{if(e===0)throw af.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new pD(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(af.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}fD();const gD={url:M3,storageKey:C3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:T3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function bE(r,e,t){return await t()}const lf={};class $m{constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=$m.nextInstanceID,$m.nextInstanceID+=1,this.instanceID>0&&Ko()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},gD),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new hD({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=oR(i.fetch),this.lock=i.lock||bE,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Ko()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=mD:this.lock=bE,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:sR()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=wE(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=wE(this.memoryStorage)),Ko()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=lf[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){lf[this.storageKey]=Object.assign(Object.assign({},lf[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=lf[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){lf[this.storageKey]=Object.assign(Object.assign({},lf[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${tR}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=V3(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),Ko()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:s}=await this._getSessionFromURL(t,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),B3(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return on(t)?{error:t}:{error:new rR("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,i;try{const s=await wn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:xl}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(on(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,n,i;try{let s;if("email"in e){const{email:h,password:p,options:g}=e;let y=null,_=null;this.flowType==="pkce"&&([y,_]=await sf(this.storage,this.storageKey)),s=await wn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g?.emailRedirectTo,body:{email:h,password:p,data:(t=g?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:y,code_challenge_method:_},xform:xl})}else if("phone"in e){const{phone:h,password:p,options:g}=e;s=await wn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(n=g?.data)!==null&&n!==void 0?n:{},channel:(i=g?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:xl})}else throw new F0("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(on(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:o,options:a}=e;t=await wn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:_E})}else if("phone"in e){const{phone:s,password:o,options:a}=e;t=await wn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:_E})}else throw new F0("You must provide either an email or phone number and a password");const{data:n,error:i}=t;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new D0}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(t){if(on(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,n,i,s,o,a,l,u,h,p,g,y;let _,A;if("message"in e)_=e.message,A=e.signature;else{const{chain:b,wallet:w,statement:C,options:E}=e;let R;if(Ko())if(typeof w=="object")R=w;else{const D=window;if("solana"in D&&typeof D.solana=="object"&&("signIn"in D.solana&&typeof D.solana.signIn=="function"||"signMessage"in D.solana&&typeof D.solana.signMessage=="function"))R=D.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!E?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=w}const L=new URL((t=E?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in R&&R.signIn){const D=await R.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E?.signInWithSolana),{version:"1",domain:L.host,uri:L.href}),C?{statement:C}:null));let j;if(Array.isArray(D)&&D[0]&&typeof D[0]=="object")j=D[0];else if(D&&typeof D=="object"&&"signedMessage"in D&&"signature"in D)j=D;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)_=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),A=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in R)||typeof R.signMessage!="function"||!("publicKey"in R)||typeof R!="object"||!R.publicKey||!("toBase58"in R.publicKey)||typeof R.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${L.host} wants you to sign in with your Solana account:`,R.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${L.href}`,`Issued At: ${(i=(n=E?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=E?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((o=E?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((a=E?.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((l=E?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((u=E?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((p=(h=E?.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||p===void 0)&&p.length?["Resources",...E.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const D=await R.signMessage(new TextEncoder().encode(_),"utf8");if(!D||!(D instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=D}}try{const{data:b,error:w}=await wn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:z3(A)},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:xl});if(w)throw w;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new D0}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:w})}catch(b){if(on(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(e){const t=await Wu(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(t??"").split("/");try{const{data:s,error:o}=await wn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:xl});if(await bc(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new D0}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(on(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:n,token:i,access_token:s,nonce:o}=e,a=await wn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:xl}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new D0}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(t){if(on(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await sf(this.storage,this.storageKey));const{error:p}=await wn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l?.data)!==null&&t!==void 0?t:{},create_user:(n=l?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:h}=await wn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l?.data)!==null&&i!==void 0?i:{},create_user:(s=l?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(o=l?.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u?.message_id},error:h}}throw new F0("You must provide either an email or phone number.")}catch(a){if(on(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,n;try{let i,s;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await wn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:xl});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(on(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,n,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await sf(this.storage,this.storageKey)),await wn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:aD})}catch(s){if(on(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Lc;const{error:i}=await wn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(on(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:s}=e,{error:o}=await wn(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:i,options:s}=e,{data:o,error:a}=await wn(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return{data:{user:null,session:null,messageId:o?.message_id},error:a}}throw new F0("You must provide either an email or phone number and a type")}catch(t){if(on(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Wu(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Yx:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await Wu(this.userStorage,this.storageKey+"-user");o?.user?e.user=o.user:e.user=Zx()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,h)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,h))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await wn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:kc}):await this._useSession(async t=>{var n,i,s;const{data:o,error:a}=t;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Lc}:await wn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:kc})})}catch(t){if(on(t))return N3(t)&&(await this._removeSession(),await bc(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:i,error:s}=n;if(s)throw s;if(!i.session)throw new Lc;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await sf(this.storage,this.storageKey));const{data:u,error:h}=await wn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:kc});if(h)throw h;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(on(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Lc;const t=Date.now()/1e3;let n=t,i=!0,s=null;const{payload:o}=Qx(e.access_token);if(o.exp&&(n=o.exp,i=n<=t),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(on(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!e?.refresh_token)throw new Lc;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(on(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Ko())throw new O0("No browser detected.");if(e.error||e.error_description||e.error_code)throw new O0(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new fE("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new O0("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new fE("No code detected.");const{data:C,error:E}=await this._exchangeCodeForSession(e.code);if(E)throw E;const R=new URL(window.location.href);return R.searchParams.delete("code"),window.history.replaceState(window.history.state,"",R.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!s||!a||!o||!u)throw new O0("No session defined in URL");const h=Math.round(Date.now()/1e3),p=parseInt(a);let g=h+p;l&&(g=parseInt(l));const y=g-h;y*1e3<=kf&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${p}s`);const _=g-p;h-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,g,h):h-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,g,h);const{data:A,error:b}=await this._getUser(s);if(b)throw b;const w={provider_token:n,provider_refresh_token:i,access_token:s,expires_in:p,expires_at:g,refresh_token:o,token_type:u,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(n){if(on(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Wu(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:i,error:s}=t;if(s)return{error:s};const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(L3(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await bc(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=G3(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,i;try{const{data:{session:s},error:o}=t;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await sf(this.storage,this.storageKey,!0));try{return await wn(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(on(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(on(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:i}=await this._useSession(async s=>{var o,a,l,u,h;const{data:p,error:g}=s;if(g)throw g;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await wn(this.fetch,"GET",y,{headers:this.headers,jwt:(h=(u=p.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return Ko()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n?.url),{data:{provider:e.provider,url:n?.url},error:null}}catch(n){if(on(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,i;const{data:s,error:o}=t;if(o)throw o;return await wn(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(on(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await X3(async i=>(i>0&&await J3(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await wn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:xl})),(i,s)=>{const o=200*Math.pow(2,i);return s&&qx(s)&&Date.now()+o-n<kf})}catch(n){if(this._debug(t,"error",n),on(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Ko()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await Wu(this.storage,this.storageKey);if(i&&this.userStorage){let o=await Wu(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Df(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o?.user)!==null&&e!==void 0?e:Zx()}else if(i&&!i.user&&!i.user){const o=await Wu(this.storage,this.storageKey+"-user");o&&o?.user?(i.user=o.user,await bc(this.storage,this.storageKey+"-user"),await Df(this.storage,this.storageKey,i)):i.user=Zx()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const s=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Yx;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${Yx}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),qx(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&o?.user?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Lc;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Ey;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new Lc;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),on(s)){const o={session:null,error:s};return qx(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&t.user&&await Df(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const s=yE(i);await Df(this.storage,this.storageKey,s)}else{const i=yE(t);await Df(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await bc(this.storage,this.storageKey),await bc(this.storage,this.storageKey+"-code-verifier"),await bc(this.storage,this.storageKey+"-user"),this.userStorage&&await bc(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ko()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),kf);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/kf);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${kf}ms, refresh threshold is ${Vw} ticks`),i<=Vw&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof aR)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ko()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const i=[`provider=${encodeURIComponent(t)}`];if(n?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,o]=await sf(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(n?.queryParams){const s=new URLSearchParams(n.queryParams);i.push(s.toString())}return n?.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:i,error:s}=t;return s?{data:null,error:s}:await wn(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(on(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,i;const{data:s,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await wn(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((i=l?.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(on(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:s}=t;if(s)return{data:null,error:s};const{data:o,error:a}=await wn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(on(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:s}=t;return s?{data:null,error:s}:await wn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(on(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=e?.factors||[],i=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Qx(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(t=i.user.factors)===null||t===void 0?void 0:t.filter(p=>p.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const h=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(a=>a.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+P3>i)return n;const{data:s,error:o}=await wn(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,n=s.keys.find(a=>a.kid===e),!n)?null:n}async getClaims(e,t={}){try{let n=e;if(!n){const{data:y,error:_}=await this.getSession();if(_||!y.session)return{data:null,error:_};n=y.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=Qx(n);t?.allowExpired||eD(s.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!u){const{error:y}=await this.getUser(n);if(y)throw y;return{data:{claims:s,header:i,signature:o},error:null}}const h=tD(i.alg),p=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,p,o,j3(`${a}.${l}`)))throw new Xw("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(n){if(on(n))return{data:null,error:n};throw n}}}$m.nextInstanceID=0;const vD=$m;class yD extends vD{constructor(e){super(e)}}var xD=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(n.next(h))}catch(p){o(p)}}function l(h){try{u(n.throw(h))}catch(p){o(p)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class _D{constructor(e,t,n){var i,s,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=S3(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,h={db:g3,realtime:y3,auth:Object.assign(Object.assign({},v3),{storageKey:u}),global:m3},p=E3(n??{},h);this.storageKey=(i=p.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=p.global.headers)!==null&&s!==void 0?s:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(g,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=p.auth)!==null&&o!==void 0?o:{},this.headers,p.global.fetch),this.fetch=b3(t,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new Dk(new URL("rest/v1",l).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new h3(this.storageUrl.href,this.headers,this.fetch,n?.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new Sk(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return xD(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,storageKey:s,flowType:o,lock:a,debug:l},u,h){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new yD({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),u),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,flowType:o,lock:a,debug:l,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new $k(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n?.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const wD=(r,e,t)=>new _D(r,e,t);function bD(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const e=r.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}bD()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const AD="https://plqvyrdvuinsmiudmwek.supabase.co",SD="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBscXZ5cmR2dWluc21pdWRtd2VrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyNDcxNTksImV4cCI6MjA3MDgyMzE1OX0.Zxztp5OGeAkHD687e17QJ_FiMGs9iROmkHxeW936o0o",dt=wD(AD,SD),U0="/Edwin_portfolio/",Kw=U0.endsWith("/")&&U0!=="/"?U0.slice(0,-1):U0;function My(r=""){const e=r.startsWith("/")?r:`/${r}`;return Kw==="/"?e:`${Kw}${e}`}const AE=Kw,ED=[{to:"/blog",label:"Home",end:!0},{to:"/blog/about",label:"About"},{to:"/blog/contact",label:"Contact"},{to:"/",label:"Portfolio"}];function MD({accent:r}){const e=kl(),[t,n]=F.useState("Login"),[i,s]=F.useState(!1),[o,a]=F.useState(""),[l,u]=F.useState(!1),[h,p]=F.useState(""),[g,y]=F.useState(null),_=`${window.location.origin}${My("/blog")}`;F.useEffect(()=>{dt.auth.getSession().then(({data:E})=>{y(E.session),n(E.session?"Logout":"Login")});const{data:C}=dt.auth.onAuthStateChange((E,R)=>{y(R),n(R?"Logout":"Login")});return()=>C.subscription.unsubscribe()},[]);async function A(){try{u(!0),p("");const{error:C}=await dt.auth.signInWithOtp({email:o,options:{emailRedirectTo:_}});if(C)throw C;p("Check your email for a login link."),s(!1),a("")}catch(C){p(C.message||"Could not send login link. Please try again.")}finally{u(!1)}}async function b(){const{error:C}=await dt.auth.signOut();C&&console.error("Sign out error",C)}function w(){g?b():s(C=>!C)}return x.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-4 rounded-3xl border border-white/50 bg-white/70 px-6 py-4 shadow-lg backdrop-blur",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-12 h-12 rounded-xl shadow flex items-center justify-center",style:{background:r?.logoGradient||"linear-gradient(135deg, #0ea5e9 0%, rgba(56,189,248,.6) 60%, #6366f1 100%)",boxShadow:r?.logoShadow||"0 20px 45px -26px rgba(56,189,248,0.12)"},children:x.jsx("img",{src:sy,className:"w-9 h-9",alt:"logo"})}),x.jsxs("div",{children:[x.jsx("h1",{className:"text-lg font-semibold text-slate-900",children:"Edwin Pedraza"}),x.jsx("p",{className:"text-xs text-slate-500",children:"Product design | Engineering | Notes"})]})]}),x.jsxs("nav",{className:"flex items-center gap-4 text-sm font-medium text-slate-700",children:[ED.map(({to:C,label:E,end:R})=>x.jsx(vk,{to:C,end:R,className:({isActive:L})=>`rounded-full px-3 py-1 transition ${L?"bg-slate-900 text-white shadow":"hover:text-slate-900"}`,children:E},C)),g&&x.jsx("button",{onClick:()=>e("/blog/create"),className:"rounded-full bg-sky-500 px-3 py-1 text-white shadow hover:bg-sky-400",children:"New post"})]}),x.jsxs("div",{className:"relative flex items-center gap-3",children:[x.jsx("button",{onClick:w,className:"rounded-full border border-white/50 bg-white/60 px-4 py-2 text-sm font-semibold text-slate-700 backdrop-blur hover:bg-white/80",children:t}),i&&x.jsxs("div",{className:"absolute right-0 top-12 w-72 rounded-2xl border border-white/50 bg-white/70 p-4 shadow-xl backdrop-blur",children:[x.jsx("div",{className:"text-sm font-medium text-slate-700",children:"Sign in with your email"}),x.jsx("input",{type:"email",value:o,onChange:C=>a(C.target.value),placeholder:"you@example.com",className:"mt-3 w-full rounded-xl border border-white/60 bg-white/60 px-3 py-2 text-sm backdrop-blur focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),x.jsx("button",{disabled:l||!o,onClick:A,className:"mt-3 w-full rounded-xl bg-sky-500 px-3 py-2 text-sm font-semibold text-white shadow hover:bg-sky-400 disabled:bg-sky-400/50",children:l?"Sending...":"Send link"}),h&&x.jsx("div",{className:"mt-2 text-xs text-slate-500",children:h})]})]})]})}var e_={exports:{}},t_,SE;function CD(){if(SE)return t_;SE=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return t_=r,t_}var n_,EE;function TD(){if(EE)return n_;EE=1;var r=CD();function e(){}function t(){}return t.resetWarningCache=e,n_=function(){function n(o,a,l,u,h,p){if(p!==r){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}n.isRequired=n;function i(){return n}var s={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},n_}var ME;function _A(){return ME||(ME=1,e_.exports=TD()()),e_.exports}var RD=_A();const Ve=lp(RD);function wA({blogSettings:r}){const e=r?.contactLinks||[];return x.jsx("footer",{className:"rounded-3xl border border-slate-200 bg-white px-6 py-6 text-sm text-slate-500 shadow-sm",children:x.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[x.jsxs("div",{children:[x.jsx("div",{className:"text-slate-700 font-semibold",children:r?.authorName||"Edwin Pedraza"}),x.jsx("div",{children:r?.contactLocation||"Based in Australia. Working worldwide."})]}),x.jsx("div",{className:"flex flex-wrap gap-4",children:e.map((t,n)=>{const i=(t?.label||"").trim(),s=i.toLowerCase()==="portfolio"?"/":t?.url||"#",o=/^https?:\/\//i.test(s),a=o?s:My(s);return x.jsx("a",{href:a,...o?{target:"_blank",rel:"noreferrer"}:{},className:"text-slate-500 hover:text-sky-500",children:i||"Link"},n)})}),x.jsxs("div",{className:"text-xs text-slate-400",children:[" ",new Date().getFullYear()," Edwin Pedraza. All rights reserved."]})]})})}wA.propTypes={blogSettings:Ve.shape({authorName:Ve.string,contactLocation:Ve.string,contactLinks:Ve.arrayOf(Ve.shape({label:Ve.string,url:Ve.string}))})};async function lR({orderBy:r="published_at",ascending:e=!1}={}){const{data:t,error:n}=await dt.from("post").select("*").order(r,{ascending:e});if(n)throw n;return t||[]}async function PD(r){const{data:e,error:t}=await dt.from("post").insert(r).select("id").single();if(t)throw t;return e}async function ID(r,e){const{data:t,error:n}=await dt.from("post").update(e).eq("id",r).select("id");if(n)throw n;if(!t||t.length===0)throw new Error("No rows updated (check permissions or ID)");return t[0]}async function LD(r){const{error:e}=await dt.from("post").delete().eq("id",r);if(e)throw e}const ji="#38bdf8",cR=/^#?([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,fn=Object.freeze({base:ji,button:"",logo:"",lightShell:"#f1f5f9",darkShell:"#0f172a",heroOverlay:"#0f172a",heroCard:"#0f172a",heroChip:"#0ea5e9"}),Dn=Object.freeze({bannerUrl:"",bannerHeading:"Edwin Pedraza - Blog",bannerSubheading:"Insights & updates on design, engineering and strategy.",authorName:"Edwin Pedraza",authorTitle:"Author",authorBio:"Thoughts on web, data and product. Tutorials, notes and experiments.",authorAvatarUrl:"",categoryStrategy:"tag",aboutTitle:"About this blog",aboutContent:"I share detailed write-ups on front-end craft, system design, and the lessons I learn while building products.",aboutImageUrl:"",aboutLargeText:!0,aboutAccentBackground:!1,aboutEmphasis:[],contactHeadline:"Let's build something great together.",contactEmail:"hello@example.com",contactLocation:"Based in Australia. Working worldwide.",contactLinks:[{label:"Portfolio",url:"/"},{label:"LinkedIn",url:"https://linkedin.com/in/edwinpedraza"}],deskLabels:[{mesh:"plane004_1",label:"Left monitor"},{mesh:"plane002_1",label:"Center monitor"},{mesh:"plane006_1",label:"Right monitor"}]});function kn(r,e=ji){if(!r||typeof r!="string")return e;let t=r.trim();if(!cR.test(t))return e;if(t.startsWith("#")||(t=`#${t}`),t.length===4){const[,n,i,s]=t;t=`#${n}${n}${i}${i}${s}${s}`}return t.toLowerCase()}function Go(r){return!r||typeof r!="string"?!1:cR.test(r.trim())}function $o(r=fn){const e=kn(r?.base??ji,ji),t=r?.button?kn(r.button,e):"",n=r?.logo?kn(r.logo,e):"",i=kn(r?.lightShell??fn.lightShell,fn.lightShell),s=kn(r?.darkShell??fn.darkShell,fn.darkShell),o=kn(r?.heroOverlay??fn.heroOverlay,fn.heroOverlay),a=kn(r?.heroCard??o,o),l=kn(r?.heroChip??e,e);return{base:e,button:t,logo:n,lightShell:i,darkShell:s,heroOverlay:o,heroCard:a,heroChip:l}}function ND(r){return Array.isArray(r)?r.map(e=>({label:String(e?.label??"").trim(),url:String(e?.url??"").trim()})).filter(e=>e.label&&e.url):Dn.contactLinks}function BD(r){if(!Array.isArray(r))return Dn.deskLabels;const e=r.map(i=>({mesh:String(i?.mesh??"").trim(),label:String(i?.label??"").trim()})).filter(i=>i.mesh&&i.label),t=new Set,n=[];for(const i of e){const s=i.mesh.toLowerCase();t.has(s)||(t.add(s),n.push(i))}return n}function Pa(r=Dn){return{bannerUrl:r?.bannerUrl?String(r.bannerUrl).trim():"",bannerHeading:r?.bannerHeading?String(r.bannerHeading).trim():Dn.bannerHeading,bannerSubheading:r?.bannerSubheading?String(r.bannerSubheading).trim():Dn.bannerSubheading,authorName:r?.authorName?String(r.authorName).trim():Dn.authorName,authorTitle:r?.authorTitle?String(r.authorTitle).trim():Dn.authorTitle,authorBio:r?.authorBio?String(r.authorBio).trim():Dn.authorBio,authorAvatarUrl:r?.authorAvatarUrl?String(r.authorAvatarUrl).trim():"",categoryStrategy:r?.categoryStrategy==="title"?"title":"tag",aboutTitle:r?.aboutTitle?String(r.aboutTitle).trim():Dn.aboutTitle,aboutContent:r?.aboutContent?String(r.aboutContent).trim():Dn.aboutContent,aboutImageUrl:r?.aboutImageUrl?String(r.aboutImageUrl).trim():"",aboutLargeText:!!r?.aboutLargeText,aboutAccentBackground:!!r?.aboutAccentBackground,aboutEmphasis:Array.isArray(r?.aboutEmphasis)?r.aboutEmphasis.map(t=>String(t).trim()).filter(Boolean):typeof r?.aboutEmphasis=="string"?String(r.aboutEmphasis).split(",").map(t=>t.trim()).filter(Boolean):[],contactHeadline:r?.contactHeadline?String(r.contactHeadline).trim():Dn.contactHeadline,contactEmail:r?.contactEmail?String(r.contactEmail).trim():Dn.contactEmail,contactLocation:r?.contactLocation?String(r.contactLocation).trim():Dn.contactLocation,contactLinks:ND(r?.contactLinks),deskLabels:BD(r?.deskLabels)}}function uR(r){if(!r)return{theme:fn,blog:Dn};if(typeof r=="string"){const e=r.trim();if(!e)return{theme:fn,blog:Dn};try{const t=JSON.parse(e);if(t&&(t.theme||t.blog))return{theme:$o(t.theme||fn),blog:Pa(t.blog||Dn)};if(t&&t.base)return{theme:$o(t),blog:Dn}}catch{return{theme:fn,blog:Dn}}}if(typeof r=="object"){if(r.theme||r.blog)return{theme:$o(r.theme||fn),blog:Pa(r.blog||Dn)};if(r.base)return{theme:$o(r),blog:Dn}}return{theme:fn,blog:Dn}}function CE({theme:r,blog:e}){return JSON.stringify({theme:$o(r),blog:Pa(e)})}function Ia(r){const e=kn(r),t=/^#?([0-9a-fA-F]{6})$/.exec(e);if(!t)return null;const n=parseInt(t[1],16);return{r:n>>16&255,g:n>>8&255,b:n&255}}function kD({r,g:e,b:t}){const n=[r,e,t].map(i=>{const s=i/255;return s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4)});return .2126*n[0]+.7152*n[1]+.0722*n[2]}function $f(r,{light:e="#f8fafc",dark:t="#0f172a"}={}){const n=Ia(r);return n?kD(n)>.5?t:e:t}function Rn({r,g:e,b:t},n=1){return`rgba(${r}, ${e}, ${t}, ${n})`}function dR(r,e="light"){const t=$o(r),n={r:56,g:189,b:248},i=t.base,s=t.button||i,o=t.logo||i,a=Ia(i)||n,l=Ia(s)||a,u=Ia(o)||a,h=$f(i),p=$f(s),g=Rn(a,e==="light"?.18:.3),y=Rn(a,e==="light"?.08:.18),_=Rn(a,e==="light"?.35:.45),A=e==="light"?`0 22px 45px -28px ${Rn(a,.18)}`:`0 26px 55px -30px ${Rn(a,.28)}`,b=e==="light"?`linear-gradient(135deg, ${Rn(u,1)} 0%, ${Rn(a,.6)} 60%, ${Rn(l,1)} 100%)`:`linear-gradient(135deg, ${Rn(u,1)} 0%, ${Rn(a,.55)} 55%, ${Rn(l,1)} 100%)`,w=e==="light"?`0 20px 45px -26px ${Rn(a,.12)}`:`0 22px 55px -32px ${Rn(a,.18)}`;return{base:i,button:s,logo:o,lightShell:t.lightShell,darkShell:t.darkShell,heroOverlay:t.heroOverlay,heroCard:t.heroCard,heroChip:t.heroChip,baseContrast:h,buttonContrast:p,soft:g,softer:y,border:_,cardGlow:A,logoGradient:b,logoShadow:w,cssVars:{"--admin-accent-base":i,"--admin-accent-base-contrast":h,"--admin-accent-button":s,"--admin-accent-button-contrast":p,"--admin-accent-soft":g,"--admin-accent-softer":y,"--admin-shell-light":t.lightShell,"--admin-shell-dark":t.darkShell,"--admin-hero-overlay":t.heroOverlay,"--admin-hero-card":t.heroCard,"--admin-hero-chip":t.heroChip}}}function hR({blogSettings:r,loading:e,accent:t}){const n=r?.bannerUrl||"",i=r?.bannerHeading||"Edwin Pedraza - Blog",s=r?.bannerSubheading||"Insights and updates on building useful products.",o=t?.base||"#0ea5e9",a=$f(o);return x.jsxs("div",{className:"relative w-full overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-sm",style:n?void 0:{background:`linear-gradient(135deg, rgba(15,23,42,0.85) 0%, ${o}55 100%)`},children:[n&&x.jsx("img",{src:n,alt:"Blog banner",className:"h-[220px] w-full object-cover md:h-[320px]",loading:e?"lazy":"eager"}),n&&x.jsx("div",{className:"absolute inset-0",style:{background:`linear-gradient(135deg, rgba(15, 23, 42, 0.65), ${o}33)`}}),x.jsxs("div",{className:"absolute bottom-6 left-8 right-8 text-white",children:[x.jsx("div",{className:"text-xs uppercase tracking-[0.3rem]",style:{color:a},children:r?.authorTitle||"Journal"}),x.jsx("h1",{className:"mt-2 text-3xl font-semibold md:text-4xl",children:i}),x.jsx("p",{className:"mt-2 max-w-2xl text-sm opacity-90 md:text-base",children:s})]})]})}hR.propTypes={blogSettings:Ve.shape({bannerUrl:Ve.string,bannerHeading:Ve.string,bannerSubheading:Ve.string,authorTitle:Ve.string}),loading:Ve.bool,accent:Ve.shape({base:Ve.string})};function DD(r){return!r||typeof r!="string"?[]:r.split(",").map(e=>e.trim()).filter(Boolean)}function FD(r,e=[]){if(!Array.isArray(r))return[];const t=new Set(e.map(i=>i.toLowerCase())),n=[];return r.forEach(i=>{const s=String(i||"").trim();if(!s)return;const o=s.toLowerCase();t.has(o)||(t.add(o),n.push(s))}),n}function Cy(r,e){const t=DD(r),n=FD(e,t);return[...t,...n]}function fR({posts:r=[]}){const e=kl();return r.length?x.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:r.map(t=>{const n=Cy(t.tag,t.tech_tags).slice(0,6);return x.jsxs("article",{onClick:()=>e("blog-detail/"+t.id),className:"flex h-full flex-col overflow-hidden rounded-2xl border border-white/60 bg-white/70 shadow-lg backdrop-blur transition hover:-translate-y-1 hover:shadow-xl",children:[t.cover_url&&x.jsx("img",{src:t.cover_url,alt:t.title,className:"h-44 w-full object-cover"}),x.jsxs("div",{className:"flex flex-1 flex-col gap-3 p-5",children:[n.length>0&&x.jsx("span",{className:"flex flex-wrap gap-1 text-[11px] font-semibold uppercase tracking-wider text-slate-600",children:n.map(i=>x.jsx("span",{className:"rounded-full bg-slate-900/5 px-2 py-0.5",children:i},`${t.id}-cat-${i}`))}),x.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:t.title}),t.excerpt&&x.jsx("p",{className:"text-sm text-slate-700 line-clamp-3",children:t.excerpt}),x.jsx("span",{className:"mt-auto text-xs text-slate-500",children:new Date(t.published_at||t.created_at).toLocaleDateString()})]})]},t.id)})}):null}fR.propTypes={posts:Ve.arrayOf(Ve.shape({id:Ve.oneOfType([Ve.number,Ve.string]),cover_url:Ve.string,title:Ve.string,tag:Ve.string,excerpt:Ve.string,tech_tags:Ve.arrayOf(Ve.string)}))};const OD={r:15,g:23,b:42};function pR(r={},e=ji){const t=r?.heroOverlay||e||ji,n=r?.heroCard||t,i=r?.heroChip||e||"#f1f5f9",s=Ia(t)||OD,o=Ia(n)||s,a=Ia(i)||o,l=`linear-gradient(118deg, ${Rn(s,.92)} 0%, ${Rn(s,.55)} 45%, transparent 100%)`,u=Rn(o,.82),h=Rn(o,.28),p=`0 40px 60px -35px ${Rn(o,.65)}`,g=Rn(a,.35),y=$f(i);return{overlay:l,cardBg:u,cardBorder:h,cardShadow:p,chipBg:g,chipText:y}}function mR({post:r,accent:e,themeColors:t}){const n=kl(),i=F.useMemo(()=>pR(t,e?.base),[t,e?.base]),s=F.useMemo(()=>Cy(r?.tag,r?.tech_tags),[r?.tag,r?.tech_tags]);return r?x.jsxs("article",{onClick:()=>n("blog-detail/"+r.id),className:"relative h-[280px] overflow-hidden rounded-3xl border border-white/60 bg-white/70 shadow-xl backdrop-blur transition hover:-translate-y-1 hover:shadow-2xl",children:[r.cover_url?x.jsxs(x.Fragment,{children:[x.jsx("img",{src:r.cover_url,alt:r.title,className:"absolute inset-0 h-full w-full object-cover"}),x.jsx("div",{className:"absolute inset-0",style:{backgroundImage:i.overlay}})]}):x.jsx("div",{className:"absolute inset-0",style:{backgroundImage:i.overlay}}),x.jsx("div",{className:"absolute bottom-6 left-6 right-6 text-white",children:x.jsxs("div",{className:"inline-flex w-full max-w-lg flex-col gap-3 rounded-3xl border px-5 py-4 text-white backdrop-blur",style:{backgroundColor:i.cardBg,borderColor:i.cardBorder,boxShadow:i.cardShadow},children:[s.length>0&&x.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(o=>x.jsx("span",{className:"rounded-full px-3 py-0.5 text-[10px] font-semibold uppercase tracking-[0.3em]",style:{backgroundColor:i.chipBg,color:i.chipText},children:o},`featured-tag-${o}`))}),x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-semibold leading-tight text-white md:text-3xl",children:r.title}),r.excerpt&&x.jsx("p",{className:"mt-2 hidden max-w-2xl text-sm text-white/85 md:block",children:r.excerpt})]})]})})]}):x.jsx("div",{className:"rounded-3xl border border-white/60 bg-white/70 p-10 text-center text-slate-500 shadow-lg backdrop-blur",children:"No posts yet. Publish one to light up this space."})}mR.propTypes={post:Ve.shape({id:Ve.oneOfType([Ve.number,Ve.string]),cover_url:Ve.string,title:Ve.string,tag:Ve.string,excerpt:Ve.string,tech_tags:Ve.arrayOf(Ve.string)}),themeColors:Ve.object,accent:Ve.shape({base:Ve.string})};const r_="General";function gR(r,e,t){const n=String(t||"").trim();if(!n)return;const i=n.toLowerCase();e.has(i)||(e.add(i),r.push(n))}function TE(r,e,t){const n=String(t||"");n.trim()&&n.split(",").forEach(i=>gR(r,e,i))}function Yw(r,e="tag"){if(!r)return[r_];if(e==="title"){const i=r?.title?r.title.split(" ")[0]:"";return i?[i]:[r_]}const t=[],n=new Set;return Array.isArray(r?.tech_tags)&&r.tech_tags.forEach(i=>{typeof i=="string"&&i.includes(",")?TE(t,n,i):gR(t,n,i)}),typeof r?.tag=="string"&&r.tag.trim()&&TE(t,n,r.tag),t.length?t:[r_]}function vR({posts:r=[],onSelectCategory:e,activeCategory:t,strategy:n="tag",blogSettings:i}){const s=F.useMemo(()=>{const l=new Set;return r.forEach(u=>{Yw(u,n).forEach(h=>l.add(h))}),Array.from(l)},[r,n]),o=s.length?s:["General"],a=t||o[0];return x.jsxs("aside",{className:"space-y-6",children:[x.jsxs("div",{className:"rounded-2xl border border-white/60 bg-white/70 p-6 shadow-lg backdrop-blur",children:[x.jsxs("div",{className:"flex items-center gap-4",children:[i?.authorAvatarUrl?x.jsx("img",{src:i.authorAvatarUrl,alt:i.authorName,className:"h-14 w-14 rounded-full object-cover"}):x.jsx("div",{className:"h-14 w-14 rounded-full bg-slate-200"}),x.jsxs("div",{children:[x.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:i?.authorTitle||"Author"}),x.jsx("div",{className:"text-lg font-semibold text-slate-900",children:i?.authorName||"Edwin Pedraza"})]})]}),x.jsx("p",{className:"mt-4 text-sm text-slate-600 leading-relaxed",children:i?.authorBio||"Thoughts on web, data and product. Tutorials, notes and experiments."})]}),x.jsxs("div",{className:"rounded-2xl border border-white/60 bg-white/70 p-6 shadow-lg backdrop-blur",children:[x.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Categories"}),x.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:o.map(l=>{const u=a===l;return x.jsx("button",{type:"button",onClick:()=>e?.(l),className:`inline-flex items-center rounded-full px-4 py-1.5 text-[11px] font-semibold uppercase tracking-wide transition ${u?"bg-slate-900 text-white shadow":"bg-slate-900/5 text-slate-700 hover:bg-slate-900/10"}`,children:l},`sidebar-cat-${l}`)})})]})]})}vR.propTypes={posts:Ve.arrayOf(Ve.object),onSelectCategory:Ve.func,activeCategory:Ve.string,strategy:Ve.oneOf(["tag","title"]),blogSettings:Ve.shape({authorAvatarUrl:Ve.string,authorName:Ve.string,authorTitle:Ve.string,authorBio:Ve.string})};function yR({blogSettings:r,loading:e,accent:t,themeColors:n}){const[i,s]=F.useState([]),[o,a]=F.useState([]),[l,u]=F.useState("All"),[h,p]=F.useState(null),g=kl(),y=r?.categoryStrategy||"tag";F.useEffect(()=>{dt.auth.getSession().then(({data:C})=>p(C.session)),_()},[]);async function _(){const C=await lR();s(C),a(C)}const A=F.useMemo(()=>{const C=new Set(["All"]);return i.forEach(E=>{Yw(E,y).forEach(R=>C.add(R))}),Array.from(C)},[i,y]);F.useEffect(()=>{a(l==="All"?i:i.filter(C=>Yw(C,y).includes(l)))},[l,i,y]);const b=F.useMemo(()=>o.length?o[0]:null,[o]),w=F.useMemo(()=>o.length?o.slice(1):[],[o]);return x.jsxs("div",{className:"space-y-10",children:[x.jsx(hR,{blogSettings:r,loading:e}),x.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[x.jsx("div",{className:"flex flex-wrap gap-2",children:A.map(C=>x.jsx("button",{onClick:()=>u(C),className:`rounded-full border px-4 py-1 text-sm transition ${C===l?"bg-slate-900 text-white border-slate-900 shadow":"border-white/60 text-slate-700 hover:border-white/70"}`,children:C},C))}),x.jsxs("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-[minmax(0,2fr)_minmax(0,1fr)]",children:[x.jsxs("div",{className:"space-y-8",children:[x.jsx(mR,{post:b,accent:t,themeColors:n}),x.jsx(fR,{posts:w})]}),x.jsx(vR,{posts:i,onSelectCategory:u,activeCategory:l,strategy:y,blogSettings:r})]})]}),h&&x.jsx("div",{className:"fixed bottom-6 right-6",children:x.jsx("button",{className:"rounded-full bg-sky-500 px-5 py-3 text-sm font-semibold text-white shadow-lg hover:bg-sky-400",onClick:()=>g("/blog/create"),children:"New post"})})]})}yR.propTypes={blogSettings:Ve.shape({categoryStrategy:Ve.oneOf(["tag","title"])}),loading:Ve.bool,accent:Ve.shape({base:Ve.string}),themeColors:Ve.object};function fd(r){return r?String(r).replace(/<script[\s\S]*?>[\s\S]*?<\/script>/gi,"").replace(/<style[\s\S]*?>[\s\S]*?<\/style>/gi,"").replace(/\son[a-z]+\s*=\s*"[^"]*"/gi,"").replace(/\son[a-z]+\s*=\s*'[^']*'/gi,"").replace(/\sjavascript:[^'"]*/gi,""):""}function UD(r,e=[],t="#0ea5e9"){if(!r||!Array.isArray(e)||e.length===0)return r;const n=new RegExp(`(${e.map(s=>s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|")})`,"gi");return String(r).split(n).map((s,o)=>e.some(a=>new RegExp(`^${a}$`,"i").test(s))?x.jsx("span",{style:{color:t},children:s},o):x.jsx("span",{children:s},o))}function xR({blogSettings:r,accent:e}){const t=r||{},n=t.aboutAccentBackground?{backgroundImage:`radial-gradient(60% 60% at -10% -10%, ${e?.softer} 0%, transparent 60%), radial-gradient(50% 50% at 110% 0%, ${e?.soft} 0%, transparent 60%)`}:{},i=t.aboutImageUrl||t.authorAvatarUrl||t.bannerUrl||"",o=/<\w+[\s\S]*>/i.test(t.aboutContent||"")?x.jsx("div",{className:`${t.aboutLargeText?"text-lg md:text-xl leading-relaxed":"leading-relaxed"} prose prose-lg prose-slate max-w-none text-slate-600 dark:prose-invert`,dangerouslySetInnerHTML:{__html:fd(t.aboutContent)}}):x.jsx("div",{className:"space-y-4 text-slate-600",children:(t.aboutContent||"Stories about building products, refining craft, and the lessons learned along the way.").split(`
`).filter(Boolean).map((a,l)=>x.jsx("p",{className:`${t.aboutLargeText?"text-lg md:text-xl leading-relaxed":"leading-relaxed"}`,children:UD(a,t.aboutEmphasis,e?.base)},`about-paragraph-${l}`))});return x.jsx("section",{className:"rounded-3xl border border-slate-200 bg-white shadow-md shadow-slate-900/5 overflow-hidden",children:x.jsxs("div",{className:"px-8 py-10 md:px-12",style:n,children:[x.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:t.aboutTitle||"About this blog"}),x.jsxs("div",{className:"mt-6 grid gap-12 lg:grid-cols-[1fr,280px] lg:items-start",children:[o,i&&x.jsx("div",{className:"justify-self-center lg:justify-self-end",children:x.jsxs("div",{className:"relative",children:[x.jsx("img",{src:i,alt:"About",className:"h-52 w-52 rounded-2xl object-cover shadow-xl ring-1 ring-slate-200"}),x.jsx("div",{className:"absolute -bottom-4 inset-x-0 rounded-2xl bg-white/90 px-3 py-2 text-center text-xs font-medium text-slate-600 shadow-lg",children:t.authorAvatarUrl?t.authorName||"Author":"Life & Work"})]})})]})]})})}xR.propTypes={blogSettings:Ve.shape({aboutTitle:Ve.string,aboutContent:Ve.string,aboutImageUrl:Ve.string,aboutLargeText:Ve.bool,aboutAccentBackground:Ve.bool,aboutEmphasis:Ve.arrayOf(Ve.string),authorAvatarUrl:Ve.string,bannerUrl:Ve.string}),accent:Ve.object};const eg={_origin:"https://api.emailjs.com"},jD=(r,e="https://api.emailjs.com")=>{eg._userID=r,eg._origin=e},_R=(r,e,t)=>{if(!r)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class RE{constructor(e){this.status=e?e.status:0,this.text=e?e.responseText:"Network Error"}}const wR=(r,e,t={})=>new Promise((n,i)=>{const s=new XMLHttpRequest;s.addEventListener("load",({target:o})=>{const a=new RE(o);a.status===200||a.text==="OK"?n(a):i(a)}),s.addEventListener("error",({target:o})=>{i(new RE(o))}),s.open("POST",eg._origin+r,!0),Object.keys(t).forEach(o=>{s.setRequestHeader(o,t[o])}),s.send(e)}),zD=(r,e,t,n)=>{const i=n||eg._userID;return _R(i,r,e),wR("/api/v1.0/email/send",JSON.stringify({lib_version:"3.11.0",user_id:i,service_id:r,template_id:e,template_params:t}),{"Content-type":"application/json"})},HD=r=>{let e;if(typeof r=="string"?e=document.querySelector(r):e=r,!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return e},GD=(r,e,t,n)=>{const i=n||eg._userID,s=HD(t);_R(i,r,e);const o=new FormData(s);return o.append("lib_version","3.11.0"),o.append("service_id",r),o.append("template_id",e),o.append("user_id",i),wR("/api/v1.0/email/send-form",o)},bR={init:jD,send:zD,sendForm:GD},VD="service_8g0wdmb",WD="template_vzrlzhc",AR="3a4LTokkbFElR1C_h",PE=!!AR;function SR({blogSettings:r}){const e=r||{},t=e.contactLinks||[],[n,i]=F.useState({name:"",email:"",subject:"",message:""}),[s,o]=F.useState(!1),[a,l]=F.useState(null);async function u(h){if(h.preventDefault(),!n.name||!n.email||!n.message){l({type:"error",text:"Please provide your name, email, and a message."});return}if(!PE){const g=`mailto:${e.contactEmail||"hello@example.com"}?subject=${encodeURIComponent(n.subject||"Portfolio contact")}&body=${encodeURIComponent(`${n.message}

From: ${n.name} (${n.email})`)}`;window.location.href=g;return}o(!0),l(null);try{await bR.send(VD,WD,{from_name:n.name,reply_to:n.email,subject:n.subject||"Portfolio contact",message:`${n.message}

Reply at: ${n.name} <${n.email}>`,to_email:e.contactEmail||"hello@example.com"},AR),l({type:"success",text:"Thanks for reaching out! I will reply shortly."}),i({name:"",email:"",subject:"",message:""})}catch(p){l({type:"error",text:p?.text||"Message could not be sent. Please email me directly."})}finally{o(!1)}}return x.jsxs("section",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 px-8 py-10 md:px-12 space-y-8",children:[x.jsxs("div",{children:[x.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Lets connect"}),x.jsx("p",{className:"mt-3 text-slate-600 max-w-2xl",children:e.contactHeadline||"Have a project in mind or just want to say hi? Drop a note and Ill get back within two working days."})]}),x.jsxs("div",{className:"grid gap-8 lg:grid-cols-2",children:[x.jsxs("form",{className:"space-y-4",onSubmit:u,children:[x.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[x.jsx("input",{type:"text",placeholder:"Name",value:n.name,onChange:h=>i(p=>({...p,name:h.target.value})),className:"rounded-2xl border border-slate-200 bg-white/90 px-4 py-3 text-sm text-slate-800 shadow-sm transition focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),x.jsx("input",{type:"email",placeholder:"Email",value:n.email,onChange:h=>i(p=>({...p,email:h.target.value})),className:"rounded-2xl border border-slate-200 bg-white/90 px-4 py-3 text-sm text-slate-800 shadow-sm transition focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"})]}),x.jsx("input",{type:"text",placeholder:"Subject",value:n.subject,onChange:h=>i(p=>({...p,subject:h.target.value})),className:"rounded-2xl border border-slate-200 bg-white/90 px-4 py-3 text-sm text-slate-800 shadow-sm transition focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),x.jsx("textarea",{rows:6,placeholder:"Tell me about your idea",value:n.message,onChange:h=>i(p=>({...p,message:h.target.value})),className:"w-full rounded-2xl border border-slate-200 bg-white/90 px-4 py-3 text-sm text-slate-800 shadow-sm transition focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),x.jsx("button",{type:"submit",disabled:s,className:"rounded-full bg-gradient-to-r from-sky-500 to-sky-600 px-6 py-3 text-sm font-semibold text-white shadow-lg shadow-sky-500/30 transition hover:scale-[1.01] focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 disabled:opacity-60",children:s?"Sending":"Send message"}),a&&x.jsx("div",{className:`text-sm ${a.type==="success"?"text-emerald-600":"text-rose-500"}`,children:a.text}),!PE&&x.jsx("p",{className:"text-xs text-slate-500",children:"Email service isnt configured, so your default mail app will open."})]}),x.jsxs("aside",{className:"space-y-5 text-sm text-slate-600",children:[x.jsxs("div",{children:[x.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Email"}),x.jsx("a",{href:`mailto:${e.contactEmail||"hello@example.com"}`,className:"mt-1 inline-block text-slate-700 hover:text-sky-500",children:e.contactEmail||"hello@example.com"})]}),x.jsxs("div",{children:[x.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Location"}),x.jsx("p",{className:"mt-1",children:e.contactLocation||"Based in Australia. Working worldwide."})]}),x.jsxs("div",{children:[x.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Elsewhere"}),x.jsx("ul",{className:"mt-2 space-y-2",children:t.map((h,p)=>x.jsx("li",{children:x.jsx("a",{href:h.url,target:"_blank",rel:"noreferrer",className:"text-slate-700 hover:text-sky-500",children:h.label})},p))})]})]})]})]})}SR.propTypes={blogSettings:Ve.shape({contactHeadline:Ve.string,contactEmail:Ve.string,contactLocation:Ve.string,contactLinks:Ve.arrayOf(Ve.shape({label:Ve.string,url:Ve.string}))})};const JD="portfolio";function rs({label:r="Image",bucket:e=JD,pathPrefix:t="uploads",value:n,onChange:i,deletePrevious:s=!1}){const[o,a]=F.useState(null),[l,u]=F.useState(!1),[h,p]=F.useState("");function g(_){try{const A=new URL(_),b="/object/public/",w=A.pathname.indexOf(b);if(w===-1)return null;const E=A.pathname.slice(w+b.length).split("/"),R=E.shift();return!R||E.length===0||e&&R!==e?null:E.join("/")}catch{return null}}async function y(){if(!o)return;u(!0),p("");const _=o.name.split(".").pop(),A=`${t}/${Date.now()}-${Math.random().toString(36).slice(2)}.${_}`,{error:b}=await dt.storage.from(e).upload(A,o,{upsert:!0,cacheControl:"0"});if(b){p(`Upload failed: ${b.message}`),u(!1);return}const{data:w}=dt.storage.from(e).getPublicUrl(A),C=w?.publicUrl,E=C&&`${C}?v=${Date.now()}`;if(E&&i&&i(E),s&&n){const R=g(n);R&&await dt.storage.from(e).remove([R])}p("Uploaded  remember to click Update to save"),u(!1),a(null)}return x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"block text-sm opacity-80",children:r}),n?x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("img",{src:n,alt:"preview",className:"h-12 w-12 rounded object-cover ring-1 ring-slate-200"}),x.jsx("input",{className:"flex-1 rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 focus:border-slate-400 focus:outline-none focus:ring-2",value:n,onChange:_=>i?.(_.target.value),placeholder:"Image URL"})]}):x.jsx("input",{className:"w-full rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 focus:border-slate-400 focus:outline-none focus:ring-2",value:n||"",onChange:_=>i?.(_.target.value),placeholder:"Image URL (optional)"}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("input",{type:"file",accept:"image/*",onChange:_=>a(_.target.files?.[0]||null),className:"text-sm"}),x.jsx("button",{type:"button",disabled:!o||l,onClick:y,className:"rounded-full bg-emerald-600 px-3 py-1.5 text-white shadow-sm disabled:bg-emerald-600/50",children:l?"Uploading":"Upload to Storage"}),h&&x.jsx("span",{className:"text-xs text-slate-500",children:h})]}),x.jsxs("div",{className:"text-xs opacity-70",children:["Uses Supabase Storage bucket ",e,". Ensure it exists and is public (or add policies)."]})]})}function XD(r=""){return r.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function KD(){const[r,e]=F.useState(null),[t,n]=F.useState({title:"",tag:"",excerpt:"",content:"",cover_url:""}),[i,s]=F.useState(!1),[o,a]=F.useState(""),l=kl();F.useEffect(()=>{dt.auth.getSession().then(({data:p})=>e(p.session));const{data:h}=dt.auth.onAuthStateChange((p,g)=>e(g));return()=>h.subscription.unsubscribe()},[]);async function u(h){if(h.preventDefault(),!r){a("You must be signed in to publish posts.");return}s(!0),a("");const p={title:t.title,slug:XD(t.title),tag:t.tag||null,excerpt:t.excerpt||null,content:t.content||null,cover_url:t.cover_url||null},{data:g,error:y}=await dt.from("post").insert(p).select("id").single();y?a(y.message):g?.id&&l(`/blog/blog-detail/${g.id}`),s(!1)}return r?x.jsxs("section",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 px-8 py-10 md:px-12",children:[x.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"New post"}),x.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Draft your article and publish it in one go."}),x.jsxs("form",{onSubmit:u,className:"mt-8 space-y-6",children:[x.jsx("div",{className:"grid gap-4",children:x.jsx("input",{value:t.title,onChange:h=>n(p=>({...p,title:h.target.value})),placeholder:"Post title",className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",required:!0})}),x.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[x.jsx("input",{value:t.tag,onChange:h=>n(p=>({...p,tag:h.target.value})),placeholder:"Tag / category",className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),x.jsx("input",{value:t.excerpt,onChange:h=>n(p=>({...p,excerpt:h.target.value})),placeholder:"One-line summary",className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"})]}),x.jsx(rs,{label:"Cover image",bucket:"Postimg",pathPrefix:"covers",value:t.cover_url,onChange:h=>n(p=>({...p,cover_url:h}))}),x.jsx("textarea",{value:t.content,onChange:h=>n(p=>({...p,content:h.target.value})),placeholder:"Write your post (Markdown or plain text)",rows:12,className:"w-full rounded-xl border border-slate-200 px-4 py-2.5 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",required:!0}),x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("button",{type:"submit",disabled:i,className:"rounded-xl bg-emerald-600 px-5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-emerald-500 disabled:bg-emerald-600/60",children:i?"Publishing":"Publish post"}),o&&x.jsx("span",{className:"text-sm text-rose-500",children:o})]})]})]}):x.jsxs("section",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 px-8 py-12 text-center",children:[x.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Sign in to create a post"}),x.jsx("p",{className:"mt-3 text-slate-600",children:"Use the login button in the header to request an access link."})]})}function bA(){const[r,e]=F.useState({theme:fn,blog:Dn,loading:!0});return F.useEffect(()=>{let t=!1;async function n(){const{data:i,error:s}=await dt.from("settings").select("theme, blog, theme_color").limit(1).maybeSingle();if(t)return;if(s){console.warn("Could not load settings",s),e({theme:fn,blog:Dn,loading:!1});return}if(i?.theme||i?.blog){const a=$o(i?.theme||fn),l=Pa(i?.blog||Dn);e({theme:a,blog:l,loading:!1});return}const o=uR(i?.theme_color);e({theme:o.theme,blog:o.blog,loading:!1})}return n(),()=>{t=!0}},[]),r}function YD(){const{theme:r,blog:e,loading:t}=bA(),n=F.useMemo(()=>dR(r,"light"),[r]);return x.jsx("div",{style:{color:"#0f172a",minHeight:"100vh",backgroundImage:`radial-gradient(60% 60% at -10% -10%, ${n.softer} 0%, transparent 60%), radial-gradient(50% 50% at 110% 0%, ${n.soft} 0%, transparent 60%), linear-gradient(180deg, ${n.lightShell} 0%, #e2e8f0 35%, ${n.lightShell} 100%)`,backgroundColor:n.lightShell},children:x.jsxs("div",{className:"mx-auto flex min-h-screen max-w-7xl flex-col gap-10 px-4 py-10 sm:px-6 lg:px-8",children:[x.jsx(MD,{accent:n}),x.jsxs(H2,{children:[x.jsx(Zo,{index:!0,element:x.jsx(yR,{blogSettings:e,loading:t,accent:n,themeColors:r})}),x.jsx(Zo,{path:"about",element:x.jsx(xR,{blogSettings:e,accent:n})}),x.jsx(Zo,{path:"contact",element:x.jsx(SR,{blogSettings:e,accent:n})}),x.jsx(Zo,{path:"create",element:x.jsx(KD,{accent:n})}),x.jsx(Zo,{path:"*",element:x.jsx(ak,{to:".",replace:!0})})]}),x.jsx(wA,{blogSettings:e,accent:n})]})})}const qD="portfolio";function ER({label:r="File",bucket:e=qD,pathPrefix:t="downloads",value:n,onChange:i}){const[s,o]=F.useState(null),[a,l]=F.useState(!1),[u,h]=F.useState("");function p(_){try{const A=new URL(_),b="/object/public/",w=A.pathname.indexOf(b);if(w===-1)return null;const E=A.pathname.slice(w+b.length).split("/"),R=E.shift();return!R||E.length===0||e&&R!==e?null:E.join("/")}catch{return null}}async function g(){if(!s)return;l(!0),h("");const _=s.name.split(".").pop(),A=`${t}/${Date.now()}-${Math.random().toString(36).slice(2)}.${_}`,{error:b}=await dt.storage.from(e).upload(A,s,{upsert:!0,cacheControl:"0"});if(b){h(`Upload failed: ${b.message}`),l(!1);return}const{data:w}=dt.storage.from(e).getPublicUrl(A),C=w?.publicUrl?`${w.publicUrl}?v=${Date.now()}`:"";C&&i&&i(C),h("Uploaded - paste link into your post or save the record"),o(null),l(!1)}async function y(){if(!n){i?.("");return}l(!0),h("");const _=p(n);_&&await dt.storage.from(e).remove([_]),i?.(""),h("Removed"),l(!1)}return x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"block text-sm opacity-80",children:r}),x.jsx("input",{className:"w-full rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 focus:border-slate-400 focus:outline-none focus:ring-2",placeholder:"https://example.com/download.pdf",value:n||"",onChange:_=>i?.(_.target.value)}),x.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[x.jsx("input",{type:"file",onChange:_=>o(_.target.files?.[0]||null)}),x.jsx("button",{type:"button",disabled:!s||a,onClick:g,className:"rounded-full bg-slate-900 px-4 py-1.5 text-xs font-semibold text-white shadow-sm transition disabled:bg-slate-400",children:a?"Uploading...":"Upload to Storage"}),x.jsx("button",{type:"button",disabled:a,onClick:y,className:"rounded-full bg-rose-600 px-4 py-1.5 text-xs font-semibold text-white shadow-sm transition disabled:bg-rose-400",children:a?"Removing...":"Delete file"}),u&&x.jsx("span",{className:"text-xs text-slate-500",children:u})]})]})}function Ty({value:r,onChange:e,accent:t,placeholder:n="Write here",onUploadImage:i}){const s=F.useRef(null),[o,a]=F.useState("#0f172a"),[l,u]=F.useState(!1),h=F.useRef(null);F.useEffect(()=>{const E=s.current;if(E){try{document.execCommand("defaultParagraphSeparator",!1,"p")}catch(R){console.warn("RichTextEditor: default paragraph separator unsupported",R)}E.innerHTML!==(r||"")&&(E.innerHTML=r||"")}},[r]);function p(E,R){s.current?.focus(),document.execCommand(E,!1,R),e?.(s.current?.innerHTML||"")}function g(){e?.(s.current?.innerHTML||"")}function y(E){return String(E).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function _(E){const R=(E.clipboardData||window.clipboardData).getData("text");if(R&&/```([\s\S]*?)```/m.test(R)){E.preventDefault();const L=R.replace(/^```[a-zA-Z0-9_-]*\n?/,"").replace(/```\s*$/,""),D=`<pre><code>${y(L)}</code></pre>`;document.execCommand("insertHTML",!1,D),e?.(s.current?.innerHTML||"");return}E.preventDefault(),document.execCommand("insertText",!1,R)}function A(){const E=window.prompt("Enter URL:");E&&p("createLink",E)}function b(E){const R=window.getSelection();if(!R||!R.rangeCount)return;const L=R.getRangeAt(0);L.deleteContents();const D=document.createElement("div");D.innerHTML=E;const j=document.createDocumentFragment();let O;for(;O=D.firstChild;)j.appendChild(O);L.insertNode(j),L.collapse(!1),R.removeAllRanges(),R.addRange(L),e?.(s.current?.innerHTML||"")}async function w(E){E.preventDefault(),u(!1);const R=Array.from(E.dataTransfer?.files||[]).filter(L=>L.type.startsWith("image/"));if(R.length&&typeof i=="function")for(const L of R)try{const D=await i(L);D&&b(`<img src="${D}" alt="" />`)}catch{}}async function C(E){const R=E.target.files?.[0];if(!(!R||typeof i!="function")){try{const L=await i(R);L&&b(`<img src="${L}" alt="" />`)}catch{}E.target.value=""}}return x.jsxs("div",{className:"rounded-2xl border border-slate-300 overflow-hidden bg-white shadow-sm dark:border-slate-700 dark:bg-slate-900",children:[x.jsxs("div",{className:"flex flex-wrap items-center gap-2 border-b border-slate-200 p-2 bg-white text-slate-800 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",children:[x.jsx("button",{type:"button",className:"px-2 py-1 rounded hover:bg-slate-100 dark:hover:bg-slate-700",title:"Undo",onClick:()=>p("undo"),children:""}),x.jsx("button",{type:"button",className:"px-2 py-1 rounded hover:bg-slate-100 dark:hover:bg-slate-700",title:"Redo",onClick:()=>p("redo"),children:""}),x.jsx("span",{className:"mx-1 h-5 w-px bg-slate-300 dark:bg-slate-600"}),x.jsxs("select",{className:"rounded-lg border border-slate-300 bg-white px-3 py-1.5 text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-sky-200 text-slate-800 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-100",onChange:E=>p("formatBlock",E.target.value),defaultValue:"p",children:[x.jsx("option",{value:"p",children:"Paragraph"}),x.jsx("option",{value:"h2",children:"Heading 2"}),x.jsx("option",{value:"h3",children:"Heading 3"})]}),x.jsx("span",{className:"mx-1 h-5 w-px bg-slate-300 dark:bg-slate-600"}),x.jsx("button",{type:"button",className:"px-2 py-1 font-semibold hover:bg-slate-100 dark:hover:bg-slate-700",title:"Bold",onClick:()=>p("bold"),children:"B"}),x.jsx("button",{type:"button",className:"px-2 py-1 italic hover:bg-slate-100 dark:hover:bg-slate-700",title:"Italic",onClick:()=>p("italic"),children:"I"}),x.jsx("button",{type:"button",className:"px-2 py-1 underline hover:bg-slate-100 dark:hover:bg-slate-700",title:"Underline",onClick:()=>p("underline"),children:"U"}),x.jsxs("label",{className:"ml-1 inline-flex items-center gap-2 text-xs",children:[x.jsx("span",{children:"Aa"}),x.jsx("input",{type:"color",value:o,onChange:E=>{a(E.target.value),p("foreColor",E.target.value)}})]}),x.jsx("span",{className:"mx-1 h-5 w-px bg-slate-300 dark:bg-slate-600"}),x.jsx("button",{type:"button",className:"px-2 py-1 hover:bg-slate-100 dark:hover:bg-slate-700",title:"Align left",onClick:()=>p("justifyLeft"),children:""}),x.jsx("button",{type:"button",className:"px-2 py-1 hover:bg-slate-100 dark:hover:bg-slate-700",title:"Align center",onClick:()=>p("justifyCenter"),children:""}),x.jsx("button",{type:"button",className:"px-2 py-1 hover:bg-slate-100 dark:hover:bg-slate-700",title:"Align right",onClick:()=>p("justifyRight"),children:""}),x.jsx("span",{className:"mx-1 h-5 w-px bg-slate-300 dark:bg-slate-600"}),x.jsx("button",{type:"button",className:"px-2 py-1 hover:bg-slate-100 dark:hover:bg-slate-700",title:"Numbered list",onClick:()=>p("insertOrderedList"),children:"1"}),x.jsx("button",{type:"button",className:"px-2 py-1 hover:bg-slate-100 dark:hover:bg-slate-700",title:"Bulleted list",onClick:()=>p("insertUnorderedList"),children:""}),x.jsx("span",{className:"mx-1 h-5 w-px bg-slate-300 dark:bg-slate-600"}),x.jsx("button",{type:"button",className:"px-2 py-1 hover:bg-slate-100 dark:hover:bg-slate-700",title:"Quote",onClick:()=>p("formatBlock","blockquote"),children:""}),x.jsx("button",{type:"button",className:"px-2 py-1 hover:bg-slate-100 dark:hover:bg-slate-700",title:"Code block",onClick:()=>{const E=window.getSelection();if(E&&E.anchorNode&&s.current&&s.current.contains(E.anchorNode)&&(E.anchorNode.closest?E.anchorNode.closest("pre"):null)){const D=E.anchorNode.closest("pre");if(D){const j=D.textContent,O=document.createElement("p");O.textContent=j,D.replaceWith(O),e?.(s.current?.innerHTML||"")}return}const L=E&&E.toString?E.toString():"";if(L){const D=`<pre><code>${y(L)}</code></pre>`;document.execCommand("insertHTML",!1,D),e?.(s.current?.innerHTML||"")}else p("formatBlock","pre")},children:"</>"}),x.jsx("button",{type:"button",className:"px-2 py-1 hover:bg-slate-100 dark:hover:bg-slate-700",title:"Exit all code blocks",onClick:()=>{const E=s.current;if(!E)return;Array.from(E.querySelectorAll("pre")).forEach(L=>{const j=(L.textContent||"").split(/\n{2,}/).map(I=>I.trim()).filter(Boolean),O=document.createDocumentFragment();j.forEach(I=>{const U=document.createElement("p");U.textContent=I,O.appendChild(U)}),L.replaceWith(O)}),e?.(s.current?.innerHTML||"")},children:""}),x.jsx("span",{className:"mx-1 h-5 w-px bg-slate-300 dark:bg-slate-600"}),x.jsx("button",{type:"button",className:"px-2 py-1 hover:bg-slate-100 dark:hover:bg-slate-700",title:"Link",onClick:A,children:""}),x.jsx("button",{type:"button",className:"px-2 py-1 hover:bg-slate-100 dark:hover:bg-slate-700",title:"Remove format",onClick:()=>p("removeFormat"),children:""}),i&&x.jsxs(x.Fragment,{children:[x.jsx("span",{className:"mx-1 h-5 w-px bg-slate-300 dark:bg-slate-600"}),x.jsx("button",{type:"button",className:"px-2 py-1 hover:bg-slate-100 dark:hover:bg-slate-700",title:"Insert image",onClick:()=>h.current?.click(),children:""}),x.jsx("input",{ref:h,type:"file",accept:"image/*",className:"hidden",onChange:C})]})]}),x.jsx("div",{ref:s,contentEditable:!0,onInput:g,onPaste:_,onDragOver:E=>{E.preventDefault(),u(!0)},onDragLeave:()=>u(!1),onDrop:w,spellCheck:!0,className:`min-h-[260px] w-full rounded-2xl border border-slate-200 bg-white px-5 py-4 text-base leading-7 text-slate-900 shadow-inner outline-none transition focus-visible:ring-2 focus-visible:ring-sky-100 ${l?"ring-2 ring-sky-300":""}`,style:{caretColor:t?.base||"#0ea5e9",lineHeight:1.7,borderColor:l?t?.soft||"#bae6fd":"#e2e8f0",boxShadow:"inset 0 1px 2px rgba(15,23,42,0.1)"},"data-placeholder":n,suppressContentEditableWarning:!0}),x.jsx("style",{children:`
        [contenteditable] { font-family: 'Inter', 'ui-sans-serif', system-ui, -apple-system, BlinkMacSystemFont, sans-serif; color: #0f172a; }
        [contenteditable][data-placeholder]:empty:before { content: attr(data-placeholder); color: #94a3b8; }
        [contenteditable] p { margin: 0 0 0.9rem 0; line-height: 1.75; color: #1e293b; }
        [contenteditable] h2 { font-size: 1.35rem; font-weight: 600; margin: 1.2rem 0 0.5rem; color: #0f172a; }
        [contenteditable] h3 { font-size: 1.15rem; font-weight: 600; margin: 0.9rem 0 0.4rem; color: #0f172a; }
        [contenteditable] ul, [contenteditable] ol { padding-left: 1.35rem; margin: 0.9rem 0; color: #334155; }
        [contenteditable] ul { list-style-type: disc; }
        [contenteditable] ol { list-style-type: decimal; }
        [contenteditable] li { margin-bottom: 0.45rem; }
        [contenteditable] a { color: ${t?.base||"#0ea5e9"}; text-decoration: underline; font-weight: 500; }
        [contenteditable] blockquote { border-left: 4px solid ${t?.base||"#0ea5e9"}; padding-left: .9rem; margin: 1rem 0; color: #475569; background: #f1f5f9; border-radius: 0 1rem 1rem 0; }
        [contenteditable] code { background: #e2e8f0; color: #0f172a; border-radius: 0.45rem; padding: 0.15rem 0.45rem; font-size: 0.9em; font-family: 'JetBrains Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace; }
        [contenteditable] pre { background: #f8fafc; border: 1px solid #e2e8f0; padding: 1rem 1.25rem; border-radius: 1.25rem; overflow: auto; white-space: pre-wrap; font-family: 'JetBrains Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace; color: #0f172a; box-shadow: inset 0 1px 2px rgba(15,23,42,.08); }
        [contenteditable] pre code { background: transparent; padding: 0; color: inherit; font-size: 0.95em; }
      `})]})}Ty.propTypes={value:Ve.string,onChange:Ve.func,placeholder:Ve.string,accent:Ve.object,onUploadImage:Ve.func};const cf=3,MR=8;function i_(r){if(!r)return"";const e=r.trim();return e?/^https?:\/\//i.test(e)?e:`https://${e}`:""}function qw(r){const e=[],t=new Set;if(!Array.isArray(r))return e;const n=i=>{const s=String(i||"").trim();if(!s)return;const o=s.toLowerCase();t.has(o)||e.length>=MR||(t.add(o),e.push(s))};return r.forEach(i=>{typeof i=="string"&&i.includes(",")?i.split(",").forEach(n):n(i)}),e}function QD(r){return r?qw(String(r).split(",")):[]}function ZD(){const{id:r}=j2(),e=kl(),{blog:t,theme:n}=bA(),[i,s]=F.useState(null),[o,a]=F.useState(null),[l,u]=F.useState(!1),[h,p]=F.useState({title:"",tag:"",cover_url:"",excerpt:"",content:"",project_url:"",download_label:"",download_url:"",gallery_urls:[],tech_tags:[]}),[g,y]=F.useState(0),[_,A]=F.useState(!1),[b,w]=F.useState(""),[C,E]=F.useState(""),R=F.useMemo(()=>{const je=fd(h.content||i?.content||"").replace(/<[^>]+>/g," ").split(/\s+/).filter(Boolean).length;return Math.max(1,Math.round(je/200))},[h.content,i?.content]),L=F.useMemo(()=>dR(n,"light"),[n]),D=F.useMemo(()=>pR(n,L.base),[n,L.base]),j=F.useMemo(()=>({backgroundColor:"rgba(255,255,255,0.95)",color:L.base,borderColor:L.border,boxShadow:L.cardGlow,"--tw-ring-color":L.soft}),[L]),O=F.useMemo(()=>fd(i?.content||""),[i?.content]),I=F.useMemo(()=>Array.isArray(h.gallery_urls)?h.gallery_urls.slice(0,cf):[],[h.gallery_urls]),U=F.useMemo(()=>Cy(i?.tag,i?.tech_tags),[i?.tag,i?.tech_tags]),[V,ee]=F.useState({prev:null,next:null}),[te,ne]=F.useState([]),le="edw.pedraza@gmail.com".split(",").map(pe=>pe.trim().toLowerCase()).filter(Boolean);F.useEffect(()=>{dt.auth.getSession().then(({data:pe})=>a(pe.session))},[]),F.useEffect(()=>{if(!l){const pe=Array.isArray(h.tech_tags)?h.tech_tags:[];E(pe.join(", "))}},[l,h.tech_tags]),F.useEffect(()=>{async function pe(){const{data:Ae}=await dt.from("post").select("*").eq("id",r).single();if(Ae){const je=fd(Ae.content||""),ft=Array.isArray(Ae.gallery_urls)?Ae.gallery_urls.slice(0,cf):[],St=qw(Ae.tech_tags||[]);if(s({...Ae,content:je,gallery_urls:ft,tech_tags:St}),p({title:Ae.title||"",tag:Ae.tag||"",cover_url:Ae.cover_url||"",excerpt:Ae.excerpt||"",content:je,project_url:Ae.project_url||"",gallery_urls:ft,download_label:Ae.download_label||"",download_url:Ae.download_url||"",tech_tags:St}),E(St.join(", ")),Ae.published_at){const{data:Xe}=await dt.from("post").select("id,title,cover_url").lt("published_at",Ae.published_at).order("published_at",{ascending:!1}).limit(1),{data:ce}=await dt.from("post").select("id,title,cover_url").gt("published_at",Ae.published_at).order("published_at",{ascending:!0}).limit(1);ee({prev:Xe?.[0]||null,next:ce?.[0]||null})}else ee({prev:null,next:null});if(Ae.tag){const{data:Xe}=await dt.from("post").select("id,title,excerpt,cover_url,tag").eq("tag",Ae.tag).neq("id",Ae.id).order("published_at",{ascending:!1}).limit(3);ne(Xe||[])}else ne([])}}pe()},[r]);async function de(){A(!0),w("");const pe=fd(h.content),Ae=I.map(ge=>(ge||"").trim()).filter(Boolean),je=i_(h.project_url||""),ft=qw(h.tech_tags||[]),St=ft.join(", ")||h.tag||null,Xe={title:h.title,tag:St,cover_url:h.cover_url||null,excerpt:h.excerpt||null,content:pe||null,project_url:je||null,download_label:h.download_label||null,download_url:h.download_url||null,gallery_urls:Ae,tech_tags:ft},{error:ce}=await dt.from("post").update(Xe).eq("id",r);ce?w(ce.message||"Update failed"):(w("Updated"),u(!1),s({...i,...Xe,content:pe})),A(!1)}async function ie(){if(!confirm("Delete this post?"))return;const{error:pe}=await dt.from("post").delete().eq("id",r);pe||e("/blog")}function J(){p(pe=>{const Ae=Array.isArray(pe.gallery_urls)?pe.gallery_urls:[];return Ae.length>=cf?pe:{...pe,gallery_urls:[...Ae,""]}})}function Q(pe,Ae){p(je=>{const ft=Array.isArray(je.gallery_urls)?je.gallery_urls:[];if(pe<0||pe>=ft.length)return je;const St=[...ft];return St[pe]=Ae,{...je,gallery_urls:St}})}function H(pe){p(Ae=>{const je=Array.isArray(Ae.gallery_urls)?Ae.gallery_urls:[];if(pe<0||pe>=je.length)return Ae;const ft=je.filter((St,Xe)=>Xe!==pe);return{...Ae,gallery_urls:ft}})}function X(pe){y(Ae=>ye.length===0?0:(Ae+pe+ye.length)%ye.length)}const Z=o&&le.length>0&&le.includes((o.user?.email||"").toLowerCase()),ye=Array.isArray(i?.gallery_urls)?i.gallery_urls.filter(pe=>typeof pe=="string"&&pe.trim().length>0).slice(0,cf):[];F.useEffect(()=>{y(0)},[i?.id]),F.useEffect(()=>{(ye.length===0||g>=ye.length)&&y(0)},[ye.length,g]);const be=i?.project_url?i_(i.project_url):"",Le=i?.download_url?i_(i.download_url):"";return i?x.jsxs("div",{className:"min-h-screen",style:{color:"#0f172a",backgroundImage:`radial-gradient(60% 60% at -10% -10%, ${L.softer} 0%, transparent 60%), radial-gradient(50% 50% at 110% 0%, ${L.soft} 0%, transparent 60%), linear-gradient(180deg, ${L.lightShell} 0%, #e2e8f0 35%, ${L.lightShell} 100%)`,backgroundColor:L.lightShell},children:[x.jsxs("div",{className:"relative w-full",children:[i.cover_url&&x.jsx("img",{src:i.cover_url,alt:i.title,className:"h-[260px] w-full bg-slate-900/5 object-contain md:h-[360px]"}),x.jsx("div",{className:"absolute inset-0",style:{backgroundImage:D.overlay}}),x.jsx("div",{className:"absolute inset-x-0 bottom-6 px-6 md:px-10",children:x.jsx("div",{className:"mx-auto max-w-5xl",children:x.jsxs("div",{className:"inline-flex w-full max-w-3xl flex-col gap-4 rounded-3xl border px-6 py-5 text-white backdrop-blur",style:{backgroundColor:D.cardBg,borderColor:D.cardBorder,boxShadow:D.cardShadow},children:[U.length>0&&x.jsx("div",{className:"flex flex-wrap gap-2",children:U.map(pe=>x.jsx("span",{className:"rounded-full px-3 py-0.5 text-[10px] font-semibold uppercase tracking-[0.3em]",style:{backgroundColor:D.chipBg,color:D.chipText},children:pe},`hero-tag-${pe}`))}),x.jsxs("div",{children:[x.jsx("h1",{className:"text-3xl font-semibold leading-tight text-white md:text-4xl",children:i.title}),x.jsxs("p",{className:"mt-2 text-sm font-medium text-white/80",children:[new Date(i.published_at||i.created_at).toLocaleDateString(),"  ",R," min read"]})]}),i.excerpt&&x.jsx("p",{className:"text-sm text-white/80",children:i.excerpt})]})})})]}),x.jsxs("div",{className:"mx-auto max-w-5xl px-6 py-10 md:px-10",children:[x.jsx("button",{onClick:()=>e("/blog"),className:"text-sm font-medium text-sky-600 hover:text-sky-500",children:"Back to Blog"}),x.jsxs("div",{className:"mt-6 flex items-center justify-between rounded-2xl border border-white/50 bg-white/70 px-5 py-4 shadow-lg backdrop-blur",children:[x.jsxs("div",{className:"text-sm text-slate-600",children:[x.jsx("div",{className:"font-medium text-slate-900",children:t?.authorName||"Edwin Pedraza"}),x.jsx("div",{children:t?.authorTitle||"Author"})]}),Z&&x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{onClick:()=>u(pe=>!pe),className:"rounded-full border border-slate-200 px-4 py-2 text-xs font-semibold text-slate-600 hover:bg-slate-100",children:l?"Close editor":"Edit"}),x.jsx("button",{onClick:ie,className:"rounded-full bg-rose-500 px-4 py-2 text-xs font-semibold text-white hover:bg-rose-400",children:"Delete"})]})]}),l?x.jsxs("div",{className:"mt-8 space-y-4 rounded-2xl border border-white/60 bg-white/80 p-6 shadow-lg backdrop-blur",children:[x.jsx("input",{className:"w-full rounded-2xl border border-slate-200 bg-white/95 px-4 py-2 text-sm font-medium text-slate-900 shadow-sm transition focus:border-sky-300 focus:outline-none focus:ring-2 focus:ring-sky-100 placeholder:text-slate-400",placeholder:"Title",value:h.title,onChange:pe=>p({...h,title:pe.target.value})}),x.jsx(rs,{label:"Cover image",bucket:"Postimg",pathPrefix:"covers",value:h.cover_url,onChange:pe=>p({...h,cover_url:pe})}),x.jsx("input",{className:"w-full rounded-2xl border border-slate-200 bg-white/95 px-4 py-2 text-sm font-medium text-slate-900 shadow-sm transition focus:border-sky-300 focus:outline-none focus:ring-2 focus:ring-sky-100 placeholder:text-slate-400",placeholder:"Excerpt",value:h.excerpt,onChange:pe=>p({...h,excerpt:pe.target.value})}),x.jsx("input",{className:"w-full rounded-2xl border border-slate-200 bg-white/95 px-4 py-2 text-sm font-medium text-slate-900 shadow-sm transition focus:border-sky-300 focus:outline-none focus:ring-2 focus:ring-sky-100 placeholder:text-slate-400",placeholder:"Project link (https://...)",value:h.project_url,onChange:pe=>p({...h,project_url:pe.target.value})}),x.jsx("input",{className:"w-full rounded-2xl border border-slate-200 bg-white/95 px-4 py-2 text-sm font-medium text-slate-900 shadow-sm transition focus:border-sky-300 focus:outline-none focus:ring-2 focus:ring-sky-100 placeholder:text-slate-400",placeholder:"Download label (e.g. Case study PDF)",value:h.download_label,onChange:pe=>p({...h,download_label:pe.target.value})}),x.jsx(ER,{label:"Download file URL",value:h.download_url,onChange:pe=>p({...h,download_url:pe})}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Technologies used"}),x.jsx("input",{className:"w-full rounded-2xl border border-slate-200 bg-white/95 px-4 py-2 text-sm font-medium text-slate-900 shadow-sm transition focus:border-sky-300 focus:outline-none focus:ring-2 focus:ring-sky-100 placeholder:text-slate-400",placeholder:"e.g. React, Supabase",value:C,onChange:pe=>{const Ae=pe.target.value;E(Ae);const je=QD(Ae);p(ft=>({...ft,tech_tags:je,tag:je[0]||""}))}}),x.jsxs("p",{className:"text-xs text-slate-500",children:["Separate technologies with commas. Up to ",MR," entries."]})]}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[x.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Additional gallery images"}),x.jsx("button",{type:"button",onClick:J,disabled:I.length>=cf,className:"rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold text-slate-600 transition hover:bg-slate-100 disabled:opacity-50",children:"Add image"})]}),I.length===0&&x.jsxs("p",{className:"text-sm text-slate-500",children:["Show up to ",cf," supporting screenshots."]}),I.map((pe,Ae)=>x.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-sm",children:[x.jsx(rs,{label:`Gallery image ${Ae+1}`,bucket:"Postimg",pathPrefix:"post-gallery",value:pe,onChange:je=>Q(Ae,je)}),x.jsx("div",{className:"mt-3 flex justify-end",children:x.jsx("button",{type:"button",onClick:()=>H(Ae),className:"text-xs font-semibold text-rose-500",children:"Remove"})})]},`gallery-edit-${Ae}`))]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Post body"}),x.jsx(Ty,{value:h.content,onChange:pe=>p({...h,content:pe}),accent:L,placeholder:"Write, format, and link content. Use the toolbar above to style your post.",onUploadImage:async pe=>{const Ae="Postimg",je=pe.name.split(".").pop(),ft=`post-assets/${Date.now()}-${Math.random().toString(36).slice(2)}.${je}`,{error:St}=await dt.storage.from(Ae).upload(ft,pe,{upsert:!0,cacheControl:"0"});if(St)throw St;const{data:Xe}=dt.storage.from(Ae).getPublicUrl(ft);return Xe?.publicUrl?`${Xe.publicUrl}?v=${Date.now()}`:""}})]}),x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("button",{disabled:_,onClick:de,className:"rounded-full bg-emerald-600 px-4 py-2 text-sm font-semibold text-white hover:bg-emerald-500 disabled:bg-emerald-600/60",children:_?"Saving...":"Save changes"}),b&&x.jsx("span",{className:"text-sm text-slate-500",children:b})]})]}):x.jsxs(x.Fragment,{children:[i.excerpt&&x.jsx("div",{className:"mt-8 rounded-3xl border border-white/70 bg-white/90 p-6 text-lg font-medium leading-relaxed text-slate-700 shadow-xl shadow-slate-900/5 backdrop-blur",children:x.jsx("p",{className:"text-slate-800",children:i.excerpt})}),U.length>0&&x.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:U.map(pe=>x.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-900/5 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-600",children:pe},`tech-pill-${pe}`))}),be&&x.jsxs("a",{href:be,target:"_blank",rel:"noreferrer",className:"mt-4 inline-flex w-full items-center justify-between rounded-3xl border border-slate-900/10 bg-slate-900 px-6 py-4 text-white shadow-xl shadow-slate-900/10 transition hover:-translate-y-0.5 hover:bg-slate-800",children:[x.jsxs("div",{children:[x.jsx("div",{className:"text-xs uppercase tracking-[0.2em] text-white/70",children:"Project link"}),x.jsx("div",{className:"mt-1 text-lg font-semibold",children:"View the live admin experience"})]}),x.jsx("span",{"aria-hidden":!0,className:"text-2xl",children:""})]}),Le&&x.jsxs("a",{href:Le,target:"_blank",rel:"noreferrer",download:!0,className:"mt-4 inline-flex max-w-sm items-center gap-3 rounded-2xl border border-emerald-400/40 bg-white px-5 py-3 text-sm font-semibold text-emerald-700 shadow-lg shadow-emerald-500/15 transition hover:-translate-y-0.5 hover:bg-emerald-50",children:[x.jsx("span",{className:"inline-flex h-8 w-8 items-center justify-center rounded-xl bg-emerald-500/10 text-base",children:""}),x.jsx("span",{children:i.download_label||"Download file"})]}),ye.length>0&&x.jsxs("div",{className:"mt-6",children:[x.jsxs("div",{className:"relative overflow-hidden rounded-3xl border border-white/80 bg-white/90 shadow-lg shadow-slate-900/5",children:[x.jsx("img",{src:ye[g],alt:`Project showcase ${g+1}`,loading:"lazy",className:"h-64 w-full object-cover md:h-80 lg:h-[360px]"}),ye.length>1&&x.jsxs(x.Fragment,{children:[x.jsx("button",{type:"button",onClick:()=>X(-1),className:"absolute left-4 top-1/2 flex h-11 w-11 -translate-y-1/2 items-center justify-center rounded-full border backdrop-blur-sm transition duration-200 hover:-translate-y-[55%] hover:scale-105 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",style:j,"aria-label":"Previous gallery image",children:x.jsx("svg",{"aria-hidden":"true",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",viewBox:"0 0 24 24",children:x.jsx("path",{d:"M15 6L9 12l6 6"})})}),x.jsx("button",{type:"button",onClick:()=>X(1),className:"absolute right-4 top-1/2 flex h-11 w-11 -translate-y-1/2 items-center justify-center rounded-full border backdrop-blur-sm transition duration-200 hover:-translate-y-[55%] hover:scale-105 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",style:j,"aria-label":"Next gallery image",children:x.jsx("svg",{"aria-hidden":"true",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",viewBox:"0 0 24 24",children:x.jsx("path",{d:"M9 6l6 6-6 6"})})})]})]}),ye.length>1&&x.jsx("div",{className:"mt-3 flex justify-center gap-2",children:ye.map((pe,Ae)=>x.jsx("button",{type:"button",onClick:()=>y(Ae),className:`h-2.5 w-2.5 rounded-full border border-slate-900/10 transition ${Ae===g?"bg-slate-900":"bg-slate-200 hover:bg-slate-300"}`,"aria-label":`Show gallery image ${Ae+1}`},`gallery-dot-${Ae}`))})]}),x.jsxs("article",{className:"relative mt-10 overflow-hidden rounded-3xl border border-white/80 bg-gradient-to-b from-white/90 via-white/80 to-white/60 p-10 shadow-2xl shadow-slate-900/10 backdrop-blur",children:[x.jsx("div",{className:"prose prose-lg max-w-none text-slate-700 prose-headings:text-slate-900 prose-headings:font-semibold prose-headings:tracking-tight prose-h1:text-4xl prose-h2:text-3xl prose-h3:text-2xl prose-p:text-slate-700 prose-p:leading-relaxed prose-li:text-slate-700 prose-li:marker:text-slate-400 prose-strong:text-slate-900 prose-blockquote:border-l-4 prose-blockquote:border-slate-200 prose-blockquote:bg-slate-50 prose-blockquote:text-slate-600 prose-blockquote:italic prose-a:text-sky-600 hover:prose-a:text-sky-500 prose-img:rounded-3xl prose-img:shadow-xl prose-pre:bg-white prose-pre:text-slate-900 prose-pre:border prose-pre:border-slate-200 prose-pre:rounded-2xl prose-pre:px-5 prose-pre:py-4 prose-pre:leading-relaxed prose-pre:shadow-inner prose-pre:shadow-slate-900/5 prose-pre:whitespace-pre-wrap prose-pre:break-words prose-pre:overflow-hidden prose-code:text-rose-500 prose-table:text-slate-700",children:x.jsx("div",{className:"space-y-6 [&>h1]:pb-2 [&>h1]:text-slate-900 [&>h1]:border-b [&>h1]:border-slate-200 [&>h2]:mt-12 [&>h2]:text-slate-900 [&>h2]:border-l-4 [&>h2]:border-slate-900 [&>h2]:pl-4 [&>h3]:uppercase [&>h3]:tracking-[0.2em] [&>ul]:space-y-3 [&>ul]:pl-6 [&>ol]:space-y-3 [&>ol]:pl-6 [&>p]:text-lg [&>p]:leading-8",dangerouslySetInnerHTML:{__html:O}})}),x.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-3xl border border-white/30 shadow-inner shadow-white/40"})]})]}),x.jsxs("div",{className:"mt-12 grid gap-4 md:grid-cols-2",children:[V.prev&&x.jsxs("button",{onClick:()=>e(`/blog/blog-detail/${V.prev.id}`),"aria-label":"Previous post",className:"group flex items-center gap-4 rounded-2xl border border-white/50 bg-white/70 p-4 text-left shadow-lg backdrop-blur transition hover:-translate-y-0.5 hover:border-white/60 hover:shadow-xl",children:[V.prev.cover_url?x.jsx("img",{src:V.prev.cover_url,alt:V.prev.title,className:"h-16 w-24 flex-none rounded-md object-cover"}):x.jsx("div",{className:"h-16 w-24 flex-none rounded-md bg-slate-100 ring-1 ring-slate-200"}),x.jsxs("div",{children:[x.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Previous"}),x.jsx("div",{className:"mt-1 font-semibold text-slate-900 line-clamp-2 group-hover:underline",children:V.prev.title})]})]}),V.next&&x.jsxs("button",{onClick:()=>e(`/blog/blog-detail/${V.next.id}`),"aria-label":"Next post",className:"group flex items-center justify-end gap-4 rounded-2xl border border-white/50 bg-white/70 p-4 text-right shadow-lg backdrop-blur transition hover:-translate-y-0.5 hover:border-white/60 hover:shadow-xl",children:[x.jsxs("div",{className:"order-2",children:[x.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Next"}),x.jsx("div",{className:"mt-1 font-semibold text-slate-900 line-clamp-2 group-hover:underline",children:V.next.title})]}),V.next.cover_url?x.jsx("img",{src:V.next.cover_url,alt:V.next.title,className:"order-1 h-16 w-24 flex-none rounded-md object-cover"}):x.jsx("div",{className:"order-1 h-16 w-24 flex-none rounded-md bg-slate-100 ring-1 ring-slate-200"})]})]}),te.length>0&&x.jsxs("div",{className:"mt-12",children:[x.jsxs("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:["More in ",i.tag]}),x.jsx("div",{className:"mt-3 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:te.map(pe=>x.jsxs("article",{onClick:()=>e(`/blog/blog-detail/${pe.id}`),className:"group cursor-pointer overflow-hidden rounded-2xl border border-white/50 bg-white/70 shadow-lg backdrop-blur transition hover:-translate-y-1 hover:border-white/60 hover:shadow-xl",children:[pe.cover_url&&x.jsx("img",{src:pe.cover_url,alt:pe.title,className:"h-36 w-full object-cover"}),x.jsxs("div",{className:"space-y-2 p-4",children:[pe.tag&&x.jsx("span",{className:"inline-block rounded-full bg-slate-100 px-2 py-0.5 text-[11px] font-medium uppercase tracking-wide text-slate-600",children:pe.tag}),x.jsx("div",{className:"font-semibold text-slate-900 line-clamp-2 group-hover:underline",children:pe.title}),pe.excerpt&&x.jsx("div",{className:"text-sm text-slate-600 line-clamp-2",children:pe.excerpt})]})]},pe.id))})]})]}),x.jsx("div",{className:"mx-auto mt-12 max-w-5xl px-6 md:px-10 pb-16",children:x.jsx(wA,{blogSettings:t})})]}):x.jsx("div",{className:"min-h-screen bg-slate-100 px-6 py-10 text-center text-slate-500",children:"Loading..."})}const hp="155",sd={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},od={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CR=0,Qw=1,TR=2,$D=3,RR=0,Ry=1,zm=2,Yo=3,Fa=0,is=1,Es=2,eF=2,La=0,Ad=1,Zw=2,$w=3,eb=4,PR=5,dd=100,IR=101,LR=102,tb=103,nb=104,NR=200,BR=201,kR=202,DR=203,AA=204,SA=205,FR=206,OR=207,UR=208,jR=209,zR=210,HR=0,GR=1,VR=2,ly=3,WR=4,JR=5,XR=6,KR=7,yg=0,YR=1,qR=2,Na=0,QR=1,ZR=2,$R=3,EA=4,eP=5,Wc=300,Oa=301,Jc=302,ep=303,tg=304,fp=306,Pl=1e3,er=1001,Nd=1002,gr=1003,tp=1004,tF=1004,Sd=1005,nF=1005,Pn=1006,xg=1007,rF=1007,ea=1008,rb=1008,Js=1009,MA=1010,CA=1011,Py=1012,Iy=1013,Ta=1014,ei=1015,ci=1016,TA=1017,RA=1018,Uc=1020,tP=1021,Wr=1023,nP=1024,rP=1025,jc=1026,Bd=1027,PA=1028,IA=1029,iP=1030,LA=1031,NA=1033,Jv=33776,Xv=33777,Kv=33778,Yv=33779,ib=35840,sb=35841,ob=35842,ab=35843,sP=36196,lb=37492,cb=37496,ub=37808,db=37809,hb=37810,fb=37811,pb=37812,mb=37813,gb=37814,vb=37815,yb=37816,xb=37817,_b=37818,wb=37819,bb=37820,Ab=37821,qv=36492,oP=36283,Sb=36284,Eb=36285,Mb=36286,aP=2200,lP=2201,cP=2202,kd=2300,Xc=2301,Qv=2302,pd=2400,md=2401,ng=2402,Ly=2500,BA=2501,uP=0,kA=1,cy=2,DA=3e3,Ml=3001,dP=3200,hP=3201,tu=0,fP=1,zc="",nn="srgb",Rs="srgb-linear",FA="display-p3",iF=0,Zv=7680,sF=7681,oF=7682,aF=7683,lF=34055,cF=34056,uF=5386,dF=512,hF=513,fF=514,pF=515,mF=516,gF=517,vF=518,pP=519,mP=512,gP=513,vP=514,yP=515,xP=516,_P=517,wP=518,bP=519,rg=35044,Ed=35048,yF=35040,xF=35045,_F=35049,wF=35041,bF=35046,AF=35050,SF=35042,EF="100",Cb="300 es",uy=1035,Ra=2e3,ig=2001;let Dl=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}};const Fi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let IE=1234567;const Md=Math.PI/180,np=180/Math.PI;function Xs(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Fi[r&255]+Fi[r>>8&255]+Fi[r>>16&255]+Fi[r>>24&255]+"-"+Fi[e&255]+Fi[e>>8&255]+"-"+Fi[e>>16&15|64]+Fi[e>>24&255]+"-"+Fi[t&63|128]+Fi[t>>8&255]+"-"+Fi[t>>16&255]+Fi[t>>24&255]+Fi[n&255]+Fi[n>>8&255]+Fi[n>>16&255]+Fi[n>>24&255]).toLowerCase()}function Sr(r,e,t){return Math.max(e,Math.min(t,r))}function OA(r,e){return(r%e+e)%e}function MF(r,e,t,n,i){return n+(r-e)*(i-n)/(t-e)}function CF(r,e,t){return r!==e?(t-r)/(e-r):0}function Hm(r,e,t){return(1-t)*r+t*e}function TF(r,e,t,n){return Hm(r,e,1-Math.exp(-t*n))}function RF(r,e=1){return e-Math.abs(OA(r,e*2)-e)}function PF(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*(3-2*r))}function IF(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*r*(r*(r*6-15)+10))}function LF(r,e){return r+Math.floor(Math.random()*(e-r+1))}function NF(r,e){return r+Math.random()*(e-r)}function BF(r){return r*(.5-Math.random())}function kF(r){r!==void 0&&(IE=r);let e=IE+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function DF(r){return r*Md}function FF(r){return r*np}function Tb(r){return(r&r-1)===0&&r!==0}function AP(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function dy(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function OF(r,e,t,n,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),u=s((e+n)/2),h=o((e+n)/2),p=s((e-n)/2),g=o((e-n)/2),y=s((n-e)/2),_=o((n-e)/2);switch(i){case"XYX":r.set(a*h,l*p,l*g,a*u);break;case"YZY":r.set(l*g,a*h,l*p,a*u);break;case"ZXZ":r.set(l*p,l*g,a*h,a*u);break;case"XZX":r.set(a*h,l*_,l*y,a*u);break;case"YXY":r.set(l*y,a*h,l*_,a*u);break;case"ZYZ":r.set(l*_,l*y,a*h,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Ms(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function un(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const Ba={DEG2RAD:Md,RAD2DEG:np,generateUUID:Xs,clamp:Sr,euclideanModulo:OA,mapLinear:MF,inverseLerp:CF,lerp:Hm,damp:TF,pingpong:RF,smoothstep:PF,smootherstep:IF,randInt:LF,randFloat:NF,randFloatSpread:BF,seededRandom:kF,degToRad:DF,radToDeg:FF,isPowerOfTwo:Tb,ceilPowerOfTwo:AP,floorPowerOfTwo:dy,setQuaternionFromProperEuler:OF,normalize:un,denormalize:Ms};class We{constructor(e=0,t=0){We.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Sr(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*i+e.x,this.y=s*i+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class pn{constructor(e,t,n,i,s,o,a,l,u){pn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,i,s,o,a,l,u)}set(e,t,n,i,s,o,a,l,u){const h=this.elements;return h[0]=e,h[1]=i,h[2]=a,h[3]=t,h[4]=s,h[5]=l,h[6]=n,h[7]=o,h[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,o=n[0],a=n[3],l=n[6],u=n[1],h=n[4],p=n[7],g=n[2],y=n[5],_=n[8],A=i[0],b=i[3],w=i[6],C=i[1],E=i[4],R=i[7],L=i[2],D=i[5],j=i[8];return s[0]=o*A+a*C+l*L,s[3]=o*b+a*E+l*D,s[6]=o*w+a*R+l*j,s[1]=u*A+h*C+p*L,s[4]=u*b+h*E+p*D,s[7]=u*w+h*R+p*j,s[2]=g*A+y*C+_*L,s[5]=g*b+y*E+_*D,s[8]=g*w+y*R+_*j,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8];return t*o*h-t*a*u-n*s*h+n*a*l+i*s*u-i*o*l}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],p=h*o-a*u,g=a*l-h*s,y=u*s-o*l,_=t*p+n*g+i*y;if(_===0)return this.set(0,0,0,0,0,0,0,0,0);const A=1/_;return e[0]=p*A,e[1]=(i*u-h*n)*A,e[2]=(a*n-i*o)*A,e[3]=g*A,e[4]=(h*t-i*l)*A,e[5]=(i*s-a*t)*A,e[6]=y*A,e[7]=(n*l-u*t)*A,e[8]=(o*t-n*s)*A,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(n*l,n*u,-n*(l*o+u*a)+o+e,-i*u,i*l,-i*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(s_.makeScale(e,t)),this}rotate(e){return this.premultiply(s_.makeRotation(-e)),this}translate(e,t){return this.premultiply(s_.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const s_=new pn;function SP(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}const UF={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Uf(r,e){return new UF[r](e)}function sg(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}const LE={};function Gm(r){r in LE||(LE[r]=!0,console.warn(r))}function Kf(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function o_(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}const jF=new pn().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),zF=new pn().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function HF(r){return r.convertSRGBToLinear().applyMatrix3(zF)}function GF(r){return r.applyMatrix3(jF).convertLinearToSRGB()}const VF={[Rs]:r=>r,[nn]:r=>r.convertSRGBToLinear(),[FA]:HF},WF={[Rs]:r=>r,[nn]:r=>r.convertLinearToSRGB(),[FA]:GF},po={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(r){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!r},get workingColorSpace(){return Rs},set workingColorSpace(r){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(r,e,t){if(this.enabled===!1||e===t||!e||!t)return r;const n=VF[e],i=WF[t];if(n===void 0||i===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return i(n(r))},fromWorkingColorSpace:function(r,e){return this.convert(r,this.workingColorSpace,e)},toWorkingColorSpace:function(r,e){return this.convert(r,e,this.workingColorSpace)}};let uf;class UA{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{uf===void 0&&(uf=sg("canvas")),uf.width=e.width,uf.height=e.height;const n=uf.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=uf}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=sg("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Kf(s[o]/255)*255;return n.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Kf(t[n]/255)*255):t[n]=Kf(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let JF=0;class gd{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:JF++}),this.uuid=Xs(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(a_(i[o].image)):s.push(a_(i[o]))}else s=a_(i);n.url=s}return t||(e.images[this.uuid]=n),n}}function a_(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?UA.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let XF=0;class In extends Dl{constructor(e=In.DEFAULT_IMAGE,t=In.DEFAULT_MAPPING,n=er,i=er,s=Pn,o=ea,a=Wr,l=Js,u=In.DEFAULT_ANISOTROPY,h=zc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:XF++}),this.uuid=Xs(),this.name="",this.source=new gd(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new We(0,0),this.repeat=new We(1,1),this.center=new We(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new pn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof h=="string"?this.colorSpace=h:(Gm("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=h===Ml?nn:zc),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Wc)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Pl:e.x=e.x-Math.floor(e.x);break;case er:e.x=e.x<0?0:1;break;case Nd:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Pl:e.y=e.y-Math.floor(e.y);break;case er:e.y=e.y<0?0:1;break;case Nd:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Gm("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===nn?Ml:DA}set encoding(e){Gm("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Ml?nn:zc}}In.DEFAULT_IMAGE=null;In.DEFAULT_MAPPING=Wc;In.DEFAULT_ANISOTROPY=1;class Mn{constructor(e=0,t=0,n=0,i=1){Mn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,s;const l=e.elements,u=l[0],h=l[4],p=l[8],g=l[1],y=l[5],_=l[9],A=l[2],b=l[6],w=l[10];if(Math.abs(h-g)<.01&&Math.abs(p-A)<.01&&Math.abs(_-b)<.01){if(Math.abs(h+g)<.1&&Math.abs(p+A)<.1&&Math.abs(_+b)<.1&&Math.abs(u+y+w-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const E=(u+1)/2,R=(y+1)/2,L=(w+1)/2,D=(h+g)/4,j=(p+A)/4,O=(_+b)/4;return E>R&&E>L?E<.01?(n=0,i=.707106781,s=.707106781):(n=Math.sqrt(E),i=D/n,s=j/n):R>L?R<.01?(n=.707106781,i=0,s=.707106781):(i=Math.sqrt(R),n=D/i,s=O/i):L<.01?(n=.707106781,i=.707106781,s=0):(s=Math.sqrt(L),n=j/s,i=O/s),this.set(n,i,s,t),this}let C=Math.sqrt((b-_)*(b-_)+(p-A)*(p-A)+(g-h)*(g-h));return Math.abs(C)<.001&&(C=1),this.x=(b-_)/C,this.y=(p-A)/C,this.z=(g-h)/C,this.w=Math.acos((u+y+w-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class EP extends Dl{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Mn(0,0,e,t),this.scissorTest=!1,this.viewport=new Mn(0,0,e,t);const i={width:e,height:t,depth:1};n.encoding!==void 0&&(Gm("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===Ml?nn:zc),this.texture=new In(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.internalFormat=n.internalFormat!==void 0?n.internalFormat:null,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Pn,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!1,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null,this.samples=n.samples!==void 0?n.samples:0}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new gd(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ys extends EP{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class Ny extends In{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=gr,this.minFilter=gr,this.wrapR=er,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class KF extends Ys{constructor(e=1,t=1,n=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Ny(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class jA extends In{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=gr,this.minFilter=gr,this.wrapR=er,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class YF extends Ys{constructor(e=1,t=1,n=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new jA(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class qF extends Ys{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<n;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class ui{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,s,o,a){let l=n[i+0],u=n[i+1],h=n[i+2],p=n[i+3];const g=s[o+0],y=s[o+1],_=s[o+2],A=s[o+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=h,e[t+3]=p;return}if(a===1){e[t+0]=g,e[t+1]=y,e[t+2]=_,e[t+3]=A;return}if(p!==A||l!==g||u!==y||h!==_){let b=1-a;const w=l*g+u*y+h*_+p*A,C=w>=0?1:-1,E=1-w*w;if(E>Number.EPSILON){const L=Math.sqrt(E),D=Math.atan2(L,w*C);b=Math.sin(b*D)/L,a=Math.sin(a*D)/L}const R=a*C;if(l=l*b+g*R,u=u*b+y*R,h=h*b+_*R,p=p*b+A*R,b===1-a){const L=1/Math.sqrt(l*l+u*u+h*h+p*p);l*=L,u*=L,h*=L,p*=L}}e[t]=l,e[t+1]=u,e[t+2]=h,e[t+3]=p}static multiplyQuaternionsFlat(e,t,n,i,s,o){const a=n[i],l=n[i+1],u=n[i+2],h=n[i+3],p=s[o],g=s[o+1],y=s[o+2],_=s[o+3];return e[t]=a*_+h*p+l*y-u*g,e[t+1]=l*_+h*g+u*p-a*y,e[t+2]=u*_+h*y+a*g-l*p,e[t+3]=h*_-a*p-l*g-u*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(n/2),h=a(i/2),p=a(s/2),g=l(n/2),y=l(i/2),_=l(s/2);switch(o){case"XYZ":this._x=g*h*p+u*y*_,this._y=u*y*p-g*h*_,this._z=u*h*_+g*y*p,this._w=u*h*p-g*y*_;break;case"YXZ":this._x=g*h*p+u*y*_,this._y=u*y*p-g*h*_,this._z=u*h*_-g*y*p,this._w=u*h*p+g*y*_;break;case"ZXY":this._x=g*h*p-u*y*_,this._y=u*y*p+g*h*_,this._z=u*h*_+g*y*p,this._w=u*h*p-g*y*_;break;case"ZYX":this._x=g*h*p-u*y*_,this._y=u*y*p+g*h*_,this._z=u*h*_-g*y*p,this._w=u*h*p+g*y*_;break;case"YZX":this._x=g*h*p+u*y*_,this._y=u*y*p+g*h*_,this._z=u*h*_-g*y*p,this._w=u*h*p-g*y*_;break;case"XZY":this._x=g*h*p-u*y*_,this._y=u*y*p-g*h*_,this._z=u*h*_+g*y*p,this._w=u*h*p+g*y*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],u=t[2],h=t[6],p=t[10],g=n+a+p;if(g>0){const y=.5/Math.sqrt(g+1);this._w=.25/y,this._x=(h-l)*y,this._y=(s-u)*y,this._z=(o-i)*y}else if(n>a&&n>p){const y=2*Math.sqrt(1+n-a-p);this._w=(h-l)/y,this._x=.25*y,this._y=(i+o)/y,this._z=(s+u)/y}else if(a>p){const y=2*Math.sqrt(1+a-n-p);this._w=(s-u)/y,this._x=(i+o)/y,this._y=.25*y,this._z=(l+h)/y}else{const y=2*Math.sqrt(1+p-n-a);this._w=(o-i)/y,this._x=(s+u)/y,this._y=(l+h)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Sr(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,u=t._z,h=t._w;return this._x=n*h+o*a+i*u-s*l,this._y=i*h+o*l+s*a-n*u,this._z=s*h+o*u+n*l-i*a,this._w=o*h-n*a-i*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+n*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const y=1-t;return this._w=y*o+t*this._w,this._x=y*n+t*this._x,this._y=y*i+t*this._y,this._z=y*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),h=Math.atan2(u,a),p=Math.sin((1-t)*h)/u,g=Math.sin(t*h)/u;return this._w=o*p+this._w*g,this._x=n*p+this._x*g,this._y=i*p+this._y*g,this._z=s*p+this._z*g,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(s),n*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class q{constructor(e=0,t=0,n=0){q.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(NE.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(NE.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*i,this.y=s[1]*t+s[4]*n+s[7]*i,this.z=s[2]*t+s[5]*n+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=l*t+o*i-a*n,h=l*n+a*t-s*i,p=l*i+s*n-o*t,g=-s*t-o*n-a*i;return this.x=u*l+g*-s+h*-a-p*-o,this.y=h*l+g*-o+p*-s-u*-a,this.z=p*l+g*-a+u*-o-h*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i,this.y=s[1]*t+s[5]*n+s[9]*i,this.z=s[2]*t+s[6]*n+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-n*l,this.z=n*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return l_.copy(this).projectOnVector(e),this.sub(l_)}reflect(e){return this.sub(l_.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Sr(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const l_=new q,NE=new ui;class as{constructor(e=new q(1/0,1/0,1/0),t=new q(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(fl.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(fl.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=fl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),df.copy(e.boundingBox),df.applyMatrix4(e.matrixWorld),this.union(df);else{const i=e.geometry;if(i!==void 0)if(t&&i.attributes!==void 0&&i.attributes.position!==void 0){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)fl.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(fl)}else i.boundingBox===null&&i.computeBoundingBox(),df.copy(i.boundingBox),df.applyMatrix4(e.matrixWorld),this.union(df)}const n=e.children;for(let i=0,s=n.length;i<s;i++)this.expandByObject(n[i],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,fl),fl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(cm),j0.subVectors(this.max,cm),hf.subVectors(e.a,cm),ff.subVectors(e.b,cm),pf.subVectors(e.c,cm),Ac.subVectors(ff,hf),Sc.subVectors(pf,ff),Ju.subVectors(hf,pf);let t=[0,-Ac.z,Ac.y,0,-Sc.z,Sc.y,0,-Ju.z,Ju.y,Ac.z,0,-Ac.x,Sc.z,0,-Sc.x,Ju.z,0,-Ju.x,-Ac.y,Ac.x,0,-Sc.y,Sc.x,0,-Ju.y,Ju.x,0];return!c_(t,hf,ff,pf,j0)||(t=[1,0,0,0,1,0,0,0,1],!c_(t,hf,ff,pf,j0))?!1:(z0.crossVectors(Ac,Sc),t=[z0.x,z0.y,z0.z],c_(t,hf,ff,pf,j0))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,fl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(fl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(hl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),hl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),hl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),hl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),hl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),hl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),hl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),hl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(hl),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const hl=[new q,new q,new q,new q,new q,new q,new q,new q],fl=new q,df=new as,hf=new q,ff=new q,pf=new q,Ac=new q,Sc=new q,Ju=new q,cm=new q,j0=new q,z0=new q,Xu=new q;function c_(r,e,t,n,i){for(let s=0,o=r.length-3;s<=o;s+=3){Xu.fromArray(r,s);const a=i.x*Math.abs(Xu.x)+i.y*Math.abs(Xu.y)+i.z*Math.abs(Xu.z),l=e.dot(Xu),u=t.dot(Xu),h=n.dot(Xu);if(Math.max(-Math.max(l,u,h),Math.min(l,u,h))>a)return!1}return!0}const QF=new as,um=new q,u_=new q;class Is{constructor(e=new q,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):QF.setFromPoints(e).getCenter(n);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;um.subVectors(e,this.center);const t=um.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),i=(n-this.radius)*.5;this.center.addScaledVector(um,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(u_.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(um.copy(e.center).add(u_)),this.expandByPoint(um.copy(e.center).sub(u_))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const pl=new q,d_=new q,H0=new q,Ec=new q,h_=new q,G0=new q,f_=new q;class Vd{constructor(e=new q,t=new q(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,pl)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=pl.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(pl.copy(this.origin).addScaledVector(this.direction,t),pl.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){d_.copy(e).add(t).multiplyScalar(.5),H0.copy(t).sub(e).normalize(),Ec.copy(this.origin).sub(d_);const s=e.distanceTo(t)*.5,o=-this.direction.dot(H0),a=Ec.dot(this.direction),l=-Ec.dot(H0),u=Ec.lengthSq(),h=Math.abs(1-o*o);let p,g,y,_;if(h>0)if(p=o*l-a,g=o*a-l,_=s*h,p>=0)if(g>=-_)if(g<=_){const A=1/h;p*=A,g*=A,y=p*(p+o*g+2*a)+g*(o*p+g+2*l)+u}else g=s,p=Math.max(0,-(o*g+a)),y=-p*p+g*(g+2*l)+u;else g=-s,p=Math.max(0,-(o*g+a)),y=-p*p+g*(g+2*l)+u;else g<=-_?(p=Math.max(0,-(-o*s+a)),g=p>0?-s:Math.min(Math.max(-s,-l),s),y=-p*p+g*(g+2*l)+u):g<=_?(p=0,g=Math.min(Math.max(-s,-l),s),y=g*(g+2*l)+u):(p=Math.max(0,-(o*s+a)),g=p>0?s:Math.min(Math.max(-s,-l),s),y=-p*p+g*(g+2*l)+u);else g=o>0?-s:s,p=Math.max(0,-(o*g+a)),y=-p*p+g*(g+2*l)+u;return n&&n.copy(this.origin).addScaledVector(this.direction,p),i&&i.copy(d_).addScaledVector(H0,g),y}intersectSphere(e,t){pl.subVectors(e.center,this.origin);const n=pl.dot(this.direction),i=pl.dot(pl)-n*n,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=n-o,l=n+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,s,o,a,l;const u=1/this.direction.x,h=1/this.direction.y,p=1/this.direction.z,g=this.origin;return u>=0?(n=(e.min.x-g.x)*u,i=(e.max.x-g.x)*u):(n=(e.max.x-g.x)*u,i=(e.min.x-g.x)*u),h>=0?(s=(e.min.y-g.y)*h,o=(e.max.y-g.y)*h):(s=(e.max.y-g.y)*h,o=(e.min.y-g.y)*h),n>o||s>i||((s>n||isNaN(n))&&(n=s),(o<i||isNaN(i))&&(i=o),p>=0?(a=(e.min.z-g.z)*p,l=(e.max.z-g.z)*p):(a=(e.max.z-g.z)*p,l=(e.min.z-g.z)*p),n>l||a>i)||((a>n||n!==n)&&(n=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return this.intersectBox(e,pl)!==null}intersectTriangle(e,t,n,i,s){h_.subVectors(t,e),G0.subVectors(n,e),f_.crossVectors(h_,G0);let o=this.direction.dot(f_),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Ec.subVectors(this.origin,e);const l=a*this.direction.dot(G0.crossVectors(Ec,G0));if(l<0)return null;const u=a*this.direction.dot(h_.cross(Ec));if(u<0||l+u>o)return null;const h=-a*Ec.dot(f_);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Jt{constructor(e,t,n,i,s,o,a,l,u,h,p,g,y,_,A,b){Jt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,i,s,o,a,l,u,h,p,g,y,_,A,b)}set(e,t,n,i,s,o,a,l,u,h,p,g,y,_,A,b){const w=this.elements;return w[0]=e,w[4]=t,w[8]=n,w[12]=i,w[1]=s,w[5]=o,w[9]=a,w[13]=l,w[2]=u,w[6]=h,w[10]=p,w[14]=g,w[3]=y,w[7]=_,w[11]=A,w[15]=b,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Jt().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/mf.setFromMatrixColumn(e,0).length(),s=1/mf.setFromMatrixColumn(e,1).length(),o=1/mf.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,s=e.z,o=Math.cos(n),a=Math.sin(n),l=Math.cos(i),u=Math.sin(i),h=Math.cos(s),p=Math.sin(s);if(e.order==="XYZ"){const g=o*h,y=o*p,_=a*h,A=a*p;t[0]=l*h,t[4]=-l*p,t[8]=u,t[1]=y+_*u,t[5]=g-A*u,t[9]=-a*l,t[2]=A-g*u,t[6]=_+y*u,t[10]=o*l}else if(e.order==="YXZ"){const g=l*h,y=l*p,_=u*h,A=u*p;t[0]=g+A*a,t[4]=_*a-y,t[8]=o*u,t[1]=o*p,t[5]=o*h,t[9]=-a,t[2]=y*a-_,t[6]=A+g*a,t[10]=o*l}else if(e.order==="ZXY"){const g=l*h,y=l*p,_=u*h,A=u*p;t[0]=g-A*a,t[4]=-o*p,t[8]=_+y*a,t[1]=y+_*a,t[5]=o*h,t[9]=A-g*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const g=o*h,y=o*p,_=a*h,A=a*p;t[0]=l*h,t[4]=_*u-y,t[8]=g*u+A,t[1]=l*p,t[5]=A*u+g,t[9]=y*u-_,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const g=o*l,y=o*u,_=a*l,A=a*u;t[0]=l*h,t[4]=A-g*p,t[8]=_*p+y,t[1]=p,t[5]=o*h,t[9]=-a*h,t[2]=-u*h,t[6]=y*p+_,t[10]=g-A*p}else if(e.order==="XZY"){const g=o*l,y=o*u,_=a*l,A=a*u;t[0]=l*h,t[4]=-p,t[8]=u*h,t[1]=g*p+A,t[5]=o*h,t[9]=y*p-_,t[2]=_*p-y,t[6]=a*h,t[10]=A*p+g}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(ZF,e,$F)}lookAt(e,t,n){const i=this.elements;return Gs.subVectors(e,t),Gs.lengthSq()===0&&(Gs.z=1),Gs.normalize(),Mc.crossVectors(n,Gs),Mc.lengthSq()===0&&(Math.abs(n.z)===1?Gs.x+=1e-4:Gs.z+=1e-4,Gs.normalize(),Mc.crossVectors(n,Gs)),Mc.normalize(),V0.crossVectors(Gs,Mc),i[0]=Mc.x,i[4]=V0.x,i[8]=Gs.x,i[1]=Mc.y,i[5]=V0.y,i[9]=Gs.y,i[2]=Mc.z,i[6]=V0.z,i[10]=Gs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,o=n[0],a=n[4],l=n[8],u=n[12],h=n[1],p=n[5],g=n[9],y=n[13],_=n[2],A=n[6],b=n[10],w=n[14],C=n[3],E=n[7],R=n[11],L=n[15],D=i[0],j=i[4],O=i[8],I=i[12],U=i[1],V=i[5],ee=i[9],te=i[13],ne=i[2],le=i[6],de=i[10],ie=i[14],J=i[3],Q=i[7],H=i[11],X=i[15];return s[0]=o*D+a*U+l*ne+u*J,s[4]=o*j+a*V+l*le+u*Q,s[8]=o*O+a*ee+l*de+u*H,s[12]=o*I+a*te+l*ie+u*X,s[1]=h*D+p*U+g*ne+y*J,s[5]=h*j+p*V+g*le+y*Q,s[9]=h*O+p*ee+g*de+y*H,s[13]=h*I+p*te+g*ie+y*X,s[2]=_*D+A*U+b*ne+w*J,s[6]=_*j+A*V+b*le+w*Q,s[10]=_*O+A*ee+b*de+w*H,s[14]=_*I+A*te+b*ie+w*X,s[3]=C*D+E*U+R*ne+L*J,s[7]=C*j+E*V+R*le+L*Q,s[11]=C*O+E*ee+R*de+L*H,s[15]=C*I+E*te+R*ie+L*X,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],h=e[2],p=e[6],g=e[10],y=e[14],_=e[3],A=e[7],b=e[11],w=e[15];return _*(+s*l*p-i*u*p-s*a*g+n*u*g+i*a*y-n*l*y)+A*(+t*l*y-t*u*g+s*o*g-i*o*y+i*u*h-s*l*h)+b*(+t*u*p-t*a*y-s*o*p+n*o*y+s*a*h-n*u*h)+w*(-i*a*h-t*l*p+t*a*g+i*o*p-n*o*g+n*l*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],p=e[9],g=e[10],y=e[11],_=e[12],A=e[13],b=e[14],w=e[15],C=p*b*u-A*g*u+A*l*y-a*b*y-p*l*w+a*g*w,E=_*g*u-h*b*u-_*l*y+o*b*y+h*l*w-o*g*w,R=h*A*u-_*p*u+_*a*y-o*A*y-h*a*w+o*p*w,L=_*p*l-h*A*l-_*a*g+o*A*g+h*a*b-o*p*b,D=t*C+n*E+i*R+s*L;if(D===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const j=1/D;return e[0]=C*j,e[1]=(A*g*s-p*b*s-A*i*y+n*b*y+p*i*w-n*g*w)*j,e[2]=(a*b*s-A*l*s+A*i*u-n*b*u-a*i*w+n*l*w)*j,e[3]=(p*l*s-a*g*s-p*i*u+n*g*u+a*i*y-n*l*y)*j,e[4]=E*j,e[5]=(h*b*s-_*g*s+_*i*y-t*b*y-h*i*w+t*g*w)*j,e[6]=(_*l*s-o*b*s-_*i*u+t*b*u+o*i*w-t*l*w)*j,e[7]=(o*g*s-h*l*s+h*i*u-t*g*u-o*i*y+t*l*y)*j,e[8]=R*j,e[9]=(_*p*s-h*A*s-_*n*y+t*A*y+h*n*w-t*p*w)*j,e[10]=(o*A*s-_*a*s+_*n*u-t*A*u-o*n*w+t*a*w)*j,e[11]=(h*a*s-o*p*s-h*n*u+t*p*u+o*n*y-t*a*y)*j,e[12]=L*j,e[13]=(h*A*i-_*p*i+_*n*g-t*A*g-h*n*b+t*p*b)*j,e[14]=(_*a*i-o*A*i-_*n*l+t*A*l+o*n*b-t*a*b)*j,e[15]=(o*p*i-h*a*i+h*n*l-t*p*l-o*n*g+t*a*g)*j,this}scale(e){const t=this.elements,n=e.x,i=e.y,s=e.z;return t[0]*=n,t[4]*=i,t[8]*=s,t[1]*=n,t[5]*=i,t[9]*=s,t[2]*=n,t[6]*=i,t[10]*=s,t[3]*=n,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),s=1-n,o=e.x,a=e.y,l=e.z,u=s*o,h=s*a;return this.set(u*o+n,u*a-i*l,u*l+i*a,0,u*a+i*l,h*a+n,h*l-i*o,0,u*l-i*a,h*l+i*o,s*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,s,o){return this.set(1,n,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,u=s+s,h=o+o,p=a+a,g=s*u,y=s*h,_=s*p,A=o*h,b=o*p,w=a*p,C=l*u,E=l*h,R=l*p,L=n.x,D=n.y,j=n.z;return i[0]=(1-(A+w))*L,i[1]=(y+R)*L,i[2]=(_-E)*L,i[3]=0,i[4]=(y-R)*D,i[5]=(1-(g+w))*D,i[6]=(b+C)*D,i[7]=0,i[8]=(_+E)*j,i[9]=(b-C)*j,i[10]=(1-(g+A))*j,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let s=mf.set(i[0],i[1],i[2]).length();const o=mf.set(i[4],i[5],i[6]).length(),a=mf.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Vo.copy(this);const u=1/s,h=1/o,p=1/a;return Vo.elements[0]*=u,Vo.elements[1]*=u,Vo.elements[2]*=u,Vo.elements[4]*=h,Vo.elements[5]*=h,Vo.elements[6]*=h,Vo.elements[8]*=p,Vo.elements[9]*=p,Vo.elements[10]*=p,t.setFromRotationMatrix(Vo),n.x=s,n.y=o,n.z=a,this}makePerspective(e,t,n,i,s,o,a=Ra){const l=this.elements,u=2*s/(t-e),h=2*s/(n-i),p=(t+e)/(t-e),g=(n+i)/(n-i);let y,_;if(a===Ra)y=-(o+s)/(o-s),_=-2*o*s/(o-s);else if(a===ig)y=-o/(o-s),_=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=p,l[12]=0,l[1]=0,l[5]=h,l[9]=g,l[13]=0,l[2]=0,l[6]=0,l[10]=y,l[14]=_,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,i,s,o,a=Ra){const l=this.elements,u=1/(t-e),h=1/(n-i),p=1/(o-s),g=(t+e)*u,y=(n+i)*h;let _,A;if(a===Ra)_=(o+s)*p,A=-2*p;else if(a===ig)_=s*p,A=-1*p;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-g,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-y,l[2]=0,l[6]=0,l[10]=A,l[14]=-_,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const mf=new q,Vo=new Jt,ZF=new q(0,0,0),$F=new q(1,1,1),Mc=new q,V0=new q,Gs=new q,BE=new Jt,kE=new ui;class Wd{constructor(e=0,t=0,n=0,i=Wd.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],u=i[5],h=i[9],p=i[2],g=i[6],y=i[10];switch(t){case"XYZ":this._y=Math.asin(Sr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,y),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(g,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Sr(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,y),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-p,s),this._z=0);break;case"ZXY":this._x=Math.asin(Sr(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-p,y),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Sr(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(g,y),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Sr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-p,s)):(this._x=0,this._y=Math.atan2(a,y));break;case"XZY":this._z=Math.asin(-Sr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(g,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return BE.makeRotationFromQuaternion(e),this.setFromRotationMatrix(BE,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return kE.setFromEuler(this),this.setFromQuaternion(kE,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Wd.DEFAULT_ORDER="XYZ";class Cd{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let eO=0;const DE=new q,gf=new ui,ml=new Jt,W0=new q,dm=new q,tO=new q,nO=new ui,FE=new q(1,0,0),OE=new q(0,1,0),UE=new q(0,0,1),rO={type:"added"},jE={type:"removed"};class Cn extends Dl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:eO++}),this.uuid=Xs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Cn.DEFAULT_UP.clone();const e=new q,t=new Wd,n=new ui,i=new q(1,1,1);function s(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Jt},normalMatrix:{value:new pn}}),this.matrix=new Jt,this.matrixWorld=new Jt,this.matrixAutoUpdate=Cn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Cn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Cd,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return gf.setFromAxisAngle(e,t),this.quaternion.multiply(gf),this}rotateOnWorldAxis(e,t){return gf.setFromAxisAngle(e,t),this.quaternion.premultiply(gf),this}rotateX(e){return this.rotateOnAxis(FE,e)}rotateY(e){return this.rotateOnAxis(OE,e)}rotateZ(e){return this.rotateOnAxis(UE,e)}translateOnAxis(e,t){return DE.copy(e).applyQuaternion(this.quaternion),this.position.add(DE.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(FE,e)}translateY(e){return this.translateOnAxis(OE,e)}translateZ(e){return this.translateOnAxis(UE,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ml.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?W0.copy(e):W0.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),dm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ml.lookAt(dm,W0,this.up):ml.lookAt(W0,dm,this.up),this.quaternion.setFromRotationMatrix(ml),i&&(ml.extractRotation(i.matrixWorld),gf.setFromRotationMatrix(ml),this.quaternion.premultiply(gf.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(rO)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(jE)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(jE)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),ml.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ml.multiply(e.parent.matrixWorld)),e.applyMatrix4(ml),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectsByProperty(e,t);o.length>0&&(n=n.concat(o))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(dm,e,tO),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(dm,nO,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++){const s=t[n];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,h=l.length;u<h;u++){const p=l[u];s(e.shapes,p)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),h=o(e.images),p=o(e.shapes),g=o(e.skeletons),y=o(e.animations),_=o(e.nodes);a.length>0&&(n.geometries=a),l.length>0&&(n.materials=l),u.length>0&&(n.textures=u),h.length>0&&(n.images=h),p.length>0&&(n.shapes=p),g.length>0&&(n.skeletons=g),y.length>0&&(n.animations=y),_.length>0&&(n.nodes=_)}return n.object=i,n;function o(a){const l=[];for(const u in a){const h=a[u];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}Cn.DEFAULT_UP=new q(0,1,0);Cn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Cn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Wo=new q,gl=new q,p_=new q,vl=new q,vf=new q,yf=new q,zE=new q,m_=new q,g_=new q,v_=new q;let J0=!1;class Ss{constructor(e=new q,t=new q,n=new q){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),Wo.subVectors(e,t),i.cross(Wo);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,n,i,s){Wo.subVectors(i,t),gl.subVectors(n,t),p_.subVectors(e,t);const o=Wo.dot(Wo),a=Wo.dot(gl),l=Wo.dot(p_),u=gl.dot(gl),h=gl.dot(p_),p=o*u-a*a;if(p===0)return s.set(-2,-1,-1);const g=1/p,y=(u*l-a*h)*g,_=(o*h-a*l)*g;return s.set(1-y-_,_,y)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,vl),vl.x>=0&&vl.y>=0&&vl.x+vl.y<=1}static getUV(e,t,n,i,s,o,a,l){return J0===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),J0=!0),this.getInterpolation(e,t,n,i,s,o,a,l)}static getInterpolation(e,t,n,i,s,o,a,l){return this.getBarycoord(e,t,n,i,vl),l.setScalar(0),l.addScaledVector(s,vl.x),l.addScaledVector(o,vl.y),l.addScaledVector(a,vl.z),l}static isFrontFacing(e,t,n,i){return Wo.subVectors(n,t),gl.subVectors(e,t),Wo.cross(gl).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Wo.subVectors(this.c,this.b),gl.subVectors(this.a,this.b),Wo.cross(gl).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ss.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ss.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,s){return J0===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),J0=!0),Ss.getInterpolation(e,this.a,this.b,this.c,t,n,i,s)}getInterpolation(e,t,n,i,s){return Ss.getInterpolation(e,this.a,this.b,this.c,t,n,i,s)}containsPoint(e){return Ss.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ss.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,s=this.c;let o,a;vf.subVectors(i,n),yf.subVectors(s,n),m_.subVectors(e,n);const l=vf.dot(m_),u=yf.dot(m_);if(l<=0&&u<=0)return t.copy(n);g_.subVectors(e,i);const h=vf.dot(g_),p=yf.dot(g_);if(h>=0&&p<=h)return t.copy(i);const g=l*p-h*u;if(g<=0&&l>=0&&h<=0)return o=l/(l-h),t.copy(n).addScaledVector(vf,o);v_.subVectors(e,s);const y=vf.dot(v_),_=yf.dot(v_);if(_>=0&&y<=_)return t.copy(s);const A=y*u-l*_;if(A<=0&&u>=0&&_<=0)return a=u/(u-_),t.copy(n).addScaledVector(yf,a);const b=h*_-y*p;if(b<=0&&p-h>=0&&y-_>=0)return zE.subVectors(s,i),a=(p-h)/(p-h+(y-_)),t.copy(i).addScaledVector(zE,a);const w=1/(b+A+g);return o=A*w,a=g*w,t.copy(n).addScaledVector(vf,o).addScaledVector(yf,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let iO=0;class Jr extends Dl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:iO++}),this.uuid=Xs(),this.name="",this.type="Material",this.blending=Ad,this.side=Fa,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=AA,this.blendDst=SA,this.blendEquation=dd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ly,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=pP,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Zv,this.stencilZFail=Zv,this.stencilZPass=Zv,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Ad&&(n.blending=this.blending),this.side!==Fa&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=this.alphaHash),this.alphaToCoverage===!0&&(n.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(n.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=this.flatShading),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let s=0;s!==i;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const MP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Jo={h:0,s:0,l:0},X0={h:0,s:0,l:0};function y_(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}class mt{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=nn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,po.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=po.workingColorSpace){return this.r=e,this.g=t,this.b=n,po.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=po.workingColorSpace){if(e=OA(e,1),t=Sr(t,0,1),n=Sr(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=y_(o,s,e+1/3),this.g=y_(o,s,e),this.b=y_(o,s,e-1/3)}return po.toWorkingColorSpace(this,i),this}setStyle(e,t=nn){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=nn){const n=MP[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Kf(e.r),this.g=Kf(e.g),this.b=Kf(e.b),this}copyLinearToSRGB(e){return this.r=o_(e.r),this.g=o_(e.g),this.b=o_(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=nn){return po.fromWorkingColorSpace(Oi.copy(this),e),Math.round(Sr(Oi.r*255,0,255))*65536+Math.round(Sr(Oi.g*255,0,255))*256+Math.round(Sr(Oi.b*255,0,255))}getHexString(e=nn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=po.workingColorSpace){po.fromWorkingColorSpace(Oi.copy(this),t);const n=Oi.r,i=Oi.g,s=Oi.b,o=Math.max(n,i,s),a=Math.min(n,i,s);let l,u;const h=(a+o)/2;if(a===o)l=0,u=0;else{const p=o-a;switch(u=h<=.5?p/(o+a):p/(2-o-a),o){case n:l=(i-s)/p+(i<s?6:0);break;case i:l=(s-n)/p+2;break;case s:l=(n-i)/p+4;break}l/=6}return e.h=l,e.s=u,e.l=h,e}getRGB(e,t=po.workingColorSpace){return po.fromWorkingColorSpace(Oi.copy(this),t),e.r=Oi.r,e.g=Oi.g,e.b=Oi.b,e}getStyle(e=nn){po.fromWorkingColorSpace(Oi.copy(this),e);const t=Oi.r,n=Oi.g,i=Oi.b;return e!==nn?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(i*255)})`}offsetHSL(e,t,n){return this.getHSL(Jo),Jo.h+=e,Jo.s+=t,Jo.l+=n,this.setHSL(Jo.h,Jo.s,Jo.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Jo),e.getHSL(X0);const n=Hm(Jo.h,X0.h,t),i=Hm(Jo.s,X0.s,t),s=Hm(Jo.l,X0.l,t);return this.setHSL(n,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*i,this.g=s[1]*t+s[4]*n+s[7]*i,this.b=s[2]*t+s[5]*n+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Oi=new mt;mt.NAMES=MP;class Cs extends Jr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new mt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=yg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Al=sO();function sO(){const r=new ArrayBuffer(4),e=new Float32Array(r),t=new Uint32Array(r),n=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(n[l]=0,n[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(n[l]=1024>>-u-14,n[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(n[l]=u+15<<10,n[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(n[l]=31744,n[l|256]=64512,i[l]=24,i[l|256]=24):(n[l]=31744,n[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,h=0;for(;(u&8388608)===0;)u<<=1,h-=8388608;u&=-8388609,h+=947912704,s[l]=u|h}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function As(r){Math.abs(r)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),r=Sr(r,-65504,65504),Al.floatView[0]=r;const e=Al.uint32View[0],t=e>>23&511;return Al.baseTable[t]+((e&8388607)>>Al.shiftTable[t])}function Bm(r){const e=r>>10;return Al.uint32View[0]=Al.mantissaTable[Al.offsetTable[e]+(r&1023)]+Al.exponentTable[e],Al.floatView[0]}const vd={toHalfFloat:As,fromHalfFloat:Bm},Gr=new q,K0=new We;class Sn{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=rg,this.updateRange={offset:0,count:-1},this.gpuType=ei,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)K0.fromBufferAttribute(this,t),K0.applyMatrix3(e),this.setXY(t,K0.x,K0.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Gr.fromBufferAttribute(this,t),Gr.applyMatrix3(e),this.setXYZ(t,Gr.x,Gr.y,Gr.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Gr.fromBufferAttribute(this,t),Gr.applyMatrix4(e),this.setXYZ(t,Gr.x,Gr.y,Gr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Gr.fromBufferAttribute(this,t),Gr.applyNormalMatrix(e),this.setXYZ(t,Gr.x,Gr.y,Gr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Gr.fromBufferAttribute(this,t),Gr.transformDirection(e),this.setXYZ(t,Gr.x,Gr.y,Gr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Ms(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=un(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ms(t,this.array)),t}setX(e,t){return this.normalized&&(t=un(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ms(t,this.array)),t}setY(e,t){return this.normalized&&(t=un(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ms(t,this.array)),t}setZ(e,t){return this.normalized&&(t=un(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ms(t,this.array)),t}setW(e,t){return this.normalized&&(t=un(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=un(t,this.array),n=un(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=un(t,this.array),n=un(n,this.array),i=un(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=un(t,this.array),n=un(n,this.array),i=un(i,this.array),s=un(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==rg&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class oO extends Sn{constructor(e,t,n){super(new Int8Array(e),t,n)}}class aO extends Sn{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class lO extends Sn{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class cO extends Sn{constructor(e,t,n){super(new Int16Array(e),t,n)}}class zA extends Sn{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class uO extends Sn{constructor(e,t,n){super(new Int32Array(e),t,n)}}class HA extends Sn{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class dO extends Sn{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=Bm(this.array[e*this.itemSize]);return this.normalized&&(t=Ms(t,this.array)),t}setX(e,t){return this.normalized&&(t=un(t,this.array)),this.array[e*this.itemSize]=As(t),this}getY(e){let t=Bm(this.array[e*this.itemSize+1]);return this.normalized&&(t=Ms(t,this.array)),t}setY(e,t){return this.normalized&&(t=un(t,this.array)),this.array[e*this.itemSize+1]=As(t),this}getZ(e){let t=Bm(this.array[e*this.itemSize+2]);return this.normalized&&(t=Ms(t,this.array)),t}setZ(e,t){return this.normalized&&(t=un(t,this.array)),this.array[e*this.itemSize+2]=As(t),this}getW(e){let t=Bm(this.array[e*this.itemSize+3]);return this.normalized&&(t=Ms(t,this.array)),t}setW(e,t){return this.normalized&&(t=un(t,this.array)),this.array[e*this.itemSize+3]=As(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=un(t,this.array),n=un(n,this.array)),this.array[e+0]=As(t),this.array[e+1]=As(n),this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=un(t,this.array),n=un(n,this.array),i=un(i,this.array)),this.array[e+0]=As(t),this.array[e+1]=As(n),this.array[e+2]=As(i),this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=un(t,this.array),n=un(n,this.array),i=un(i,this.array),s=un(s,this.array)),this.array[e+0]=As(t),this.array[e+1]=As(n),this.array[e+2]=As(i),this.array[e+3]=As(s),this}}class Rt extends Sn{constructor(e,t,n){super(new Float32Array(e),t,n)}}class hO extends Sn{constructor(e,t,n){super(new Float64Array(e),t,n)}}let fO=0;const uo=new Jt,x_=new Cn,xf=new q,Vs=new as,hm=new as,li=new q;class rn extends Dl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:fO++}),this.uuid=Xs(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(SP(e)?HA:zA)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new pn().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return uo.makeRotationFromQuaternion(e),this.applyMatrix4(uo),this}rotateX(e){return uo.makeRotationX(e),this.applyMatrix4(uo),this}rotateY(e){return uo.makeRotationY(e),this.applyMatrix4(uo),this}rotateZ(e){return uo.makeRotationZ(e),this.applyMatrix4(uo),this}translate(e,t,n){return uo.makeTranslation(e,t,n),this.applyMatrix4(uo),this}scale(e,t,n){return uo.makeScale(e,t,n),this.applyMatrix4(uo),this}lookAt(e){return x_.lookAt(e),x_.updateMatrix(),this.applyMatrix4(x_.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(xf).negate(),this.translate(xf.x,xf.y,xf.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const s=e[n];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Rt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new as);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new q(-1/0,-1/0,-1/0),new q(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const s=t[n];Vs.setFromBufferAttribute(s),this.morphTargetsRelative?(li.addVectors(this.boundingBox.min,Vs.min),this.boundingBox.expandByPoint(li),li.addVectors(this.boundingBox.max,Vs.max),this.boundingBox.expandByPoint(li)):(this.boundingBox.expandByPoint(Vs.min),this.boundingBox.expandByPoint(Vs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Is);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new q,1/0);return}if(e){const n=this.boundingSphere.center;if(Vs.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];hm.setFromBufferAttribute(a),this.morphTargetsRelative?(li.addVectors(Vs.min,hm.min),Vs.expandByPoint(li),li.addVectors(Vs.max,hm.max),Vs.expandByPoint(li)):(Vs.expandByPoint(hm.min),Vs.expandByPoint(hm.max))}Vs.getCenter(n);let i=0;for(let s=0,o=e.count;s<o;s++)li.fromBufferAttribute(e,s),i=Math.max(i,n.distanceToSquared(li));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let u=0,h=a.count;u<h;u++)li.fromBufferAttribute(a,u),l&&(xf.fromBufferAttribute(e,u),li.add(xf)),i=Math.max(i,n.distanceToSquared(li))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Sn(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,u=[],h=[];for(let U=0;U<a;U++)u[U]=new q,h[U]=new q;const p=new q,g=new q,y=new q,_=new We,A=new We,b=new We,w=new q,C=new q;function E(U,V,ee){p.fromArray(i,U*3),g.fromArray(i,V*3),y.fromArray(i,ee*3),_.fromArray(o,U*2),A.fromArray(o,V*2),b.fromArray(o,ee*2),g.sub(p),y.sub(p),A.sub(_),b.sub(_);const te=1/(A.x*b.y-b.x*A.y);isFinite(te)&&(w.copy(g).multiplyScalar(b.y).addScaledVector(y,-A.y).multiplyScalar(te),C.copy(y).multiplyScalar(A.x).addScaledVector(g,-b.x).multiplyScalar(te),u[U].add(w),u[V].add(w),u[ee].add(w),h[U].add(C),h[V].add(C),h[ee].add(C))}let R=this.groups;R.length===0&&(R=[{start:0,count:n.length}]);for(let U=0,V=R.length;U<V;++U){const ee=R[U],te=ee.start,ne=ee.count;for(let le=te,de=te+ne;le<de;le+=3)E(n[le+0],n[le+1],n[le+2])}const L=new q,D=new q,j=new q,O=new q;function I(U){j.fromArray(s,U*3),O.copy(j);const V=u[U];L.copy(V),L.sub(j.multiplyScalar(j.dot(V))).normalize(),D.crossVectors(O,V);const te=D.dot(h[U])<0?-1:1;l[U*4]=L.x,l[U*4+1]=L.y,l[U*4+2]=L.z,l[U*4+3]=te}for(let U=0,V=R.length;U<V;++U){const ee=R[U],te=ee.start,ne=ee.count;for(let le=te,de=te+ne;le<de;le+=3)I(n[le+0]),I(n[le+1]),I(n[le+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Sn(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let g=0,y=n.count;g<y;g++)n.setXYZ(g,0,0,0);const i=new q,s=new q,o=new q,a=new q,l=new q,u=new q,h=new q,p=new q;if(e)for(let g=0,y=e.count;g<y;g+=3){const _=e.getX(g+0),A=e.getX(g+1),b=e.getX(g+2);i.fromBufferAttribute(t,_),s.fromBufferAttribute(t,A),o.fromBufferAttribute(t,b),h.subVectors(o,s),p.subVectors(i,s),h.cross(p),a.fromBufferAttribute(n,_),l.fromBufferAttribute(n,A),u.fromBufferAttribute(n,b),a.add(h),l.add(h),u.add(h),n.setXYZ(_,a.x,a.y,a.z),n.setXYZ(A,l.x,l.y,l.z),n.setXYZ(b,u.x,u.y,u.z)}else for(let g=0,y=t.count;g<y;g+=3)i.fromBufferAttribute(t,g+0),s.fromBufferAttribute(t,g+1),o.fromBufferAttribute(t,g+2),h.subVectors(o,s),p.subVectors(i,s),h.cross(p),n.setXYZ(g+0,h.x,h.y,h.z),n.setXYZ(g+1,h.x,h.y,h.z),n.setXYZ(g+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)li.fromBufferAttribute(e,t),li.normalize(),e.setXYZ(t,li.x,li.y,li.z)}toNonIndexed(){function e(a,l){const u=a.array,h=a.itemSize,p=a.normalized,g=new u.constructor(l.length*h);let y=0,_=0;for(let A=0,b=l.length;A<b;A++){a.isInterleavedBufferAttribute?y=l[A]*a.data.stride+a.offset:y=l[A]*h;for(let w=0;w<h;w++)g[_++]=u[y++]}return new Sn(g,h,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new rn,n=this.index.array,i=this.attributes;for(const a in i){const l=i[a],u=e(l,n);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let h=0,p=u.length;h<p;h++){const g=u[h],y=e(g,n);l.push(y)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n){const u=n[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],h=[];for(let p=0,g=u.length;p<g;p++){const y=u[p];h.push(y.toJSON(e.data))}h.length>0&&(i[l]=h,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const i=e.attributes;for(const u in i){const h=i[u];this.setAttribute(u,h.clone(t))}const s=e.morphAttributes;for(const u in s){const h=[],p=s[u];for(let g=0,y=p.length;g<y;g++)h.push(p[g].clone(t));this.morphAttributes[u]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,h=o.length;u<h;u++){const p=o[u];this.addGroup(p.start,p.count,p.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const HE=new Jt,Ku=new Vd,Y0=new Is,GE=new q,_f=new q,wf=new q,bf=new q,__=new q,q0=new q,Q0=new We,Z0=new We,$0=new We,VE=new q,WE=new q,JE=new q,ev=new q,tv=new q;class hr extends Cn{constructor(e=new rn,t=new Cs){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){q0.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const h=a[l],p=s[l];h!==0&&(__.fromBufferAttribute(p,e),o?q0.addScaledVector(__,h):q0.addScaledVector(__.sub(t),h))}t.add(q0)}return t}raycast(e,t){const n=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Y0.copy(n.boundingSphere),Y0.applyMatrix4(s),Ku.copy(e.ray).recast(e.near),!(Y0.containsPoint(Ku.origin)===!1&&(Ku.intersectSphere(Y0,GE)===null||Ku.origin.distanceToSquared(GE)>(e.far-e.near)**2))&&(HE.copy(s).invert(),Ku.copy(e.ray).applyMatrix4(HE),!(n.boundingBox!==null&&Ku.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,Ku)))}_computeIntersections(e,t,n){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,u=s.attributes.uv,h=s.attributes.uv1,p=s.attributes.normal,g=s.groups,y=s.drawRange;if(a!==null)if(Array.isArray(o))for(let _=0,A=g.length;_<A;_++){const b=g[_],w=o[b.materialIndex],C=Math.max(b.start,y.start),E=Math.min(a.count,Math.min(b.start+b.count,y.start+y.count));for(let R=C,L=E;R<L;R+=3){const D=a.getX(R),j=a.getX(R+1),O=a.getX(R+2);i=nv(this,w,e,n,u,h,p,D,j,O),i&&(i.faceIndex=Math.floor(R/3),i.face.materialIndex=b.materialIndex,t.push(i))}}else{const _=Math.max(0,y.start),A=Math.min(a.count,y.start+y.count);for(let b=_,w=A;b<w;b+=3){const C=a.getX(b),E=a.getX(b+1),R=a.getX(b+2);i=nv(this,o,e,n,u,h,p,C,E,R),i&&(i.faceIndex=Math.floor(b/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let _=0,A=g.length;_<A;_++){const b=g[_],w=o[b.materialIndex],C=Math.max(b.start,y.start),E=Math.min(l.count,Math.min(b.start+b.count,y.start+y.count));for(let R=C,L=E;R<L;R+=3){const D=R,j=R+1,O=R+2;i=nv(this,w,e,n,u,h,p,D,j,O),i&&(i.faceIndex=Math.floor(R/3),i.face.materialIndex=b.materialIndex,t.push(i))}}else{const _=Math.max(0,y.start),A=Math.min(l.count,y.start+y.count);for(let b=_,w=A;b<w;b+=3){const C=b,E=b+1,R=b+2;i=nv(this,o,e,n,u,h,p,C,E,R),i&&(i.faceIndex=Math.floor(b/3),t.push(i))}}}}function pO(r,e,t,n,i,s,o,a){let l;if(e.side===is?l=n.intersectTriangle(o,s,i,!0,a):l=n.intersectTriangle(i,s,o,e.side===Fa,a),l===null)return null;tv.copy(a),tv.applyMatrix4(r.matrixWorld);const u=t.ray.origin.distanceTo(tv);return u<t.near||u>t.far?null:{distance:u,point:tv.clone(),object:r}}function nv(r,e,t,n,i,s,o,a,l,u){r.getVertexPosition(a,_f),r.getVertexPosition(l,wf),r.getVertexPosition(u,bf);const h=pO(r,e,t,n,_f,wf,bf,ev);if(h){i&&(Q0.fromBufferAttribute(i,a),Z0.fromBufferAttribute(i,l),$0.fromBufferAttribute(i,u),h.uv=Ss.getInterpolation(ev,_f,wf,bf,Q0,Z0,$0,new We)),s&&(Q0.fromBufferAttribute(s,a),Z0.fromBufferAttribute(s,l),$0.fromBufferAttribute(s,u),h.uv1=Ss.getInterpolation(ev,_f,wf,bf,Q0,Z0,$0,new We),h.uv2=h.uv1),o&&(VE.fromBufferAttribute(o,a),WE.fromBufferAttribute(o,l),JE.fromBufferAttribute(o,u),h.normal=Ss.getInterpolation(ev,_f,wf,bf,VE,WE,JE,new q),h.normal.dot(n.direction)>0&&h.normal.multiplyScalar(-1));const p={a,b:l,c:u,normal:new q,materialIndex:0};Ss.getNormal(_f,wf,bf,p.normal),h.face=p}return h}class nu extends rn{constructor(e=1,t=1,n=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],h=[],p=[];let g=0,y=0;_("z","y","x",-1,-1,n,t,e,o,s,0),_("z","y","x",1,-1,n,t,-e,o,s,1),_("x","z","y",1,1,e,n,t,i,o,2),_("x","z","y",1,-1,e,n,-t,i,o,3),_("x","y","z",1,-1,e,t,n,i,s,4),_("x","y","z",-1,-1,e,t,-n,i,s,5),this.setIndex(l),this.setAttribute("position",new Rt(u,3)),this.setAttribute("normal",new Rt(h,3)),this.setAttribute("uv",new Rt(p,2));function _(A,b,w,C,E,R,L,D,j,O,I){const U=R/j,V=L/O,ee=R/2,te=L/2,ne=D/2,le=j+1,de=O+1;let ie=0,J=0;const Q=new q;for(let H=0;H<de;H++){const X=H*V-te;for(let Z=0;Z<le;Z++){const ye=Z*U-ee;Q[A]=ye*C,Q[b]=X*E,Q[w]=ne,u.push(Q.x,Q.y,Q.z),Q[A]=0,Q[b]=0,Q[w]=D>0?1:-1,h.push(Q.x,Q.y,Q.z),p.push(Z/j),p.push(1-H/O),ie+=1}}for(let H=0;H<O;H++)for(let X=0;X<j;X++){const Z=g+X+le*H,ye=g+X+le*(H+1),be=g+(X+1)+le*(H+1),Le=g+(X+1)+le*H;l.push(Z,ye,Le),l.push(ye,be,Le),J+=6}a.addGroup(y,J,I),y+=J,g+=ie}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nu(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function rp(r){const e={};for(const t in r){e[t]={};for(const n in r[t]){const i=r[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function es(r){const e={};for(let t=0;t<r.length;t++){const n=rp(r[t]);for(const i in n)e[i]=n[i]}return e}function mO(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}function CP(r){return r.getRenderTarget()===null?r.outputColorSpace:Rs}const hy={clone:rp,merge:es};var gO=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,vO=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ss extends Jr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=gO,this.fragmentShader=vO,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=rp(e.uniforms),this.uniformsGroups=mO(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class _g extends Cn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Jt,this.projectionMatrix=new Jt,this.projectionMatrixInverse=new Jt,this.coordinateSystem=Ra}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class ar extends _g{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=np*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Md*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return np*2*Math.atan(Math.tan(Md*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Md*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*n/u,i*=o.width/l,n*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Af=-90,Sf=1;class GA extends Cn{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null;const i=new ar(Af,Sf,e,t);i.layers=this.layers,this.add(i);const s=new ar(Af,Sf,e,t);s.layers=this.layers,this.add(s);const o=new ar(Af,Sf,e,t);o.layers=this.layers,this.add(o);const a=new ar(Af,Sf,e,t);a.layers=this.layers,this.add(a);const l=new ar(Af,Sf,e,t);l.layers=this.layers,this.add(l);const u=new ar(Af,Sf,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,s,o,a,l]=t;for(const u of t)this.remove(u);if(e===Ra)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===ig)n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const n=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[i,s,o,a,l,u]=this.children,h=e.getRenderTarget(),p=e.xr.enabled;e.xr.enabled=!1;const g=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,s),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,l),n.texture.generateMipmaps=g,e.setRenderTarget(n,5),e.render(t,u),e.setRenderTarget(h),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class wg extends In{constructor(e,t,n,i,s,o,a,l,u,h){e=e!==void 0?e:[],t=t!==void 0?t:Oa,super(e,t,n,i,s,o,a,l,u,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class By extends Ys{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];t.encoding!==void 0&&(Gm("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Ml?nn:zc),this.texture=new wg(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Pn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new nu(5,5,5),s=new ss({name:"CubemapFromEquirect",uniforms:rp(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:is,blending:La});s.uniforms.tEquirect.value=t;const o=new hr(i,s),a=t.minFilter;return t.minFilter===ea&&(t.minFilter=Pn),new GA(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,i);e.setRenderTarget(s)}}const w_=new q,yO=new q,xO=new pn;class bl{constructor(e=new q(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=w_.subVectors(n,t).cross(yO.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(w_),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||xO.getNormalMatrix(e),i=this.coplanarPoint(w_).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Yu=new Is,rv=new q;class ky{constructor(e=new bl,t=new bl,n=new bl,i=new bl,s=new bl,o=new bl){this.planes=[e,t,n,i,s,o]}set(e,t,n,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=Ra){const n=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],u=i[4],h=i[5],p=i[6],g=i[7],y=i[8],_=i[9],A=i[10],b=i[11],w=i[12],C=i[13],E=i[14],R=i[15];if(n[0].setComponents(l-s,g-u,b-y,R-w).normalize(),n[1].setComponents(l+s,g+u,b+y,R+w).normalize(),n[2].setComponents(l+o,g+h,b+_,R+C).normalize(),n[3].setComponents(l-o,g-h,b-_,R-C).normalize(),n[4].setComponents(l-a,g-p,b-A,R-E).normalize(),t===Ra)n[5].setComponents(l+a,g+p,b+A,R+E).normalize();else if(t===ig)n[5].setComponents(a,p,A,E).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Yu.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Yu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Yu)}intersectsSprite(e){return Yu.center.set(0,0,0),Yu.radius=.7071067811865476,Yu.applyMatrix4(e.matrixWorld),this.intersectsSphere(Yu)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(rv.x=i.normal.x>0?e.max.x:e.min.x,rv.y=i.normal.y>0?e.max.y:e.min.y,rv.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(rv)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function TP(){let r=null,e=!1,t=null,n=null;function i(s,o){t(s,o),n=r.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(n=r.requestAnimationFrame(i),e=!0)},stop:function(){r.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){r=s}}}function _O(r,e){const t=e.isWebGL2,n=new WeakMap;function i(u,h){const p=u.array,g=u.usage,y=r.createBuffer();r.bindBuffer(h,y),r.bufferData(h,p,g),u.onUploadCallback();let _;if(p instanceof Float32Array)_=r.FLOAT;else if(p instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(t)_=r.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else _=r.UNSIGNED_SHORT;else if(p instanceof Int16Array)_=r.SHORT;else if(p instanceof Uint32Array)_=r.UNSIGNED_INT;else if(p instanceof Int32Array)_=r.INT;else if(p instanceof Int8Array)_=r.BYTE;else if(p instanceof Uint8Array)_=r.UNSIGNED_BYTE;else if(p instanceof Uint8ClampedArray)_=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:y,type:_,bytesPerElement:p.BYTES_PER_ELEMENT,version:u.version}}function s(u,h,p){const g=h.array,y=h.updateRange;r.bindBuffer(p,u),y.count===-1?r.bufferSubData(p,0,g):(t?r.bufferSubData(p,y.offset*g.BYTES_PER_ELEMENT,g,y.offset,y.count):r.bufferSubData(p,y.offset*g.BYTES_PER_ELEMENT,g.subarray(y.offset,y.offset+y.count)),y.count=-1),h.onUploadCallback()}function o(u){return u.isInterleavedBufferAttribute&&(u=u.data),n.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const h=n.get(u);h&&(r.deleteBuffer(h.buffer),n.delete(u))}function l(u,h){if(u.isGLBufferAttribute){const g=n.get(u);(!g||g.version<u.version)&&n.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const p=n.get(u);p===void 0?n.set(u,i(u,h)):p.version<u.version&&(s(p.buffer,u,h),p.version=u.version)}return{get:o,remove:a,update:l}}class ru extends rn{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(n),l=Math.floor(i),u=a+1,h=l+1,p=e/a,g=t/l,y=[],_=[],A=[],b=[];for(let w=0;w<h;w++){const C=w*g-o;for(let E=0;E<u;E++){const R=E*p-s;_.push(R,-C,0),A.push(0,0,1),b.push(E/a),b.push(1-w/l)}}for(let w=0;w<l;w++)for(let C=0;C<a;C++){const E=C+u*w,R=C+u*(w+1),L=C+1+u*(w+1),D=C+1+u*w;y.push(E,R,D),y.push(R,L,D)}this.setIndex(y),this.setAttribute("position",new Rt(_,3)),this.setAttribute("normal",new Rt(A,3)),this.setAttribute("uv",new Rt(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ru(e.width,e.height,e.widthSegments,e.heightSegments)}}var wO=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,bO=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,AO=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,SO=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,EO=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,MO=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,CO=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,TO=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,RO=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,PO=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,IO=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,LO=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,NO=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,BO=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,kO=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,DO=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,FO=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,OO=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,UO=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,jO=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,zO=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,HO=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,GO=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,VO=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,WO=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,JO=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,XO=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,KO=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,YO="gl_FragColor = linearToOutputTexel( gl_FragColor );",qO=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,QO=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,ZO=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,$O=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,eU=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,tU=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,nU=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,rU=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,iU=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,sU=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,oU=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,aU=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,lU=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,cU=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,uU=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,dU=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,hU=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,fU=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,pU=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,mU=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,gU=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,vU=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,yU=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,xU=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,_U=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,wU=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,bU=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,AU=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,SU=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,EU=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,MU=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,CU=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,TU=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,RU=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,PU=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,IU=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,LU=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,NU=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,BU=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,kU=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,DU=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,FU=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,OU=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,UU=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,jU=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,zU=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,HU=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,GU=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,VU=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,WU=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,JU=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,XU=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,KU=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,YU=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,qU=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,QU=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,ZU=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,$U=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,e4=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,t4=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,n4=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,r4=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,i4=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,s4=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,o4=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,a4=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,l4=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,c4=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,u4=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,d4=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,h4=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,f4=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,p4=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,m4=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,g4=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,v4=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const y4=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,x4=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,_4=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,w4=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,b4=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,A4=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,S4=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,E4=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,M4=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,C4=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,T4=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,R4=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,P4=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,I4=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,L4=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,N4=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,B4=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,k4=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,D4=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,F4=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,O4=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,U4=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,j4=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,z4=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,H4=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,G4=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,V4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,W4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,J4=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,X4=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,K4=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Y4=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,q4=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Q4=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,cn={alphahash_fragment:wO,alphahash_pars_fragment:bO,alphamap_fragment:AO,alphamap_pars_fragment:SO,alphatest_fragment:EO,alphatest_pars_fragment:MO,aomap_fragment:CO,aomap_pars_fragment:TO,begin_vertex:RO,beginnormal_vertex:PO,bsdfs:IO,iridescence_fragment:LO,bumpmap_pars_fragment:NO,clipping_planes_fragment:BO,clipping_planes_pars_fragment:kO,clipping_planes_pars_vertex:DO,clipping_planes_vertex:FO,color_fragment:OO,color_pars_fragment:UO,color_pars_vertex:jO,color_vertex:zO,common:HO,cube_uv_reflection_fragment:GO,defaultnormal_vertex:VO,displacementmap_pars_vertex:WO,displacementmap_vertex:JO,emissivemap_fragment:XO,emissivemap_pars_fragment:KO,colorspace_fragment:YO,colorspace_pars_fragment:qO,envmap_fragment:QO,envmap_common_pars_fragment:ZO,envmap_pars_fragment:$O,envmap_pars_vertex:eU,envmap_physical_pars_fragment:hU,envmap_vertex:tU,fog_vertex:nU,fog_pars_vertex:rU,fog_fragment:iU,fog_pars_fragment:sU,gradientmap_pars_fragment:oU,lightmap_fragment:aU,lightmap_pars_fragment:lU,lights_lambert_fragment:cU,lights_lambert_pars_fragment:uU,lights_pars_begin:dU,lights_toon_fragment:fU,lights_toon_pars_fragment:pU,lights_phong_fragment:mU,lights_phong_pars_fragment:gU,lights_physical_fragment:vU,lights_physical_pars_fragment:yU,lights_fragment_begin:xU,lights_fragment_maps:_U,lights_fragment_end:wU,logdepthbuf_fragment:bU,logdepthbuf_pars_fragment:AU,logdepthbuf_pars_vertex:SU,logdepthbuf_vertex:EU,map_fragment:MU,map_pars_fragment:CU,map_particle_fragment:TU,map_particle_pars_fragment:RU,metalnessmap_fragment:PU,metalnessmap_pars_fragment:IU,morphcolor_vertex:LU,morphnormal_vertex:NU,morphtarget_pars_vertex:BU,morphtarget_vertex:kU,normal_fragment_begin:DU,normal_fragment_maps:FU,normal_pars_fragment:OU,normal_pars_vertex:UU,normal_vertex:jU,normalmap_pars_fragment:zU,clearcoat_normal_fragment_begin:HU,clearcoat_normal_fragment_maps:GU,clearcoat_pars_fragment:VU,iridescence_pars_fragment:WU,opaque_fragment:JU,packing:XU,premultiplied_alpha_fragment:KU,project_vertex:YU,dithering_fragment:qU,dithering_pars_fragment:QU,roughnessmap_fragment:ZU,roughnessmap_pars_fragment:$U,shadowmap_pars_fragment:e4,shadowmap_pars_vertex:t4,shadowmap_vertex:n4,shadowmask_pars_fragment:r4,skinbase_vertex:i4,skinning_pars_vertex:s4,skinning_vertex:o4,skinnormal_vertex:a4,specularmap_fragment:l4,specularmap_pars_fragment:c4,tonemapping_fragment:u4,tonemapping_pars_fragment:d4,transmission_fragment:h4,transmission_pars_fragment:f4,uv_pars_fragment:p4,uv_pars_vertex:m4,uv_vertex:g4,worldpos_vertex:v4,background_vert:y4,background_frag:x4,backgroundCube_vert:_4,backgroundCube_frag:w4,cube_vert:b4,cube_frag:A4,depth_vert:S4,depth_frag:E4,distanceRGBA_vert:M4,distanceRGBA_frag:C4,equirect_vert:T4,equirect_frag:R4,linedashed_vert:P4,linedashed_frag:I4,meshbasic_vert:L4,meshbasic_frag:N4,meshlambert_vert:B4,meshlambert_frag:k4,meshmatcap_vert:D4,meshmatcap_frag:F4,meshnormal_vert:O4,meshnormal_frag:U4,meshphong_vert:j4,meshphong_frag:z4,meshphysical_vert:H4,meshphysical_frag:G4,meshtoon_vert:V4,meshtoon_frag:W4,points_vert:J4,points_frag:X4,shadow_vert:K4,shadow_frag:Y4,sprite_vert:q4,sprite_frag:Q4},ht={common:{diffuse:{value:new mt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new pn},alphaMap:{value:null},alphaMapTransform:{value:new pn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new pn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new pn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new pn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new pn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new pn},normalScale:{value:new We(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new pn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new pn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new pn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new pn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new mt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new mt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new pn},alphaTest:{value:0},uvTransform:{value:new pn}},sprite:{diffuse:{value:new mt(16777215)},opacity:{value:1},center:{value:new We(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new pn},alphaMap:{value:null},alphaMapTransform:{value:new pn},alphaTest:{value:0}}},Qo={basic:{uniforms:es([ht.common,ht.specularmap,ht.envmap,ht.aomap,ht.lightmap,ht.fog]),vertexShader:cn.meshbasic_vert,fragmentShader:cn.meshbasic_frag},lambert:{uniforms:es([ht.common,ht.specularmap,ht.envmap,ht.aomap,ht.lightmap,ht.emissivemap,ht.bumpmap,ht.normalmap,ht.displacementmap,ht.fog,ht.lights,{emissive:{value:new mt(0)}}]),vertexShader:cn.meshlambert_vert,fragmentShader:cn.meshlambert_frag},phong:{uniforms:es([ht.common,ht.specularmap,ht.envmap,ht.aomap,ht.lightmap,ht.emissivemap,ht.bumpmap,ht.normalmap,ht.displacementmap,ht.fog,ht.lights,{emissive:{value:new mt(0)},specular:{value:new mt(1118481)},shininess:{value:30}}]),vertexShader:cn.meshphong_vert,fragmentShader:cn.meshphong_frag},standard:{uniforms:es([ht.common,ht.envmap,ht.aomap,ht.lightmap,ht.emissivemap,ht.bumpmap,ht.normalmap,ht.displacementmap,ht.roughnessmap,ht.metalnessmap,ht.fog,ht.lights,{emissive:{value:new mt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:cn.meshphysical_vert,fragmentShader:cn.meshphysical_frag},toon:{uniforms:es([ht.common,ht.aomap,ht.lightmap,ht.emissivemap,ht.bumpmap,ht.normalmap,ht.displacementmap,ht.gradientmap,ht.fog,ht.lights,{emissive:{value:new mt(0)}}]),vertexShader:cn.meshtoon_vert,fragmentShader:cn.meshtoon_frag},matcap:{uniforms:es([ht.common,ht.bumpmap,ht.normalmap,ht.displacementmap,ht.fog,{matcap:{value:null}}]),vertexShader:cn.meshmatcap_vert,fragmentShader:cn.meshmatcap_frag},points:{uniforms:es([ht.points,ht.fog]),vertexShader:cn.points_vert,fragmentShader:cn.points_frag},dashed:{uniforms:es([ht.common,ht.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:cn.linedashed_vert,fragmentShader:cn.linedashed_frag},depth:{uniforms:es([ht.common,ht.displacementmap]),vertexShader:cn.depth_vert,fragmentShader:cn.depth_frag},normal:{uniforms:es([ht.common,ht.bumpmap,ht.normalmap,ht.displacementmap,{opacity:{value:1}}]),vertexShader:cn.meshnormal_vert,fragmentShader:cn.meshnormal_frag},sprite:{uniforms:es([ht.sprite,ht.fog]),vertexShader:cn.sprite_vert,fragmentShader:cn.sprite_frag},background:{uniforms:{uvTransform:{value:new pn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:cn.background_vert,fragmentShader:cn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:cn.backgroundCube_vert,fragmentShader:cn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:cn.cube_vert,fragmentShader:cn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:cn.equirect_vert,fragmentShader:cn.equirect_frag},distanceRGBA:{uniforms:es([ht.common,ht.displacementmap,{referencePosition:{value:new q},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:cn.distanceRGBA_vert,fragmentShader:cn.distanceRGBA_frag},shadow:{uniforms:es([ht.lights,ht.fog,{color:{value:new mt(0)},opacity:{value:1}}]),vertexShader:cn.shadow_vert,fragmentShader:cn.shadow_frag}};Qo.physical={uniforms:es([Qo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new pn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new pn},clearcoatNormalScale:{value:new We(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new pn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new pn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new pn},sheen:{value:0},sheenColor:{value:new mt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new pn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new pn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new pn},transmissionSamplerSize:{value:new We},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new pn},attenuationDistance:{value:0},attenuationColor:{value:new mt(0)},specularColor:{value:new mt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new pn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new pn},anisotropyVector:{value:new We},anisotropyMap:{value:null},anisotropyMapTransform:{value:new pn}}]),vertexShader:cn.meshphysical_vert,fragmentShader:cn.meshphysical_frag};const iv={r:0,b:0,g:0};function Z4(r,e,t,n,i,s,o){const a=new mt(0);let l=s===!0?0:1,u,h,p=null,g=0,y=null;function _(b,w){let C=!1,E=w.isScene===!0?w.background:null;switch(E&&E.isTexture&&(E=(w.backgroundBlurriness>0?t:e).get(E)),E===null?A(a,l):E&&E.isColor&&(A(E,1),C=!0),r.xr.getEnvironmentBlendMode()){case"opaque":C=!0;break;case"additive":n.buffers.color.setClear(0,0,0,1,o),C=!0;break;case"alpha-blend":n.buffers.color.setClear(0,0,0,0,o),C=!0;break}(r.autoClear||C)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),E&&(E.isCubeTexture||E.mapping===fp)?(h===void 0&&(h=new hr(new nu(1,1,1),new ss({name:"BackgroundCubeMaterial",uniforms:rp(Qo.backgroundCube.uniforms),vertexShader:Qo.backgroundCube.vertexShader,fragmentShader:Qo.backgroundCube.fragmentShader,side:is,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(D,j,O){this.matrixWorld.copyPosition(O.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(h)),h.material.uniforms.envMap.value=E,h.material.uniforms.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=w.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,h.material.toneMapped=E.colorSpace!==nn,(p!==E||g!==E.version||y!==r.toneMapping)&&(h.material.needsUpdate=!0,p=E,g=E.version,y=r.toneMapping),h.layers.enableAll(),b.unshift(h,h.geometry,h.material,0,0,null)):E&&E.isTexture&&(u===void 0&&(u=new hr(new ru(2,2),new ss({name:"BackgroundMaterial",uniforms:rp(Qo.background.uniforms),vertexShader:Qo.background.vertexShader,fragmentShader:Qo.background.fragmentShader,side:Fa,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=E,u.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,u.material.toneMapped=E.colorSpace!==nn,E.matrixAutoUpdate===!0&&E.updateMatrix(),u.material.uniforms.uvTransform.value.copy(E.matrix),(p!==E||g!==E.version||y!==r.toneMapping)&&(u.material.needsUpdate=!0,p=E,g=E.version,y=r.toneMapping),u.layers.enableAll(),b.unshift(u,u.geometry,u.material,0,0,null))}function A(b,w){b.getRGB(iv,CP(r)),n.buffers.color.setClear(iv.r,iv.g,iv.b,w,o)}return{getClearColor:function(){return a},setClearColor:function(b,w=1){a.set(b),l=w,A(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(b){l=b,A(a,l)},render:_}}function $4(r,e,t,n){const i=r.getParameter(r.MAX_VERTEX_ATTRIBS),s=n.isWebGL2?null:e.get("OES_vertex_array_object"),o=n.isWebGL2||s!==null,a={},l=b(null);let u=l,h=!1;function p(ne,le,de,ie,J){let Q=!1;if(o){const H=A(ie,de,le);u!==H&&(u=H,y(u.object)),Q=w(ne,ie,de,J),Q&&C(ne,ie,de,J)}else{const H=le.wireframe===!0;(u.geometry!==ie.id||u.program!==de.id||u.wireframe!==H)&&(u.geometry=ie.id,u.program=de.id,u.wireframe=H,Q=!0)}J!==null&&t.update(J,r.ELEMENT_ARRAY_BUFFER),(Q||h)&&(h=!1,O(ne,le,de,ie),J!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.get(J).buffer))}function g(){return n.isWebGL2?r.createVertexArray():s.createVertexArrayOES()}function y(ne){return n.isWebGL2?r.bindVertexArray(ne):s.bindVertexArrayOES(ne)}function _(ne){return n.isWebGL2?r.deleteVertexArray(ne):s.deleteVertexArrayOES(ne)}function A(ne,le,de){const ie=de.wireframe===!0;let J=a[ne.id];J===void 0&&(J={},a[ne.id]=J);let Q=J[le.id];Q===void 0&&(Q={},J[le.id]=Q);let H=Q[ie];return H===void 0&&(H=b(g()),Q[ie]=H),H}function b(ne){const le=[],de=[],ie=[];for(let J=0;J<i;J++)le[J]=0,de[J]=0,ie[J]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:le,enabledAttributes:de,attributeDivisors:ie,object:ne,attributes:{},index:null}}function w(ne,le,de,ie){const J=u.attributes,Q=le.attributes;let H=0;const X=de.getAttributes();for(const Z in X)if(X[Z].location>=0){const be=J[Z];let Le=Q[Z];if(Le===void 0&&(Z==="instanceMatrix"&&ne.instanceMatrix&&(Le=ne.instanceMatrix),Z==="instanceColor"&&ne.instanceColor&&(Le=ne.instanceColor)),be===void 0||be.attribute!==Le||Le&&be.data!==Le.data)return!0;H++}return u.attributesNum!==H||u.index!==ie}function C(ne,le,de,ie){const J={},Q=le.attributes;let H=0;const X=de.getAttributes();for(const Z in X)if(X[Z].location>=0){let be=Q[Z];be===void 0&&(Z==="instanceMatrix"&&ne.instanceMatrix&&(be=ne.instanceMatrix),Z==="instanceColor"&&ne.instanceColor&&(be=ne.instanceColor));const Le={};Le.attribute=be,be&&be.data&&(Le.data=be.data),J[Z]=Le,H++}u.attributes=J,u.attributesNum=H,u.index=ie}function E(){const ne=u.newAttributes;for(let le=0,de=ne.length;le<de;le++)ne[le]=0}function R(ne){L(ne,0)}function L(ne,le){const de=u.newAttributes,ie=u.enabledAttributes,J=u.attributeDivisors;de[ne]=1,ie[ne]===0&&(r.enableVertexAttribArray(ne),ie[ne]=1),J[ne]!==le&&((n.isWebGL2?r:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](ne,le),J[ne]=le)}function D(){const ne=u.newAttributes,le=u.enabledAttributes;for(let de=0,ie=le.length;de<ie;de++)le[de]!==ne[de]&&(r.disableVertexAttribArray(de),le[de]=0)}function j(ne,le,de,ie,J,Q,H){H===!0?r.vertexAttribIPointer(ne,le,de,J,Q):r.vertexAttribPointer(ne,le,de,ie,J,Q)}function O(ne,le,de,ie){if(n.isWebGL2===!1&&(ne.isInstancedMesh||ie.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;E();const J=ie.attributes,Q=de.getAttributes(),H=le.defaultAttributeValues;for(const X in Q){const Z=Q[X];if(Z.location>=0){let ye=J[X];if(ye===void 0&&(X==="instanceMatrix"&&ne.instanceMatrix&&(ye=ne.instanceMatrix),X==="instanceColor"&&ne.instanceColor&&(ye=ne.instanceColor)),ye!==void 0){const be=ye.normalized,Le=ye.itemSize,pe=t.get(ye);if(pe===void 0)continue;const Ae=pe.buffer,je=pe.type,ft=pe.bytesPerElement,St=n.isWebGL2===!0&&(je===r.INT||je===r.UNSIGNED_INT||ye.gpuType===Iy);if(ye.isInterleavedBufferAttribute){const Xe=ye.data,ce=Xe.stride,ge=ye.offset;if(Xe.isInstancedInterleavedBuffer){for(let we=0;we<Z.locationSize;we++)L(Z.location+we,Xe.meshPerAttribute);ne.isInstancedMesh!==!0&&ie._maxInstanceCount===void 0&&(ie._maxInstanceCount=Xe.meshPerAttribute*Xe.count)}else for(let we=0;we<Z.locationSize;we++)R(Z.location+we);r.bindBuffer(r.ARRAY_BUFFER,Ae);for(let we=0;we<Z.locationSize;we++)j(Z.location+we,Le/Z.locationSize,je,be,ce*ft,(ge+Le/Z.locationSize*we)*ft,St)}else{if(ye.isInstancedBufferAttribute){for(let Xe=0;Xe<Z.locationSize;Xe++)L(Z.location+Xe,ye.meshPerAttribute);ne.isInstancedMesh!==!0&&ie._maxInstanceCount===void 0&&(ie._maxInstanceCount=ye.meshPerAttribute*ye.count)}else for(let Xe=0;Xe<Z.locationSize;Xe++)R(Z.location+Xe);r.bindBuffer(r.ARRAY_BUFFER,Ae);for(let Xe=0;Xe<Z.locationSize;Xe++)j(Z.location+Xe,Le/Z.locationSize,je,be,Le*ft,Le/Z.locationSize*Xe*ft,St)}}else if(H!==void 0){const be=H[X];if(be!==void 0)switch(be.length){case 2:r.vertexAttrib2fv(Z.location,be);break;case 3:r.vertexAttrib3fv(Z.location,be);break;case 4:r.vertexAttrib4fv(Z.location,be);break;default:r.vertexAttrib1fv(Z.location,be)}}}}D()}function I(){ee();for(const ne in a){const le=a[ne];for(const de in le){const ie=le[de];for(const J in ie)_(ie[J].object),delete ie[J];delete le[de]}delete a[ne]}}function U(ne){if(a[ne.id]===void 0)return;const le=a[ne.id];for(const de in le){const ie=le[de];for(const J in ie)_(ie[J].object),delete ie[J];delete le[de]}delete a[ne.id]}function V(ne){for(const le in a){const de=a[le];if(de[ne.id]===void 0)continue;const ie=de[ne.id];for(const J in ie)_(ie[J].object),delete ie[J];delete de[ne.id]}}function ee(){te(),h=!0,u!==l&&(u=l,y(u.object))}function te(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:p,reset:ee,resetDefaultState:te,dispose:I,releaseStatesOfGeometry:U,releaseStatesOfProgram:V,initAttributes:E,enableAttribute:R,disableUnusedAttributes:D}}function ej(r,e,t,n){const i=n.isWebGL2;let s;function o(u){s=u}function a(u,h){r.drawArrays(s,u,h),t.update(h,s,1)}function l(u,h,p){if(p===0)return;let g,y;if(i)g=r,y="drawArraysInstanced";else if(g=e.get("ANGLE_instanced_arrays"),y="drawArraysInstancedANGLE",g===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}g[y](s,u,h,p),t.update(h,s,p)}this.setMode=o,this.render=a,this.renderInstances=l}function tj(r,e,t){let n;function i(){if(n!==void 0)return n;if(e.has("EXT_texture_filter_anisotropic")===!0){const j=e.get("EXT_texture_filter_anisotropic");n=r.getParameter(j.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function s(j){if(j==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";j="mediump"}return j==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&r.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const u=o||e.has("WEBGL_draw_buffers"),h=t.logarithmicDepthBuffer===!0,p=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),g=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),y=r.getParameter(r.MAX_TEXTURE_SIZE),_=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),A=r.getParameter(r.MAX_VERTEX_ATTRIBS),b=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),w=r.getParameter(r.MAX_VARYING_VECTORS),C=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),E=g>0,R=o||e.has("OES_texture_float"),L=E&&R,D=o?r.getParameter(r.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:h,maxTextures:p,maxVertexTextures:g,maxTextureSize:y,maxCubemapSize:_,maxAttributes:A,maxVertexUniforms:b,maxVaryings:w,maxFragmentUniforms:C,vertexTextures:E,floatFragmentTextures:R,floatVertexTextures:L,maxSamples:D}}function nj(r){const e=this;let t=null,n=0,i=!1,s=!1;const o=new bl,a=new pn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(p,g){const y=p.length!==0||g||n!==0||i;return i=g,n=p.length,y},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(p,g){t=h(p,g,0)},this.setState=function(p,g,y){const _=p.clippingPlanes,A=p.clipIntersection,b=p.clipShadows,w=r.get(p);if(!i||_===null||_.length===0||s&&!b)s?h(null):u();else{const C=s?0:n,E=C*4;let R=w.clippingState||null;l.value=R,R=h(_,g,E,y);for(let L=0;L!==E;++L)R[L]=t[L];w.clippingState=R,this.numIntersection=A?this.numPlanes:0,this.numPlanes+=C}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function h(p,g,y,_){const A=p!==null?p.length:0;let b=null;if(A!==0){if(b=l.value,_!==!0||b===null){const w=y+A*4,C=g.matrixWorldInverse;a.getNormalMatrix(C),(b===null||b.length<w)&&(b=new Float32Array(w));for(let E=0,R=y;E!==A;++E,R+=4)o.copy(p[E]).applyMatrix4(C,a),o.normal.toArray(b,R),b[R+3]=o.constant}l.value=b,l.needsUpdate=!0}return e.numPlanes=A,e.numIntersection=0,b}}function rj(r){let e=new WeakMap;function t(o,a){return a===ep?o.mapping=Oa:a===tg&&(o.mapping=Jc),o}function n(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===ep||a===tg)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new By(l.height/2);return u.fromEquirectangularTexture(r,o),e.set(o,u),o.addEventListener("dispose",i),t(u.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}class xo extends _g{constructor(e=-1,t=1,n=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=n-e,o=n+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const jf=4,XE=[.125,.215,.35,.446,.526,.582],hd=20,b_=new xo,KE=new mt;let A_=null;const ad=(1+Math.sqrt(5))/2,Ef=1/ad,YE=[new q(1,1,1),new q(-1,1,1),new q(1,1,-1),new q(-1,1,-1),new q(0,ad,Ef),new q(0,ad,-Ef),new q(Ef,0,ad),new q(-Ef,0,ad),new q(ad,Ef,0),new q(-ad,Ef,0)];class Rb{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){A_=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=ZE(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=QE(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(A_),e.scissorTest=!1,sv(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Oa||e.mapping===Jc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),A_=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Pn,minFilter:Pn,generateMipmaps:!1,type:ci,format:Wr,colorSpace:Rs,depthBuffer:!1},i=qE(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=qE(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=ij(s)),this._blurMaterial=sj(s,e,t)}return i}_compileMaterial(e){const t=new hr(this._lodPlanes[0],e);this._renderer.compile(t,b_)}_sceneToCubeUV(e,t,n,i){const a=new ar(90,1,t,n),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],h=this._renderer,p=h.autoClear,g=h.toneMapping;h.getClearColor(KE),h.toneMapping=Na,h.autoClear=!1;const y=new Cs({name:"PMREM.Background",side:is,depthWrite:!1,depthTest:!1}),_=new hr(new nu,y);let A=!1;const b=e.background;b?b.isColor&&(y.color.copy(b),e.background=null,A=!0):(y.color.copy(KE),A=!0);for(let w=0;w<6;w++){const C=w%3;C===0?(a.up.set(0,l[w],0),a.lookAt(u[w],0,0)):C===1?(a.up.set(0,0,l[w]),a.lookAt(0,u[w],0)):(a.up.set(0,l[w],0),a.lookAt(0,0,u[w]));const E=this._cubeSize;sv(i,C*E,w>2?E:0,E,E),h.setRenderTarget(i),A&&h.render(_,a),h.render(e,a)}_.geometry.dispose(),_.material.dispose(),h.toneMapping=g,h.autoClear=p,e.background=b}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===Oa||e.mapping===Jc;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=ZE()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=QE());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new hr(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;sv(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(o,b_)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=YE[(i-1)%YE.length];this._blur(e,i-1,i,s,o)}t.autoClear=n}_blur(e,t,n,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,i,"latitudinal",s),this._halfBlur(o,e,n,n,i,"longitudinal",s)}_halfBlur(e,t,n,i,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,p=new hr(this._lodPlanes[i],u),g=u.uniforms,y=this._sizeLods[n]-1,_=isFinite(s)?Math.PI/(2*y):2*Math.PI/(2*hd-1),A=s/_,b=isFinite(s)?1+Math.floor(h*A):hd;b>hd&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${b} samples when the maximum is set to ${hd}`);const w=[];let C=0;for(let j=0;j<hd;++j){const O=j/A,I=Math.exp(-O*O/2);w.push(I),j===0?C+=I:j<b&&(C+=2*I)}for(let j=0;j<w.length;j++)w[j]=w[j]/C;g.envMap.value=e.texture,g.samples.value=b,g.weights.value=w,g.latitudinal.value=o==="latitudinal",a&&(g.poleAxis.value=a);const{_lodMax:E}=this;g.dTheta.value=_,g.mipInt.value=E-n;const R=this._sizeLods[i],L=3*R*(i>E-jf?i-E+jf:0),D=4*(this._cubeSize-R);sv(t,L,D,3*R,2*R),l.setRenderTarget(t),l.render(p,b_)}}function ij(r){const e=[],t=[],n=[];let i=r;const s=r-jf+1+XE.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>r-jf?l=XE[o-r+jf-1]:o===0&&(l=0),n.push(l);const u=1/(a-2),h=-u,p=1+u,g=[h,h,p,h,p,p,h,h,p,p,h,p],y=6,_=6,A=3,b=2,w=1,C=new Float32Array(A*_*y),E=new Float32Array(b*_*y),R=new Float32Array(w*_*y);for(let D=0;D<y;D++){const j=D%3*2/3-1,O=D>2?0:-1,I=[j,O,0,j+2/3,O,0,j+2/3,O+1,0,j,O,0,j+2/3,O+1,0,j,O+1,0];C.set(I,A*_*D),E.set(g,b*_*D);const U=[D,D,D,D,D,D];R.set(U,w*_*D)}const L=new rn;L.setAttribute("position",new Sn(C,A)),L.setAttribute("uv",new Sn(E,b)),L.setAttribute("faceIndex",new Sn(R,w)),e.push(L),i>jf&&i--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function qE(r,e,t){const n=new Ys(r,e,t);return n.texture.mapping=fp,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function sv(r,e,t,n,i){r.viewport.set(e,t,n,i),r.scissor.set(e,t,n,i)}function sj(r,e,t){const n=new Float32Array(hd),i=new q(0,1,0);return new ss({name:"SphericalGaussianBlur",defines:{n:hd,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:VA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:La,depthTest:!1,depthWrite:!1})}function QE(){return new ss({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:VA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:La,depthTest:!1,depthWrite:!1})}function ZE(){return new ss({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:VA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:La,depthTest:!1,depthWrite:!1})}function VA(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function oj(r){let e=new WeakMap,t=null;function n(a){if(a&&a.isTexture){const l=a.mapping,u=l===ep||l===tg,h=l===Oa||l===Jc;if(u||h)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let p=e.get(a);return t===null&&(t=new Rb(r)),p=u?t.fromEquirectangular(a,p):t.fromCubemap(a,p),e.set(a,p),p.texture}else{if(e.has(a))return e.get(a).texture;{const p=a.image;if(u&&p&&p.height>0||h&&p&&i(p)){t===null&&(t=new Rb(r));const g=u?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,g),a.addEventListener("dispose",s),g.texture}else return null}}}return a}function i(a){let l=0;const u=6;for(let h=0;h<u;h++)a[h]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function aj(r){const e={};function t(n){if(e[n]!==void 0)return e[n];let i;switch(n){case"WEBGL_depth_texture":i=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=r.getExtension(n)}return e[n]=i,i}return{has:function(n){return t(n)!==null},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const i=t(n);return i===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function lj(r,e,t,n){const i={},s=new WeakMap;function o(p){const g=p.target;g.index!==null&&e.remove(g.index);for(const _ in g.attributes)e.remove(g.attributes[_]);for(const _ in g.morphAttributes){const A=g.morphAttributes[_];for(let b=0,w=A.length;b<w;b++)e.remove(A[b])}g.removeEventListener("dispose",o),delete i[g.id];const y=s.get(g);y&&(e.remove(y),s.delete(g)),n.releaseStatesOfGeometry(g),g.isInstancedBufferGeometry===!0&&delete g._maxInstanceCount,t.memory.geometries--}function a(p,g){return i[g.id]===!0||(g.addEventListener("dispose",o),i[g.id]=!0,t.memory.geometries++),g}function l(p){const g=p.attributes;for(const _ in g)e.update(g[_],r.ARRAY_BUFFER);const y=p.morphAttributes;for(const _ in y){const A=y[_];for(let b=0,w=A.length;b<w;b++)e.update(A[b],r.ARRAY_BUFFER)}}function u(p){const g=[],y=p.index,_=p.attributes.position;let A=0;if(y!==null){const C=y.array;A=y.version;for(let E=0,R=C.length;E<R;E+=3){const L=C[E+0],D=C[E+1],j=C[E+2];g.push(L,D,D,j,j,L)}}else if(_!==void 0){const C=_.array;A=_.version;for(let E=0,R=C.length/3-1;E<R;E+=3){const L=E+0,D=E+1,j=E+2;g.push(L,D,D,j,j,L)}}else return;const b=new(SP(g)?HA:zA)(g,1);b.version=A;const w=s.get(p);w&&e.remove(w),s.set(p,b)}function h(p){const g=s.get(p);if(g){const y=p.index;y!==null&&g.version<y.version&&u(p)}else u(p);return s.get(p)}return{get:a,update:l,getWireframeAttribute:h}}function cj(r,e,t,n){const i=n.isWebGL2;let s;function o(g){s=g}let a,l;function u(g){a=g.type,l=g.bytesPerElement}function h(g,y){r.drawElements(s,y,a,g*l),t.update(y,s,1)}function p(g,y,_){if(_===0)return;let A,b;if(i)A=r,b="drawElementsInstanced";else if(A=e.get("ANGLE_instanced_arrays"),b="drawElementsInstancedANGLE",A===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}A[b](s,y,a,g*l,_),t.update(y,s,_)}this.setMode=o,this.setIndex=u,this.render=h,this.renderInstances=p}function uj(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,o,a){switch(t.calls++,o){case r.TRIANGLES:t.triangles+=a*(s/3);break;case r.LINES:t.lines+=a*(s/2);break;case r.LINE_STRIP:t.lines+=a*(s-1);break;case r.LINE_LOOP:t.lines+=a*s;break;case r.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:n}}function dj(r,e){return r[0]-e[0]}function hj(r,e){return Math.abs(e[1])-Math.abs(r[1])}function fj(r,e,t){const n={},i=new Float32Array(8),s=new WeakMap,o=new Mn,a=[];for(let u=0;u<8;u++)a[u]=[u,0];function l(u,h,p){const g=u.morphTargetInfluences;if(e.isWebGL2===!0){const _=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,A=_!==void 0?_.length:0;let b=s.get(h);if(b===void 0||b.count!==A){let le=function(){te.dispose(),s.delete(h),h.removeEventListener("dispose",le)};var y=le;b!==void 0&&b.texture.dispose();const E=h.morphAttributes.position!==void 0,R=h.morphAttributes.normal!==void 0,L=h.morphAttributes.color!==void 0,D=h.morphAttributes.position||[],j=h.morphAttributes.normal||[],O=h.morphAttributes.color||[];let I=0;E===!0&&(I=1),R===!0&&(I=2),L===!0&&(I=3);let U=h.attributes.position.count*I,V=1;U>e.maxTextureSize&&(V=Math.ceil(U/e.maxTextureSize),U=e.maxTextureSize);const ee=new Float32Array(U*V*4*A),te=new Ny(ee,U,V,A);te.type=ei,te.needsUpdate=!0;const ne=I*4;for(let de=0;de<A;de++){const ie=D[de],J=j[de],Q=O[de],H=U*V*4*de;for(let X=0;X<ie.count;X++){const Z=X*ne;E===!0&&(o.fromBufferAttribute(ie,X),ee[H+Z+0]=o.x,ee[H+Z+1]=o.y,ee[H+Z+2]=o.z,ee[H+Z+3]=0),R===!0&&(o.fromBufferAttribute(J,X),ee[H+Z+4]=o.x,ee[H+Z+5]=o.y,ee[H+Z+6]=o.z,ee[H+Z+7]=0),L===!0&&(o.fromBufferAttribute(Q,X),ee[H+Z+8]=o.x,ee[H+Z+9]=o.y,ee[H+Z+10]=o.z,ee[H+Z+11]=Q.itemSize===4?o.w:1)}}b={count:A,texture:te,size:new We(U,V)},s.set(h,b),h.addEventListener("dispose",le)}let w=0;for(let E=0;E<g.length;E++)w+=g[E];const C=h.morphTargetsRelative?1:1-w;p.getUniforms().setValue(r,"morphTargetBaseInfluence",C),p.getUniforms().setValue(r,"morphTargetInfluences",g),p.getUniforms().setValue(r,"morphTargetsTexture",b.texture,t),p.getUniforms().setValue(r,"morphTargetsTextureSize",b.size)}else{const _=g===void 0?0:g.length;let A=n[h.id];if(A===void 0||A.length!==_){A=[];for(let R=0;R<_;R++)A[R]=[R,0];n[h.id]=A}for(let R=0;R<_;R++){const L=A[R];L[0]=R,L[1]=g[R]}A.sort(hj);for(let R=0;R<8;R++)R<_&&A[R][1]?(a[R][0]=A[R][0],a[R][1]=A[R][1]):(a[R][0]=Number.MAX_SAFE_INTEGER,a[R][1]=0);a.sort(dj);const b=h.morphAttributes.position,w=h.morphAttributes.normal;let C=0;for(let R=0;R<8;R++){const L=a[R],D=L[0],j=L[1];D!==Number.MAX_SAFE_INTEGER&&j?(b&&h.getAttribute("morphTarget"+R)!==b[D]&&h.setAttribute("morphTarget"+R,b[D]),w&&h.getAttribute("morphNormal"+R)!==w[D]&&h.setAttribute("morphNormal"+R,w[D]),i[R]=j,C+=j):(b&&h.hasAttribute("morphTarget"+R)===!0&&h.deleteAttribute("morphTarget"+R),w&&h.hasAttribute("morphNormal"+R)===!0&&h.deleteAttribute("morphNormal"+R),i[R]=0)}const E=h.morphTargetsRelative?1:1-C;p.getUniforms().setValue(r,"morphTargetBaseInfluence",E),p.getUniforms().setValue(r,"morphTargetInfluences",i)}}return{update:l}}function pj(r,e,t,n){let i=new WeakMap;function s(l){const u=n.render.frame,h=l.geometry,p=e.get(l,h);if(i.get(p)!==u&&(e.update(p),i.set(p,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==u&&(t.update(l.instanceMatrix,r.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,r.ARRAY_BUFFER),i.set(l,u))),l.isSkinnedMesh){const g=l.skeleton;i.get(g)!==u&&(g.update(),i.set(g,u))}return p}function o(){i=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}const RP=new In,PP=new Ny,IP=new jA,LP=new wg,$E=[],eM=[],tM=new Float32Array(16),nM=new Float32Array(9),rM=new Float32Array(4);function pp(r,e,t){const n=r[0];if(n<=0||n>0)return r;const i=e*t;let s=$E[i];if(s===void 0&&(s=new Float32Array(i),$E[i]=s),e!==0){n.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,r[o].toArray(s,a)}return s}function ti(r,e){if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;t++)if(r[t]!==e[t])return!1;return!0}function ni(r,e){for(let t=0,n=e.length;t<n;t++)r[t]=e[t]}function Dy(r,e){let t=eM[e];t===void 0&&(t=new Int32Array(e),eM[e]=t);for(let n=0;n!==e;++n)t[n]=r.allocateTextureUnit();return t}function mj(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function gj(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ti(t,e))return;r.uniform2fv(this.addr,e),ni(t,e)}}function vj(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ti(t,e))return;r.uniform3fv(this.addr,e),ni(t,e)}}function yj(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ti(t,e))return;r.uniform4fv(this.addr,e),ni(t,e)}}function xj(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(ti(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),ni(t,e)}else{if(ti(t,n))return;rM.set(n),r.uniformMatrix2fv(this.addr,!1,rM),ni(t,n)}}function _j(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(ti(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),ni(t,e)}else{if(ti(t,n))return;nM.set(n),r.uniformMatrix3fv(this.addr,!1,nM),ni(t,n)}}function wj(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(ti(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),ni(t,e)}else{if(ti(t,n))return;tM.set(n),r.uniformMatrix4fv(this.addr,!1,tM),ni(t,n)}}function bj(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function Aj(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ti(t,e))return;r.uniform2iv(this.addr,e),ni(t,e)}}function Sj(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ti(t,e))return;r.uniform3iv(this.addr,e),ni(t,e)}}function Ej(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ti(t,e))return;r.uniform4iv(this.addr,e),ni(t,e)}}function Mj(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function Cj(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ti(t,e))return;r.uniform2uiv(this.addr,e),ni(t,e)}}function Tj(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ti(t,e))return;r.uniform3uiv(this.addr,e),ni(t,e)}}function Rj(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ti(t,e))return;r.uniform4uiv(this.addr,e),ni(t,e)}}function Pj(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2D(e||RP,i)}function Ij(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture3D(e||IP,i)}function Lj(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTextureCube(e||LP,i)}function Nj(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2DArray(e||PP,i)}function Bj(r){switch(r){case 5126:return mj;case 35664:return gj;case 35665:return vj;case 35666:return yj;case 35674:return xj;case 35675:return _j;case 35676:return wj;case 5124:case 35670:return bj;case 35667:case 35671:return Aj;case 35668:case 35672:return Sj;case 35669:case 35673:return Ej;case 5125:return Mj;case 36294:return Cj;case 36295:return Tj;case 36296:return Rj;case 35678:case 36198:case 36298:case 36306:case 35682:return Pj;case 35679:case 36299:case 36307:return Ij;case 35680:case 36300:case 36308:case 36293:return Lj;case 36289:case 36303:case 36311:case 36292:return Nj}}function kj(r,e){r.uniform1fv(this.addr,e)}function Dj(r,e){const t=pp(e,this.size,2);r.uniform2fv(this.addr,t)}function Fj(r,e){const t=pp(e,this.size,3);r.uniform3fv(this.addr,t)}function Oj(r,e){const t=pp(e,this.size,4);r.uniform4fv(this.addr,t)}function Uj(r,e){const t=pp(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function jj(r,e){const t=pp(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function zj(r,e){const t=pp(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function Hj(r,e){r.uniform1iv(this.addr,e)}function Gj(r,e){r.uniform2iv(this.addr,e)}function Vj(r,e){r.uniform3iv(this.addr,e)}function Wj(r,e){r.uniform4iv(this.addr,e)}function Jj(r,e){r.uniform1uiv(this.addr,e)}function Xj(r,e){r.uniform2uiv(this.addr,e)}function Kj(r,e){r.uniform3uiv(this.addr,e)}function Yj(r,e){r.uniform4uiv(this.addr,e)}function qj(r,e,t){const n=this.cache,i=e.length,s=Dy(t,i);ti(n,s)||(r.uniform1iv(this.addr,s),ni(n,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||RP,s[o])}function Qj(r,e,t){const n=this.cache,i=e.length,s=Dy(t,i);ti(n,s)||(r.uniform1iv(this.addr,s),ni(n,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||IP,s[o])}function Zj(r,e,t){const n=this.cache,i=e.length,s=Dy(t,i);ti(n,s)||(r.uniform1iv(this.addr,s),ni(n,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||LP,s[o])}function $j(r,e,t){const n=this.cache,i=e.length,s=Dy(t,i);ti(n,s)||(r.uniform1iv(this.addr,s),ni(n,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||PP,s[o])}function e5(r){switch(r){case 5126:return kj;case 35664:return Dj;case 35665:return Fj;case 35666:return Oj;case 35674:return Uj;case 35675:return jj;case 35676:return zj;case 5124:case 35670:return Hj;case 35667:case 35671:return Gj;case 35668:case 35672:return Vj;case 35669:case 35673:return Wj;case 5125:return Jj;case 36294:return Xj;case 36295:return Kj;case 36296:return Yj;case 35678:case 36198:case 36298:case 36306:case 35682:return qj;case 35679:case 36299:case 36307:return Qj;case 35680:case 36300:case 36308:case 36293:return Zj;case 36289:case 36303:case 36311:case 36292:return $j}}class t5{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=Bj(t.type)}}class n5{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=e5(t.type)}}class r5{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],n)}}}const S_=/(\w+)(\])?(\[|\.)?/g;function iM(r,e){r.seq.push(e),r.map[e.id]=e}function i5(r,e,t){const n=r.name,i=n.length;for(S_.lastIndex=0;;){const s=S_.exec(n),o=S_.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===i){iM(t,u===void 0?new t5(a,r,e):new n5(a,r,e));break}else{let p=t.map[a];p===void 0&&(p=new r5(a),iM(t,p)),t=p}}}class $v{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);i5(s,o,this)}}setValue(e,t,n,i){const s=this.map[t];s!==void 0&&s.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];i!==void 0&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=n[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&n.push(o)}return n}}function sM(r,e,t){const n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}let s5=0;function o5(r,e){const t=r.split(`
`),n=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;n.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return n.join(`
`)}function a5(r){switch(r){case Rs:return["Linear","( value )"];case nn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",r),["Linear","( value )"]}}function oM(r,e,t){const n=r.getShaderParameter(e,r.COMPILE_STATUS),i=r.getShaderInfoLog(e).trim();if(n&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+o5(r.getShaderSource(e),o)}else return i}function l5(r,e){const t=a5(e);return"vec4 "+r+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function c5(r,e){let t;switch(e){case QR:t="Linear";break;case ZR:t="Reinhard";break;case $R:t="OptimizedCineon";break;case EA:t="ACESFilmic";break;case eP:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function u5(r){return[r.extensionDerivatives||r.envMapCubeUVHeight||r.bumpMap||r.normalMapTangentSpace||r.clearcoatNormalMap||r.flatShading||r.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(r.extensionFragDepth||r.logarithmicDepthBuffer)&&r.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",r.extensionDrawBuffers&&r.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(r.extensionShaderTextureLOD||r.envMap||r.transmission)&&r.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(km).join(`
`)}function d5(r){const e=[];for(const t in r){const n=r[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function h5(r,e){const t={},n=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const s=r.getActiveAttrib(e,i),o=s.name;let a=1;s.type===r.FLOAT_MAT2&&(a=2),s.type===r.FLOAT_MAT3&&(a=3),s.type===r.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:r.getAttribLocation(e,o),locationSize:a}}return t}function km(r){return r!==""}function aM(r,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function lM(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const f5=/^[ \t]*#include +<([\w\d./]+)>/gm;function Pb(r){return r.replace(f5,m5)}const p5=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function m5(r,e){let t=cn[e];if(t===void 0){const n=p5.get(e);if(n!==void 0)t=cn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return Pb(t)}const g5=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function cM(r){return r.replace(g5,v5)}function v5(r,e,t,n){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function uM(r){let e="precision "+r.precision+` float;
precision `+r.precision+" int;";return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function y5(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===Ry?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===zm?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===Yo&&(e="SHADOWMAP_TYPE_VSM"),e}function x5(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case Oa:case Jc:e="ENVMAP_TYPE_CUBE";break;case fp:e="ENVMAP_TYPE_CUBE_UV";break}return e}function _5(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case Jc:e="ENVMAP_MODE_REFRACTION";break}return e}function w5(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case yg:e="ENVMAP_BLENDING_MULTIPLY";break;case YR:e="ENVMAP_BLENDING_MIX";break;case qR:e="ENVMAP_BLENDING_ADD";break}return e}function b5(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}function A5(r,e,t,n){const i=r.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=y5(t),u=x5(t),h=_5(t),p=w5(t),g=b5(t),y=t.isWebGL2?"":u5(t),_=d5(s),A=i.createProgram();let b,w,C=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(b=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(km).join(`
`),b.length>0&&(b+=`
`),w=[y,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(km).join(`
`),w.length>0&&(w+=`
`)):(b=[uM(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(km).join(`
`),w=[y,uM(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",t.envMap?"#define "+p:"",g?"#define CUBEUV_TEXEL_WIDTH "+g.texelWidth:"",g?"#define CUBEUV_TEXEL_HEIGHT "+g.texelHeight:"",g?"#define CUBEUV_MAX_MIP "+g.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Na?"#define TONE_MAPPING":"",t.toneMapping!==Na?cn.tonemapping_pars_fragment:"",t.toneMapping!==Na?c5("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",cn.colorspace_pars_fragment,l5("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(km).join(`
`)),o=Pb(o),o=aM(o,t),o=lM(o,t),a=Pb(a),a=aM(a,t),a=lM(a,t),o=cM(o),a=cM(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,b=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+b,w=["#define varying in",t.glslVersion===Cb?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Cb?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+w);const E=C+b+o,R=C+w+a,L=sM(i,i.VERTEX_SHADER,E),D=sM(i,i.FRAGMENT_SHADER,R);if(i.attachShader(A,L),i.attachShader(A,D),t.index0AttributeName!==void 0?i.bindAttribLocation(A,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(A,0,"position"),i.linkProgram(A),r.debug.checkShaderErrors){const I=i.getProgramInfoLog(A).trim(),U=i.getShaderInfoLog(L).trim(),V=i.getShaderInfoLog(D).trim();let ee=!0,te=!0;if(i.getProgramParameter(A,i.LINK_STATUS)===!1)if(ee=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(i,A,L,D);else{const ne=oM(i,L,"vertex"),le=oM(i,D,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(A,i.VALIDATE_STATUS)+`

Program Info Log: `+I+`
`+ne+`
`+le)}else I!==""?console.warn("THREE.WebGLProgram: Program Info Log:",I):(U===""||V==="")&&(te=!1);te&&(this.diagnostics={runnable:ee,programLog:I,vertexShader:{log:U,prefix:b},fragmentShader:{log:V,prefix:w}})}i.deleteShader(L),i.deleteShader(D);let j;this.getUniforms=function(){return j===void 0&&(j=new $v(i,A)),j};let O;return this.getAttributes=function(){return O===void 0&&(O=h5(i,A)),O},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(A),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=s5++,this.cacheKey=e,this.usedTimes=1,this.program=A,this.vertexShader=L,this.fragmentShader=D,this}let S5=0;class E5{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new M5(e),t.set(e,n)),n}}class M5{constructor(e){this.id=S5++,this.code=e,this.usedTimes=0}}function C5(r,e,t,n,i,s,o){const a=new Cd,l=new E5,u=[],h=i.isWebGL2,p=i.logarithmicDepthBuffer,g=i.vertexTextures;let y=i.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function A(I){return I===0?"uv":`uv${I}`}function b(I,U,V,ee,te){const ne=ee.fog,le=te.geometry,de=I.isMeshStandardMaterial?ee.environment:null,ie=(I.isMeshStandardMaterial?t:e).get(I.envMap||de),J=ie&&ie.mapping===fp?ie.image.height:null,Q=_[I.type];I.precision!==null&&(y=i.getMaxPrecision(I.precision),y!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",y,"instead."));const H=le.morphAttributes.position||le.morphAttributes.normal||le.morphAttributes.color,X=H!==void 0?H.length:0;let Z=0;le.morphAttributes.position!==void 0&&(Z=1),le.morphAttributes.normal!==void 0&&(Z=2),le.morphAttributes.color!==void 0&&(Z=3);let ye,be,Le,pe;if(Q){const hn=Qo[Q];ye=hn.vertexShader,be=hn.fragmentShader}else ye=I.vertexShader,be=I.fragmentShader,l.update(I),Le=l.getVertexShaderID(I),pe=l.getFragmentShaderID(I);const Ae=r.getRenderTarget(),je=te.isInstancedMesh===!0,ft=!!I.map,St=!!I.matcap,Xe=!!ie,ce=!!I.aoMap,ge=!!I.lightMap,we=!!I.bumpMap,De=!!I.normalMap,Fe=!!I.displacementMap,Qe=!!I.emissiveMap,st=!!I.metalnessMap,lt=!!I.roughnessMap,Et=I.anisotropy>0,Ut=I.clearcoat>0,dn=I.iridescence>0,se=I.sheen>0,Y=I.transmission>0,Ce=Et&&!!I.anisotropyMap,et=Ut&&!!I.clearcoatMap,Ke=Ut&&!!I.clearcoatNormalMap,qe=Ut&&!!I.clearcoatRoughnessMap,xt=dn&&!!I.iridescenceMap,tt=dn&&!!I.iridescenceThicknessMap,Be=se&&!!I.sheenColorMap,Ft=se&&!!I.sheenRoughnessMap,Ct=!!I.specularMap,vt=!!I.specularColorMap,bt=!!I.specularIntensityMap,he=Y&&!!I.transmissionMap,Ue=Y&&!!I.thicknessMap,nt=!!I.gradientMap,fe=!!I.alphaMap,Se=I.alphaTest>0,Me=!!I.alphaHash,Ze=!!I.extensions,pt=!!le.attributes.uv1,en=!!le.attributes.uv2,an=!!le.attributes.uv3;let vn=Na;return I.toneMapped&&(Ae===null||Ae.isXRRenderTarget===!0)&&(vn=r.toneMapping),{isWebGL2:h,shaderID:Q,shaderType:I.type,shaderName:I.name,vertexShader:ye,fragmentShader:be,defines:I.defines,customVertexShaderID:Le,customFragmentShaderID:pe,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:y,instancing:je,instancingColor:je&&te.instanceColor!==null,supportsVertexTextures:g,outputColorSpace:Ae===null?r.outputColorSpace:Ae.isXRRenderTarget===!0?Ae.texture.colorSpace:Rs,map:ft,matcap:St,envMap:Xe,envMapMode:Xe&&ie.mapping,envMapCubeUVHeight:J,aoMap:ce,lightMap:ge,bumpMap:we,normalMap:De,displacementMap:g&&Fe,emissiveMap:Qe,normalMapObjectSpace:De&&I.normalMapType===fP,normalMapTangentSpace:De&&I.normalMapType===tu,metalnessMap:st,roughnessMap:lt,anisotropy:Et,anisotropyMap:Ce,clearcoat:Ut,clearcoatMap:et,clearcoatNormalMap:Ke,clearcoatRoughnessMap:qe,iridescence:dn,iridescenceMap:xt,iridescenceThicknessMap:tt,sheen:se,sheenColorMap:Be,sheenRoughnessMap:Ft,specularMap:Ct,specularColorMap:vt,specularIntensityMap:bt,transmission:Y,transmissionMap:he,thicknessMap:Ue,gradientMap:nt,opaque:I.transparent===!1&&I.blending===Ad,alphaMap:fe,alphaTest:Se,alphaHash:Me,combine:I.combine,mapUv:ft&&A(I.map.channel),aoMapUv:ce&&A(I.aoMap.channel),lightMapUv:ge&&A(I.lightMap.channel),bumpMapUv:we&&A(I.bumpMap.channel),normalMapUv:De&&A(I.normalMap.channel),displacementMapUv:Fe&&A(I.displacementMap.channel),emissiveMapUv:Qe&&A(I.emissiveMap.channel),metalnessMapUv:st&&A(I.metalnessMap.channel),roughnessMapUv:lt&&A(I.roughnessMap.channel),anisotropyMapUv:Ce&&A(I.anisotropyMap.channel),clearcoatMapUv:et&&A(I.clearcoatMap.channel),clearcoatNormalMapUv:Ke&&A(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:qe&&A(I.clearcoatRoughnessMap.channel),iridescenceMapUv:xt&&A(I.iridescenceMap.channel),iridescenceThicknessMapUv:tt&&A(I.iridescenceThicknessMap.channel),sheenColorMapUv:Be&&A(I.sheenColorMap.channel),sheenRoughnessMapUv:Ft&&A(I.sheenRoughnessMap.channel),specularMapUv:Ct&&A(I.specularMap.channel),specularColorMapUv:vt&&A(I.specularColorMap.channel),specularIntensityMapUv:bt&&A(I.specularIntensityMap.channel),transmissionMapUv:he&&A(I.transmissionMap.channel),thicknessMapUv:Ue&&A(I.thicknessMap.channel),alphaMapUv:fe&&A(I.alphaMap.channel),vertexTangents:!!le.attributes.tangent&&(De||Et),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!le.attributes.color&&le.attributes.color.itemSize===4,vertexUv1s:pt,vertexUv2s:en,vertexUv3s:an,pointsUvs:te.isPoints===!0&&!!le.attributes.uv&&(ft||fe),fog:!!ne,useFog:I.fog===!0,fogExp2:ne&&ne.isFogExp2,flatShading:I.flatShading===!0,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:p,skinning:te.isSkinnedMesh===!0,morphTargets:le.morphAttributes.position!==void 0,morphNormals:le.morphAttributes.normal!==void 0,morphColors:le.morphAttributes.color!==void 0,morphTargetsCount:X,morphTextureStride:Z,numDirLights:U.directional.length,numPointLights:U.point.length,numSpotLights:U.spot.length,numSpotLightMaps:U.spotLightMap.length,numRectAreaLights:U.rectArea.length,numHemiLights:U.hemi.length,numDirLightShadows:U.directionalShadowMap.length,numPointLightShadows:U.pointShadowMap.length,numSpotLightShadows:U.spotShadowMap.length,numSpotLightShadowsWithMaps:U.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:I.dithering,shadowMapEnabled:r.shadowMap.enabled&&V.length>0,shadowMapType:r.shadowMap.type,toneMapping:vn,useLegacyLights:r._useLegacyLights,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===Es,flipSided:I.side===is,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionDerivatives:Ze&&I.extensions.derivatives===!0,extensionFragDepth:Ze&&I.extensions.fragDepth===!0,extensionDrawBuffers:Ze&&I.extensions.drawBuffers===!0,extensionShaderTextureLOD:Ze&&I.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:h||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||n.has("EXT_shader_texture_lod"),customProgramCacheKey:I.customProgramCacheKey()}}function w(I){const U=[];if(I.shaderID?U.push(I.shaderID):(U.push(I.customVertexShaderID),U.push(I.customFragmentShaderID)),I.defines!==void 0)for(const V in I.defines)U.push(V),U.push(I.defines[V]);return I.isRawShaderMaterial===!1&&(C(U,I),E(U,I),U.push(r.outputColorSpace)),U.push(I.customProgramCacheKey),U.join()}function C(I,U){I.push(U.precision),I.push(U.outputColorSpace),I.push(U.envMapMode),I.push(U.envMapCubeUVHeight),I.push(U.mapUv),I.push(U.alphaMapUv),I.push(U.lightMapUv),I.push(U.aoMapUv),I.push(U.bumpMapUv),I.push(U.normalMapUv),I.push(U.displacementMapUv),I.push(U.emissiveMapUv),I.push(U.metalnessMapUv),I.push(U.roughnessMapUv),I.push(U.anisotropyMapUv),I.push(U.clearcoatMapUv),I.push(U.clearcoatNormalMapUv),I.push(U.clearcoatRoughnessMapUv),I.push(U.iridescenceMapUv),I.push(U.iridescenceThicknessMapUv),I.push(U.sheenColorMapUv),I.push(U.sheenRoughnessMapUv),I.push(U.specularMapUv),I.push(U.specularColorMapUv),I.push(U.specularIntensityMapUv),I.push(U.transmissionMapUv),I.push(U.thicknessMapUv),I.push(U.combine),I.push(U.fogExp2),I.push(U.sizeAttenuation),I.push(U.morphTargetsCount),I.push(U.morphAttributeCount),I.push(U.numDirLights),I.push(U.numPointLights),I.push(U.numSpotLights),I.push(U.numSpotLightMaps),I.push(U.numHemiLights),I.push(U.numRectAreaLights),I.push(U.numDirLightShadows),I.push(U.numPointLightShadows),I.push(U.numSpotLightShadows),I.push(U.numSpotLightShadowsWithMaps),I.push(U.shadowMapType),I.push(U.toneMapping),I.push(U.numClippingPlanes),I.push(U.numClipIntersection),I.push(U.depthPacking)}function E(I,U){a.disableAll(),U.isWebGL2&&a.enable(0),U.supportsVertexTextures&&a.enable(1),U.instancing&&a.enable(2),U.instancingColor&&a.enable(3),U.matcap&&a.enable(4),U.envMap&&a.enable(5),U.normalMapObjectSpace&&a.enable(6),U.normalMapTangentSpace&&a.enable(7),U.clearcoat&&a.enable(8),U.iridescence&&a.enable(9),U.alphaTest&&a.enable(10),U.vertexColors&&a.enable(11),U.vertexAlphas&&a.enable(12),U.vertexUv1s&&a.enable(13),U.vertexUv2s&&a.enable(14),U.vertexUv3s&&a.enable(15),U.vertexTangents&&a.enable(16),U.anisotropy&&a.enable(17),I.push(a.mask),a.disableAll(),U.fog&&a.enable(0),U.useFog&&a.enable(1),U.flatShading&&a.enable(2),U.logarithmicDepthBuffer&&a.enable(3),U.skinning&&a.enable(4),U.morphTargets&&a.enable(5),U.morphNormals&&a.enable(6),U.morphColors&&a.enable(7),U.premultipliedAlpha&&a.enable(8),U.shadowMapEnabled&&a.enable(9),U.useLegacyLights&&a.enable(10),U.doubleSided&&a.enable(11),U.flipSided&&a.enable(12),U.useDepthPacking&&a.enable(13),U.dithering&&a.enable(14),U.transmission&&a.enable(15),U.sheen&&a.enable(16),U.opaque&&a.enable(17),U.pointsUvs&&a.enable(18),I.push(a.mask)}function R(I){const U=_[I.type];let V;if(U){const ee=Qo[U];V=hy.clone(ee.uniforms)}else V=I.uniforms;return V}function L(I,U){let V;for(let ee=0,te=u.length;ee<te;ee++){const ne=u[ee];if(ne.cacheKey===U){V=ne,++V.usedTimes;break}}return V===void 0&&(V=new A5(r,U,I,s),u.push(V)),V}function D(I){if(--I.usedTimes===0){const U=u.indexOf(I);u[U]=u[u.length-1],u.pop(),I.destroy()}}function j(I){l.remove(I)}function O(){l.dispose()}return{getParameters:b,getProgramCacheKey:w,getUniforms:R,acquireProgram:L,releaseProgram:D,releaseShaderCache:j,programs:u,dispose:O}}function T5(){let r=new WeakMap;function e(s){let o=r.get(s);return o===void 0&&(o={},r.set(s,o)),o}function t(s){r.delete(s)}function n(s,o,a){r.get(s)[o]=a}function i(){r=new WeakMap}return{get:e,remove:t,update:n,dispose:i}}function R5(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function dM(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function hM(){const r=[];let e=0;const t=[],n=[],i=[];function s(){e=0,t.length=0,n.length=0,i.length=0}function o(p,g,y,_,A,b){let w=r[e];return w===void 0?(w={id:p.id,object:p,geometry:g,material:y,groupOrder:_,renderOrder:p.renderOrder,z:A,group:b},r[e]=w):(w.id=p.id,w.object=p,w.geometry=g,w.material=y,w.groupOrder=_,w.renderOrder=p.renderOrder,w.z=A,w.group=b),e++,w}function a(p,g,y,_,A,b){const w=o(p,g,y,_,A,b);y.transmission>0?n.push(w):y.transparent===!0?i.push(w):t.push(w)}function l(p,g,y,_,A,b){const w=o(p,g,y,_,A,b);y.transmission>0?n.unshift(w):y.transparent===!0?i.unshift(w):t.unshift(w)}function u(p,g){t.length>1&&t.sort(p||R5),n.length>1&&n.sort(g||dM),i.length>1&&i.sort(g||dM)}function h(){for(let p=e,g=r.length;p<g;p++){const y=r[p];if(y.id===null)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}}return{opaque:t,transmissive:n,transparent:i,init:s,push:a,unshift:l,finish:h,sort:u}}function P5(){let r=new WeakMap;function e(n,i){const s=r.get(n);let o;return s===void 0?(o=new hM,r.set(n,[o])):i>=s.length?(o=new hM,s.push(o)):o=s[i],o}function t(){r=new WeakMap}return{get:e,dispose:t}}function I5(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new q,color:new mt};break;case"SpotLight":t={position:new q,direction:new q,color:new mt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new q,color:new mt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new q,skyColor:new mt,groundColor:new mt};break;case"RectAreaLight":t={color:new mt,position:new q,halfWidth:new q,halfHeight:new q};break}return r[e.id]=t,t}}}function L5(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new We};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new We};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new We,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let N5=0;function B5(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function k5(r,e){const t=new I5,n=L5(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let h=0;h<9;h++)i.probe.push(new q);const s=new q,o=new Jt,a=new Jt;function l(h,p){let g=0,y=0,_=0;for(let V=0;V<9;V++)i.probe[V].set(0,0,0);let A=0,b=0,w=0,C=0,E=0,R=0,L=0,D=0,j=0,O=0;h.sort(B5);const I=p===!0?Math.PI:1;for(let V=0,ee=h.length;V<ee;V++){const te=h[V],ne=te.color,le=te.intensity,de=te.distance,ie=te.shadow&&te.shadow.map?te.shadow.map.texture:null;if(te.isAmbientLight)g+=ne.r*le*I,y+=ne.g*le*I,_+=ne.b*le*I;else if(te.isLightProbe)for(let J=0;J<9;J++)i.probe[J].addScaledVector(te.sh.coefficients[J],le);else if(te.isDirectionalLight){const J=t.get(te);if(J.color.copy(te.color).multiplyScalar(te.intensity*I),te.castShadow){const Q=te.shadow,H=n.get(te);H.shadowBias=Q.bias,H.shadowNormalBias=Q.normalBias,H.shadowRadius=Q.radius,H.shadowMapSize=Q.mapSize,i.directionalShadow[A]=H,i.directionalShadowMap[A]=ie,i.directionalShadowMatrix[A]=te.shadow.matrix,R++}i.directional[A]=J,A++}else if(te.isSpotLight){const J=t.get(te);J.position.setFromMatrixPosition(te.matrixWorld),J.color.copy(ne).multiplyScalar(le*I),J.distance=de,J.coneCos=Math.cos(te.angle),J.penumbraCos=Math.cos(te.angle*(1-te.penumbra)),J.decay=te.decay,i.spot[w]=J;const Q=te.shadow;if(te.map&&(i.spotLightMap[j]=te.map,j++,Q.updateMatrices(te),te.castShadow&&O++),i.spotLightMatrix[w]=Q.matrix,te.castShadow){const H=n.get(te);H.shadowBias=Q.bias,H.shadowNormalBias=Q.normalBias,H.shadowRadius=Q.radius,H.shadowMapSize=Q.mapSize,i.spotShadow[w]=H,i.spotShadowMap[w]=ie,D++}w++}else if(te.isRectAreaLight){const J=t.get(te);J.color.copy(ne).multiplyScalar(le),J.halfWidth.set(te.width*.5,0,0),J.halfHeight.set(0,te.height*.5,0),i.rectArea[C]=J,C++}else if(te.isPointLight){const J=t.get(te);if(J.color.copy(te.color).multiplyScalar(te.intensity*I),J.distance=te.distance,J.decay=te.decay,te.castShadow){const Q=te.shadow,H=n.get(te);H.shadowBias=Q.bias,H.shadowNormalBias=Q.normalBias,H.shadowRadius=Q.radius,H.shadowMapSize=Q.mapSize,H.shadowCameraNear=Q.camera.near,H.shadowCameraFar=Q.camera.far,i.pointShadow[b]=H,i.pointShadowMap[b]=ie,i.pointShadowMatrix[b]=te.shadow.matrix,L++}i.point[b]=J,b++}else if(te.isHemisphereLight){const J=t.get(te);J.skyColor.copy(te.color).multiplyScalar(le*I),J.groundColor.copy(te.groundColor).multiplyScalar(le*I),i.hemi[E]=J,E++}}C>0&&(e.isWebGL2||r.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ht.LTC_FLOAT_1,i.rectAreaLTC2=ht.LTC_FLOAT_2):r.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=ht.LTC_HALF_1,i.rectAreaLTC2=ht.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=g,i.ambient[1]=y,i.ambient[2]=_;const U=i.hash;(U.directionalLength!==A||U.pointLength!==b||U.spotLength!==w||U.rectAreaLength!==C||U.hemiLength!==E||U.numDirectionalShadows!==R||U.numPointShadows!==L||U.numSpotShadows!==D||U.numSpotMaps!==j)&&(i.directional.length=A,i.spot.length=w,i.rectArea.length=C,i.point.length=b,i.hemi.length=E,i.directionalShadow.length=R,i.directionalShadowMap.length=R,i.pointShadow.length=L,i.pointShadowMap.length=L,i.spotShadow.length=D,i.spotShadowMap.length=D,i.directionalShadowMatrix.length=R,i.pointShadowMatrix.length=L,i.spotLightMatrix.length=D+j-O,i.spotLightMap.length=j,i.numSpotLightShadowsWithMaps=O,U.directionalLength=A,U.pointLength=b,U.spotLength=w,U.rectAreaLength=C,U.hemiLength=E,U.numDirectionalShadows=R,U.numPointShadows=L,U.numSpotShadows=D,U.numSpotMaps=j,i.version=N5++)}function u(h,p){let g=0,y=0,_=0,A=0,b=0;const w=p.matrixWorldInverse;for(let C=0,E=h.length;C<E;C++){const R=h[C];if(R.isDirectionalLight){const L=i.directional[g];L.direction.setFromMatrixPosition(R.matrixWorld),s.setFromMatrixPosition(R.target.matrixWorld),L.direction.sub(s),L.direction.transformDirection(w),g++}else if(R.isSpotLight){const L=i.spot[_];L.position.setFromMatrixPosition(R.matrixWorld),L.position.applyMatrix4(w),L.direction.setFromMatrixPosition(R.matrixWorld),s.setFromMatrixPosition(R.target.matrixWorld),L.direction.sub(s),L.direction.transformDirection(w),_++}else if(R.isRectAreaLight){const L=i.rectArea[A];L.position.setFromMatrixPosition(R.matrixWorld),L.position.applyMatrix4(w),a.identity(),o.copy(R.matrixWorld),o.premultiply(w),a.extractRotation(o),L.halfWidth.set(R.width*.5,0,0),L.halfHeight.set(0,R.height*.5,0),L.halfWidth.applyMatrix4(a),L.halfHeight.applyMatrix4(a),A++}else if(R.isPointLight){const L=i.point[y];L.position.setFromMatrixPosition(R.matrixWorld),L.position.applyMatrix4(w),y++}else if(R.isHemisphereLight){const L=i.hemi[b];L.direction.setFromMatrixPosition(R.matrixWorld),L.direction.transformDirection(w),b++}}}return{setup:l,setupView:u,state:i}}function fM(r,e){const t=new k5(r,e),n=[],i=[];function s(){n.length=0,i.length=0}function o(p){n.push(p)}function a(p){i.push(p)}function l(p){t.setup(n,p)}function u(p){t.setupView(n,p)}return{init:s,state:{lightsArray:n,shadowsArray:i,lights:t},setupLights:l,setupLightsView:u,pushLight:o,pushShadow:a}}function D5(r,e){let t=new WeakMap;function n(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new fM(r,e),t.set(s,[l])):o>=a.length?(l=new fM(r,e),a.push(l)):l=a[o],l}function i(){t=new WeakMap}return{get:n,dispose:i}}class WA extends Jr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=dP,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class JA extends Jr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const F5=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,O5=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function U5(r,e,t){let n=new ky;const i=new We,s=new We,o=new Mn,a=new WA({depthPacking:hP}),l=new JA,u={},h=t.maxTextureSize,p={[Fa]:is,[is]:Fa,[Es]:Es},g=new ss({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new We},radius:{value:4}},vertexShader:F5,fragmentShader:O5}),y=g.clone();y.defines.HORIZONTAL_PASS=1;const _=new rn;_.setAttribute("position",new Sn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new hr(_,g),b=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Ry;let w=this.type;this.render=function(L,D,j){if(b.enabled===!1||b.autoUpdate===!1&&b.needsUpdate===!1||L.length===0)return;const O=r.getRenderTarget(),I=r.getActiveCubeFace(),U=r.getActiveMipmapLevel(),V=r.state;V.setBlending(La),V.buffers.color.setClear(1,1,1,1),V.buffers.depth.setTest(!0),V.setScissorTest(!1);const ee=w!==Yo&&this.type===Yo,te=w===Yo&&this.type!==Yo;for(let ne=0,le=L.length;ne<le;ne++){const de=L[ne],ie=de.shadow;if(ie===void 0){console.warn("THREE.WebGLShadowMap:",de,"has no shadow.");continue}if(ie.autoUpdate===!1&&ie.needsUpdate===!1)continue;i.copy(ie.mapSize);const J=ie.getFrameExtents();if(i.multiply(J),s.copy(ie.mapSize),(i.x>h||i.y>h)&&(i.x>h&&(s.x=Math.floor(h/J.x),i.x=s.x*J.x,ie.mapSize.x=s.x),i.y>h&&(s.y=Math.floor(h/J.y),i.y=s.y*J.y,ie.mapSize.y=s.y)),ie.map===null||ee===!0||te===!0){const H=this.type!==Yo?{minFilter:gr,magFilter:gr}:{};ie.map!==null&&ie.map.dispose(),ie.map=new Ys(i.x,i.y,H),ie.map.texture.name=de.name+".shadowMap",ie.camera.updateProjectionMatrix()}r.setRenderTarget(ie.map),r.clear();const Q=ie.getViewportCount();for(let H=0;H<Q;H++){const X=ie.getViewport(H);o.set(s.x*X.x,s.y*X.y,s.x*X.z,s.y*X.w),V.viewport(o),ie.updateMatrices(de,H),n=ie.getFrustum(),R(D,j,ie.camera,de,this.type)}ie.isPointLightShadow!==!0&&this.type===Yo&&C(ie,j),ie.needsUpdate=!1}w=this.type,b.needsUpdate=!1,r.setRenderTarget(O,I,U)};function C(L,D){const j=e.update(A);g.defines.VSM_SAMPLES!==L.blurSamples&&(g.defines.VSM_SAMPLES=L.blurSamples,y.defines.VSM_SAMPLES=L.blurSamples,g.needsUpdate=!0,y.needsUpdate=!0),L.mapPass===null&&(L.mapPass=new Ys(i.x,i.y)),g.uniforms.shadow_pass.value=L.map.texture,g.uniforms.resolution.value=L.mapSize,g.uniforms.radius.value=L.radius,r.setRenderTarget(L.mapPass),r.clear(),r.renderBufferDirect(D,null,j,g,A,null),y.uniforms.shadow_pass.value=L.mapPass.texture,y.uniforms.resolution.value=L.mapSize,y.uniforms.radius.value=L.radius,r.setRenderTarget(L.map),r.clear(),r.renderBufferDirect(D,null,j,y,A,null)}function E(L,D,j,O){let I=null;const U=j.isPointLight===!0?L.customDistanceMaterial:L.customDepthMaterial;if(U!==void 0)I=U;else if(I=j.isPointLight===!0?l:a,r.localClippingEnabled&&D.clipShadows===!0&&Array.isArray(D.clippingPlanes)&&D.clippingPlanes.length!==0||D.displacementMap&&D.displacementScale!==0||D.alphaMap&&D.alphaTest>0||D.map&&D.alphaTest>0){const V=I.uuid,ee=D.uuid;let te=u[V];te===void 0&&(te={},u[V]=te);let ne=te[ee];ne===void 0&&(ne=I.clone(),te[ee]=ne),I=ne}if(I.visible=D.visible,I.wireframe=D.wireframe,O===Yo?I.side=D.shadowSide!==null?D.shadowSide:D.side:I.side=D.shadowSide!==null?D.shadowSide:p[D.side],I.alphaMap=D.alphaMap,I.alphaTest=D.alphaTest,I.map=D.map,I.clipShadows=D.clipShadows,I.clippingPlanes=D.clippingPlanes,I.clipIntersection=D.clipIntersection,I.displacementMap=D.displacementMap,I.displacementScale=D.displacementScale,I.displacementBias=D.displacementBias,I.wireframeLinewidth=D.wireframeLinewidth,I.linewidth=D.linewidth,j.isPointLight===!0&&I.isMeshDistanceMaterial===!0){const V=r.properties.get(I);V.light=j}return I}function R(L,D,j,O,I){if(L.visible===!1)return;if(L.layers.test(D.layers)&&(L.isMesh||L.isLine||L.isPoints)&&(L.castShadow||L.receiveShadow&&I===Yo)&&(!L.frustumCulled||n.intersectsObject(L))){L.modelViewMatrix.multiplyMatrices(j.matrixWorldInverse,L.matrixWorld);const ee=e.update(L),te=L.material;if(Array.isArray(te)){const ne=ee.groups;for(let le=0,de=ne.length;le<de;le++){const ie=ne[le],J=te[ie.materialIndex];if(J&&J.visible){const Q=E(L,J,O,I);r.renderBufferDirect(j,null,ee,Q,L,ie)}}}else if(te.visible){const ne=E(L,te,O,I);r.renderBufferDirect(j,null,ee,ne,L,null)}}const V=L.children;for(let ee=0,te=V.length;ee<te;ee++)R(V[ee],D,j,O,I)}}function j5(r,e,t){const n=t.isWebGL2;function i(){let fe=!1;const Se=new Mn;let Me=null;const Ze=new Mn(0,0,0,0);return{setMask:function(pt){Me!==pt&&!fe&&(r.colorMask(pt,pt,pt,pt),Me=pt)},setLocked:function(pt){fe=pt},setClear:function(pt,en,an,vn,_r){_r===!0&&(pt*=vn,en*=vn,an*=vn),Se.set(pt,en,an,vn),Ze.equals(Se)===!1&&(r.clearColor(pt,en,an,vn),Ze.copy(Se))},reset:function(){fe=!1,Me=null,Ze.set(-1,0,0,0)}}}function s(){let fe=!1,Se=null,Me=null,Ze=null;return{setTest:function(pt){pt?Ae(r.DEPTH_TEST):je(r.DEPTH_TEST)},setMask:function(pt){Se!==pt&&!fe&&(r.depthMask(pt),Se=pt)},setFunc:function(pt){if(Me!==pt){switch(pt){case HR:r.depthFunc(r.NEVER);break;case GR:r.depthFunc(r.ALWAYS);break;case VR:r.depthFunc(r.LESS);break;case ly:r.depthFunc(r.LEQUAL);break;case WR:r.depthFunc(r.EQUAL);break;case JR:r.depthFunc(r.GEQUAL);break;case XR:r.depthFunc(r.GREATER);break;case KR:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}Me=pt}},setLocked:function(pt){fe=pt},setClear:function(pt){Ze!==pt&&(r.clearDepth(pt),Ze=pt)},reset:function(){fe=!1,Se=null,Me=null,Ze=null}}}function o(){let fe=!1,Se=null,Me=null,Ze=null,pt=null,en=null,an=null,vn=null,_r=null;return{setTest:function(hn){fe||(hn?Ae(r.STENCIL_TEST):je(r.STENCIL_TEST))},setMask:function(hn){Se!==hn&&!fe&&(r.stencilMask(hn),Se=hn)},setFunc:function(hn,cr,zn){(Me!==hn||Ze!==cr||pt!==zn)&&(r.stencilFunc(hn,cr,zn),Me=hn,Ze=cr,pt=zn)},setOp:function(hn,cr,zn){(en!==hn||an!==cr||vn!==zn)&&(r.stencilOp(hn,cr,zn),en=hn,an=cr,vn=zn)},setLocked:function(hn){fe=hn},setClear:function(hn){_r!==hn&&(r.clearStencil(hn),_r=hn)},reset:function(){fe=!1,Se=null,Me=null,Ze=null,pt=null,en=null,an=null,vn=null,_r=null}}}const a=new i,l=new s,u=new o,h=new WeakMap,p=new WeakMap;let g={},y={},_=new WeakMap,A=[],b=null,w=!1,C=null,E=null,R=null,L=null,D=null,j=null,O=null,I=!1,U=null,V=null,ee=null,te=null,ne=null;const le=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let de=!1,ie=0;const J=r.getParameter(r.VERSION);J.indexOf("WebGL")!==-1?(ie=parseFloat(/^WebGL (\d)/.exec(J)[1]),de=ie>=1):J.indexOf("OpenGL ES")!==-1&&(ie=parseFloat(/^OpenGL ES (\d)/.exec(J)[1]),de=ie>=2);let Q=null,H={};const X=r.getParameter(r.SCISSOR_BOX),Z=r.getParameter(r.VIEWPORT),ye=new Mn().fromArray(X),be=new Mn().fromArray(Z);function Le(fe,Se,Me,Ze){const pt=new Uint8Array(4),en=r.createTexture();r.bindTexture(fe,en),r.texParameteri(fe,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(fe,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let an=0;an<Me;an++)n&&(fe===r.TEXTURE_3D||fe===r.TEXTURE_2D_ARRAY)?r.texImage3D(Se,0,r.RGBA,1,1,Ze,0,r.RGBA,r.UNSIGNED_BYTE,pt):r.texImage2D(Se+an,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,pt);return en}const pe={};pe[r.TEXTURE_2D]=Le(r.TEXTURE_2D,r.TEXTURE_2D,1),pe[r.TEXTURE_CUBE_MAP]=Le(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),n&&(pe[r.TEXTURE_2D_ARRAY]=Le(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),pe[r.TEXTURE_3D]=Le(r.TEXTURE_3D,r.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),u.setClear(0),Ae(r.DEPTH_TEST),l.setFunc(ly),Fe(!1),Qe(Qw),Ae(r.CULL_FACE),we(La);function Ae(fe){g[fe]!==!0&&(r.enable(fe),g[fe]=!0)}function je(fe){g[fe]!==!1&&(r.disable(fe),g[fe]=!1)}function ft(fe,Se){return y[fe]!==Se?(r.bindFramebuffer(fe,Se),y[fe]=Se,n&&(fe===r.DRAW_FRAMEBUFFER&&(y[r.FRAMEBUFFER]=Se),fe===r.FRAMEBUFFER&&(y[r.DRAW_FRAMEBUFFER]=Se)),!0):!1}function St(fe,Se){let Me=A,Ze=!1;if(fe)if(Me=_.get(Se),Me===void 0&&(Me=[],_.set(Se,Me)),fe.isWebGLMultipleRenderTargets){const pt=fe.texture;if(Me.length!==pt.length||Me[0]!==r.COLOR_ATTACHMENT0){for(let en=0,an=pt.length;en<an;en++)Me[en]=r.COLOR_ATTACHMENT0+en;Me.length=pt.length,Ze=!0}}else Me[0]!==r.COLOR_ATTACHMENT0&&(Me[0]=r.COLOR_ATTACHMENT0,Ze=!0);else Me[0]!==r.BACK&&(Me[0]=r.BACK,Ze=!0);Ze&&(t.isWebGL2?r.drawBuffers(Me):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Me))}function Xe(fe){return b!==fe?(r.useProgram(fe),b=fe,!0):!1}const ce={[dd]:r.FUNC_ADD,[IR]:r.FUNC_SUBTRACT,[LR]:r.FUNC_REVERSE_SUBTRACT};if(n)ce[tb]=r.MIN,ce[nb]=r.MAX;else{const fe=e.get("EXT_blend_minmax");fe!==null&&(ce[tb]=fe.MIN_EXT,ce[nb]=fe.MAX_EXT)}const ge={[NR]:r.ZERO,[BR]:r.ONE,[kR]:r.SRC_COLOR,[AA]:r.SRC_ALPHA,[zR]:r.SRC_ALPHA_SATURATE,[UR]:r.DST_COLOR,[FR]:r.DST_ALPHA,[DR]:r.ONE_MINUS_SRC_COLOR,[SA]:r.ONE_MINUS_SRC_ALPHA,[jR]:r.ONE_MINUS_DST_COLOR,[OR]:r.ONE_MINUS_DST_ALPHA};function we(fe,Se,Me,Ze,pt,en,an,vn){if(fe===La){w===!0&&(je(r.BLEND),w=!1);return}if(w===!1&&(Ae(r.BLEND),w=!0),fe!==PR){if(fe!==C||vn!==I){if((E!==dd||D!==dd)&&(r.blendEquation(r.FUNC_ADD),E=dd,D=dd),vn)switch(fe){case Ad:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case Zw:r.blendFunc(r.ONE,r.ONE);break;case $w:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case eb:r.blendFuncSeparate(r.ZERO,r.SRC_COLOR,r.ZERO,r.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",fe);break}else switch(fe){case Ad:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case Zw:r.blendFunc(r.SRC_ALPHA,r.ONE);break;case $w:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case eb:r.blendFunc(r.ZERO,r.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",fe);break}R=null,L=null,j=null,O=null,C=fe,I=vn}return}pt=pt||Se,en=en||Me,an=an||Ze,(Se!==E||pt!==D)&&(r.blendEquationSeparate(ce[Se],ce[pt]),E=Se,D=pt),(Me!==R||Ze!==L||en!==j||an!==O)&&(r.blendFuncSeparate(ge[Me],ge[Ze],ge[en],ge[an]),R=Me,L=Ze,j=en,O=an),C=fe,I=!1}function De(fe,Se){fe.side===Es?je(r.CULL_FACE):Ae(r.CULL_FACE);let Me=fe.side===is;Se&&(Me=!Me),Fe(Me),fe.blending===Ad&&fe.transparent===!1?we(La):we(fe.blending,fe.blendEquation,fe.blendSrc,fe.blendDst,fe.blendEquationAlpha,fe.blendSrcAlpha,fe.blendDstAlpha,fe.premultipliedAlpha),l.setFunc(fe.depthFunc),l.setTest(fe.depthTest),l.setMask(fe.depthWrite),a.setMask(fe.colorWrite);const Ze=fe.stencilWrite;u.setTest(Ze),Ze&&(u.setMask(fe.stencilWriteMask),u.setFunc(fe.stencilFunc,fe.stencilRef,fe.stencilFuncMask),u.setOp(fe.stencilFail,fe.stencilZFail,fe.stencilZPass)),lt(fe.polygonOffset,fe.polygonOffsetFactor,fe.polygonOffsetUnits),fe.alphaToCoverage===!0?Ae(r.SAMPLE_ALPHA_TO_COVERAGE):je(r.SAMPLE_ALPHA_TO_COVERAGE)}function Fe(fe){U!==fe&&(fe?r.frontFace(r.CW):r.frontFace(r.CCW),U=fe)}function Qe(fe){fe!==CR?(Ae(r.CULL_FACE),fe!==V&&(fe===Qw?r.cullFace(r.BACK):fe===TR?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):je(r.CULL_FACE),V=fe}function st(fe){fe!==ee&&(de&&r.lineWidth(fe),ee=fe)}function lt(fe,Se,Me){fe?(Ae(r.POLYGON_OFFSET_FILL),(te!==Se||ne!==Me)&&(r.polygonOffset(Se,Me),te=Se,ne=Me)):je(r.POLYGON_OFFSET_FILL)}function Et(fe){fe?Ae(r.SCISSOR_TEST):je(r.SCISSOR_TEST)}function Ut(fe){fe===void 0&&(fe=r.TEXTURE0+le-1),Q!==fe&&(r.activeTexture(fe),Q=fe)}function dn(fe,Se,Me){Me===void 0&&(Q===null?Me=r.TEXTURE0+le-1:Me=Q);let Ze=H[Me];Ze===void 0&&(Ze={type:void 0,texture:void 0},H[Me]=Ze),(Ze.type!==fe||Ze.texture!==Se)&&(Q!==Me&&(r.activeTexture(Me),Q=Me),r.bindTexture(fe,Se||pe[fe]),Ze.type=fe,Ze.texture=Se)}function se(){const fe=H[Q];fe!==void 0&&fe.type!==void 0&&(r.bindTexture(fe.type,null),fe.type=void 0,fe.texture=void 0)}function Y(){try{r.compressedTexImage2D.apply(r,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Ce(){try{r.compressedTexImage3D.apply(r,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function et(){try{r.texSubImage2D.apply(r,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Ke(){try{r.texSubImage3D.apply(r,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function qe(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function xt(){try{r.compressedTexSubImage3D.apply(r,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function tt(){try{r.texStorage2D.apply(r,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Be(){try{r.texStorage3D.apply(r,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Ft(){try{r.texImage2D.apply(r,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Ct(){try{r.texImage3D.apply(r,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function vt(fe){ye.equals(fe)===!1&&(r.scissor(fe.x,fe.y,fe.z,fe.w),ye.copy(fe))}function bt(fe){be.equals(fe)===!1&&(r.viewport(fe.x,fe.y,fe.z,fe.w),be.copy(fe))}function he(fe,Se){let Me=p.get(Se);Me===void 0&&(Me=new WeakMap,p.set(Se,Me));let Ze=Me.get(fe);Ze===void 0&&(Ze=r.getUniformBlockIndex(Se,fe.name),Me.set(fe,Ze))}function Ue(fe,Se){const Ze=p.get(Se).get(fe);h.get(Se)!==Ze&&(r.uniformBlockBinding(Se,Ze,fe.__bindingPointIndex),h.set(Se,Ze))}function nt(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),n===!0&&(r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null)),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),g={},Q=null,H={},y={},_=new WeakMap,A=[],b=null,w=!1,C=null,E=null,R=null,L=null,D=null,j=null,O=null,I=!1,U=null,V=null,ee=null,te=null,ne=null,ye.set(0,0,r.canvas.width,r.canvas.height),be.set(0,0,r.canvas.width,r.canvas.height),a.reset(),l.reset(),u.reset()}return{buffers:{color:a,depth:l,stencil:u},enable:Ae,disable:je,bindFramebuffer:ft,drawBuffers:St,useProgram:Xe,setBlending:we,setMaterial:De,setFlipSided:Fe,setCullFace:Qe,setLineWidth:st,setPolygonOffset:lt,setScissorTest:Et,activeTexture:Ut,bindTexture:dn,unbindTexture:se,compressedTexImage2D:Y,compressedTexImage3D:Ce,texImage2D:Ft,texImage3D:Ct,updateUBOMapping:he,uniformBlockBinding:Ue,texStorage2D:tt,texStorage3D:Be,texSubImage2D:et,texSubImage3D:Ke,compressedTexSubImage2D:qe,compressedTexSubImage3D:xt,scissor:vt,viewport:bt,reset:nt}}function z5(r,e,t,n,i,s,o){const a=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,h=i.maxTextureSize,p=i.maxSamples,g=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,y=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),_=new WeakMap;let A;const b=new WeakMap;let w=!1;try{w=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function C(se,Y){return w?new OffscreenCanvas(se,Y):sg("canvas")}function E(se,Y,Ce,et){let Ke=1;if((se.width>et||se.height>et)&&(Ke=et/Math.max(se.width,se.height)),Ke<1||Y===!0)if(typeof HTMLImageElement<"u"&&se instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&se instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&se instanceof ImageBitmap){const qe=Y?dy:Math.floor,xt=qe(Ke*se.width),tt=qe(Ke*se.height);A===void 0&&(A=C(xt,tt));const Be=Ce?C(xt,tt):A;return Be.width=xt,Be.height=tt,Be.getContext("2d").drawImage(se,0,0,xt,tt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+se.width+"x"+se.height+") to ("+xt+"x"+tt+")."),Be}else return"data"in se&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+se.width+"x"+se.height+")."),se;return se}function R(se){return Tb(se.width)&&Tb(se.height)}function L(se){return a?!1:se.wrapS!==er||se.wrapT!==er||se.minFilter!==gr&&se.minFilter!==Pn}function D(se,Y){return se.generateMipmaps&&Y&&se.minFilter!==gr&&se.minFilter!==Pn}function j(se){r.generateMipmap(se)}function O(se,Y,Ce,et,Ke=!1){if(a===!1)return Y;if(se!==null){if(r[se]!==void 0)return r[se];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+se+"'")}let qe=Y;return Y===r.RED&&(Ce===r.FLOAT&&(qe=r.R32F),Ce===r.HALF_FLOAT&&(qe=r.R16F),Ce===r.UNSIGNED_BYTE&&(qe=r.R8)),Y===r.RED_INTEGER&&(Ce===r.UNSIGNED_BYTE&&(qe=r.R8UI),Ce===r.UNSIGNED_SHORT&&(qe=r.R16UI),Ce===r.UNSIGNED_INT&&(qe=r.R32UI),Ce===r.BYTE&&(qe=r.R8I),Ce===r.SHORT&&(qe=r.R16I),Ce===r.INT&&(qe=r.R32I)),Y===r.RG&&(Ce===r.FLOAT&&(qe=r.RG32F),Ce===r.HALF_FLOAT&&(qe=r.RG16F),Ce===r.UNSIGNED_BYTE&&(qe=r.RG8)),Y===r.RGBA&&(Ce===r.FLOAT&&(qe=r.RGBA32F),Ce===r.HALF_FLOAT&&(qe=r.RGBA16F),Ce===r.UNSIGNED_BYTE&&(qe=et===nn&&Ke===!1?r.SRGB8_ALPHA8:r.RGBA8),Ce===r.UNSIGNED_SHORT_4_4_4_4&&(qe=r.RGBA4),Ce===r.UNSIGNED_SHORT_5_5_5_1&&(qe=r.RGB5_A1)),(qe===r.R16F||qe===r.R32F||qe===r.RG16F||qe===r.RG32F||qe===r.RGBA16F||qe===r.RGBA32F)&&e.get("EXT_color_buffer_float"),qe}function I(se,Y,Ce){return D(se,Ce)===!0||se.isFramebufferTexture&&se.minFilter!==gr&&se.minFilter!==Pn?Math.log2(Math.max(Y.width,Y.height))+1:se.mipmaps!==void 0&&se.mipmaps.length>0?se.mipmaps.length:se.isCompressedTexture&&Array.isArray(se.image)?Y.mipmaps.length:1}function U(se){return se===gr||se===tp||se===Sd?r.NEAREST:r.LINEAR}function V(se){const Y=se.target;Y.removeEventListener("dispose",V),te(Y),Y.isVideoTexture&&_.delete(Y)}function ee(se){const Y=se.target;Y.removeEventListener("dispose",ee),le(Y)}function te(se){const Y=n.get(se);if(Y.__webglInit===void 0)return;const Ce=se.source,et=b.get(Ce);if(et){const Ke=et[Y.__cacheKey];Ke.usedTimes--,Ke.usedTimes===0&&ne(se),Object.keys(et).length===0&&b.delete(Ce)}n.remove(se)}function ne(se){const Y=n.get(se);r.deleteTexture(Y.__webglTexture);const Ce=se.source,et=b.get(Ce);delete et[Y.__cacheKey],o.memory.textures--}function le(se){const Y=se.texture,Ce=n.get(se),et=n.get(Y);if(et.__webglTexture!==void 0&&(r.deleteTexture(et.__webglTexture),o.memory.textures--),se.depthTexture&&se.depthTexture.dispose(),se.isWebGLCubeRenderTarget)for(let Ke=0;Ke<6;Ke++){if(Array.isArray(Ce.__webglFramebuffer[Ke]))for(let qe=0;qe<Ce.__webglFramebuffer[Ke].length;qe++)r.deleteFramebuffer(Ce.__webglFramebuffer[Ke][qe]);else r.deleteFramebuffer(Ce.__webglFramebuffer[Ke]);Ce.__webglDepthbuffer&&r.deleteRenderbuffer(Ce.__webglDepthbuffer[Ke])}else{if(Array.isArray(Ce.__webglFramebuffer))for(let Ke=0;Ke<Ce.__webglFramebuffer.length;Ke++)r.deleteFramebuffer(Ce.__webglFramebuffer[Ke]);else r.deleteFramebuffer(Ce.__webglFramebuffer);if(Ce.__webglDepthbuffer&&r.deleteRenderbuffer(Ce.__webglDepthbuffer),Ce.__webglMultisampledFramebuffer&&r.deleteFramebuffer(Ce.__webglMultisampledFramebuffer),Ce.__webglColorRenderbuffer)for(let Ke=0;Ke<Ce.__webglColorRenderbuffer.length;Ke++)Ce.__webglColorRenderbuffer[Ke]&&r.deleteRenderbuffer(Ce.__webglColorRenderbuffer[Ke]);Ce.__webglDepthRenderbuffer&&r.deleteRenderbuffer(Ce.__webglDepthRenderbuffer)}if(se.isWebGLMultipleRenderTargets)for(let Ke=0,qe=Y.length;Ke<qe;Ke++){const xt=n.get(Y[Ke]);xt.__webglTexture&&(r.deleteTexture(xt.__webglTexture),o.memory.textures--),n.remove(Y[Ke])}n.remove(Y),n.remove(se)}let de=0;function ie(){de=0}function J(){const se=de;return se>=l&&console.warn("THREE.WebGLTextures: Trying to use "+se+" texture units while this GPU supports only "+l),de+=1,se}function Q(se){const Y=[];return Y.push(se.wrapS),Y.push(se.wrapT),Y.push(se.wrapR||0),Y.push(se.magFilter),Y.push(se.minFilter),Y.push(se.anisotropy),Y.push(se.internalFormat),Y.push(se.format),Y.push(se.type),Y.push(se.generateMipmaps),Y.push(se.premultiplyAlpha),Y.push(se.flipY),Y.push(se.unpackAlignment),Y.push(se.colorSpace),Y.join()}function H(se,Y){const Ce=n.get(se);if(se.isVideoTexture&&Ut(se),se.isRenderTargetTexture===!1&&se.version>0&&Ce.__version!==se.version){const et=se.image;if(et===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(et.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ft(Ce,se,Y);return}}t.bindTexture(r.TEXTURE_2D,Ce.__webglTexture,r.TEXTURE0+Y)}function X(se,Y){const Ce=n.get(se);if(se.version>0&&Ce.__version!==se.version){ft(Ce,se,Y);return}t.bindTexture(r.TEXTURE_2D_ARRAY,Ce.__webglTexture,r.TEXTURE0+Y)}function Z(se,Y){const Ce=n.get(se);if(se.version>0&&Ce.__version!==se.version){ft(Ce,se,Y);return}t.bindTexture(r.TEXTURE_3D,Ce.__webglTexture,r.TEXTURE0+Y)}function ye(se,Y){const Ce=n.get(se);if(se.version>0&&Ce.__version!==se.version){St(Ce,se,Y);return}t.bindTexture(r.TEXTURE_CUBE_MAP,Ce.__webglTexture,r.TEXTURE0+Y)}const be={[Pl]:r.REPEAT,[er]:r.CLAMP_TO_EDGE,[Nd]:r.MIRRORED_REPEAT},Le={[gr]:r.NEAREST,[tp]:r.NEAREST_MIPMAP_NEAREST,[Sd]:r.NEAREST_MIPMAP_LINEAR,[Pn]:r.LINEAR,[xg]:r.LINEAR_MIPMAP_NEAREST,[ea]:r.LINEAR_MIPMAP_LINEAR},pe={[mP]:r.NEVER,[bP]:r.ALWAYS,[gP]:r.LESS,[yP]:r.LEQUAL,[vP]:r.EQUAL,[wP]:r.GEQUAL,[xP]:r.GREATER,[_P]:r.NOTEQUAL};function Ae(se,Y,Ce){if(Ce?(r.texParameteri(se,r.TEXTURE_WRAP_S,be[Y.wrapS]),r.texParameteri(se,r.TEXTURE_WRAP_T,be[Y.wrapT]),(se===r.TEXTURE_3D||se===r.TEXTURE_2D_ARRAY)&&r.texParameteri(se,r.TEXTURE_WRAP_R,be[Y.wrapR]),r.texParameteri(se,r.TEXTURE_MAG_FILTER,Le[Y.magFilter]),r.texParameteri(se,r.TEXTURE_MIN_FILTER,Le[Y.minFilter])):(r.texParameteri(se,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(se,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),(se===r.TEXTURE_3D||se===r.TEXTURE_2D_ARRAY)&&r.texParameteri(se,r.TEXTURE_WRAP_R,r.CLAMP_TO_EDGE),(Y.wrapS!==er||Y.wrapT!==er)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),r.texParameteri(se,r.TEXTURE_MAG_FILTER,U(Y.magFilter)),r.texParameteri(se,r.TEXTURE_MIN_FILTER,U(Y.minFilter)),Y.minFilter!==gr&&Y.minFilter!==Pn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),Y.compareFunction&&(r.texParameteri(se,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(se,r.TEXTURE_COMPARE_FUNC,pe[Y.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const et=e.get("EXT_texture_filter_anisotropic");if(Y.magFilter===gr||Y.minFilter!==Sd&&Y.minFilter!==ea||Y.type===ei&&e.has("OES_texture_float_linear")===!1||a===!1&&Y.type===ci&&e.has("OES_texture_half_float_linear")===!1)return;(Y.anisotropy>1||n.get(Y).__currentAnisotropy)&&(r.texParameterf(se,et.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Y.anisotropy,i.getMaxAnisotropy())),n.get(Y).__currentAnisotropy=Y.anisotropy)}}function je(se,Y){let Ce=!1;se.__webglInit===void 0&&(se.__webglInit=!0,Y.addEventListener("dispose",V));const et=Y.source;let Ke=b.get(et);Ke===void 0&&(Ke={},b.set(et,Ke));const qe=Q(Y);if(qe!==se.__cacheKey){Ke[qe]===void 0&&(Ke[qe]={texture:r.createTexture(),usedTimes:0},o.memory.textures++,Ce=!0),Ke[qe].usedTimes++;const xt=Ke[se.__cacheKey];xt!==void 0&&(Ke[se.__cacheKey].usedTimes--,xt.usedTimes===0&&ne(Y)),se.__cacheKey=qe,se.__webglTexture=Ke[qe].texture}return Ce}function ft(se,Y,Ce){let et=r.TEXTURE_2D;(Y.isDataArrayTexture||Y.isCompressedArrayTexture)&&(et=r.TEXTURE_2D_ARRAY),Y.isData3DTexture&&(et=r.TEXTURE_3D);const Ke=je(se,Y),qe=Y.source;t.bindTexture(et,se.__webglTexture,r.TEXTURE0+Ce);const xt=n.get(qe);if(qe.version!==xt.__version||Ke===!0){t.activeTexture(r.TEXTURE0+Ce),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,Y.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,Y.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.NONE);const tt=L(Y)&&R(Y.image)===!1;let Be=E(Y.image,tt,!1,h);Be=dn(Y,Be);const Ft=R(Be)||a,Ct=s.convert(Y.format,Y.colorSpace);let vt=s.convert(Y.type),bt=O(Y.internalFormat,Ct,vt,Y.colorSpace);Ae(et,Y,Ft);let he;const Ue=Y.mipmaps,nt=a&&Y.isVideoTexture!==!0,fe=xt.__version===void 0||Ke===!0,Se=I(Y,Be,Ft);if(Y.isDepthTexture)bt=r.DEPTH_COMPONENT,a?Y.type===ei?bt=r.DEPTH_COMPONENT32F:Y.type===Ta?bt=r.DEPTH_COMPONENT24:Y.type===Uc?bt=r.DEPTH24_STENCIL8:bt=r.DEPTH_COMPONENT16:Y.type===ei&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Y.format===jc&&bt===r.DEPTH_COMPONENT&&Y.type!==Py&&Y.type!==Ta&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Y.type=Ta,vt=s.convert(Y.type)),Y.format===Bd&&bt===r.DEPTH_COMPONENT&&(bt=r.DEPTH_STENCIL,Y.type!==Uc&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Y.type=Uc,vt=s.convert(Y.type))),fe&&(nt?t.texStorage2D(r.TEXTURE_2D,1,bt,Be.width,Be.height):t.texImage2D(r.TEXTURE_2D,0,bt,Be.width,Be.height,0,Ct,vt,null));else if(Y.isDataTexture)if(Ue.length>0&&Ft){nt&&fe&&t.texStorage2D(r.TEXTURE_2D,Se,bt,Ue[0].width,Ue[0].height);for(let Me=0,Ze=Ue.length;Me<Ze;Me++)he=Ue[Me],nt?t.texSubImage2D(r.TEXTURE_2D,Me,0,0,he.width,he.height,Ct,vt,he.data):t.texImage2D(r.TEXTURE_2D,Me,bt,he.width,he.height,0,Ct,vt,he.data);Y.generateMipmaps=!1}else nt?(fe&&t.texStorage2D(r.TEXTURE_2D,Se,bt,Be.width,Be.height),t.texSubImage2D(r.TEXTURE_2D,0,0,0,Be.width,Be.height,Ct,vt,Be.data)):t.texImage2D(r.TEXTURE_2D,0,bt,Be.width,Be.height,0,Ct,vt,Be.data);else if(Y.isCompressedTexture)if(Y.isCompressedArrayTexture){nt&&fe&&t.texStorage3D(r.TEXTURE_2D_ARRAY,Se,bt,Ue[0].width,Ue[0].height,Be.depth);for(let Me=0,Ze=Ue.length;Me<Ze;Me++)he=Ue[Me],Y.format!==Wr?Ct!==null?nt?t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,Me,0,0,0,he.width,he.height,Be.depth,Ct,he.data,0,0):t.compressedTexImage3D(r.TEXTURE_2D_ARRAY,Me,bt,he.width,he.height,Be.depth,0,he.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):nt?t.texSubImage3D(r.TEXTURE_2D_ARRAY,Me,0,0,0,he.width,he.height,Be.depth,Ct,vt,he.data):t.texImage3D(r.TEXTURE_2D_ARRAY,Me,bt,he.width,he.height,Be.depth,0,Ct,vt,he.data)}else{nt&&fe&&t.texStorage2D(r.TEXTURE_2D,Se,bt,Ue[0].width,Ue[0].height);for(let Me=0,Ze=Ue.length;Me<Ze;Me++)he=Ue[Me],Y.format!==Wr?Ct!==null?nt?t.compressedTexSubImage2D(r.TEXTURE_2D,Me,0,0,he.width,he.height,Ct,he.data):t.compressedTexImage2D(r.TEXTURE_2D,Me,bt,he.width,he.height,0,he.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):nt?t.texSubImage2D(r.TEXTURE_2D,Me,0,0,he.width,he.height,Ct,vt,he.data):t.texImage2D(r.TEXTURE_2D,Me,bt,he.width,he.height,0,Ct,vt,he.data)}else if(Y.isDataArrayTexture)nt?(fe&&t.texStorage3D(r.TEXTURE_2D_ARRAY,Se,bt,Be.width,Be.height,Be.depth),t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,Be.width,Be.height,Be.depth,Ct,vt,Be.data)):t.texImage3D(r.TEXTURE_2D_ARRAY,0,bt,Be.width,Be.height,Be.depth,0,Ct,vt,Be.data);else if(Y.isData3DTexture)nt?(fe&&t.texStorage3D(r.TEXTURE_3D,Se,bt,Be.width,Be.height,Be.depth),t.texSubImage3D(r.TEXTURE_3D,0,0,0,0,Be.width,Be.height,Be.depth,Ct,vt,Be.data)):t.texImage3D(r.TEXTURE_3D,0,bt,Be.width,Be.height,Be.depth,0,Ct,vt,Be.data);else if(Y.isFramebufferTexture){if(fe)if(nt)t.texStorage2D(r.TEXTURE_2D,Se,bt,Be.width,Be.height);else{let Me=Be.width,Ze=Be.height;for(let pt=0;pt<Se;pt++)t.texImage2D(r.TEXTURE_2D,pt,bt,Me,Ze,0,Ct,vt,null),Me>>=1,Ze>>=1}}else if(Ue.length>0&&Ft){nt&&fe&&t.texStorage2D(r.TEXTURE_2D,Se,bt,Ue[0].width,Ue[0].height);for(let Me=0,Ze=Ue.length;Me<Ze;Me++)he=Ue[Me],nt?t.texSubImage2D(r.TEXTURE_2D,Me,0,0,Ct,vt,he):t.texImage2D(r.TEXTURE_2D,Me,bt,Ct,vt,he);Y.generateMipmaps=!1}else nt?(fe&&t.texStorage2D(r.TEXTURE_2D,Se,bt,Be.width,Be.height),t.texSubImage2D(r.TEXTURE_2D,0,0,0,Ct,vt,Be)):t.texImage2D(r.TEXTURE_2D,0,bt,Ct,vt,Be);D(Y,Ft)&&j(et),xt.__version=qe.version,Y.onUpdate&&Y.onUpdate(Y)}se.__version=Y.version}function St(se,Y,Ce){if(Y.image.length!==6)return;const et=je(se,Y),Ke=Y.source;t.bindTexture(r.TEXTURE_CUBE_MAP,se.__webglTexture,r.TEXTURE0+Ce);const qe=n.get(Ke);if(Ke.version!==qe.__version||et===!0){t.activeTexture(r.TEXTURE0+Ce),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,Y.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,Y.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.NONE);const xt=Y.isCompressedTexture||Y.image[0].isCompressedTexture,tt=Y.image[0]&&Y.image[0].isDataTexture,Be=[];for(let Me=0;Me<6;Me++)!xt&&!tt?Be[Me]=E(Y.image[Me],!1,!0,u):Be[Me]=tt?Y.image[Me].image:Y.image[Me],Be[Me]=dn(Y,Be[Me]);const Ft=Be[0],Ct=R(Ft)||a,vt=s.convert(Y.format,Y.colorSpace),bt=s.convert(Y.type),he=O(Y.internalFormat,vt,bt,Y.colorSpace),Ue=a&&Y.isVideoTexture!==!0,nt=qe.__version===void 0||et===!0;let fe=I(Y,Ft,Ct);Ae(r.TEXTURE_CUBE_MAP,Y,Ct);let Se;if(xt){Ue&&nt&&t.texStorage2D(r.TEXTURE_CUBE_MAP,fe,he,Ft.width,Ft.height);for(let Me=0;Me<6;Me++){Se=Be[Me].mipmaps;for(let Ze=0;Ze<Se.length;Ze++){const pt=Se[Ze];Y.format!==Wr?vt!==null?Ue?t.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Me,Ze,0,0,pt.width,pt.height,vt,pt.data):t.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Me,Ze,he,pt.width,pt.height,0,pt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ue?t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Me,Ze,0,0,pt.width,pt.height,vt,bt,pt.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Me,Ze,he,pt.width,pt.height,0,vt,bt,pt.data)}}}else{Se=Y.mipmaps,Ue&&nt&&(Se.length>0&&fe++,t.texStorage2D(r.TEXTURE_CUBE_MAP,fe,he,Be[0].width,Be[0].height));for(let Me=0;Me<6;Me++)if(tt){Ue?t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,0,0,Be[Me].width,Be[Me].height,vt,bt,Be[Me].data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,he,Be[Me].width,Be[Me].height,0,vt,bt,Be[Me].data);for(let Ze=0;Ze<Se.length;Ze++){const en=Se[Ze].image[Me].image;Ue?t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Me,Ze+1,0,0,en.width,en.height,vt,bt,en.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Me,Ze+1,he,en.width,en.height,0,vt,bt,en.data)}}else{Ue?t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,0,0,vt,bt,Be[Me]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,he,vt,bt,Be[Me]);for(let Ze=0;Ze<Se.length;Ze++){const pt=Se[Ze];Ue?t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Me,Ze+1,0,0,vt,bt,pt.image[Me]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Me,Ze+1,he,vt,bt,pt.image[Me])}}}D(Y,Ct)&&j(r.TEXTURE_CUBE_MAP),qe.__version=Ke.version,Y.onUpdate&&Y.onUpdate(Y)}se.__version=Y.version}function Xe(se,Y,Ce,et,Ke,qe){const xt=s.convert(Ce.format,Ce.colorSpace),tt=s.convert(Ce.type),Be=O(Ce.internalFormat,xt,tt,Ce.colorSpace);if(!n.get(Y).__hasExternalTextures){const Ct=Math.max(1,Y.width>>qe),vt=Math.max(1,Y.height>>qe);Ke===r.TEXTURE_3D||Ke===r.TEXTURE_2D_ARRAY?t.texImage3D(Ke,qe,Be,Ct,vt,Y.depth,0,xt,tt,null):t.texImage2D(Ke,qe,Be,Ct,vt,0,xt,tt,null)}t.bindFramebuffer(r.FRAMEBUFFER,se),Et(Y)?g.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,et,Ke,n.get(Ce).__webglTexture,0,lt(Y)):(Ke===r.TEXTURE_2D||Ke>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&Ke<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,et,Ke,n.get(Ce).__webglTexture,qe),t.bindFramebuffer(r.FRAMEBUFFER,null)}function ce(se,Y,Ce){if(r.bindRenderbuffer(r.RENDERBUFFER,se),Y.depthBuffer&&!Y.stencilBuffer){let et=r.DEPTH_COMPONENT16;if(Ce||Et(Y)){const Ke=Y.depthTexture;Ke&&Ke.isDepthTexture&&(Ke.type===ei?et=r.DEPTH_COMPONENT32F:Ke.type===Ta&&(et=r.DEPTH_COMPONENT24));const qe=lt(Y);Et(Y)?g.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,qe,et,Y.width,Y.height):r.renderbufferStorageMultisample(r.RENDERBUFFER,qe,et,Y.width,Y.height)}else r.renderbufferStorage(r.RENDERBUFFER,et,Y.width,Y.height);r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,se)}else if(Y.depthBuffer&&Y.stencilBuffer){const et=lt(Y);Ce&&Et(Y)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,et,r.DEPTH24_STENCIL8,Y.width,Y.height):Et(Y)?g.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,et,r.DEPTH24_STENCIL8,Y.width,Y.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,Y.width,Y.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,se)}else{const et=Y.isWebGLMultipleRenderTargets===!0?Y.texture:[Y.texture];for(let Ke=0;Ke<et.length;Ke++){const qe=et[Ke],xt=s.convert(qe.format,qe.colorSpace),tt=s.convert(qe.type),Be=O(qe.internalFormat,xt,tt,qe.colorSpace),Ft=lt(Y);Ce&&Et(Y)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,Ft,Be,Y.width,Y.height):Et(Y)?g.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Ft,Be,Y.width,Y.height):r.renderbufferStorage(r.RENDERBUFFER,Be,Y.width,Y.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function ge(se,Y){if(Y&&Y.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(r.FRAMEBUFFER,se),!(Y.depthTexture&&Y.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(Y.depthTexture).__webglTexture||Y.depthTexture.image.width!==Y.width||Y.depthTexture.image.height!==Y.height)&&(Y.depthTexture.image.width=Y.width,Y.depthTexture.image.height=Y.height,Y.depthTexture.needsUpdate=!0),H(Y.depthTexture,0);const et=n.get(Y.depthTexture).__webglTexture,Ke=lt(Y);if(Y.depthTexture.format===jc)Et(Y)?g.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,et,0,Ke):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,et,0);else if(Y.depthTexture.format===Bd)Et(Y)?g.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,et,0,Ke):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,et,0);else throw new Error("Unknown depthTexture format")}function we(se){const Y=n.get(se),Ce=se.isWebGLCubeRenderTarget===!0;if(se.depthTexture&&!Y.__autoAllocateDepthBuffer){if(Ce)throw new Error("target.depthTexture not supported in Cube render targets");ge(Y.__webglFramebuffer,se)}else if(Ce){Y.__webglDepthbuffer=[];for(let et=0;et<6;et++)t.bindFramebuffer(r.FRAMEBUFFER,Y.__webglFramebuffer[et]),Y.__webglDepthbuffer[et]=r.createRenderbuffer(),ce(Y.__webglDepthbuffer[et],se,!1)}else t.bindFramebuffer(r.FRAMEBUFFER,Y.__webglFramebuffer),Y.__webglDepthbuffer=r.createRenderbuffer(),ce(Y.__webglDepthbuffer,se,!1);t.bindFramebuffer(r.FRAMEBUFFER,null)}function De(se,Y,Ce){const et=n.get(se);Y!==void 0&&Xe(et.__webglFramebuffer,se,se.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),Ce!==void 0&&we(se)}function Fe(se){const Y=se.texture,Ce=n.get(se),et=n.get(Y);se.addEventListener("dispose",ee),se.isWebGLMultipleRenderTargets!==!0&&(et.__webglTexture===void 0&&(et.__webglTexture=r.createTexture()),et.__version=Y.version,o.memory.textures++);const Ke=se.isWebGLCubeRenderTarget===!0,qe=se.isWebGLMultipleRenderTargets===!0,xt=R(se)||a;if(Ke){Ce.__webglFramebuffer=[];for(let tt=0;tt<6;tt++)if(a&&Y.mipmaps&&Y.mipmaps.length>0){Ce.__webglFramebuffer[tt]=[];for(let Be=0;Be<Y.mipmaps.length;Be++)Ce.__webglFramebuffer[tt][Be]=r.createFramebuffer()}else Ce.__webglFramebuffer[tt]=r.createFramebuffer()}else{if(a&&Y.mipmaps&&Y.mipmaps.length>0){Ce.__webglFramebuffer=[];for(let tt=0;tt<Y.mipmaps.length;tt++)Ce.__webglFramebuffer[tt]=r.createFramebuffer()}else Ce.__webglFramebuffer=r.createFramebuffer();if(qe)if(i.drawBuffers){const tt=se.texture;for(let Be=0,Ft=tt.length;Be<Ft;Be++){const Ct=n.get(tt[Be]);Ct.__webglTexture===void 0&&(Ct.__webglTexture=r.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&se.samples>0&&Et(se)===!1){const tt=qe?Y:[Y];Ce.__webglMultisampledFramebuffer=r.createFramebuffer(),Ce.__webglColorRenderbuffer=[],t.bindFramebuffer(r.FRAMEBUFFER,Ce.__webglMultisampledFramebuffer);for(let Be=0;Be<tt.length;Be++){const Ft=tt[Be];Ce.__webglColorRenderbuffer[Be]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,Ce.__webglColorRenderbuffer[Be]);const Ct=s.convert(Ft.format,Ft.colorSpace),vt=s.convert(Ft.type),bt=O(Ft.internalFormat,Ct,vt,Ft.colorSpace,se.isXRRenderTarget===!0),he=lt(se);r.renderbufferStorageMultisample(r.RENDERBUFFER,he,bt,se.width,se.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Be,r.RENDERBUFFER,Ce.__webglColorRenderbuffer[Be])}r.bindRenderbuffer(r.RENDERBUFFER,null),se.depthBuffer&&(Ce.__webglDepthRenderbuffer=r.createRenderbuffer(),ce(Ce.__webglDepthRenderbuffer,se,!0)),t.bindFramebuffer(r.FRAMEBUFFER,null)}}if(Ke){t.bindTexture(r.TEXTURE_CUBE_MAP,et.__webglTexture),Ae(r.TEXTURE_CUBE_MAP,Y,xt);for(let tt=0;tt<6;tt++)if(a&&Y.mipmaps&&Y.mipmaps.length>0)for(let Be=0;Be<Y.mipmaps.length;Be++)Xe(Ce.__webglFramebuffer[tt][Be],se,Y,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+tt,Be);else Xe(Ce.__webglFramebuffer[tt],se,Y,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+tt,0);D(Y,xt)&&j(r.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(qe){const tt=se.texture;for(let Be=0,Ft=tt.length;Be<Ft;Be++){const Ct=tt[Be],vt=n.get(Ct);t.bindTexture(r.TEXTURE_2D,vt.__webglTexture),Ae(r.TEXTURE_2D,Ct,xt),Xe(Ce.__webglFramebuffer,se,Ct,r.COLOR_ATTACHMENT0+Be,r.TEXTURE_2D,0),D(Ct,xt)&&j(r.TEXTURE_2D)}t.unbindTexture()}else{let tt=r.TEXTURE_2D;if((se.isWebGL3DRenderTarget||se.isWebGLArrayRenderTarget)&&(a?tt=se.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(tt,et.__webglTexture),Ae(tt,Y,xt),a&&Y.mipmaps&&Y.mipmaps.length>0)for(let Be=0;Be<Y.mipmaps.length;Be++)Xe(Ce.__webglFramebuffer[Be],se,Y,r.COLOR_ATTACHMENT0,tt,Be);else Xe(Ce.__webglFramebuffer,se,Y,r.COLOR_ATTACHMENT0,tt,0);D(Y,xt)&&j(tt),t.unbindTexture()}se.depthBuffer&&we(se)}function Qe(se){const Y=R(se)||a,Ce=se.isWebGLMultipleRenderTargets===!0?se.texture:[se.texture];for(let et=0,Ke=Ce.length;et<Ke;et++){const qe=Ce[et];if(D(qe,Y)){const xt=se.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:r.TEXTURE_2D,tt=n.get(qe).__webglTexture;t.bindTexture(xt,tt),j(xt),t.unbindTexture()}}}function st(se){if(a&&se.samples>0&&Et(se)===!1){const Y=se.isWebGLMultipleRenderTargets?se.texture:[se.texture],Ce=se.width,et=se.height;let Ke=r.COLOR_BUFFER_BIT;const qe=[],xt=se.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,tt=n.get(se),Be=se.isWebGLMultipleRenderTargets===!0;if(Be)for(let Ft=0;Ft<Y.length;Ft++)t.bindFramebuffer(r.FRAMEBUFFER,tt.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Ft,r.RENDERBUFFER,null),t.bindFramebuffer(r.FRAMEBUFFER,tt.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+Ft,r.TEXTURE_2D,null,0);t.bindFramebuffer(r.READ_FRAMEBUFFER,tt.__webglMultisampledFramebuffer),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,tt.__webglFramebuffer);for(let Ft=0;Ft<Y.length;Ft++){qe.push(r.COLOR_ATTACHMENT0+Ft),se.depthBuffer&&qe.push(xt);const Ct=tt.__ignoreDepthValues!==void 0?tt.__ignoreDepthValues:!1;if(Ct===!1&&(se.depthBuffer&&(Ke|=r.DEPTH_BUFFER_BIT),se.stencilBuffer&&(Ke|=r.STENCIL_BUFFER_BIT)),Be&&r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,tt.__webglColorRenderbuffer[Ft]),Ct===!0&&(r.invalidateFramebuffer(r.READ_FRAMEBUFFER,[xt]),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[xt])),Be){const vt=n.get(Y[Ft]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,vt,0)}r.blitFramebuffer(0,0,Ce,et,0,0,Ce,et,Ke,r.NEAREST),y&&r.invalidateFramebuffer(r.READ_FRAMEBUFFER,qe)}if(t.bindFramebuffer(r.READ_FRAMEBUFFER,null),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),Be)for(let Ft=0;Ft<Y.length;Ft++){t.bindFramebuffer(r.FRAMEBUFFER,tt.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Ft,r.RENDERBUFFER,tt.__webglColorRenderbuffer[Ft]);const Ct=n.get(Y[Ft]).__webglTexture;t.bindFramebuffer(r.FRAMEBUFFER,tt.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+Ft,r.TEXTURE_2D,Ct,0)}t.bindFramebuffer(r.DRAW_FRAMEBUFFER,tt.__webglMultisampledFramebuffer)}}function lt(se){return Math.min(p,se.samples)}function Et(se){const Y=n.get(se);return a&&se.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Y.__useRenderToTexture!==!1}function Ut(se){const Y=o.render.frame;_.get(se)!==Y&&(_.set(se,Y),se.update())}function dn(se,Y){const Ce=se.colorSpace,et=se.format,Ke=se.type;return se.isCompressedTexture===!0||se.format===uy||Ce!==Rs&&Ce!==zc&&(Ce===nn?a===!1?e.has("EXT_sRGB")===!0&&et===Wr?(se.format=uy,se.minFilter=Pn,se.generateMipmaps=!1):Y=UA.sRGBToLinear(Y):(et!==Wr||Ke!==Js)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Ce)),Y}this.allocateTextureUnit=J,this.resetTextureUnits=ie,this.setTexture2D=H,this.setTexture2DArray=X,this.setTexture3D=Z,this.setTextureCube=ye,this.rebindTextures=De,this.setupRenderTarget=Fe,this.updateRenderTargetMipmap=Qe,this.updateMultisampleRenderTarget=st,this.setupDepthRenderbuffer=we,this.setupFrameBufferTexture=Xe,this.useMultisampledRTT=Et}function NP(r,e,t){const n=t.isWebGL2;function i(s,o=zc){let a;if(s===Js)return r.UNSIGNED_BYTE;if(s===TA)return r.UNSIGNED_SHORT_4_4_4_4;if(s===RA)return r.UNSIGNED_SHORT_5_5_5_1;if(s===MA)return r.BYTE;if(s===CA)return r.SHORT;if(s===Py)return r.UNSIGNED_SHORT;if(s===Iy)return r.INT;if(s===Ta)return r.UNSIGNED_INT;if(s===ei)return r.FLOAT;if(s===ci)return n?r.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===tP)return r.ALPHA;if(s===Wr)return r.RGBA;if(s===nP)return r.LUMINANCE;if(s===rP)return r.LUMINANCE_ALPHA;if(s===jc)return r.DEPTH_COMPONENT;if(s===Bd)return r.DEPTH_STENCIL;if(s===uy)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===PA)return r.RED;if(s===IA)return r.RED_INTEGER;if(s===iP)return r.RG;if(s===LA)return r.RG_INTEGER;if(s===NA)return r.RGBA_INTEGER;if(s===Jv||s===Xv||s===Kv||s===Yv)if(o===nn)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Jv)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Xv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Kv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Yv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Jv)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Xv)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Kv)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Yv)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===ib||s===sb||s===ob||s===ab)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===ib)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===sb)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===ob)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===ab)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===sP)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===lb||s===cb)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===lb)return o===nn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===cb)return o===nn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===ub||s===db||s===hb||s===fb||s===pb||s===mb||s===gb||s===vb||s===yb||s===xb||s===_b||s===wb||s===bb||s===Ab)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===ub)return o===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===db)return o===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===hb)return o===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===fb)return o===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===pb)return o===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===mb)return o===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===gb)return o===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===vb)return o===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===yb)return o===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===xb)return o===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===_b)return o===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===wb)return o===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===bb)return o===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===Ab)return o===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===qv)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===qv)return o===nn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===oP||s===Sb||s===Eb||s===Mb)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===qv)return a.COMPRESSED_RED_RGTC1_EXT;if(s===Sb)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===Eb)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===Mb)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Uc?n?r.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):r[s]!==void 0?r[s]:null}return{convert:i}}class BP extends ar{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Sl extends Cn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const H5={type:"move"};class E_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Sl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Sl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new q,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new q),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Sl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new q,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new q),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const A of e.hand.values()){const b=t.getJointPose(A,n),w=this._getHandJoint(u,A);b!==null&&(w.matrix.fromArray(b.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),w.matrixWorldNeedsUpdate=!0,w.jointRadius=b.radius),w.visible=b!==null}const h=u.joints["index-finger-tip"],p=u.joints["thumb-tip"],g=h.position.distanceTo(p.position),y=.02,_=.005;u.inputState.pinching&&g>y+_?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&g<=y-_&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,n),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(H5)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Sl;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class kP extends In{constructor(e,t,n,i,s,o,a,l,u,h){if(h=h!==void 0?h:jc,h!==jc&&h!==Bd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&h===jc&&(n=Ta),n===void 0&&h===Bd&&(n=Uc),super(null,i,s,o,a,l,h,n,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:gr,this.minFilter=l!==void 0?l:gr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class G5 extends Dl{constructor(e,t){super();const n=this;let i=null,s=1,o=null,a="local-floor",l=1,u=null,h=null,p=null,g=null,y=null,_=null;const A=t.getContextAttributes();let b=null,w=null;const C=[],E=[],R=new ar;R.layers.enable(1),R.viewport=new Mn;const L=new ar;L.layers.enable(2),L.viewport=new Mn;const D=[R,L],j=new BP;j.layers.enable(1),j.layers.enable(2);let O=null,I=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(X){let Z=C[X];return Z===void 0&&(Z=new E_,C[X]=Z),Z.getTargetRaySpace()},this.getControllerGrip=function(X){let Z=C[X];return Z===void 0&&(Z=new E_,C[X]=Z),Z.getGripSpace()},this.getHand=function(X){let Z=C[X];return Z===void 0&&(Z=new E_,C[X]=Z),Z.getHandSpace()};function U(X){const Z=E.indexOf(X.inputSource);if(Z===-1)return;const ye=C[Z];ye!==void 0&&(ye.update(X.inputSource,X.frame,u||o),ye.dispatchEvent({type:X.type,data:X.inputSource}))}function V(){i.removeEventListener("select",U),i.removeEventListener("selectstart",U),i.removeEventListener("selectend",U),i.removeEventListener("squeeze",U),i.removeEventListener("squeezestart",U),i.removeEventListener("squeezeend",U),i.removeEventListener("end",V),i.removeEventListener("inputsourceschange",ee);for(let X=0;X<C.length;X++){const Z=E[X];Z!==null&&(E[X]=null,C[X].disconnect(Z))}O=null,I=null,e.setRenderTarget(b),y=null,g=null,p=null,i=null,w=null,H.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(X){s=X,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(X){a=X,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(X){u=X},this.getBaseLayer=function(){return g!==null?g:y},this.getBinding=function(){return p},this.getFrame=function(){return _},this.getSession=function(){return i},this.setSession=async function(X){if(i=X,i!==null){if(b=e.getRenderTarget(),i.addEventListener("select",U),i.addEventListener("selectstart",U),i.addEventListener("selectend",U),i.addEventListener("squeeze",U),i.addEventListener("squeezestart",U),i.addEventListener("squeezeend",U),i.addEventListener("end",V),i.addEventListener("inputsourceschange",ee),A.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Z={antialias:i.renderState.layers===void 0?A.antialias:!0,alpha:!0,depth:A.depth,stencil:A.stencil,framebufferScaleFactor:s};y=new XRWebGLLayer(i,t,Z),i.updateRenderState({baseLayer:y}),w=new Ys(y.framebufferWidth,y.framebufferHeight,{format:Wr,type:Js,colorSpace:e.outputColorSpace,stencilBuffer:A.stencil})}else{let Z=null,ye=null,be=null;A.depth&&(be=A.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Z=A.stencil?Bd:jc,ye=A.stencil?Uc:Ta);const Le={colorFormat:t.RGBA8,depthFormat:be,scaleFactor:s};p=new XRWebGLBinding(i,t),g=p.createProjectionLayer(Le),i.updateRenderState({layers:[g]}),w=new Ys(g.textureWidth,g.textureHeight,{format:Wr,type:Js,depthTexture:new kP(g.textureWidth,g.textureHeight,ye,void 0,void 0,void 0,void 0,void 0,void 0,Z),stencilBuffer:A.stencil,colorSpace:e.outputColorSpace,samples:A.antialias?4:0});const pe=e.properties.get(w);pe.__ignoreDepthValues=g.ignoreDepthValues}w.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await i.requestReferenceSpace(a),H.setContext(i),H.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function ee(X){for(let Z=0;Z<X.removed.length;Z++){const ye=X.removed[Z],be=E.indexOf(ye);be>=0&&(E[be]=null,C[be].disconnect(ye))}for(let Z=0;Z<X.added.length;Z++){const ye=X.added[Z];let be=E.indexOf(ye);if(be===-1){for(let pe=0;pe<C.length;pe++)if(pe>=E.length){E.push(ye),be=pe;break}else if(E[pe]===null){E[pe]=ye,be=pe;break}if(be===-1)break}const Le=C[be];Le&&Le.connect(ye)}}const te=new q,ne=new q;function le(X,Z,ye){te.setFromMatrixPosition(Z.matrixWorld),ne.setFromMatrixPosition(ye.matrixWorld);const be=te.distanceTo(ne),Le=Z.projectionMatrix.elements,pe=ye.projectionMatrix.elements,Ae=Le[14]/(Le[10]-1),je=Le[14]/(Le[10]+1),ft=(Le[9]+1)/Le[5],St=(Le[9]-1)/Le[5],Xe=(Le[8]-1)/Le[0],ce=(pe[8]+1)/pe[0],ge=Ae*Xe,we=Ae*ce,De=be/(-Xe+ce),Fe=De*-Xe;Z.matrixWorld.decompose(X.position,X.quaternion,X.scale),X.translateX(Fe),X.translateZ(De),X.matrixWorld.compose(X.position,X.quaternion,X.scale),X.matrixWorldInverse.copy(X.matrixWorld).invert();const Qe=Ae+De,st=je+De,lt=ge-Fe,Et=we+(be-Fe),Ut=ft*je/st*Qe,dn=St*je/st*Qe;X.projectionMatrix.makePerspective(lt,Et,Ut,dn,Qe,st),X.projectionMatrixInverse.copy(X.projectionMatrix).invert()}function de(X,Z){Z===null?X.matrixWorld.copy(X.matrix):X.matrixWorld.multiplyMatrices(Z.matrixWorld,X.matrix),X.matrixWorldInverse.copy(X.matrixWorld).invert()}this.updateCamera=function(X){if(i===null)return;j.near=L.near=R.near=X.near,j.far=L.far=R.far=X.far,(O!==j.near||I!==j.far)&&(i.updateRenderState({depthNear:j.near,depthFar:j.far}),O=j.near,I=j.far);const Z=X.parent,ye=j.cameras;de(j,Z);for(let be=0;be<ye.length;be++)de(ye[be],Z);ye.length===2?le(j,R,L):j.projectionMatrix.copy(R.projectionMatrix),ie(X,j,Z)};function ie(X,Z,ye){ye===null?X.matrix.copy(Z.matrixWorld):(X.matrix.copy(ye.matrixWorld),X.matrix.invert(),X.matrix.multiply(Z.matrixWorld)),X.matrix.decompose(X.position,X.quaternion,X.scale),X.updateMatrixWorld(!0);const be=X.children;for(let Le=0,pe=be.length;Le<pe;Le++)be[Le].updateMatrixWorld(!0);X.projectionMatrix.copy(Z.projectionMatrix),X.projectionMatrixInverse.copy(Z.projectionMatrixInverse),X.isPerspectiveCamera&&(X.fov=np*2*Math.atan(1/X.projectionMatrix.elements[5]),X.zoom=1)}this.getCamera=function(){return j},this.getFoveation=function(){if(!(g===null&&y===null))return l},this.setFoveation=function(X){l=X,g!==null&&(g.fixedFoveation=X),y!==null&&y.fixedFoveation!==void 0&&(y.fixedFoveation=X)};let J=null;function Q(X,Z){if(h=Z.getViewerPose(u||o),_=Z,h!==null){const ye=h.views;y!==null&&(e.setRenderTargetFramebuffer(w,y.framebuffer),e.setRenderTarget(w));let be=!1;ye.length!==j.cameras.length&&(j.cameras.length=0,be=!0);for(let Le=0;Le<ye.length;Le++){const pe=ye[Le];let Ae=null;if(y!==null)Ae=y.getViewport(pe);else{const ft=p.getViewSubImage(g,pe);Ae=ft.viewport,Le===0&&(e.setRenderTargetTextures(w,ft.colorTexture,g.ignoreDepthValues?void 0:ft.depthStencilTexture),e.setRenderTarget(w))}let je=D[Le];je===void 0&&(je=new ar,je.layers.enable(Le),je.viewport=new Mn,D[Le]=je),je.matrix.fromArray(pe.transform.matrix),je.matrix.decompose(je.position,je.quaternion,je.scale),je.projectionMatrix.fromArray(pe.projectionMatrix),je.projectionMatrixInverse.copy(je.projectionMatrix).invert(),je.viewport.set(Ae.x,Ae.y,Ae.width,Ae.height),Le===0&&(j.matrix.copy(je.matrix),j.matrix.decompose(j.position,j.quaternion,j.scale)),be===!0&&j.cameras.push(je)}}for(let ye=0;ye<C.length;ye++){const be=E[ye],Le=C[ye];be!==null&&Le!==void 0&&Le.update(be,Z,u||o)}J&&J(X,Z),Z.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Z}),_=null}const H=new TP;H.setAnimationLoop(Q),this.setAnimationLoop=function(X){J=X},this.dispose=function(){}}}function V5(r,e){function t(b,w){b.matrixAutoUpdate===!0&&b.updateMatrix(),w.value.copy(b.matrix)}function n(b,w){w.color.getRGB(b.fogColor.value,CP(r)),w.isFog?(b.fogNear.value=w.near,b.fogFar.value=w.far):w.isFogExp2&&(b.fogDensity.value=w.density)}function i(b,w,C,E,R){w.isMeshBasicMaterial||w.isMeshLambertMaterial?s(b,w):w.isMeshToonMaterial?(s(b,w),p(b,w)):w.isMeshPhongMaterial?(s(b,w),h(b,w)):w.isMeshStandardMaterial?(s(b,w),g(b,w),w.isMeshPhysicalMaterial&&y(b,w,R)):w.isMeshMatcapMaterial?(s(b,w),_(b,w)):w.isMeshDepthMaterial?s(b,w):w.isMeshDistanceMaterial?(s(b,w),A(b,w)):w.isMeshNormalMaterial?s(b,w):w.isLineBasicMaterial?(o(b,w),w.isLineDashedMaterial&&a(b,w)):w.isPointsMaterial?l(b,w,C,E):w.isSpriteMaterial?u(b,w):w.isShadowMaterial?(b.color.value.copy(w.color),b.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}function s(b,w){b.opacity.value=w.opacity,w.color&&b.diffuse.value.copy(w.color),w.emissive&&b.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(b.map.value=w.map,t(w.map,b.mapTransform)),w.alphaMap&&(b.alphaMap.value=w.alphaMap,t(w.alphaMap,b.alphaMapTransform)),w.bumpMap&&(b.bumpMap.value=w.bumpMap,t(w.bumpMap,b.bumpMapTransform),b.bumpScale.value=w.bumpScale,w.side===is&&(b.bumpScale.value*=-1)),w.normalMap&&(b.normalMap.value=w.normalMap,t(w.normalMap,b.normalMapTransform),b.normalScale.value.copy(w.normalScale),w.side===is&&b.normalScale.value.negate()),w.displacementMap&&(b.displacementMap.value=w.displacementMap,t(w.displacementMap,b.displacementMapTransform),b.displacementScale.value=w.displacementScale,b.displacementBias.value=w.displacementBias),w.emissiveMap&&(b.emissiveMap.value=w.emissiveMap,t(w.emissiveMap,b.emissiveMapTransform)),w.specularMap&&(b.specularMap.value=w.specularMap,t(w.specularMap,b.specularMapTransform)),w.alphaTest>0&&(b.alphaTest.value=w.alphaTest);const C=e.get(w).envMap;if(C&&(b.envMap.value=C,b.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,b.reflectivity.value=w.reflectivity,b.ior.value=w.ior,b.refractionRatio.value=w.refractionRatio),w.lightMap){b.lightMap.value=w.lightMap;const E=r._useLegacyLights===!0?Math.PI:1;b.lightMapIntensity.value=w.lightMapIntensity*E,t(w.lightMap,b.lightMapTransform)}w.aoMap&&(b.aoMap.value=w.aoMap,b.aoMapIntensity.value=w.aoMapIntensity,t(w.aoMap,b.aoMapTransform))}function o(b,w){b.diffuse.value.copy(w.color),b.opacity.value=w.opacity,w.map&&(b.map.value=w.map,t(w.map,b.mapTransform))}function a(b,w){b.dashSize.value=w.dashSize,b.totalSize.value=w.dashSize+w.gapSize,b.scale.value=w.scale}function l(b,w,C,E){b.diffuse.value.copy(w.color),b.opacity.value=w.opacity,b.size.value=w.size*C,b.scale.value=E*.5,w.map&&(b.map.value=w.map,t(w.map,b.uvTransform)),w.alphaMap&&(b.alphaMap.value=w.alphaMap,t(w.alphaMap,b.alphaMapTransform)),w.alphaTest>0&&(b.alphaTest.value=w.alphaTest)}function u(b,w){b.diffuse.value.copy(w.color),b.opacity.value=w.opacity,b.rotation.value=w.rotation,w.map&&(b.map.value=w.map,t(w.map,b.mapTransform)),w.alphaMap&&(b.alphaMap.value=w.alphaMap,t(w.alphaMap,b.alphaMapTransform)),w.alphaTest>0&&(b.alphaTest.value=w.alphaTest)}function h(b,w){b.specular.value.copy(w.specular),b.shininess.value=Math.max(w.shininess,1e-4)}function p(b,w){w.gradientMap&&(b.gradientMap.value=w.gradientMap)}function g(b,w){b.metalness.value=w.metalness,w.metalnessMap&&(b.metalnessMap.value=w.metalnessMap,t(w.metalnessMap,b.metalnessMapTransform)),b.roughness.value=w.roughness,w.roughnessMap&&(b.roughnessMap.value=w.roughnessMap,t(w.roughnessMap,b.roughnessMapTransform)),e.get(w).envMap&&(b.envMapIntensity.value=w.envMapIntensity)}function y(b,w,C){b.ior.value=w.ior,w.sheen>0&&(b.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),b.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(b.sheenColorMap.value=w.sheenColorMap,t(w.sheenColorMap,b.sheenColorMapTransform)),w.sheenRoughnessMap&&(b.sheenRoughnessMap.value=w.sheenRoughnessMap,t(w.sheenRoughnessMap,b.sheenRoughnessMapTransform))),w.clearcoat>0&&(b.clearcoat.value=w.clearcoat,b.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(b.clearcoatMap.value=w.clearcoatMap,t(w.clearcoatMap,b.clearcoatMapTransform)),w.clearcoatRoughnessMap&&(b.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap,t(w.clearcoatRoughnessMap,b.clearcoatRoughnessMapTransform)),w.clearcoatNormalMap&&(b.clearcoatNormalMap.value=w.clearcoatNormalMap,t(w.clearcoatNormalMap,b.clearcoatNormalMapTransform),b.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),w.side===is&&b.clearcoatNormalScale.value.negate())),w.iridescence>0&&(b.iridescence.value=w.iridescence,b.iridescenceIOR.value=w.iridescenceIOR,b.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],b.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(b.iridescenceMap.value=w.iridescenceMap,t(w.iridescenceMap,b.iridescenceMapTransform)),w.iridescenceThicknessMap&&(b.iridescenceThicknessMap.value=w.iridescenceThicknessMap,t(w.iridescenceThicknessMap,b.iridescenceThicknessMapTransform))),w.transmission>0&&(b.transmission.value=w.transmission,b.transmissionSamplerMap.value=C.texture,b.transmissionSamplerSize.value.set(C.width,C.height),w.transmissionMap&&(b.transmissionMap.value=w.transmissionMap,t(w.transmissionMap,b.transmissionMapTransform)),b.thickness.value=w.thickness,w.thicknessMap&&(b.thicknessMap.value=w.thicknessMap,t(w.thicknessMap,b.thicknessMapTransform)),b.attenuationDistance.value=w.attenuationDistance,b.attenuationColor.value.copy(w.attenuationColor)),w.anisotropy>0&&(b.anisotropyVector.value.set(w.anisotropy*Math.cos(w.anisotropyRotation),w.anisotropy*Math.sin(w.anisotropyRotation)),w.anisotropyMap&&(b.anisotropyMap.value=w.anisotropyMap,t(w.anisotropyMap,b.anisotropyMapTransform))),b.specularIntensity.value=w.specularIntensity,b.specularColor.value.copy(w.specularColor),w.specularColorMap&&(b.specularColorMap.value=w.specularColorMap,t(w.specularColorMap,b.specularColorMapTransform)),w.specularIntensityMap&&(b.specularIntensityMap.value=w.specularIntensityMap,t(w.specularIntensityMap,b.specularIntensityMapTransform))}function _(b,w){w.matcap&&(b.matcap.value=w.matcap)}function A(b,w){const C=e.get(w).light;b.referencePosition.value.setFromMatrixPosition(C.matrixWorld),b.nearDistance.value=C.shadow.camera.near,b.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function W5(r,e,t,n){let i={},s={},o=[];const a=t.isWebGL2?r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(C,E){const R=E.program;n.uniformBlockBinding(C,R)}function u(C,E){let R=i[C.id];R===void 0&&(_(C),R=h(C),i[C.id]=R,C.addEventListener("dispose",b));const L=E.program;n.updateUBOMapping(C,L);const D=e.render.frame;s[C.id]!==D&&(g(C),s[C.id]=D)}function h(C){const E=p();C.__bindingPointIndex=E;const R=r.createBuffer(),L=C.__size,D=C.usage;return r.bindBuffer(r.UNIFORM_BUFFER,R),r.bufferData(r.UNIFORM_BUFFER,L,D),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,E,R),R}function p(){for(let C=0;C<a;C++)if(o.indexOf(C)===-1)return o.push(C),C;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function g(C){const E=i[C.id],R=C.uniforms,L=C.__cache;r.bindBuffer(r.UNIFORM_BUFFER,E);for(let D=0,j=R.length;D<j;D++){const O=R[D];if(y(O,D,L)===!0){const I=O.__offset,U=Array.isArray(O.value)?O.value:[O.value];let V=0;for(let ee=0;ee<U.length;ee++){const te=U[ee],ne=A(te);typeof te=="number"?(O.__data[0]=te,r.bufferSubData(r.UNIFORM_BUFFER,I+V,O.__data)):te.isMatrix3?(O.__data[0]=te.elements[0],O.__data[1]=te.elements[1],O.__data[2]=te.elements[2],O.__data[3]=te.elements[0],O.__data[4]=te.elements[3],O.__data[5]=te.elements[4],O.__data[6]=te.elements[5],O.__data[7]=te.elements[0],O.__data[8]=te.elements[6],O.__data[9]=te.elements[7],O.__data[10]=te.elements[8],O.__data[11]=te.elements[0]):(te.toArray(O.__data,V),V+=ne.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,I,O.__data)}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function y(C,E,R){const L=C.value;if(R[E]===void 0){if(typeof L=="number")R[E]=L;else{const D=Array.isArray(L)?L:[L],j=[];for(let O=0;O<D.length;O++)j.push(D[O].clone());R[E]=j}return!0}else if(typeof L=="number"){if(R[E]!==L)return R[E]=L,!0}else{const D=Array.isArray(R[E])?R[E]:[R[E]],j=Array.isArray(L)?L:[L];for(let O=0;O<D.length;O++){const I=D[O];if(I.equals(j[O])===!1)return I.copy(j[O]),!0}}return!1}function _(C){const E=C.uniforms;let R=0;const L=16;let D=0;for(let j=0,O=E.length;j<O;j++){const I=E[j],U={boundary:0,storage:0},V=Array.isArray(I.value)?I.value:[I.value];for(let ee=0,te=V.length;ee<te;ee++){const ne=V[ee],le=A(ne);U.boundary+=le.boundary,U.storage+=le.storage}if(I.__data=new Float32Array(U.storage/Float32Array.BYTES_PER_ELEMENT),I.__offset=R,j>0){D=R%L;const ee=L-D;D!==0&&ee-U.boundary<0&&(R+=L-D,I.__offset=R)}R+=U.storage}return D=R%L,D>0&&(R+=L-D),C.__size=R,C.__cache={},this}function A(C){const E={boundary:0,storage:0};return typeof C=="number"?(E.boundary=4,E.storage=4):C.isVector2?(E.boundary=8,E.storage=8):C.isVector3||C.isColor?(E.boundary=16,E.storage=12):C.isVector4?(E.boundary=16,E.storage=16):C.isMatrix3?(E.boundary=48,E.storage=48):C.isMatrix4?(E.boundary=64,E.storage=64):C.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",C),E}function b(C){const E=C.target;E.removeEventListener("dispose",b);const R=o.indexOf(E.__bindingPointIndex);o.splice(R,1),r.deleteBuffer(i[E.id]),delete i[E.id],delete s[E.id]}function w(){for(const C in i)r.deleteBuffer(i[C]);o=[],i={},s={}}return{bind:l,update:u,dispose:w}}function J5(){const r=sg("canvas");return r.style.display="block",r}class bg{constructor(e={}){const{canvas:t=J5(),context:n=null,depth:i=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:p=!1}=e;this.isWebGLRenderer=!0;let g;n!==null?g=n.getContextAttributes().alpha:g=o;const y=new Uint32Array(4),_=new Int32Array(4);let A=null,b=null;const w=[],C=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=nn,this._useLegacyLights=!1,this.toneMapping=Na,this.toneMappingExposure=1;const E=this;let R=!1,L=0,D=0,j=null,O=-1,I=null;const U=new Mn,V=new Mn;let ee=null;const te=new mt(0);let ne=0,le=t.width,de=t.height,ie=1,J=null,Q=null;const H=new Mn(0,0,le,de),X=new Mn(0,0,le,de);let Z=!1;const ye=new ky;let be=!1,Le=!1,pe=null;const Ae=new Jt,je=new We,ft=new q,St={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Xe(){return j===null?ie:1}let ce=n;function ge(k,K){for(let re=0;re<k.length;re++){const $=k[re],ae=t.getContext($,K);if(ae!==null)return ae}return null}try{const k={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:p};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${hp}`),t.addEventListener("webglcontextlost",Se,!1),t.addEventListener("webglcontextrestored",Me,!1),t.addEventListener("webglcontextcreationerror",Ze,!1),ce===null){const K=["webgl2","webgl","experimental-webgl"];if(E.isWebGL1Renderer===!0&&K.shift(),ce=ge(K,k),ce===null)throw ge(K)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&ce instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),ce.getShaderPrecisionFormat===void 0&&(ce.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(k){throw console.error("THREE.WebGLRenderer: "+k.message),k}let we,De,Fe,Qe,st,lt,Et,Ut,dn,se,Y,Ce,et,Ke,qe,xt,tt,Be,Ft,Ct,vt,bt,he,Ue;function nt(){we=new aj(ce),De=new tj(ce,we,e),we.init(De),bt=new NP(ce,we,De),Fe=new j5(ce,we,De),Qe=new uj(ce),st=new T5,lt=new z5(ce,we,Fe,st,De,bt,Qe),Et=new rj(E),Ut=new oj(E),dn=new _O(ce,De),he=new $4(ce,we,dn,De),se=new lj(ce,dn,Qe,he),Y=new pj(ce,se,dn,Qe),Ft=new fj(ce,De,lt),xt=new nj(st),Ce=new C5(E,Et,Ut,we,De,he,xt),et=new V5(E,st),Ke=new P5,qe=new D5(we,De),Be=new Z4(E,Et,Ut,Fe,Y,g,l),tt=new U5(E,Y,De),Ue=new W5(ce,Qe,De,Fe),Ct=new ej(ce,we,Qe,De),vt=new cj(ce,we,Qe,De),Qe.programs=Ce.programs,E.capabilities=De,E.extensions=we,E.properties=st,E.renderLists=Ke,E.shadowMap=tt,E.state=Fe,E.info=Qe}nt();const fe=new G5(E,ce);this.xr=fe,this.getContext=function(){return ce},this.getContextAttributes=function(){return ce.getContextAttributes()},this.forceContextLoss=function(){const k=we.get("WEBGL_lose_context");k&&k.loseContext()},this.forceContextRestore=function(){const k=we.get("WEBGL_lose_context");k&&k.restoreContext()},this.getPixelRatio=function(){return ie},this.setPixelRatio=function(k){k!==void 0&&(ie=k,this.setSize(le,de,!1))},this.getSize=function(k){return k.set(le,de)},this.setSize=function(k,K,re=!0){if(fe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}le=k,de=K,t.width=Math.floor(k*ie),t.height=Math.floor(K*ie),re===!0&&(t.style.width=k+"px",t.style.height=K+"px"),this.setViewport(0,0,k,K)},this.getDrawingBufferSize=function(k){return k.set(le*ie,de*ie).floor()},this.setDrawingBufferSize=function(k,K,re){le=k,de=K,ie=re,t.width=Math.floor(k*re),t.height=Math.floor(K*re),this.setViewport(0,0,k,K)},this.getCurrentViewport=function(k){return k.copy(U)},this.getViewport=function(k){return k.copy(H)},this.setViewport=function(k,K,re,$){k.isVector4?H.set(k.x,k.y,k.z,k.w):H.set(k,K,re,$),Fe.viewport(U.copy(H).multiplyScalar(ie).floor())},this.getScissor=function(k){return k.copy(X)},this.setScissor=function(k,K,re,$){k.isVector4?X.set(k.x,k.y,k.z,k.w):X.set(k,K,re,$),Fe.scissor(V.copy(X).multiplyScalar(ie).floor())},this.getScissorTest=function(){return Z},this.setScissorTest=function(k){Fe.setScissorTest(Z=k)},this.setOpaqueSort=function(k){J=k},this.setTransparentSort=function(k){Q=k},this.getClearColor=function(k){return k.copy(Be.getClearColor())},this.setClearColor=function(){Be.setClearColor.apply(Be,arguments)},this.getClearAlpha=function(){return Be.getClearAlpha()},this.setClearAlpha=function(){Be.setClearAlpha.apply(Be,arguments)},this.clear=function(k=!0,K=!0,re=!0){let $=0;if(k){let ae=!1;if(j!==null){const Te=j.texture.format;ae=Te===NA||Te===LA||Te===IA}if(ae){const Te=j.texture.type,Ne=Te===Js||Te===Ta||Te===Py||Te===Uc||Te===TA||Te===RA,He=Be.getClearColor(),Ge=Be.getClearAlpha(),Je=He.r,Pe=He.g,_t=He.b;Ne?(y[0]=Je,y[1]=Pe,y[2]=_t,y[3]=Ge,ce.clearBufferuiv(ce.COLOR,0,y)):(_[0]=Je,_[1]=Pe,_[2]=_t,_[3]=Ge,ce.clearBufferiv(ce.COLOR,0,_))}else $|=ce.COLOR_BUFFER_BIT}K&&($|=ce.DEPTH_BUFFER_BIT),re&&($|=ce.STENCIL_BUFFER_BIT),ce.clear($)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Se,!1),t.removeEventListener("webglcontextrestored",Me,!1),t.removeEventListener("webglcontextcreationerror",Ze,!1),Ke.dispose(),qe.dispose(),st.dispose(),Et.dispose(),Ut.dispose(),Y.dispose(),he.dispose(),Ue.dispose(),Ce.dispose(),fe.dispose(),fe.removeEventListener("sessionstart",hn),fe.removeEventListener("sessionend",cr),pe&&(pe.dispose(),pe=null),zn.stop()};function Se(k){k.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),R=!0}function Me(){console.log("THREE.WebGLRenderer: Context Restored."),R=!1;const k=Qe.autoReset,K=tt.enabled,re=tt.autoUpdate,$=tt.needsUpdate,ae=tt.type;nt(),Qe.autoReset=k,tt.enabled=K,tt.autoUpdate=re,tt.needsUpdate=$,tt.type=ae}function Ze(k){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",k.statusMessage)}function pt(k){const K=k.target;K.removeEventListener("dispose",pt),en(K)}function en(k){an(k),st.remove(k)}function an(k){const K=st.get(k).programs;K!==void 0&&(K.forEach(function(re){Ce.releaseProgram(re)}),k.isShaderMaterial&&Ce.releaseShaderCache(k))}this.renderBufferDirect=function(k,K,re,$,ae,Te){K===null&&(K=St);const Ne=ae.isMesh&&ae.matrixWorld.determinant()<0,He=Ol(k,K,re,$,ae);Fe.setMaterial($,Ne);let Ge=re.index,Je=1;if($.wireframe===!0){if(Ge=se.getWireframeAttribute(re),Ge===void 0)return;Je=2}const Pe=re.drawRange,_t=re.attributes.position;let at=Pe.start*Je,ut=(Pe.start+Pe.count)*Je;Te!==null&&(at=Math.max(at,Te.start*Je),ut=Math.min(ut,(Te.start+Te.count)*Je)),Ge!==null?(at=Math.max(at,0),ut=Math.min(ut,Ge.count)):_t!=null&&(at=Math.max(at,0),ut=Math.min(ut,_t.count));const Lt=ut-at;if(Lt<0||Lt===1/0)return;he.setup(ae,$,He,re,Ge);let Ht,Ot=Ct;if(Ge!==null&&(Ht=dn.get(Ge),Ot=vt,Ot.setIndex(Ht)),ae.isMesh)$.wireframe===!0?(Fe.setLineWidth($.wireframeLinewidth*Xe()),Ot.setMode(ce.LINES)):Ot.setMode(ce.TRIANGLES);else if(ae.isLine){let gt=$.linewidth;gt===void 0&&(gt=1),Fe.setLineWidth(gt*Xe()),ae.isLineSegments?Ot.setMode(ce.LINES):ae.isLineLoop?Ot.setMode(ce.LINE_LOOP):Ot.setMode(ce.LINE_STRIP)}else ae.isPoints?Ot.setMode(ce.POINTS):ae.isSprite&&Ot.setMode(ce.TRIANGLES);if(ae.isInstancedMesh)Ot.renderInstances(at,Lt,ae.count);else if(re.isInstancedBufferGeometry){const gt=re._maxInstanceCount!==void 0?re._maxInstanceCount:1/0,kt=Math.min(re.instanceCount,gt);Ot.renderInstances(at,Lt,kt)}else Ot.render(at,Lt)},this.compile=function(k,K){function re($,ae,Te){$.transparent===!0&&$.side===Es&&$.forceSinglePass===!1?($.side=is,$.needsUpdate=!0,Er($,ae,Te),$.side=Fa,$.needsUpdate=!0,Er($,ae,Te),$.side=Es):Er($,ae,Te)}b=qe.get(k),b.init(),C.push(b),k.traverseVisible(function($){$.isLight&&$.layers.test(K.layers)&&(b.pushLight($),$.castShadow&&b.pushShadow($))}),b.setupLights(E._useLegacyLights),k.traverse(function($){const ae=$.material;if(ae)if(Array.isArray(ae))for(let Te=0;Te<ae.length;Te++){const Ne=ae[Te];re(Ne,k,$)}else re(ae,k,$)}),C.pop(),b=null};let vn=null;function _r(k){vn&&vn(k)}function hn(){zn.stop()}function cr(){zn.start()}const zn=new TP;zn.setAnimationLoop(_r),typeof self<"u"&&zn.setContext(self),this.setAnimationLoop=function(k){vn=k,fe.setAnimationLoop(k),k===null?zn.stop():zn.start()},fe.addEventListener("sessionstart",hn),fe.addEventListener("sessionend",cr),this.render=function(k,K){if(K!==void 0&&K.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(R===!0)return;k.matrixWorldAutoUpdate===!0&&k.updateMatrixWorld(),K.parent===null&&K.matrixWorldAutoUpdate===!0&&K.updateMatrixWorld(),fe.enabled===!0&&fe.isPresenting===!0&&(fe.cameraAutoUpdate===!0&&fe.updateCamera(K),K=fe.getCamera()),k.isScene===!0&&k.onBeforeRender(E,k,K,j),b=qe.get(k,C.length),b.init(),C.push(b),Ae.multiplyMatrices(K.projectionMatrix,K.matrixWorldInverse),ye.setFromProjectionMatrix(Ae),Le=this.localClippingEnabled,be=xt.init(this.clippingPlanes,Le),A=Ke.get(k,w.length),A.init(),w.push(A),ia(k,K,0,E.sortObjects),A.finish(),E.sortObjects===!0&&A.sort(J,Q),this.info.render.frame++,be===!0&&xt.beginShadows();const re=b.state.shadowsArray;if(tt.render(re,k,K),be===!0&&xt.endShadows(),this.info.autoReset===!0&&this.info.reset(),Be.render(A,k),b.setupLights(E._useLegacyLights),K.isArrayCamera){const $=K.cameras;for(let ae=0,Te=$.length;ae<Te;ae++){const Ne=$[ae];Qs(A,k,Ne,Ne.viewport)}}else Qs(A,k,K);j!==null&&(lt.updateMultisampleRenderTarget(j),lt.updateRenderTargetMipmap(j)),k.isScene===!0&&k.onAfterRender(E,k,K),he.resetDefaultState(),O=-1,I=null,C.pop(),C.length>0?b=C[C.length-1]:b=null,w.pop(),w.length>0?A=w[w.length-1]:A=null};function ia(k,K,re,$){if(k.visible===!1)return;if(k.layers.test(K.layers)){if(k.isGroup)re=k.renderOrder;else if(k.isLOD)k.autoUpdate===!0&&k.update(K);else if(k.isLight)b.pushLight(k),k.castShadow&&b.pushShadow(k);else if(k.isSprite){if(!k.frustumCulled||ye.intersectsSprite(k)){$&&ft.setFromMatrixPosition(k.matrixWorld).applyMatrix4(Ae);const Ne=Y.update(k),He=k.material;He.visible&&A.push(k,Ne,He,re,ft.z,null)}}else if((k.isMesh||k.isLine||k.isPoints)&&(!k.frustumCulled||ye.intersectsObject(k))){const Ne=Y.update(k),He=k.material;if($&&(k.boundingSphere!==void 0?(k.boundingSphere===null&&k.computeBoundingSphere(),ft.copy(k.boundingSphere.center)):(Ne.boundingSphere===null&&Ne.computeBoundingSphere(),ft.copy(Ne.boundingSphere.center)),ft.applyMatrix4(k.matrixWorld).applyMatrix4(Ae)),Array.isArray(He)){const Ge=Ne.groups;for(let Je=0,Pe=Ge.length;Je<Pe;Je++){const _t=Ge[Je],at=He[_t.materialIndex];at&&at.visible&&A.push(k,Ne,at,re,ft.z,_t)}}else He.visible&&A.push(k,Ne,He,re,ft.z,null)}}const Te=k.children;for(let Ne=0,He=Te.length;Ne<He;Ne++)ia(Te[Ne],K,re,$)}function Qs(k,K,re,$){const ae=k.opaque,Te=k.transmissive,Ne=k.transparent;b.setupLightsView(re),be===!0&&xt.setGlobalState(E.clippingPlanes,re),Te.length>0&&bo(ae,Te,K,re),$&&Fe.viewport(U.copy($)),ae.length>0&&Ti(ae,K,re),Te.length>0&&Ti(Te,K,re),Ne.length>0&&Ti(Ne,K,re),Fe.buffers.depth.setTest(!0),Fe.buffers.depth.setMask(!0),Fe.buffers.color.setMask(!0),Fe.setPolygonOffset(!1)}function bo(k,K,re,$){const ae=De.isWebGL2;pe===null&&(pe=new Ys(1,1,{generateMipmaps:!0,type:we.has("EXT_color_buffer_half_float")?ci:Js,minFilter:ea,samples:ae?4:0})),E.getDrawingBufferSize(je),ae?pe.setSize(je.x,je.y):pe.setSize(dy(je.x),dy(je.y));const Te=E.getRenderTarget();E.setRenderTarget(pe),E.getClearColor(te),ne=E.getClearAlpha(),ne<1&&E.setClearColor(16777215,.5),E.clear();const Ne=E.toneMapping;E.toneMapping=Na,Ti(k,re,$),lt.updateMultisampleRenderTarget(pe),lt.updateRenderTargetMipmap(pe);let He=!1;for(let Ge=0,Je=K.length;Ge<Je;Ge++){const Pe=K[Ge],_t=Pe.object,at=Pe.geometry,ut=Pe.material,Lt=Pe.group;if(ut.side===Es&&_t.layers.test($.layers)){const Ht=ut.side;ut.side=is,ut.needsUpdate=!0,Gi(_t,re,$,at,ut,Lt),ut.side=Ht,ut.needsUpdate=!0,He=!0}}He===!0&&(lt.updateMultisampleRenderTarget(pe),lt.updateRenderTargetMipmap(pe)),E.setRenderTarget(Te),E.setClearColor(te,ne),E.toneMapping=Ne}function Ti(k,K,re){const $=K.isScene===!0?K.overrideMaterial:null;for(let ae=0,Te=k.length;ae<Te;ae++){const Ne=k[ae],He=Ne.object,Ge=Ne.geometry,Je=$===null?Ne.material:$,Pe=Ne.group;He.layers.test(re.layers)&&Gi(He,K,re,Ge,Je,Pe)}}function Gi(k,K,re,$,ae,Te){k.onBeforeRender(E,K,re,$,ae,Te),k.modelViewMatrix.multiplyMatrices(re.matrixWorldInverse,k.matrixWorld),k.normalMatrix.getNormalMatrix(k.modelViewMatrix),ae.onBeforeRender(E,K,re,$,k,Te),ae.transparent===!0&&ae.side===Es&&ae.forceSinglePass===!1?(ae.side=is,ae.needsUpdate=!0,E.renderBufferDirect(re,K,$,ae,k,Te),ae.side=Fa,ae.needsUpdate=!0,E.renderBufferDirect(re,K,$,ae,k,Te),ae.side=Es):E.renderBufferDirect(re,K,$,ae,k,Te),k.onAfterRender(E,K,re,$,ae,Te)}function Er(k,K,re){K.isScene!==!0&&(K=St);const $=st.get(k),ae=b.state.lights,Te=b.state.shadowsArray,Ne=ae.state.version,He=Ce.getParameters(k,ae.state,Te,K,re),Ge=Ce.getProgramCacheKey(He);let Je=$.programs;$.environment=k.isMeshStandardMaterial?K.environment:null,$.fog=K.fog,$.envMap=(k.isMeshStandardMaterial?Ut:Et).get(k.envMap||$.environment),Je===void 0&&(k.addEventListener("dispose",pt),Je=new Map,$.programs=Je);let Pe=Je.get(Ge);if(Pe!==void 0){if($.currentProgram===Pe&&$.lightsStateVersion===Ne)return $t(k,He),Pe}else He.uniforms=Ce.getUniforms(k),k.onBuild(re,He,E),k.onBeforeCompile(He,E),Pe=Ce.acquireProgram(He,Ge),Je.set(Ge,Pe),$.uniforms=He.uniforms;const _t=$.uniforms;(!k.isShaderMaterial&&!k.isRawShaderMaterial||k.clipping===!0)&&(_t.clippingPlanes=xt.uniform),$t(k,He),$.needsLights=G(k),$.lightsStateVersion=Ne,$.needsLights&&(_t.ambientLightColor.value=ae.state.ambient,_t.lightProbe.value=ae.state.probe,_t.directionalLights.value=ae.state.directional,_t.directionalLightShadows.value=ae.state.directionalShadow,_t.spotLights.value=ae.state.spot,_t.spotLightShadows.value=ae.state.spotShadow,_t.rectAreaLights.value=ae.state.rectArea,_t.ltc_1.value=ae.state.rectAreaLTC1,_t.ltc_2.value=ae.state.rectAreaLTC2,_t.pointLights.value=ae.state.point,_t.pointLightShadows.value=ae.state.pointShadow,_t.hemisphereLights.value=ae.state.hemi,_t.directionalShadowMap.value=ae.state.directionalShadowMap,_t.directionalShadowMatrix.value=ae.state.directionalShadowMatrix,_t.spotShadowMap.value=ae.state.spotShadowMap,_t.spotLightMatrix.value=ae.state.spotLightMatrix,_t.spotLightMap.value=ae.state.spotLightMap,_t.pointShadowMap.value=ae.state.pointShadowMap,_t.pointShadowMatrix.value=ae.state.pointShadowMatrix);const at=Pe.getUniforms(),ut=$v.seqWithValue(at.seq,_t);return $.currentProgram=Pe,$.uniformsList=ut,Pe}function $t(k,K){const re=st.get(k);re.outputColorSpace=K.outputColorSpace,re.instancing=K.instancing,re.instancingColor=K.instancingColor,re.skinning=K.skinning,re.morphTargets=K.morphTargets,re.morphNormals=K.morphNormals,re.morphColors=K.morphColors,re.morphTargetsCount=K.morphTargetsCount,re.numClippingPlanes=K.numClippingPlanes,re.numIntersection=K.numClipIntersection,re.vertexAlphas=K.vertexAlphas,re.vertexTangents=K.vertexTangents,re.toneMapping=K.toneMapping}function Ol(k,K,re,$,ae){K.isScene!==!0&&(K=St),lt.resetTextureUnits();const Te=K.fog,Ne=$.isMeshStandardMaterial?K.environment:null,He=j===null?E.outputColorSpace:j.isXRRenderTarget===!0?j.texture.colorSpace:Rs,Ge=($.isMeshStandardMaterial?Ut:Et).get($.envMap||Ne),Je=$.vertexColors===!0&&!!re.attributes.color&&re.attributes.color.itemSize===4,Pe=!!re.attributes.tangent&&(!!$.normalMap||$.anisotropy>0),_t=!!re.morphAttributes.position,at=!!re.morphAttributes.normal,ut=!!re.morphAttributes.color;let Lt=Na;$.toneMapped&&(j===null||j.isXRRenderTarget===!0)&&(Lt=E.toneMapping);const Ht=re.morphAttributes.position||re.morphAttributes.normal||re.morphAttributes.color,Ot=Ht!==void 0?Ht.length:0,gt=st.get($),kt=b.state.lights;if(be===!0&&(Le===!0||k!==I)){const Xt=k===I&&$.id===O;xt.setState($,k,Xt)}let Pt=!1;$.version===gt.__version?(gt.needsLights&&gt.lightsStateVersion!==kt.state.version||gt.outputColorSpace!==He||ae.isInstancedMesh&&gt.instancing===!1||!ae.isInstancedMesh&&gt.instancing===!0||ae.isSkinnedMesh&&gt.skinning===!1||!ae.isSkinnedMesh&&gt.skinning===!0||ae.isInstancedMesh&&gt.instancingColor===!0&&ae.instanceColor===null||ae.isInstancedMesh&&gt.instancingColor===!1&&ae.instanceColor!==null||gt.envMap!==Ge||$.fog===!0&&gt.fog!==Te||gt.numClippingPlanes!==void 0&&(gt.numClippingPlanes!==xt.numPlanes||gt.numIntersection!==xt.numIntersection)||gt.vertexAlphas!==Je||gt.vertexTangents!==Pe||gt.morphTargets!==_t||gt.morphNormals!==at||gt.morphColors!==ut||gt.toneMapping!==Lt||De.isWebGL2===!0&&gt.morphTargetsCount!==Ot)&&(Pt=!0):(Pt=!0,gt.__version=$.version);let jt=gt.currentProgram;Pt===!0&&(jt=Er($,K,ae));let Fn=!1,Yt=!1,On=!1;const yn=jt.getUniforms(),Ln=gt.uniforms;if(Fe.useProgram(jt.program)&&(Fn=!0,Yt=!0,On=!0),$.id!==O&&(O=$.id,Yt=!0),Fn||I!==k){if(yn.setValue(ce,"projectionMatrix",k.projectionMatrix),De.logarithmicDepthBuffer&&yn.setValue(ce,"logDepthBufFC",2/(Math.log(k.far+1)/Math.LN2)),I!==k&&(I=k,Yt=!0,On=!0),$.isShaderMaterial||$.isMeshPhongMaterial||$.isMeshToonMaterial||$.isMeshStandardMaterial||$.envMap){const Xt=yn.map.cameraPosition;Xt!==void 0&&Xt.setValue(ce,ft.setFromMatrixPosition(k.matrixWorld))}($.isMeshPhongMaterial||$.isMeshToonMaterial||$.isMeshLambertMaterial||$.isMeshBasicMaterial||$.isMeshStandardMaterial||$.isShaderMaterial)&&yn.setValue(ce,"isOrthographic",k.isOrthographicCamera===!0),($.isMeshPhongMaterial||$.isMeshToonMaterial||$.isMeshLambertMaterial||$.isMeshBasicMaterial||$.isMeshStandardMaterial||$.isShaderMaterial||$.isShadowMaterial||ae.isSkinnedMesh)&&yn.setValue(ce,"viewMatrix",k.matrixWorldInverse)}if(ae.isSkinnedMesh){yn.setOptional(ce,ae,"bindMatrix"),yn.setOptional(ce,ae,"bindMatrixInverse");const Xt=ae.skeleton;Xt&&(De.floatVertexTextures?(Xt.boneTexture===null&&Xt.computeBoneTexture(),yn.setValue(ce,"boneTexture",Xt.boneTexture,lt),yn.setValue(ce,"boneTextureSize",Xt.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Xn=re.morphAttributes;if((Xn.position!==void 0||Xn.normal!==void 0||Xn.color!==void 0&&De.isWebGL2===!0)&&Ft.update(ae,re,jt),(Yt||gt.receiveShadow!==ae.receiveShadow)&&(gt.receiveShadow=ae.receiveShadow,yn.setValue(ce,"receiveShadow",ae.receiveShadow)),$.isMeshGouraudMaterial&&$.envMap!==null&&(Ln.envMap.value=Ge,Ln.flipEnvMap.value=Ge.isCubeTexture&&Ge.isRenderTargetTexture===!1?-1:1),Yt&&(yn.setValue(ce,"toneMappingExposure",E.toneMappingExposure),gt.needsLights&&lu(Ln,On),Te&&$.fog===!0&&et.refreshFogUniforms(Ln,Te),et.refreshMaterialUniforms(Ln,$,ie,de,pe),$v.upload(ce,gt.uniformsList,Ln,lt)),$.isShaderMaterial&&$.uniformsNeedUpdate===!0&&($v.upload(ce,gt.uniformsList,Ln,lt),$.uniformsNeedUpdate=!1),$.isSpriteMaterial&&yn.setValue(ce,"center",ae.center),yn.setValue(ce,"modelViewMatrix",ae.modelViewMatrix),yn.setValue(ce,"normalMatrix",ae.normalMatrix),yn.setValue(ce,"modelMatrix",ae.matrixWorld),$.isShaderMaterial||$.isRawShaderMaterial){const Xt=$.uniformsGroups;for(let nr=0,Nn=Xt.length;nr<Nn;nr++)if(De.isWebGL2){const mn=Xt[nr];Ue.update(mn,jt),Ue.bind(mn,jt)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return jt}function lu(k,K){k.ambientLightColor.needsUpdate=K,k.lightProbe.needsUpdate=K,k.directionalLights.needsUpdate=K,k.directionalLightShadows.needsUpdate=K,k.pointLights.needsUpdate=K,k.pointLightShadows.needsUpdate=K,k.spotLights.needsUpdate=K,k.spotLightShadows.needsUpdate=K,k.rectAreaLights.needsUpdate=K,k.hemisphereLights.needsUpdate=K}function G(k){return k.isMeshLambertMaterial||k.isMeshToonMaterial||k.isMeshPhongMaterial||k.isMeshStandardMaterial||k.isShadowMaterial||k.isShaderMaterial&&k.lights===!0}this.getActiveCubeFace=function(){return L},this.getActiveMipmapLevel=function(){return D},this.getRenderTarget=function(){return j},this.setRenderTargetTextures=function(k,K,re){st.get(k.texture).__webglTexture=K,st.get(k.depthTexture).__webglTexture=re;const $=st.get(k);$.__hasExternalTextures=!0,$.__hasExternalTextures&&($.__autoAllocateDepthBuffer=re===void 0,$.__autoAllocateDepthBuffer||we.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),$.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(k,K){const re=st.get(k);re.__webglFramebuffer=K,re.__useDefaultFramebuffer=K===void 0},this.setRenderTarget=function(k,K=0,re=0){j=k,L=K,D=re;let $=!0,ae=null,Te=!1,Ne=!1;if(k){const Ge=st.get(k);Ge.__useDefaultFramebuffer!==void 0?(Fe.bindFramebuffer(ce.FRAMEBUFFER,null),$=!1):Ge.__webglFramebuffer===void 0?lt.setupRenderTarget(k):Ge.__hasExternalTextures&&lt.rebindTextures(k,st.get(k.texture).__webglTexture,st.get(k.depthTexture).__webglTexture);const Je=k.texture;(Je.isData3DTexture||Je.isDataArrayTexture||Je.isCompressedArrayTexture)&&(Ne=!0);const Pe=st.get(k).__webglFramebuffer;k.isWebGLCubeRenderTarget?(Array.isArray(Pe[K])?ae=Pe[K][re]:ae=Pe[K],Te=!0):De.isWebGL2&&k.samples>0&&lt.useMultisampledRTT(k)===!1?ae=st.get(k).__webglMultisampledFramebuffer:Array.isArray(Pe)?ae=Pe[re]:ae=Pe,U.copy(k.viewport),V.copy(k.scissor),ee=k.scissorTest}else U.copy(H).multiplyScalar(ie).floor(),V.copy(X).multiplyScalar(ie).floor(),ee=Z;if(Fe.bindFramebuffer(ce.FRAMEBUFFER,ae)&&De.drawBuffers&&$&&Fe.drawBuffers(k,ae),Fe.viewport(U),Fe.scissor(V),Fe.setScissorTest(ee),Te){const Ge=st.get(k.texture);ce.framebufferTexture2D(ce.FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_CUBE_MAP_POSITIVE_X+K,Ge.__webglTexture,re)}else if(Ne){const Ge=st.get(k.texture),Je=K||0;ce.framebufferTextureLayer(ce.FRAMEBUFFER,ce.COLOR_ATTACHMENT0,Ge.__webglTexture,re||0,Je)}O=-1},this.readRenderTargetPixels=function(k,K,re,$,ae,Te,Ne){if(!(k&&k.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let He=st.get(k).__webglFramebuffer;if(k.isWebGLCubeRenderTarget&&Ne!==void 0&&(He=He[Ne]),He){Fe.bindFramebuffer(ce.FRAMEBUFFER,He);try{const Ge=k.texture,Je=Ge.format,Pe=Ge.type;if(Je!==Wr&&bt.convert(Je)!==ce.getParameter(ce.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const _t=Pe===ci&&(we.has("EXT_color_buffer_half_float")||De.isWebGL2&&we.has("EXT_color_buffer_float"));if(Pe!==Js&&bt.convert(Pe)!==ce.getParameter(ce.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Pe===ei&&(De.isWebGL2||we.has("OES_texture_float")||we.has("WEBGL_color_buffer_float")))&&!_t){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}K>=0&&K<=k.width-$&&re>=0&&re<=k.height-ae&&ce.readPixels(K,re,$,ae,bt.convert(Je),bt.convert(Pe),Te)}finally{const Ge=j!==null?st.get(j).__webglFramebuffer:null;Fe.bindFramebuffer(ce.FRAMEBUFFER,Ge)}}},this.copyFramebufferToTexture=function(k,K,re=0){const $=Math.pow(2,-re),ae=Math.floor(K.image.width*$),Te=Math.floor(K.image.height*$);lt.setTexture2D(K,0),ce.copyTexSubImage2D(ce.TEXTURE_2D,re,0,0,k.x,k.y,ae,Te),Fe.unbindTexture()},this.copyTextureToTexture=function(k,K,re,$=0){const ae=K.image.width,Te=K.image.height,Ne=bt.convert(re.format),He=bt.convert(re.type);lt.setTexture2D(re,0),ce.pixelStorei(ce.UNPACK_FLIP_Y_WEBGL,re.flipY),ce.pixelStorei(ce.UNPACK_PREMULTIPLY_ALPHA_WEBGL,re.premultiplyAlpha),ce.pixelStorei(ce.UNPACK_ALIGNMENT,re.unpackAlignment),K.isDataTexture?ce.texSubImage2D(ce.TEXTURE_2D,$,k.x,k.y,ae,Te,Ne,He,K.image.data):K.isCompressedTexture?ce.compressedTexSubImage2D(ce.TEXTURE_2D,$,k.x,k.y,K.mipmaps[0].width,K.mipmaps[0].height,Ne,K.mipmaps[0].data):ce.texSubImage2D(ce.TEXTURE_2D,$,k.x,k.y,Ne,He,K.image),$===0&&re.generateMipmaps&&ce.generateMipmap(ce.TEXTURE_2D),Fe.unbindTexture()},this.copyTextureToTexture3D=function(k,K,re,$,ae=0){if(E.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Te=k.max.x-k.min.x+1,Ne=k.max.y-k.min.y+1,He=k.max.z-k.min.z+1,Ge=bt.convert($.format),Je=bt.convert($.type);let Pe;if($.isData3DTexture)lt.setTexture3D($,0),Pe=ce.TEXTURE_3D;else if($.isDataArrayTexture)lt.setTexture2DArray($,0),Pe=ce.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ce.pixelStorei(ce.UNPACK_FLIP_Y_WEBGL,$.flipY),ce.pixelStorei(ce.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$.premultiplyAlpha),ce.pixelStorei(ce.UNPACK_ALIGNMENT,$.unpackAlignment);const _t=ce.getParameter(ce.UNPACK_ROW_LENGTH),at=ce.getParameter(ce.UNPACK_IMAGE_HEIGHT),ut=ce.getParameter(ce.UNPACK_SKIP_PIXELS),Lt=ce.getParameter(ce.UNPACK_SKIP_ROWS),Ht=ce.getParameter(ce.UNPACK_SKIP_IMAGES),Ot=re.isCompressedTexture?re.mipmaps[0]:re.image;ce.pixelStorei(ce.UNPACK_ROW_LENGTH,Ot.width),ce.pixelStorei(ce.UNPACK_IMAGE_HEIGHT,Ot.height),ce.pixelStorei(ce.UNPACK_SKIP_PIXELS,k.min.x),ce.pixelStorei(ce.UNPACK_SKIP_ROWS,k.min.y),ce.pixelStorei(ce.UNPACK_SKIP_IMAGES,k.min.z),re.isDataTexture||re.isData3DTexture?ce.texSubImage3D(Pe,ae,K.x,K.y,K.z,Te,Ne,He,Ge,Je,Ot.data):re.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ce.compressedTexSubImage3D(Pe,ae,K.x,K.y,K.z,Te,Ne,He,Ge,Ot.data)):ce.texSubImage3D(Pe,ae,K.x,K.y,K.z,Te,Ne,He,Ge,Je,Ot),ce.pixelStorei(ce.UNPACK_ROW_LENGTH,_t),ce.pixelStorei(ce.UNPACK_IMAGE_HEIGHT,at),ce.pixelStorei(ce.UNPACK_SKIP_PIXELS,ut),ce.pixelStorei(ce.UNPACK_SKIP_ROWS,Lt),ce.pixelStorei(ce.UNPACK_SKIP_IMAGES,Ht),ae===0&&$.generateMipmaps&&ce.generateMipmap(Pe),Fe.unbindTexture()},this.initTexture=function(k){k.isCubeTexture?lt.setTextureCube(k,0):k.isData3DTexture?lt.setTexture3D(k,0):k.isDataArrayTexture||k.isCompressedArrayTexture?lt.setTexture2DArray(k,0):lt.setTexture2D(k,0),Fe.unbindTexture()},this.resetState=function(){L=0,D=0,j=null,Fe.reset(),he.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ra}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===nn?Ml:DA}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Ml?nn:Rs}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class DP extends bg{}DP.prototype.isWebGL1Renderer=!0;class Fy{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new mt(e),this.density=t}clone(){return new Fy(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Oy{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new mt(e),this.near=t,this.far=n}clone(){return new Oy(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Il extends Cn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class Ag{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=rg,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Xs()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Xs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Xs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const $i=new q;class Ts{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)$i.fromBufferAttribute(this,t),$i.applyMatrix4(e),this.setXYZ(t,$i.x,$i.y,$i.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)$i.fromBufferAttribute(this,t),$i.applyNormalMatrix(e),this.setXYZ(t,$i.x,$i.y,$i.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)$i.fromBufferAttribute(this,t),$i.transformDirection(e),this.setXYZ(t,$i.x,$i.y,$i.z);return this}setX(e,t){return this.normalized&&(t=un(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=un(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=un(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=un(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ms(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ms(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ms(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ms(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=un(t,this.array),n=un(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=un(t,this.array),n=un(n,this.array),i=un(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=un(t,this.array),n=un(n,this.array),i=un(i,this.array),s=un(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Sn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ts(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class XA extends Jr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new mt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Mf;const fm=new q,Cf=new q,Tf=new q,Rf=new We,pm=new We,FP=new Jt,ov=new q,mm=new q,av=new q,pM=new We,M_=new We,mM=new We;class OP extends Cn{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",Mf===void 0){Mf=new rn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Ag(t,5);Mf.setIndex([0,1,2,0,2,3]),Mf.setAttribute("position",new Ts(n,3,0,!1)),Mf.setAttribute("uv",new Ts(n,2,3,!1))}this.geometry=Mf,this.material=e!==void 0?e:new XA,this.center=new We(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Cf.setFromMatrixScale(this.matrixWorld),FP.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Tf.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Cf.multiplyScalar(-Tf.z);const n=this.material.rotation;let i,s;n!==0&&(s=Math.cos(n),i=Math.sin(n));const o=this.center;lv(ov.set(-.5,-.5,0),Tf,o,Cf,i,s),lv(mm.set(.5,-.5,0),Tf,o,Cf,i,s),lv(av.set(.5,.5,0),Tf,o,Cf,i,s),pM.set(0,0),M_.set(1,0),mM.set(1,1);let a=e.ray.intersectTriangle(ov,mm,av,!1,fm);if(a===null&&(lv(mm.set(-.5,.5,0),Tf,o,Cf,i,s),M_.set(0,1),a=e.ray.intersectTriangle(ov,av,mm,!1,fm),a===null))return;const l=e.ray.origin.distanceTo(fm);l<e.near||l>e.far||t.push({distance:l,point:fm.clone(),uv:Ss.getInterpolation(fm,ov,mm,av,pM,M_,mM,new We),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function lv(r,e,t,n,i,s){Rf.subVectors(r,t).addScalar(.5).multiply(n),i!==void 0?(pm.x=s*Rf.x-i*Rf.y,pm.y=i*Rf.x+s*Rf.y):pm.copy(Rf),r.copy(e),r.x+=pm.x,r.y+=pm.y,r.applyMatrix4(FP)}const cv=new q,gM=new q;class UP extends Cn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){cv.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(cv);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){cv.setFromMatrixPosition(e.matrixWorld),gM.setFromMatrixPosition(this.matrixWorld);const n=cv.distanceTo(gM)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),n>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,s=n.length;i<s;i++){const o=n[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const vM=new q,yM=new Mn,xM=new Mn,X5=new q,_M=new Jt,Pf=new q,C_=new Is,wM=new Jt,T_=new Vd;class KA extends hr{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Jt,this.bindMatrixInverse=new Jt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new as),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)Pf.fromBufferAttribute(t,n),this.applyBoneTransform(n,Pf),this.boundingBox.expandByPoint(Pf)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Is),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)Pf.fromBufferAttribute(t,n),this.applyBoneTransform(n,Pf),this.boundingSphere.expandByPoint(Pf)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,i=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),C_.copy(this.boundingSphere),C_.applyMatrix4(i),e.ray.intersectsSphere(C_)!==!1&&(wM.copy(i).invert(),T_.copy(e.ray).applyMatrix4(wM),!(this.boundingBox!==null&&T_.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,T_)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Mn,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;yM.fromBufferAttribute(i.attributes.skinIndex,e),xM.fromBufferAttribute(i.attributes.skinWeight,e),vM.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=xM.getComponent(s);if(o!==0){const a=yM.getComponent(s);_M.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),t.addScaledVector(X5.copy(vM).applyMatrix4(_M),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class Uy extends Cn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Td extends In{constructor(e=null,t=1,n=1,i,s,o,a,l,u=gr,h=gr,p,g){super(null,o,a,l,u,h,i,s,p,g),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const bM=new Jt,K5=new Jt;class Sg{constructor(e=[],t=[]){this.uuid=Xs(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Jt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Jt;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:K5;bM.multiplyMatrices(a,t[s]),bM.toArray(n,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Sg(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=AP(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Td(t,e,e,Wr,ei);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const s=e.bones[n];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Uy),this.bones.push(o),this.boneInverses.push(new Jt().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=n[i];e.boneInverses.push(a.toArray())}return e}}class Dd extends Sn{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const If=new Jt,AM=new Jt,uv=[],SM=new as,Y5=new Jt,gm=new hr,vm=new Is;class YA extends hr{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Dd(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,Y5)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new as),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,If),SM.copy(e.boundingBox).applyMatrix4(If),this.boundingBox.union(SM)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Is),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,If),vm.copy(e.boundingSphere).applyMatrix4(If),this.boundingSphere.union(vm)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const n=this.matrixWorld,i=this.count;if(gm.geometry=this.geometry,gm.material=this.material,gm.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),vm.copy(this.boundingSphere),vm.applyMatrix4(n),e.ray.intersectsSphere(vm)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,If),AM.multiplyMatrices(n,If),gm.matrixWorld=AM,gm.raycast(e,uv);for(let o=0,a=uv.length;o<a;o++){const l=uv[o];l.instanceId=s,l.object=this,t.push(l)}uv.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Dd(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Hi extends Jr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new mt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const EM=new q,MM=new q,CM=new Jt,R_=new Vd,dv=new Is;let Ll=class extends Cn{constructor(e=new rn,t=new Hi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let i=1,s=t.count;i<s;i++)EM.fromBufferAttribute(t,i-1),MM.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=EM.distanceTo(MM);e.setAttribute("lineDistance",new Rt(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),dv.copy(n.boundingSphere),dv.applyMatrix4(i),dv.radius+=s,e.ray.intersectsSphere(dv)===!1)return;CM.copy(i).invert(),R_.copy(e.ray).applyMatrix4(CM);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=new q,h=new q,p=new q,g=new q,y=this.isLineSegments?2:1,_=n.index,b=n.attributes.position;if(_!==null){const w=Math.max(0,o.start),C=Math.min(_.count,o.start+o.count);for(let E=w,R=C-1;E<R;E+=y){const L=_.getX(E),D=_.getX(E+1);if(u.fromBufferAttribute(b,L),h.fromBufferAttribute(b,D),R_.distanceSqToSegment(u,h,g,p)>l)continue;g.applyMatrix4(this.matrixWorld);const O=e.ray.origin.distanceTo(g);O<e.near||O>e.far||t.push({distance:O,point:p.clone().applyMatrix4(this.matrixWorld),index:E,face:null,faceIndex:null,object:this})}}else{const w=Math.max(0,o.start),C=Math.min(b.count,o.start+o.count);for(let E=w,R=C-1;E<R;E+=y){if(u.fromBufferAttribute(b,E),h.fromBufferAttribute(b,E+1),R_.distanceSqToSegment(u,h,g,p)>l)continue;g.applyMatrix4(this.matrixWorld);const D=e.ray.origin.distanceTo(g);D<e.near||D>e.far||t.push({distance:D,point:p.clone().applyMatrix4(this.matrixWorld),index:E,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};const TM=new q,RM=new q;class ta extends Ll{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,s=t.count;i<s;i+=2)TM.fromBufferAttribute(t,i),RM.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+TM.distanceTo(RM);e.setAttribute("lineDistance",new Rt(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class qA extends Ll{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Eg extends Jr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new mt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const PM=new Jt,Ib=new Vd,hv=new Is,fv=new q;let QA=class extends Cn{constructor(e=new rn,t=new Eg){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),hv.copy(n.boundingSphere),hv.applyMatrix4(i),hv.radius+=s,e.ray.intersectsSphere(hv)===!1)return;PM.copy(i).invert(),Ib.copy(e.ray).applyMatrix4(PM);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=n.index,p=n.attributes.position;if(u!==null){const g=Math.max(0,o.start),y=Math.min(u.count,o.start+o.count);for(let _=g,A=y;_<A;_++){const b=u.getX(_);fv.fromBufferAttribute(p,b),IM(fv,b,l,i,e,t,this)}}else{const g=Math.max(0,o.start),y=Math.min(p.count,o.start+o.count);for(let _=g,A=y;_<A;_++)fv.fromBufferAttribute(p,_),IM(fv,_,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function IM(r,e,t,n,i,s,o){const a=Ib.distanceSqToPoint(r);if(a<t){const l=new q;Ib.closestPointToPoint(r,l),l.applyMatrix4(n);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class q5 extends In{constructor(e,t,n,i,s,o,a,l,u){super(e,t,n,i,s,o,a,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Pn,this.magFilter=s!==void 0?s:Pn,this.generateMipmaps=!1;const h=this;function p(){h.needsUpdate=!0,e.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Q5 extends In{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=gr,this.minFilter=gr,this.generateMipmaps=!1,this.needsUpdate=!0}}class Rd extends In{constructor(e,t,n,i,s,o,a,l,u,h,p,g){super(null,o,a,l,u,h,i,s,p,g),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Z5 extends Rd{constructor(e,t,n,i,s,o){super(e,t,n,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=er}}class $5 extends Rd{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,Oa),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class ez extends In{constructor(e,t,n,i,s,o,a,l,u){super(e,t,n,i,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class na{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),s+=n.distanceTo(i),t.push(s),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const s=n.length;let o;t?o=t:o=e*n[s-1];let a=0,l=s-1,u;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),u=n[i]-o,u<0)a=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,n[i]===o)return i/(s-1);const h=n[i],g=n[i+1]-h,y=(o-h)/g;return(i+y)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new We:new q);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new q,i=[],s=[],o=[],a=new q,l=new Jt;for(let y=0;y<=e;y++){const _=y/e;i[y]=this.getTangentAt(_,new q)}s[0]=new q,o[0]=new q;let u=Number.MAX_VALUE;const h=Math.abs(i[0].x),p=Math.abs(i[0].y),g=Math.abs(i[0].z);h<=u&&(u=h,n.set(1,0,0)),p<=u&&(u=p,n.set(0,1,0)),g<=u&&n.set(0,0,1),a.crossVectors(i[0],n).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let y=1;y<=e;y++){if(s[y]=s[y-1].clone(),o[y]=o[y-1].clone(),a.crossVectors(i[y-1],i[y]),a.length()>Number.EPSILON){a.normalize();const _=Math.acos(Sr(i[y-1].dot(i[y]),-1,1));s[y].applyMatrix4(l.makeRotationAxis(a,_))}o[y].crossVectors(i[y],s[y])}if(t===!0){let y=Math.acos(Sr(s[0].dot(s[e]),-1,1));y/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(y=-y);for(let _=1;_<=e;_++)s[_].applyMatrix4(l.makeRotationAxis(i[_],y*_)),o[_].crossVectors(i[_],s[_])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class jy extends na{constructor(e=0,t=0,n=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const n=t||new We,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),p=Math.sin(this.aRotation),g=l-this.aX,y=u-this.aY;l=g*h-y*p+this.aX,u=g*p+y*h+this.aY}return n.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class jP extends jy{constructor(e,t,n,i,s,o){super(e,t,n,n,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function ZA(){let r=0,e=0,t=0,n=0;function i(s,o,a,l){r=s,e=a,t=-3*s+3*o-2*a-l,n=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){i(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,h,p){let g=(o-s)/u-(a-s)/(u+h)+(a-o)/h,y=(a-o)/h-(l-o)/(h+p)+(l-a)/p;g*=h,y*=h,i(o,a,g,y)},calc:function(s){const o=s*s,a=o*s;return r+e*s+t*o+n*a}}}const pv=new q,P_=new ZA,I_=new ZA,L_=new ZA;class zP extends na{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new q){const n=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,h;this.closed||a>0?u=i[(a-1)%s]:(pv.subVectors(i[0],i[1]).add(i[0]),u=pv);const p=i[a%s],g=i[(a+1)%s];if(this.closed||a+2<s?h=i[(a+2)%s]:(pv.subVectors(i[s-1],i[s-2]).add(i[s-1]),h=pv),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let _=Math.pow(u.distanceToSquared(p),y),A=Math.pow(p.distanceToSquared(g),y),b=Math.pow(g.distanceToSquared(h),y);A<1e-4&&(A=1),_<1e-4&&(_=A),b<1e-4&&(b=A),P_.initNonuniformCatmullRom(u.x,p.x,g.x,h.x,_,A,b),I_.initNonuniformCatmullRom(u.y,p.y,g.y,h.y,_,A,b),L_.initNonuniformCatmullRom(u.z,p.z,g.z,h.z,_,A,b)}else this.curveType==="catmullrom"&&(P_.initCatmullRom(u.x,p.x,g.x,h.x,this.tension),I_.initCatmullRom(u.y,p.y,g.y,h.y,this.tension),L_.initCatmullRom(u.z,p.z,g.z,h.z,this.tension));return n.set(P_.calc(l),I_.calc(l),L_.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new q().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function LM(r,e,t,n,i){const s=(n-e)*.5,o=(i-t)*.5,a=r*r,l=r*a;return(2*t-2*n+s+o)*l+(-3*t+3*n-2*s-o)*a+s*r+t}function tz(r,e){const t=1-r;return t*t*e}function nz(r,e){return 2*(1-r)*r*e}function rz(r,e){return r*r*e}function Vm(r,e,t,n){return tz(r,e)+nz(r,t)+rz(r,n)}function iz(r,e){const t=1-r;return t*t*t*e}function sz(r,e){const t=1-r;return 3*t*t*r*e}function oz(r,e){return 3*(1-r)*r*r*e}function az(r,e){return r*r*r*e}function Wm(r,e,t,n,i){return iz(r,e)+sz(r,t)+oz(r,n)+az(r,i)}class $A extends na{constructor(e=new We,t=new We,n=new We,i=new We){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new We){const n=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(Wm(e,i.x,s.x,o.x,a.x),Wm(e,i.y,s.y,o.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class HP extends na{constructor(e=new q,t=new q,n=new q,i=new q){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new q){const n=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(Wm(e,i.x,s.x,o.x,a.x),Wm(e,i.y,s.y,o.y,a.y),Wm(e,i.z,s.z,o.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class zy extends na{constructor(e=new We,t=new We){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new We){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new We){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class GP extends na{constructor(e=new q,t=new q){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new q){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new q){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class e1 extends na{constructor(e=new We,t=new We,n=new We){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new We){const n=t,i=this.v0,s=this.v1,o=this.v2;return n.set(Vm(e,i.x,s.x,o.x),Vm(e,i.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class t1 extends na{constructor(e=new q,t=new q,n=new q){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new q){const n=t,i=this.v0,s=this.v1,o=this.v2;return n.set(Vm(e,i.x,s.x,o.x),Vm(e,i.y,s.y,o.y),Vm(e,i.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class n1 extends na{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new We){const n=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],u=i[o],h=i[o>i.length-2?i.length-1:o+1],p=i[o>i.length-3?i.length-1:o+2];return n.set(LM(a,l.x,u.x,h.x,p.x),LM(a,l.y,u.y,h.y,p.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new We().fromArray(i))}return this}}var r1=Object.freeze({__proto__:null,ArcCurve:jP,CatmullRomCurve3:zP,CubicBezierCurve:$A,CubicBezierCurve3:HP,EllipseCurve:jy,LineCurve:zy,LineCurve3:GP,QuadraticBezierCurve:e1,QuadraticBezierCurve3:t1,SplineCurve:n1});class VP extends na{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new zy(t,e))}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=n){const o=i[s]-n,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const h=l[u];n&&n.equals(h)||(t.push(h),n=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(new r1[i.type]().fromJSON(i))}return this}}class og extends VP{constructor(e){super(),this.type="Path",this.currentPoint=new We,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new zy(this.currentPoint.clone(),new We(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const s=new e1(this.currentPoint.clone(),new We(e,t),new We(n,i));return this.curves.push(s),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,s,o){const a=new $A(this.currentPoint.clone(),new We(e,t),new We(n,i),new We(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new n1(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,n,i,s,o),this}absarc(e,t,n,i,s,o){return this.absellipse(e,t,n,n,i,s,o),this}ellipse(e,t,n,i,s,o,a,l){const u=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+u,t+h,n,i,s,o,a,l),this}absellipse(e,t,n,i,s,o,a,l){const u=new jy(e,t,n,i,s,o,a,l);if(this.curves.length>0){const p=u.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(u);const h=u.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Mg extends rn{constructor(e=[new We(0,-.5),new We(.5,0),new We(0,.5)],t=12,n=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=Sr(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],h=1/t,p=new q,g=new We,y=new q,_=new q,A=new q;let b=0,w=0;for(let C=0;C<=e.length-1;C++)switch(C){case 0:b=e[C+1].x-e[C].x,w=e[C+1].y-e[C].y,y.x=w*1,y.y=-b,y.z=w*0,A.copy(y),y.normalize(),l.push(y.x,y.y,y.z);break;case e.length-1:l.push(A.x,A.y,A.z);break;default:b=e[C+1].x-e[C].x,w=e[C+1].y-e[C].y,y.x=w*1,y.y=-b,y.z=w*0,_.copy(y),y.x+=A.x,y.y+=A.y,y.z+=A.z,y.normalize(),l.push(y.x,y.y,y.z),A.copy(_)}for(let C=0;C<=t;C++){const E=n+C*h*i,R=Math.sin(E),L=Math.cos(E);for(let D=0;D<=e.length-1;D++){p.x=e[D].x*R,p.y=e[D].y,p.z=e[D].x*L,o.push(p.x,p.y,p.z),g.x=C/t,g.y=D/(e.length-1),a.push(g.x,g.y);const j=l[3*D+0]*R,O=l[3*D+1],I=l[3*D+0]*L;u.push(j,O,I)}}for(let C=0;C<t;C++)for(let E=0;E<e.length-1;E++){const R=E+C*e.length,L=R,D=R+e.length,j=R+e.length+1,O=R+1;s.push(L,D,O),s.push(j,O,D)}this.setIndex(s),this.setAttribute("position",new Rt(o,3)),this.setAttribute("uv",new Rt(a,2)),this.setAttribute("normal",new Rt(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mg(e.points,e.segments,e.phiStart,e.phiLength)}}class Hy extends Mg{constructor(e=1,t=1,n=4,i=8){const s=new og;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:i}}static fromJSON(e){return new Hy(e.radius,e.length,e.capSegments,e.radialSegments)}}class Gy extends rn{constructor(e=1,t=32,n=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],u=new q,h=new We;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let p=0,g=3;p<=t;p++,g+=3){const y=n+p/t*i;u.x=e*Math.cos(y),u.y=e*Math.sin(y),o.push(u.x,u.y,u.z),a.push(0,0,1),h.x=(o[g]/e+1)/2,h.y=(o[g+1]/e+1)/2,l.push(h.x,h.y)}for(let p=1;p<=t;p++)s.push(p,p+1,0);this.setIndex(s),this.setAttribute("position",new Rt(o,3)),this.setAttribute("normal",new Rt(a,3)),this.setAttribute("uv",new Rt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gy(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class mp extends rn{constructor(e=1,t=1,n=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;i=Math.floor(i),s=Math.floor(s);const h=[],p=[],g=[],y=[];let _=0;const A=[],b=n/2;let w=0;C(),o===!1&&(e>0&&E(!0),t>0&&E(!1)),this.setIndex(h),this.setAttribute("position",new Rt(p,3)),this.setAttribute("normal",new Rt(g,3)),this.setAttribute("uv",new Rt(y,2));function C(){const R=new q,L=new q;let D=0;const j=(t-e)/n;for(let O=0;O<=s;O++){const I=[],U=O/s,V=U*(t-e)+e;for(let ee=0;ee<=i;ee++){const te=ee/i,ne=te*l+a,le=Math.sin(ne),de=Math.cos(ne);L.x=V*le,L.y=-U*n+b,L.z=V*de,p.push(L.x,L.y,L.z),R.set(le,j,de).normalize(),g.push(R.x,R.y,R.z),y.push(te,1-U),I.push(_++)}A.push(I)}for(let O=0;O<i;O++)for(let I=0;I<s;I++){const U=A[I][O],V=A[I+1][O],ee=A[I+1][O+1],te=A[I][O+1];h.push(U,V,te),h.push(V,ee,te),D+=6}u.addGroup(w,D,0),w+=D}function E(R){const L=_,D=new We,j=new q;let O=0;const I=R===!0?e:t,U=R===!0?1:-1;for(let ee=1;ee<=i;ee++)p.push(0,b*U,0),g.push(0,U,0),y.push(.5,.5),_++;const V=_;for(let ee=0;ee<=i;ee++){const ne=ee/i*l+a,le=Math.cos(ne),de=Math.sin(ne);j.x=I*de,j.y=b*U,j.z=I*le,p.push(j.x,j.y,j.z),g.push(0,U,0),D.x=le*.5+.5,D.y=de*.5*U+.5,y.push(D.x,D.y),_++}for(let ee=0;ee<i;ee++){const te=L+ee,ne=V+ee;R===!0?h.push(ne,ne+1,te):h.push(ne+1,ne,te),O+=3}u.addGroup(w,O,R===!0?1:2),w+=O}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mp(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Vy extends mp{constructor(e=1,t=1,n=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,n,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Vy(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class iu extends rn{constructor(e=[],t=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const s=[],o=[];a(i),u(n),h(),this.setAttribute("position",new Rt(s,3)),this.setAttribute("normal",new Rt(s.slice(),3)),this.setAttribute("uv",new Rt(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(C){const E=new q,R=new q,L=new q;for(let D=0;D<t.length;D+=3)y(t[D+0],E),y(t[D+1],R),y(t[D+2],L),l(E,R,L,C)}function l(C,E,R,L){const D=L+1,j=[];for(let O=0;O<=D;O++){j[O]=[];const I=C.clone().lerp(R,O/D),U=E.clone().lerp(R,O/D),V=D-O;for(let ee=0;ee<=V;ee++)ee===0&&O===D?j[O][ee]=I:j[O][ee]=I.clone().lerp(U,ee/V)}for(let O=0;O<D;O++)for(let I=0;I<2*(D-O)-1;I++){const U=Math.floor(I/2);I%2===0?(g(j[O][U+1]),g(j[O+1][U]),g(j[O][U])):(g(j[O][U+1]),g(j[O+1][U+1]),g(j[O+1][U]))}}function u(C){const E=new q;for(let R=0;R<s.length;R+=3)E.x=s[R+0],E.y=s[R+1],E.z=s[R+2],E.normalize().multiplyScalar(C),s[R+0]=E.x,s[R+1]=E.y,s[R+2]=E.z}function h(){const C=new q;for(let E=0;E<s.length;E+=3){C.x=s[E+0],C.y=s[E+1],C.z=s[E+2];const R=b(C)/2/Math.PI+.5,L=w(C)/Math.PI+.5;o.push(R,1-L)}_(),p()}function p(){for(let C=0;C<o.length;C+=6){const E=o[C+0],R=o[C+2],L=o[C+4],D=Math.max(E,R,L),j=Math.min(E,R,L);D>.9&&j<.1&&(E<.2&&(o[C+0]+=1),R<.2&&(o[C+2]+=1),L<.2&&(o[C+4]+=1))}}function g(C){s.push(C.x,C.y,C.z)}function y(C,E){const R=C*3;E.x=e[R+0],E.y=e[R+1],E.z=e[R+2]}function _(){const C=new q,E=new q,R=new q,L=new q,D=new We,j=new We,O=new We;for(let I=0,U=0;I<s.length;I+=9,U+=6){C.set(s[I+0],s[I+1],s[I+2]),E.set(s[I+3],s[I+4],s[I+5]),R.set(s[I+6],s[I+7],s[I+8]),D.set(o[U+0],o[U+1]),j.set(o[U+2],o[U+3]),O.set(o[U+4],o[U+5]),L.copy(C).add(E).add(R).divideScalar(3);const V=b(L);A(D,U+0,C,V),A(j,U+2,E,V),A(O,U+4,R,V)}}function A(C,E,R,L){L<0&&C.x===1&&(o[E]=C.x-1),R.x===0&&R.z===0&&(o[E]=L/2/Math.PI+.5)}function b(C){return Math.atan2(C.z,-C.x)}function w(C){return Math.atan2(-C.y,Math.sqrt(C.x*C.x+C.z*C.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new iu(e.vertices,e.indices,e.radius,e.details)}}class Wy extends iu{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Wy(e.radius,e.detail)}}const mv=new q,gv=new q,N_=new q,vv=new Ss;class WP extends rn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(Md*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],h=["a","b","c"],p=new Array(3),g={},y=[];for(let _=0;_<l;_+=3){o?(u[0]=o.getX(_),u[1]=o.getX(_+1),u[2]=o.getX(_+2)):(u[0]=_,u[1]=_+1,u[2]=_+2);const{a:A,b,c:w}=vv;if(A.fromBufferAttribute(a,u[0]),b.fromBufferAttribute(a,u[1]),w.fromBufferAttribute(a,u[2]),vv.getNormal(N_),p[0]=`${Math.round(A.x*i)},${Math.round(A.y*i)},${Math.round(A.z*i)}`,p[1]=`${Math.round(b.x*i)},${Math.round(b.y*i)},${Math.round(b.z*i)}`,p[2]=`${Math.round(w.x*i)},${Math.round(w.y*i)},${Math.round(w.z*i)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let C=0;C<3;C++){const E=(C+1)%3,R=p[C],L=p[E],D=vv[h[C]],j=vv[h[E]],O=`${R}_${L}`,I=`${L}_${R}`;I in g&&g[I]?(N_.dot(g[I].normal)<=s&&(y.push(D.x,D.y,D.z),y.push(j.x,j.y,j.z)),g[I]=null):O in g||(g[O]={index0:u[C],index1:u[E],normal:N_.clone()})}}for(const _ in g)if(g[_]){const{index0:A,index1:b}=g[_];mv.fromBufferAttribute(a,A),gv.fromBufferAttribute(a,b),y.push(mv.x,mv.y,mv.z),y.push(gv.x,gv.y,gv.z)}this.setAttribute("position",new Rt(y,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Pd extends og{constructor(e){super(e),this.uuid=Xs(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(new og().fromJSON(i))}return this}}const lz={triangulate:function(r,e,t=2){const n=e&&e.length,i=n?e[0]*t:r.length;let s=JP(r,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,h,p,g,y;if(n&&(s=fz(r,e,s,t)),r.length>80*t){a=u=r[0],l=h=r[1];for(let _=t;_<i;_+=t)p=r[_],g=r[_+1],p<a&&(a=p),g<l&&(l=g),p>u&&(u=p),g>h&&(h=g);y=Math.max(u-a,h-l),y=y!==0?32767/y:0}return ag(s,o,t,a,l,y,0),o}};function JP(r,e,t,n,i){let s,o;if(i===Sz(r,e,t,n)>0)for(s=e;s<t;s+=n)o=NM(s,r[s],r[s+1],o);else for(s=t-n;s>=e;s-=n)o=NM(s,r[s],r[s+1],o);return o&&Jy(o,o.next)&&(cg(o),o=o.next),o}function Fd(r,e){if(!r)return r;e||(e=r);let t=r,n;do if(n=!1,!t.steiner&&(Jy(t,t.next)||vr(t.prev,t,t.next)===0)){if(cg(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function ag(r,e,t,n,i,s,o){if(!r)return;!o&&s&&yz(r,n,i,s);let a=r,l,u;for(;r.prev!==r.next;){if(l=r.prev,u=r.next,s?uz(r,n,i,s):cz(r)){e.push(l.i/t|0),e.push(r.i/t|0),e.push(u.i/t|0),cg(r),r=u.next,a=u.next;continue}if(r=u,r===a){o?o===1?(r=dz(Fd(r),e,t),ag(r,e,t,n,i,s,2)):o===2&&hz(r,e,t,n,i,s):ag(Fd(r),e,t,n,i,s,1);break}}}function cz(r){const e=r.prev,t=r,n=r.next;if(vr(e,t,n)>=0)return!1;const i=e.x,s=t.x,o=n.x,a=e.y,l=t.y,u=n.y,h=i<s?i<o?i:o:s<o?s:o,p=a<l?a<u?a:u:l<u?l:u,g=i>s?i>o?i:o:s>o?s:o,y=a>l?a>u?a:u:l>u?l:u;let _=n.next;for(;_!==e;){if(_.x>=h&&_.x<=g&&_.y>=p&&_.y<=y&&zf(i,a,s,l,o,u,_.x,_.y)&&vr(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function uz(r,e,t,n){const i=r.prev,s=r,o=r.next;if(vr(i,s,o)>=0)return!1;const a=i.x,l=s.x,u=o.x,h=i.y,p=s.y,g=o.y,y=a<l?a<u?a:u:l<u?l:u,_=h<p?h<g?h:g:p<g?p:g,A=a>l?a>u?a:u:l>u?l:u,b=h>p?h>g?h:g:p>g?p:g,w=Lb(y,_,e,t,n),C=Lb(A,b,e,t,n);let E=r.prevZ,R=r.nextZ;for(;E&&E.z>=w&&R&&R.z<=C;){if(E.x>=y&&E.x<=A&&E.y>=_&&E.y<=b&&E!==i&&E!==o&&zf(a,h,l,p,u,g,E.x,E.y)&&vr(E.prev,E,E.next)>=0||(E=E.prevZ,R.x>=y&&R.x<=A&&R.y>=_&&R.y<=b&&R!==i&&R!==o&&zf(a,h,l,p,u,g,R.x,R.y)&&vr(R.prev,R,R.next)>=0))return!1;R=R.nextZ}for(;E&&E.z>=w;){if(E.x>=y&&E.x<=A&&E.y>=_&&E.y<=b&&E!==i&&E!==o&&zf(a,h,l,p,u,g,E.x,E.y)&&vr(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;R&&R.z<=C;){if(R.x>=y&&R.x<=A&&R.y>=_&&R.y<=b&&R!==i&&R!==o&&zf(a,h,l,p,u,g,R.x,R.y)&&vr(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function dz(r,e,t){let n=r;do{const i=n.prev,s=n.next.next;!Jy(i,s)&&XP(i,n,n.next,s)&&lg(i,s)&&lg(s,i)&&(e.push(i.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),cg(n),cg(n.next),n=r=s),n=n.next}while(n!==r);return Fd(n)}function hz(r,e,t,n,i,s){let o=r;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&wz(o,a)){let l=KP(o,a);o=Fd(o,o.next),l=Fd(l,l.next),ag(o,e,t,n,i,s,0),ag(l,e,t,n,i,s,0);return}a=a.next}o=o.next}while(o!==r)}function fz(r,e,t,n){const i=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*n,l=s<o-1?e[s+1]*n:r.length,u=JP(r,a,l,n,!1),u===u.next&&(u.steiner=!0),i.push(_z(u));for(i.sort(pz),s=0;s<i.length;s++)t=mz(i[s],t);return t}function pz(r,e){return r.x-e.x}function mz(r,e){const t=gz(r,e);if(!t)return e;const n=KP(t,r);return Fd(n,n.next),Fd(t,t.next)}function gz(r,e){let t=e,n=-1/0,i;const s=r.x,o=r.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const g=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(g<=s&&g>n&&(n=g,i=t.x<t.next.x?t:t.next,g===s))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,l=i.x,u=i.y;let h=1/0,p;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&zf(o<u?s:n,o,l,u,o<u?n:s,o,t.x,t.y)&&(p=Math.abs(o-t.y)/(s-t.x),lg(t,r)&&(p<h||p===h&&(t.x>i.x||t.x===i.x&&vz(i,t)))&&(i=t,h=p)),t=t.next;while(t!==a);return i}function vz(r,e){return vr(r.prev,r,e.prev)<0&&vr(e.next,r,r.next)<0}function yz(r,e,t,n){let i=r;do i.z===0&&(i.z=Lb(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,xz(i)}function xz(r){let e,t,n,i,s,o,a,l,u=1;do{for(t=r,r=null,s=null,o=0;t;){for(o++,n=t,a=0,e=0;e<u&&(a++,n=n.nextZ,!!n);e++);for(l=u;a>0||l>0&&n;)a!==0&&(l===0||!n||t.z<=n.z)?(i=t,t=t.nextZ,a--):(i=n,n=n.nextZ,l--),s?s.nextZ=i:r=i,i.prevZ=s,s=i;t=n}s.nextZ=null,u*=2}while(o>1);return r}function Lb(r,e,t,n,i){return r=(r-t)*i|0,e=(e-n)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function _z(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function zf(r,e,t,n,i,s,o,a){return(i-o)*(e-a)>=(r-o)*(s-a)&&(r-o)*(n-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(n-a)}function wz(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!bz(r,e)&&(lg(r,e)&&lg(e,r)&&Az(r,e)&&(vr(r.prev,r,e.prev)||vr(r,e.prev,e))||Jy(r,e)&&vr(r.prev,r,r.next)>0&&vr(e.prev,e,e.next)>0)}function vr(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function Jy(r,e){return r.x===e.x&&r.y===e.y}function XP(r,e,t,n){const i=xv(vr(r,e,t)),s=xv(vr(r,e,n)),o=xv(vr(t,n,r)),a=xv(vr(t,n,e));return!!(i!==s&&o!==a||i===0&&yv(r,t,e)||s===0&&yv(r,n,e)||o===0&&yv(t,r,n)||a===0&&yv(t,e,n))}function yv(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function xv(r){return r>0?1:r<0?-1:0}function bz(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&XP(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function lg(r,e){return vr(r.prev,r,r.next)<0?vr(r,e,r.next)>=0&&vr(r,r.prev,e)>=0:vr(r,e,r.prev)<0||vr(r,r.next,e)<0}function Az(r,e){let t=r,n=!1;const i=(r.x+e.x)/2,s=(r.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function KP(r,e){const t=new Nb(r.i,r.x,r.y),n=new Nb(e.i,e.x,e.y),i=r.next,s=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function NM(r,e,t,n){const i=new Nb(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function cg(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Nb(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Sz(r,e,t,n){let i=0;for(let s=e,o=t-n;s<t;s+=n)i+=(r[o]-r[s])*(r[s+1]+r[o+1]),o=s;return i}class ka{static area(e){const t=e.length;let n=0;for(let i=t-1,s=0;s<t;i=s++)n+=e[i].x*e[s].y-e[s].x*e[i].y;return n*.5}static isClockWise(e){return ka.area(e)<0}static triangulateShape(e,t){const n=[],i=[],s=[];BM(e),kM(n,e);let o=e.length;t.forEach(BM);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,kM(n,t[l]);const a=lz.triangulate(n,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function BM(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function kM(r,e){for(let t=0;t<e.length;t++)r.push(e[t].x),r.push(e[t].y)}class Xy extends rn{constructor(e=new Pd([new We(.5,.5),new We(-.5,.5),new We(-.5,-.5),new We(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new Rt(i,3)),this.setAttribute("uv",new Rt(s,2)),this.computeVertexNormals();function o(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,p=t.depth!==void 0?t.depth:1;let g=t.bevelEnabled!==void 0?t.bevelEnabled:!0,y=t.bevelThickness!==void 0?t.bevelThickness:.2,_=t.bevelSize!==void 0?t.bevelSize:y-.1,A=t.bevelOffset!==void 0?t.bevelOffset:0,b=t.bevelSegments!==void 0?t.bevelSegments:3;const w=t.extrudePath,C=t.UVGenerator!==void 0?t.UVGenerator:Ez;let E,R=!1,L,D,j,O;w&&(E=w.getSpacedPoints(h),R=!0,g=!1,L=w.computeFrenetFrames(h,!1),D=new q,j=new q,O=new q),g||(b=0,y=0,_=0,A=0);const I=a.extractPoints(u);let U=I.shape;const V=I.holes;if(!ka.isClockWise(U)){U=U.reverse();for(let ce=0,ge=V.length;ce<ge;ce++){const we=V[ce];ka.isClockWise(we)&&(V[ce]=we.reverse())}}const te=ka.triangulateShape(U,V),ne=U;for(let ce=0,ge=V.length;ce<ge;ce++){const we=V[ce];U=U.concat(we)}function le(ce,ge,we){return ge||console.error("THREE.ExtrudeGeometry: vec does not exist"),ce.clone().addScaledVector(ge,we)}const de=U.length,ie=te.length;function J(ce,ge,we){let De,Fe,Qe;const st=ce.x-ge.x,lt=ce.y-ge.y,Et=we.x-ce.x,Ut=we.y-ce.y,dn=st*st+lt*lt,se=st*Ut-lt*Et;if(Math.abs(se)>Number.EPSILON){const Y=Math.sqrt(dn),Ce=Math.sqrt(Et*Et+Ut*Ut),et=ge.x-lt/Y,Ke=ge.y+st/Y,qe=we.x-Ut/Ce,xt=we.y+Et/Ce,tt=((qe-et)*Ut-(xt-Ke)*Et)/(st*Ut-lt*Et);De=et+st*tt-ce.x,Fe=Ke+lt*tt-ce.y;const Be=De*De+Fe*Fe;if(Be<=2)return new We(De,Fe);Qe=Math.sqrt(Be/2)}else{let Y=!1;st>Number.EPSILON?Et>Number.EPSILON&&(Y=!0):st<-Number.EPSILON?Et<-Number.EPSILON&&(Y=!0):Math.sign(lt)===Math.sign(Ut)&&(Y=!0),Y?(De=-lt,Fe=st,Qe=Math.sqrt(dn)):(De=st,Fe=lt,Qe=Math.sqrt(dn/2))}return new We(De/Qe,Fe/Qe)}const Q=[];for(let ce=0,ge=ne.length,we=ge-1,De=ce+1;ce<ge;ce++,we++,De++)we===ge&&(we=0),De===ge&&(De=0),Q[ce]=J(ne[ce],ne[we],ne[De]);const H=[];let X,Z=Q.concat();for(let ce=0,ge=V.length;ce<ge;ce++){const we=V[ce];X=[];for(let De=0,Fe=we.length,Qe=Fe-1,st=De+1;De<Fe;De++,Qe++,st++)Qe===Fe&&(Qe=0),st===Fe&&(st=0),X[De]=J(we[De],we[Qe],we[st]);H.push(X),Z=Z.concat(X)}for(let ce=0;ce<b;ce++){const ge=ce/b,we=y*Math.cos(ge*Math.PI/2),De=_*Math.sin(ge*Math.PI/2)+A;for(let Fe=0,Qe=ne.length;Fe<Qe;Fe++){const st=le(ne[Fe],Q[Fe],De);Ae(st.x,st.y,-we)}for(let Fe=0,Qe=V.length;Fe<Qe;Fe++){const st=V[Fe];X=H[Fe];for(let lt=0,Et=st.length;lt<Et;lt++){const Ut=le(st[lt],X[lt],De);Ae(Ut.x,Ut.y,-we)}}}const ye=_+A;for(let ce=0;ce<de;ce++){const ge=g?le(U[ce],Z[ce],ye):U[ce];R?(j.copy(L.normals[0]).multiplyScalar(ge.x),D.copy(L.binormals[0]).multiplyScalar(ge.y),O.copy(E[0]).add(j).add(D),Ae(O.x,O.y,O.z)):Ae(ge.x,ge.y,0)}for(let ce=1;ce<=h;ce++)for(let ge=0;ge<de;ge++){const we=g?le(U[ge],Z[ge],ye):U[ge];R?(j.copy(L.normals[ce]).multiplyScalar(we.x),D.copy(L.binormals[ce]).multiplyScalar(we.y),O.copy(E[ce]).add(j).add(D),Ae(O.x,O.y,O.z)):Ae(we.x,we.y,p/h*ce)}for(let ce=b-1;ce>=0;ce--){const ge=ce/b,we=y*Math.cos(ge*Math.PI/2),De=_*Math.sin(ge*Math.PI/2)+A;for(let Fe=0,Qe=ne.length;Fe<Qe;Fe++){const st=le(ne[Fe],Q[Fe],De);Ae(st.x,st.y,p+we)}for(let Fe=0,Qe=V.length;Fe<Qe;Fe++){const st=V[Fe];X=H[Fe];for(let lt=0,Et=st.length;lt<Et;lt++){const Ut=le(st[lt],X[lt],De);R?Ae(Ut.x,Ut.y+E[h-1].y,E[h-1].x+we):Ae(Ut.x,Ut.y,p+we)}}}be(),Le();function be(){const ce=i.length/3;if(g){let ge=0,we=de*ge;for(let De=0;De<ie;De++){const Fe=te[De];je(Fe[2]+we,Fe[1]+we,Fe[0]+we)}ge=h+b*2,we=de*ge;for(let De=0;De<ie;De++){const Fe=te[De];je(Fe[0]+we,Fe[1]+we,Fe[2]+we)}}else{for(let ge=0;ge<ie;ge++){const we=te[ge];je(we[2],we[1],we[0])}for(let ge=0;ge<ie;ge++){const we=te[ge];je(we[0]+de*h,we[1]+de*h,we[2]+de*h)}}n.addGroup(ce,i.length/3-ce,0)}function Le(){const ce=i.length/3;let ge=0;pe(ne,ge),ge+=ne.length;for(let we=0,De=V.length;we<De;we++){const Fe=V[we];pe(Fe,ge),ge+=Fe.length}n.addGroup(ce,i.length/3-ce,1)}function pe(ce,ge){let we=ce.length;for(;--we>=0;){const De=we;let Fe=we-1;Fe<0&&(Fe=ce.length-1);for(let Qe=0,st=h+b*2;Qe<st;Qe++){const lt=de*Qe,Et=de*(Qe+1),Ut=ge+De+lt,dn=ge+Fe+lt,se=ge+Fe+Et,Y=ge+De+Et;ft(Ut,dn,se,Y)}}}function Ae(ce,ge,we){l.push(ce),l.push(ge),l.push(we)}function je(ce,ge,we){St(ce),St(ge),St(we);const De=i.length/3,Fe=C.generateTopUV(n,i,De-3,De-2,De-1);Xe(Fe[0]),Xe(Fe[1]),Xe(Fe[2])}function ft(ce,ge,we,De){St(ce),St(ge),St(De),St(ge),St(we),St(De);const Fe=i.length/3,Qe=C.generateSideWallUV(n,i,Fe-6,Fe-3,Fe-2,Fe-1);Xe(Qe[0]),Xe(Qe[1]),Xe(Qe[3]),Xe(Qe[1]),Xe(Qe[2]),Xe(Qe[3])}function St(ce){i.push(l[ce*3+0]),i.push(l[ce*3+1]),i.push(l[ce*3+2])}function Xe(ce){s.push(ce.x),s.push(ce.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return Mz(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];n.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new r1[i.type]().fromJSON(i)),new Xy(n,e.options)}}const Ez={generateTopUV:function(r,e,t,n,i){const s=e[t*3],o=e[t*3+1],a=e[n*3],l=e[n*3+1],u=e[i*3],h=e[i*3+1];return[new We(s,o),new We(a,l),new We(u,h)]},generateSideWallUV:function(r,e,t,n,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[n*3],h=e[n*3+1],p=e[n*3+2],g=e[i*3],y=e[i*3+1],_=e[i*3+2],A=e[s*3],b=e[s*3+1],w=e[s*3+2];return Math.abs(a-h)<Math.abs(o-u)?[new We(o,1-l),new We(u,1-p),new We(g,1-_),new We(A,1-w)]:[new We(a,1-l),new We(h,1-p),new We(y,1-_),new We(b,1-w)]}};function Mz(r,e,t){if(t.shapes=[],Array.isArray(r))for(let n=0,i=r.length;n<i;n++){const s=r[n];t.shapes.push(s.uuid)}else t.shapes.push(r.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Cg extends iu{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Cg(e.radius,e.detail)}}class Tg extends iu{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Tg(e.radius,e.detail)}}class Ky extends rn{constructor(e=.5,t=1,n=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:s,thetaLength:o},n=Math.max(3,n),i=Math.max(1,i);const a=[],l=[],u=[],h=[];let p=e;const g=(t-e)/i,y=new q,_=new We;for(let A=0;A<=i;A++){for(let b=0;b<=n;b++){const w=s+b/n*o;y.x=p*Math.cos(w),y.y=p*Math.sin(w),l.push(y.x,y.y,y.z),u.push(0,0,1),_.x=(y.x/t+1)/2,_.y=(y.y/t+1)/2,h.push(_.x,_.y)}p+=g}for(let A=0;A<i;A++){const b=A*(n+1);for(let w=0;w<n;w++){const C=w+b,E=C,R=C+n+1,L=C+n+2,D=C+1;a.push(E,R,D),a.push(R,L,D)}}this.setIndex(a),this.setAttribute("position",new Rt(l,3)),this.setAttribute("normal",new Rt(u,3)),this.setAttribute("uv",new Rt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ky(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Yy extends rn{constructor(e=new Pd([new We(0,.5),new We(-.5,-.5),new We(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let h=0;h<e.length;h++)u(e[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(n),this.setAttribute("position",new Rt(i,3)),this.setAttribute("normal",new Rt(s,3)),this.setAttribute("uv",new Rt(o,2));function u(h){const p=i.length/3,g=h.extractPoints(t);let y=g.shape;const _=g.holes;ka.isClockWise(y)===!1&&(y=y.reverse());for(let b=0,w=_.length;b<w;b++){const C=_[b];ka.isClockWise(C)===!0&&(_[b]=C.reverse())}const A=ka.triangulateShape(y,_);for(let b=0,w=_.length;b<w;b++){const C=_[b];y=y.concat(C)}for(let b=0,w=y.length;b<w;b++){const C=y[b];i.push(C.x,C.y,0),s.push(0,0,1),o.push(C.x,C.y)}for(let b=0,w=A.length;b<w;b++){const C=A[b],E=C[0]+p,R=C[1]+p,L=C[2]+p;n.push(E,R,L),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Cz(t,e)}static fromJSON(e,t){const n=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];n.push(o)}return new Yy(n,e.curveSegments)}}function Cz(r,e){if(e.shapes=[],Array.isArray(r))for(let t=0,n=r.length;t<n;t++){const i=r[t];e.shapes.push(i.uuid)}else e.shapes.push(r.uuid);return e}class Rg extends rn{constructor(e=1,t=32,n=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(o+a,Math.PI);let u=0;const h=[],p=new q,g=new q,y=[],_=[],A=[],b=[];for(let w=0;w<=n;w++){const C=[],E=w/n;let R=0;w===0&&o===0?R=.5/t:w===n&&l===Math.PI&&(R=-.5/t);for(let L=0;L<=t;L++){const D=L/t;p.x=-e*Math.cos(i+D*s)*Math.sin(o+E*a),p.y=e*Math.cos(o+E*a),p.z=e*Math.sin(i+D*s)*Math.sin(o+E*a),_.push(p.x,p.y,p.z),g.copy(p).normalize(),A.push(g.x,g.y,g.z),b.push(D+R,1-E),C.push(u++)}h.push(C)}for(let w=0;w<n;w++)for(let C=0;C<t;C++){const E=h[w][C+1],R=h[w][C],L=h[w+1][C],D=h[w+1][C+1];(w!==0||o>0)&&y.push(E,R,D),(w!==n-1||l<Math.PI)&&y.push(R,L,D)}this.setIndex(y),this.setAttribute("position",new Rt(_,3)),this.setAttribute("normal",new Rt(A,3)),this.setAttribute("uv",new Rt(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rg(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class qy extends iu{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new qy(e.radius,e.detail)}}class Qy extends rn{constructor(e=1,t=.4,n=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:s},n=Math.floor(n),i=Math.floor(i);const o=[],a=[],l=[],u=[],h=new q,p=new q,g=new q;for(let y=0;y<=n;y++)for(let _=0;_<=i;_++){const A=_/i*s,b=y/n*Math.PI*2;p.x=(e+t*Math.cos(b))*Math.cos(A),p.y=(e+t*Math.cos(b))*Math.sin(A),p.z=t*Math.sin(b),a.push(p.x,p.y,p.z),h.x=e*Math.cos(A),h.y=e*Math.sin(A),g.subVectors(p,h).normalize(),l.push(g.x,g.y,g.z),u.push(_/i),u.push(y/n)}for(let y=1;y<=n;y++)for(let _=1;_<=i;_++){const A=(i+1)*y+_-1,b=(i+1)*(y-1)+_-1,w=(i+1)*(y-1)+_,C=(i+1)*y+_;o.push(A,b,C),o.push(b,w,C)}this.setIndex(o),this.setAttribute("position",new Rt(a,3)),this.setAttribute("normal",new Rt(l,3)),this.setAttribute("uv",new Rt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qy(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Zy extends rn{constructor(e=1,t=.4,n=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:s,q:o},n=Math.floor(n),i=Math.floor(i);const a=[],l=[],u=[],h=[],p=new q,g=new q,y=new q,_=new q,A=new q,b=new q,w=new q;for(let E=0;E<=n;++E){const R=E/n*s*Math.PI*2;C(R,s,o,e,y),C(R+.01,s,o,e,_),b.subVectors(_,y),w.addVectors(_,y),A.crossVectors(b,w),w.crossVectors(A,b),A.normalize(),w.normalize();for(let L=0;L<=i;++L){const D=L/i*Math.PI*2,j=-t*Math.cos(D),O=t*Math.sin(D);p.x=y.x+(j*w.x+O*A.x),p.y=y.y+(j*w.y+O*A.y),p.z=y.z+(j*w.z+O*A.z),l.push(p.x,p.y,p.z),g.subVectors(p,y).normalize(),u.push(g.x,g.y,g.z),h.push(E/n),h.push(L/i)}}for(let E=1;E<=n;E++)for(let R=1;R<=i;R++){const L=(i+1)*(E-1)+(R-1),D=(i+1)*E+(R-1),j=(i+1)*E+R,O=(i+1)*(E-1)+R;a.push(L,D,O),a.push(D,j,O)}this.setIndex(a),this.setAttribute("position",new Rt(l,3)),this.setAttribute("normal",new Rt(u,3)),this.setAttribute("uv",new Rt(h,2));function C(E,R,L,D,j){const O=Math.cos(E),I=Math.sin(E),U=L/R*E,V=Math.cos(U);j.x=D*(2+V)*.5*O,j.y=D*(2+V)*I*.5,j.z=D*Math.sin(U)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zy(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class $y extends rn{constructor(e=new t1(new q(-1,-1,0),new q(-1,1,0),new q(1,1,0)),t=64,n=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new q,l=new q,u=new We;let h=new q;const p=[],g=[],y=[],_=[];A(),this.setIndex(_),this.setAttribute("position",new Rt(p,3)),this.setAttribute("normal",new Rt(g,3)),this.setAttribute("uv",new Rt(y,2));function A(){for(let E=0;E<t;E++)b(E);b(s===!1?t:0),C(),w()}function b(E){h=e.getPointAt(E/t,h);const R=o.normals[E],L=o.binormals[E];for(let D=0;D<=i;D++){const j=D/i*Math.PI*2,O=Math.sin(j),I=-Math.cos(j);l.x=I*R.x+O*L.x,l.y=I*R.y+O*L.y,l.z=I*R.z+O*L.z,l.normalize(),g.push(l.x,l.y,l.z),a.x=h.x+n*l.x,a.y=h.y+n*l.y,a.z=h.z+n*l.z,p.push(a.x,a.y,a.z)}}function w(){for(let E=1;E<=t;E++)for(let R=1;R<=i;R++){const L=(i+1)*(E-1)+(R-1),D=(i+1)*E+(R-1),j=(i+1)*E+R,O=(i+1)*(E-1)+R;_.push(L,D,O),_.push(D,j,O)}}function C(){for(let E=0;E<=t;E++)for(let R=0;R<=i;R++)u.x=E/t,u.y=R/i,y.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new $y(new r1[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class i1 extends rn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,i=new q,s=new q;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,h=l.length;u<h;++u){const p=l[u],g=p.start,y=p.count;for(let _=g,A=g+y;_<A;_+=3)for(let b=0;b<3;b++){const w=a.getX(_+b),C=a.getX(_+(b+1)%3);i.fromBufferAttribute(o,w),s.fromBufferAttribute(o,C),DM(i,s,n)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const h=3*a+u,p=3*a+(u+1)%3;i.fromBufferAttribute(o,h),s.fromBufferAttribute(o,p),DM(i,s,n)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Rt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function DM(r,e,t){const n=`${r.x},${r.y},${r.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${r.x},${r.y},${r.z}`;return t.has(n)===!0||t.has(i)===!0?!1:(t.add(n),t.add(i),!0)}var FM=Object.freeze({__proto__:null,BoxGeometry:nu,CapsuleGeometry:Hy,CircleGeometry:Gy,ConeGeometry:Vy,CylinderGeometry:mp,DodecahedronGeometry:Wy,EdgesGeometry:WP,ExtrudeGeometry:Xy,IcosahedronGeometry:Cg,LatheGeometry:Mg,OctahedronGeometry:Tg,PlaneGeometry:ru,PolyhedronGeometry:iu,RingGeometry:Ky,ShapeGeometry:Yy,SphereGeometry:Rg,TetrahedronGeometry:qy,TorusGeometry:Qy,TorusKnotGeometry:Zy,TubeGeometry:$y,WireframeGeometry:i1});class YP extends Jr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new mt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class qP extends ss{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class gp extends Jr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new mt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tu,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class wo extends gp{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new We(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Sr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new mt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new mt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new mt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class QP extends Jr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new mt(16777215),this.specular=new mt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tu,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=yg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ZP extends Jr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new mt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tu,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class $P extends Jr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tu,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class eI extends Jr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new mt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tu,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=yg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class tI extends Jr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new mt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tu,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class nI extends Hi{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function go(r,e,t){return s1(r)?new r.constructor(r.subarray(e,t!==void 0?t:r.length)):r.slice(e,t)}function yd(r,e,t){return!r||!t&&r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)}function s1(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function rI(r){function e(i,s){return r[i]-r[s]}const t=r.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(e),n}function Bb(r,e,t){const n=r.length,i=new r.constructor(n);for(let s=0,o=0;o!==n;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=r[a+l]}return i}function o1(r,e,t,n){let i=1,s=r[0];for(;s!==void 0&&s[n]===void 0;)s=r[i++];if(s===void 0)return;let o=s[n];if(o!==void 0)if(Array.isArray(o))do o=s[n],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=r[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[n],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=r[i++];while(s!==void 0);else do o=s[n],o!==void 0&&(e.push(s.time),t.push(o)),s=r[i++];while(s!==void 0)}function Tz(r,e,t,n,i=30){const s=r.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],h=u.getValueSize(),p=[],g=[];for(let y=0;y<u.times.length;++y){const _=u.times[y]*i;if(!(_<t||_>=n)){p.push(u.times[y]);for(let A=0;A<h;++A)g.push(u.values[y*h+A])}}p.length!==0&&(u.times=yd(p,u.times.constructor),u.values=yd(g,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function Rz(r,e=0,t=r,n=30){n<=0&&(n=30);const i=t.tracks.length,s=e/n;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=r.tracks.find(function(w){return w.name===a.name&&w.ValueTypeName===l});if(u===void 0)continue;let h=0;const p=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=p/3);let g=0;const y=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=y/3);const _=a.times.length-1;let A;if(s<=a.times[0]){const w=h,C=p-h;A=go(a.values,w,C)}else if(s>=a.times[_]){const w=_*p+h,C=w+p-h;A=go(a.values,w,C)}else{const w=a.createInterpolant(),C=h,E=p-h;w.evaluate(s),A=go(w.resultBuffer,C,E)}l==="quaternion"&&new ui().fromArray(A).normalize().conjugate().toArray(A);const b=u.times.length;for(let w=0;w<b;++w){const C=w*y+g;if(l==="quaternion")ui.multiplyQuaternionsFlat(u.values,C,A,0,u.values,C);else{const E=y-g*2;for(let R=0;R<E;++R)u.values[C+R]-=A[R]}}}return r.blendMode=BA,r}const Pz={arraySlice:go,convertArray:yd,isTypedArray:s1,getKeyframeOrder:rI,sortedArray:Bb,flattenJSON:o1,subclip:Tz,makeClipAdditive:Rz};class vp{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],s=t[n-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=n+2;;){if(i===void 0){if(e<s)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(s=i,i=t[++n],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(n=2,s=a);for(let l=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(i=s,s=t[--n-1],e>=s)break t}o=n,n=0;break n}break e}for(;n<o;){const a=n+o>>>1;e<t[a]?o=a:n=a+1}if(i=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,i)}return this.interpolate_(n,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=n[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class iI extends vp{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:pd,endingEnd:pd}}intervalChanged_(e,t,n){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case md:s=e,a=2*t-n;break;case ng:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=n}if(l===void 0)switch(this.getSettings_().endingEnd){case md:o=e,l=2*n-t;break;case ng:o=1,l=n+i[1]-i[0];break;default:o=e-1,l=t}const u=(n-t)*.5,h=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-n),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,t,n,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,h=this._offsetPrev,p=this._offsetNext,g=this._weightPrev,y=this._weightNext,_=(n-t)/(i-t),A=_*_,b=A*_,w=-g*b+2*g*A-g*_,C=(1+g)*b+(-1.5-2*g)*A+(-.5+g)*_+1,E=(-1-y)*b+(1.5+y)*A+.5*_,R=y*b-y*A;for(let L=0;L!==a;++L)s[L]=w*o[h+L]+C*o[u+L]+E*o[l+L]+R*o[p+L];return s}}class a1 extends vp{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,h=(n-t)/(i-t),p=1-h;for(let g=0;g!==a;++g)s[g]=o[u+g]*p+o[l+g]*h;return s}}class sI extends vp{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class ra{constructor(e,t,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=yd(t,this.TimeBufferType),this.values=yd(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:yd(e.times,Array),values:yd(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new sI(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new a1(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new iI(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case kd:t=this.InterpolantFactoryMethodDiscrete;break;case Xc:t=this.InterpolantFactoryMethodLinear;break;case Qv:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return kd;case this.InterpolantFactoryMethodLinear:return Xc;case this.InterpolantFactoryMethodSmooth:return Qv}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let s=0,o=i-1;for(;s!==i&&n[s]<e;)++s;for(;o!==-1&&n[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=go(n,s,o),this.values=go(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=n[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&s1(i))for(let a=0,l=i.length;a!==l;++a){const u=i[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=go(this.times),t=go(this.values),n=this.getValueSize(),i=this.getInterpolation()===Qv,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],h=e[a+1];if(u!==h&&(a!==1||u!==e[0]))if(i)l=!0;else{const p=a*n,g=p-n,y=p+n;for(let _=0;_!==n;++_){const A=t[p+_];if(A!==t[g+_]||A!==t[y+_]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const p=a*n,g=o*n;for(let y=0;y!==n;++y)t[g+y]=t[p+y]}++o}}if(s>0){e[o]=e[s];for(let a=s*n,l=o*n,u=0;u!==n;++u)t[l+u]=t[a+u];++o}return o!==e.length?(this.times=go(e,0,o),this.values=go(t,0,o*n)):(this.times=e,this.values=t),this}clone(){const e=go(this.times,0),t=go(this.values,0),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}ra.prototype.TimeBufferType=Float32Array;ra.prototype.ValueBufferType=Float32Array;ra.prototype.DefaultInterpolation=Xc;class Jd extends ra{}Jd.prototype.ValueTypeName="bool";Jd.prototype.ValueBufferType=Array;Jd.prototype.DefaultInterpolation=kd;Jd.prototype.InterpolantFactoryMethodLinear=void 0;Jd.prototype.InterpolantFactoryMethodSmooth=void 0;class l1 extends ra{}l1.prototype.ValueTypeName="color";class Od extends ra{}Od.prototype.ValueTypeName="number";class oI extends vp{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(n-t)/(i-t);let u=e*a;for(let h=u+a;u!==h;u+=4)ui.slerpFlat(s,0,o,u-a,o,u,l);return s}}class Kc extends ra{InterpolantFactoryMethodLinear(e){return new oI(this.times,this.values,this.getValueSize(),e)}}Kc.prototype.ValueTypeName="quaternion";Kc.prototype.DefaultInterpolation=Xc;Kc.prototype.InterpolantFactoryMethodSmooth=void 0;class Xd extends ra{}Xd.prototype.ValueTypeName="string";Xd.prototype.ValueBufferType=Array;Xd.prototype.DefaultInterpolation=kd;Xd.prototype.InterpolantFactoryMethodLinear=void 0;Xd.prototype.InterpolantFactoryMethodSmooth=void 0;class Ud extends ra{}Ud.prototype.ValueTypeName="vector";class ip{constructor(e,t=-1,n,i=Ly){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=Xs(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let o=0,a=n.length;o!==a;++o)t.push(Lz(n[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=n.length;s!==o;++s)t.push(ra.toJSON(n[s]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const h=rI(l);l=Bb(l,1,h),u=Bb(u,1,h),!i&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new Od(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],h=u.name.match(s);if(h&&h.length>1){const p=h[1];let g=i[p];g||(i[p]=g=[]),g.push(u)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(p,g,y,_,A){if(y.length!==0){const b=[],w=[];o1(y,b,w,_),b.length!==0&&A.push(new p(g,b,w))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let p=0;p<u.length;p++){const g=u[p].keys;if(!(!g||g.length===0))if(g[0].morphTargets){const y={};let _;for(_=0;_<g.length;_++)if(g[_].morphTargets)for(let A=0;A<g[_].morphTargets.length;A++)y[g[_].morphTargets[A]]=-1;for(const A in y){const b=[],w=[];for(let C=0;C!==g[_].morphTargets.length;++C){const E=g[_];b.push(E.time),w.push(E.morphTarget===A?1:0)}i.push(new Od(".morphTargetInfluence["+A+"]",b,w))}l=y.length*o}else{const y=".bones["+t[p].name+"]";n(Ud,y+".position",g,"pos",i),n(Kc,y+".quaternion",g,"rot",i),n(Ud,y+".scale",g,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Iz(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Od;case"vector":case"vector2":case"vector3":case"vector4":return Ud;case"color":return l1;case"quaternion":return Kc;case"bool":case"boolean":return Jd;case"string":return Xd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function Lz(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Iz(r.type);if(r.times===void 0){const t=[],n=[];o1(r.keys,t,n,"value"),r.times=t,r.values=n}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const jd={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class ex{constructor(e,t,n){const i=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(h){a++,s===!1&&i.onStart!==void 0&&i.onStart(h,o,a),s=!0},this.itemEnd=function(h){o++,i.onProgress!==void 0&&i.onProgress(h,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(h){i.onError!==void 0&&i.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,p){return u.push(h,p),this},this.removeHandler=function(h){const p=u.indexOf(h);return p!==-1&&u.splice(p,2),this},this.getHandler=function(h){for(let p=0,g=u.length;p<g;p+=2){const y=u[p],_=u[p+1];if(y.global&&(y.lastIndex=0),y.test(h))return _}return null}}}const Hf=new ex;class Ci{constructor(e){this.manager=e!==void 0?e:Hf,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,s){n.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Ci.DEFAULT_MATERIAL_NAME="__DEFAULT";const yl={};class Nz extends Error{constructor(e,t){super(e),this.response=t}}class Mi extends Ci{constructor(e){super(e)}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=jd.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(yl[e]!==void 0){yl[e].push({onLoad:t,onProgress:n,onError:i});return}yl[e]=[],yl[e].push({onLoad:t,onProgress:n,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const h=yl[e],p=u.body.getReader(),g=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),y=g?parseInt(g):0,_=y!==0;let A=0;const b=new ReadableStream({start(w){C();function C(){p.read().then(({done:E,value:R})=>{if(E)w.close();else{A+=R.byteLength;const L=new ProgressEvent("progress",{lengthComputable:_,loaded:A,total:y});for(let D=0,j=h.length;D<j;D++){const O=h[D];O.onProgress&&O.onProgress(L)}w.enqueue(R),C()}})}}});return new Response(b)}else throw new Nz(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(h=>new DOMParser().parseFromString(h,a));case"json":return u.json();default:if(a===void 0)return u.text();{const p=/charset="?([^;"\s]*)"?/i.exec(a),g=p&&p[1]?p[1].toLowerCase():void 0,y=new TextDecoder(g);return u.arrayBuffer().then(_=>y.decode(_))}}}).then(u=>{jd.add(e,u);const h=yl[e];delete yl[e];for(let p=0,g=h.length;p<g;p++){const y=h[p];y.onLoad&&y.onLoad(u)}}).catch(u=>{const h=yl[e];if(h===void 0)throw this.manager.itemError(e),u;delete yl[e];for(let p=0,g=h.length;p<g;p++){const y=h[p];y.onError&&y.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Bz extends Ci{constructor(e){super(e)}load(e,t,n,i){const s=this,o=new Mi(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=ip.parse(e[n]);t.push(i)}return t}}class kz extends Ci{constructor(e){super(e)}load(e,t,n,i){const s=this,o=[],a=new Rd,l=new Mi(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function h(p){l.load(e[p],function(g){const y=s.parse(g,!0);o[p]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},u+=1,u===6&&(y.mipmapCount===1&&(a.minFilter=Pn),a.image=o,a.format=y.format,a.needsUpdate=!0,t&&t(a))},n,i)}if(Array.isArray(e))for(let p=0,g=e.length;p<g;++p)h(p);else l.load(e,function(p){const g=s.parse(p,!0);if(g.isCubemap){const y=g.mipmaps.length/g.mipmapCount;for(let _=0;_<y;_++){o[_]={mipmaps:[]};for(let A=0;A<g.mipmapCount;A++)o[_].mipmaps.push(g.mipmaps[_*g.mipmapCount+A]),o[_].format=g.format,o[_].width=g.width,o[_].height=g.height}a.image=o}else a.image.width=g.width,a.image.height=g.height,a.mipmaps=g.mipmaps;g.mipmapCount===1&&(a.minFilter=Pn),a.format=g.format,a.needsUpdate=!0,t&&t(a)},n,i);return a}}class ug extends Ci{constructor(e){super(e)}load(e,t,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=jd.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=sg("img");function l(){h(),jd.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(p){h(),i&&i(p),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class aI extends Ci{constructor(e){super(e)}load(e,t,n,i){const s=new wg;s.colorSpace=nn;const o=new ug(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(h){s.images[u]=h,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return s}}class c1 extends Ci{constructor(e){super(e)}load(e,t,n,i){const s=this,o=new Td,a=new Mi(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let u;try{u=s.parse(l)}catch(h){if(i!==void 0)i(h);else{console.error(h);return}}if(!u)return i();u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:er,o.wrapT=u.wrapT!==void 0?u.wrapT:er,o.magFilter=u.magFilter!==void 0?u.magFilter:Pn,o.minFilter=u.minFilter!==void 0?u.minFilter:Pn,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0?o.colorSpace=u.colorSpace:u.encoding!==void 0&&(o.encoding=u.encoding),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=ea),u.mipmapCount===1&&(o.minFilter=Pn),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u)},n,i),o}}class Pg extends Ci{constructor(e){super(e)}load(e,t,n,i){const s=new In,o=new ug(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},n,i),s}}class su extends Cn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new mt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class lI extends su{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Cn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new mt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const B_=new Jt,OM=new q,UM=new q;class u1{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new We(512,512),this.map=null,this.mapPass=null,this.matrix=new Jt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ky,this._frameExtents=new We(1,1),this._viewportCount=1,this._viewports=[new Mn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;OM.setFromMatrixPosition(e.matrixWorld),t.position.copy(OM),UM.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(UM),t.updateMatrixWorld(),B_.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(B_),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(B_)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Dz extends u1{constructor(){super(new ar(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=np*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class d1 extends su{constructor(e,t,n=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Cn.DEFAULT_UP),this.updateMatrix(),this.target=new Cn,this.distance=n,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new Dz}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const jM=new Jt,ym=new q,k_=new q;class Fz extends u1{constructor(){super(new ar(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new We(4,2),this._viewportCount=6,this._viewports=[new Mn(2,1,1,1),new Mn(0,1,1,1),new Mn(3,1,1,1),new Mn(1,1,1,1),new Mn(3,0,1,1),new Mn(1,0,1,1)],this._cubeDirections=[new q(1,0,0),new q(-1,0,0),new q(0,0,1),new q(0,0,-1),new q(0,1,0),new q(0,-1,0)],this._cubeUps=[new q(0,1,0),new q(0,1,0),new q(0,1,0),new q(0,1,0),new q(0,0,1),new q(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),ym.setFromMatrixPosition(e.matrixWorld),n.position.copy(ym),k_.copy(n.position),k_.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(k_),n.updateMatrixWorld(),i.makeTranslation(-ym.x,-ym.y,-ym.z),jM.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(jM)}}class h1 extends su{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new Fz}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Oz extends u1{constructor(){super(new xo(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class f1 extends su{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Cn.DEFAULT_UP),this.updateMatrix(),this.target=new Cn,this.shadow=new Oz}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class cI extends su{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class uI extends su{constructor(e,t,n=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class dI{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new q)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],1.092548*(n*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(n*s)),t.addScaledVector(o[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*n),t.addScaledVector(o[4],2*.429043*n*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*n*s),t.addScaledVector(o[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const n=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-i*i)}}class tx extends su{constructor(e=new dI,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class nx extends Ci{constructor(e){super(e),this.textures={}}load(e,t,n,i){const s=this,o=new Mi(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},n,i)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=nx.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new mt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=n(o.value);break;case"c":i.uniforms[s].value=new mt().setHex(o.value);break;case"v2":i.uniforms[s].value=new We().fromArray(o.value);break;case"v3":i.uniforms[s].value=new q().fromArray(o.value);break;case"v4":i.uniforms[s].value=new Mn().fromArray(o.value);break;case"m3":i.uniforms[s].value=new pn().fromArray(o.value);break;case"m4":i.uniforms[s].value=new Jt().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=n(e.map)),e.matcap!==void 0&&(i.matcap=n(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new We().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=n(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new We().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:YP,SpriteMaterial:XA,RawShaderMaterial:qP,ShaderMaterial:ss,PointsMaterial:Eg,MeshPhysicalMaterial:wo,MeshStandardMaterial:gp,MeshPhongMaterial:QP,MeshToonMaterial:ZP,MeshNormalMaterial:$P,MeshLambertMaterial:eI,MeshDepthMaterial:WA,MeshDistanceMaterial:JA,MeshBasicMaterial:Cs,MeshMatcapMaterial:tI,LineDashedMaterial:nI,LineBasicMaterial:Hi,Material:Jr};return new t[e]}}class Hc{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class p1 extends rn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class hI extends Ci{constructor(e){super(e)}load(e,t,n,i){const s=this,o=new Mi(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},n,i)}parse(e){const t={},n={};function i(y,_){if(t[_]!==void 0)return t[_];const b=y.interleavedBuffers[_],w=s(y,b.buffer),C=Uf(b.type,w),E=new Ag(C,b.stride);return E.uuid=b.uuid,t[_]=E,E}function s(y,_){if(n[_]!==void 0)return n[_];const b=y.arrayBuffers[_],w=new Uint32Array(b).buffer;return n[_]=w,w}const o=e.isInstancedBufferGeometry?new p1:new rn,a=e.data.index;if(a!==void 0){const y=Uf(a.type,a.array);o.setIndex(new Sn(y,1))}const l=e.data.attributes;for(const y in l){const _=l[y];let A;if(_.isInterleavedBufferAttribute){const b=i(e.data,_.data);A=new Ts(b,_.itemSize,_.offset,_.normalized)}else{const b=Uf(_.type,_.array),w=_.isInstancedBufferAttribute?Dd:Sn;A=new w(b,_.itemSize,_.normalized)}_.name!==void 0&&(A.name=_.name),_.usage!==void 0&&A.setUsage(_.usage),_.updateRange!==void 0&&(A.updateRange.offset=_.updateRange.offset,A.updateRange.count=_.updateRange.count),o.setAttribute(y,A)}const u=e.data.morphAttributes;if(u)for(const y in u){const _=u[y],A=[];for(let b=0,w=_.length;b<w;b++){const C=_[b];let E;if(C.isInterleavedBufferAttribute){const R=i(e.data,C.data);E=new Ts(R,C.itemSize,C.offset,C.normalized)}else{const R=Uf(C.type,C.array);E=new Sn(R,C.itemSize,C.normalized)}C.name!==void 0&&(E.name=C.name),A.push(E)}o.morphAttributes[y]=A}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let y=0,_=p.length;y!==_;++y){const A=p[y];o.addGroup(A.start,A.count,A.materialIndex)}const g=e.data.boundingSphere;if(g!==void 0){const y=new q;g.center!==void 0&&y.fromArray(g.center),o.boundingSphere=new Is(y,g.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class Uz extends Ci{constructor(e){super(e)}load(e,t,n,i){const s=this,o=this.path===""?Hc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Mi(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(p){i!==void 0&&i(p),console.error("THREE:ObjectLoader: Can't parse "+e+".",p.message);return}const h=u.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},n,i)}async loadAsync(e,t){const n=this,i=this.path===""?Hc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new Mi(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(a)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,n),h=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,h),t!==void 0){let p=!1;for(const g in o)if(o[g].data instanceof HTMLImageElement){p=!0;break}p===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const t={};if(e!==void 0)for(let n=0,i=e.length;n<i;n++){const s=new Pd().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Sg().fromJSON(e[s],i);n[a.uuid]=a}return n}parseGeometries(e,t){const n={};if(e!==void 0){const i=new hI;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in FM?a=FM[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),n[l.uuid]=a}}return n}parseMaterials(e,t){const n={},i={};if(e!==void 0){const s=new nx;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];n[l.uuid]===void 0&&(n[l.uuid]=s.parse(l)),i[l.uuid]=n[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const i=e[n],s=ip.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const n=this,i={};let s;function o(l){return n.manager.itemStart(l),s.load(l,function(){n.manager.itemEnd(l)},void 0,function(){n.manager.itemError(l),n.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:n.resourcePath+u;return o(h)}else return l.data?{data:Uf(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new ex(t);s=new ug(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,h=e.length;u<h;u++){const p=e[u],g=p.url;if(Array.isArray(g)){const y=[];for(let _=0,A=g.length;_<A;_++){const b=g[_],w=a(b);w!==null&&(w instanceof HTMLImageElement?y.push(w):y.push(new Td(w.data,w.width,w.height)))}i[p.uuid]=new gd(y)}else{const y=a(p.url);i[p.uuid]=new gd(y)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:Uf(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new ug(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const h=[];for(let p=0,g=u.length;p<g;p++){const y=u[p],_=await s(y);_!==null&&(_ instanceof HTMLImageElement?h.push(_):h.push(new Td(_.data,_.width,_.height)))}n[l.uuid]=new gd(h)}else{const h=await s(l.url);n[l.uuid]=new gd(h)}}}return n}parseTextures(e,t){function n(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let h;Array.isArray(u)?(h=new wg,u.length===6&&(h.needsUpdate=!0)):(u&&u.data?h=new Td:h=new In,u&&(h.needsUpdate=!0)),h.source=l,h.uuid=a.uuid,a.name!==void 0&&(h.name=a.name),a.mapping!==void 0&&(h.mapping=n(a.mapping,jz)),a.channel!==void 0&&(h.channel=a.channel),a.offset!==void 0&&h.offset.fromArray(a.offset),a.repeat!==void 0&&h.repeat.fromArray(a.repeat),a.center!==void 0&&h.center.fromArray(a.center),a.rotation!==void 0&&(h.rotation=a.rotation),a.wrap!==void 0&&(h.wrapS=n(a.wrap[0],zM),h.wrapT=n(a.wrap[1],zM)),a.format!==void 0&&(h.format=a.format),a.internalFormat!==void 0&&(h.internalFormat=a.internalFormat),a.type!==void 0&&(h.type=a.type),a.colorSpace!==void 0&&(h.colorSpace=a.colorSpace),a.encoding!==void 0&&(h.encoding=a.encoding),a.minFilter!==void 0&&(h.minFilter=n(a.minFilter,HM)),a.magFilter!==void 0&&(h.magFilter=n(a.magFilter,HM)),a.anisotropy!==void 0&&(h.anisotropy=a.anisotropy),a.flipY!==void 0&&(h.flipY=a.flipY),a.generateMipmaps!==void 0&&(h.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(h.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(h.compareFunction=a.compareFunction),a.userData!==void 0&&(h.userData=a.userData),i[a.uuid]=h}return i}parseObject(e,t,n,i,s){let o;function a(g){return t[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",g),t[g]}function l(g){if(g!==void 0){if(Array.isArray(g)){const y=[];for(let _=0,A=g.length;_<A;_++){const b=g[_];n[b]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",b),y.push(n[b])}return y}return n[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),n[g]}}function u(g){return i[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",g),i[g]}let h,p;switch(e.type){case"Scene":o=new Il,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new mt(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Oy(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Fy(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new ar(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new xo(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new cI(e.color,e.intensity);break;case"DirectionalLight":o=new f1(e.color,e.intensity);break;case"PointLight":o=new h1(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new uI(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new d1(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new lI(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new tx().fromJSON(e);break;case"SkinnedMesh":h=a(e.geometry),p=l(e.material),o=new KA(h,p),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":h=a(e.geometry),p=l(e.material),o=new hr(h,p);break;case"InstancedMesh":h=a(e.geometry),p=l(e.material);const g=e.count,y=e.instanceMatrix,_=e.instanceColor;o=new YA(h,p,g),o.instanceMatrix=new Dd(new Float32Array(y.array),16),_!==void 0&&(o.instanceColor=new Dd(new Float32Array(_.array),_.itemSize));break;case"LOD":o=new UP;break;case"Line":o=new Ll(a(e.geometry),l(e.material));break;case"LineLoop":o=new qA(a(e.geometry),l(e.material));break;case"LineSegments":o=new ta(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new QA(a(e.geometry),l(e.material));break;case"Sprite":o=new OP(l(e.material));break;case"Group":o=new Sl;break;case"Bone":o=new Uy;break;default:o=new Cn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const g=e.children;for(let y=0;y<g.length;y++)o.add(this.parseObject(g[y],t,n,i,s))}if(e.animations!==void 0){const g=e.animations;for(let y=0;y<g.length;y++){const _=g[y];o.animations.push(s[_])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const g=e.levels;for(let y=0;y<g.length;y++){const _=g[y],A=o.getObjectByProperty("uuid",_.object);A!==void 0&&o.addLevel(A,_.distance,_.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const i=t[n.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(i,n.bindMatrix)}})}}const jz={UVMapping:Wc,CubeReflectionMapping:Oa,CubeRefractionMapping:Jc,EquirectangularReflectionMapping:ep,EquirectangularRefractionMapping:tg,CubeUVReflectionMapping:fp},zM={RepeatWrapping:Pl,ClampToEdgeWrapping:er,MirroredRepeatWrapping:Nd},HM={NearestFilter:gr,NearestMipmapNearestFilter:tp,NearestMipmapLinearFilter:Sd,LinearFilter:Pn,LinearMipmapNearestFilter:xg,LinearMipmapLinearFilter:ea};class fI extends Ci{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=jd.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){jd.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let _v;class m1{static getContext(){return _v===void 0&&(_v=new(window.AudioContext||window.webkitAudioContext)),_v}static setContext(e){_v=e}}class zz extends Ci{constructor(e){super(e)}load(e,t,n,i){const s=this,o=new Mi(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);m1.getContext().decodeAudioData(u,function(p){t(p)},a)}catch(u){a(u)}},n,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}class Hz extends tx{constructor(e,t,n=1){super(void 0,n),this.isHemisphereLightProbe=!0;const i=new mt().set(e),s=new mt().set(t),o=new q(i.r,i.g,i.b),a=new q(s.r,s.g,s.b),l=Math.sqrt(Math.PI),u=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}}class Gz extends tx{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const n=new mt().set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const GM=new Jt,VM=new Jt,qu=new Jt;class Vz{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ar,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ar,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,qu.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(Md*t.fov*.5)/t.zoom;let a,l;VM.elements[12]=-i,GM.elements[12]=i,a=-o*t.aspect+s,l=o*t.aspect+s,qu.elements[0]=2*t.near/(l-a),qu.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(qu),a=-o*t.aspect-s,l=o*t.aspect-s,qu.elements[0]=2*t.near/(l-a),qu.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(qu)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(VM),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(GM)}}class g1{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=WM(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=WM();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function WM(){return(typeof performance>"u"?Date:performance).now()}const Qu=new q,JM=new ui,Wz=new q,Zu=new q;class Jz extends Cn{constructor(){super(),this.type="AudioListener",this.context=m1.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new g1}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Qu,JM,Wz),Zu.set(0,0,-1).applyQuaternion(JM),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Qu.x,i),t.positionY.linearRampToValueAtTime(Qu.y,i),t.positionZ.linearRampToValueAtTime(Qu.z,i),t.forwardX.linearRampToValueAtTime(Zu.x,i),t.forwardY.linearRampToValueAtTime(Zu.y,i),t.forwardZ.linearRampToValueAtTime(Zu.z,i),t.upX.linearRampToValueAtTime(n.x,i),t.upY.linearRampToValueAtTime(n.y,i),t.upZ.linearRampToValueAtTime(n.z,i)}else t.setPosition(Qu.x,Qu.y,Qu.z),t.setOrientation(Zu.x,Zu.y,Zu.z,n.x,n.y,n.z)}}class pI extends Cn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const $u=new q,XM=new ui,Xz=new q,ed=new q;class Kz extends pI{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose($u,XM,Xz),ed.set(0,0,1).applyQuaternion(XM);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime($u.x,n),t.positionY.linearRampToValueAtTime($u.y,n),t.positionZ.linearRampToValueAtTime($u.z,n),t.orientationX.linearRampToValueAtTime(ed.x,n),t.orientationY.linearRampToValueAtTime(ed.y,n),t.orientationZ.linearRampToValueAtTime(ed.z,n)}else t.setPosition($u.x,$u.y,$u.z),t.setOrientation(ed.x,ed.y,ed.z)}}class Yz{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class mI{constructor(e,t,n){this.binding=e,this.valueSize=n;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)n[s+a]=n[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(n,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(n,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(n[l]!==n[l+t]){a.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let s=n,o=i;s!==o;++s)t[s]=t[i+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[n+o]}_slerp(e,t,n,i){ui.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,s){const o=this._workIndex*s;ui.multiplyQuaternionsFlat(e,o,e,t,e,n),ui.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,n,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[n+a]*i}}_lerpAdditive(e,t,n,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[n+o]*i}}}const v1="\\[\\]\\.:\\/",qz=new RegExp("["+v1+"]","g"),y1="[^"+v1+"]",Qz="[^"+v1.replace("\\.","")+"]",Zz=/((?:WC+[\/:])*)/.source.replace("WC",y1),$z=/(WCOD+)?/.source.replace("WCOD",Qz),eH=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",y1),tH=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",y1),nH=new RegExp("^"+Zz+$z+eH+tH+"$"),rH=["material","materials","bones","map"];class iH{constructor(e,t,n){const i=n||gn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=n.length;i!==s;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class gn{constructor(e,t,n){this.path=t,this.parsedPath=n||gn.parseTrackName(t),this.node=gn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new gn.Composite(e,t,n):new gn(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(qz,"")}static parseTrackName(e){const t=nH.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=n.nodeName.substring(i+1);rH.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=n(a.children);if(l)return l}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=gn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let u=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===u){u=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[i];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}gn.Composite=iH;gn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};gn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};gn.prototype.GetterByBindingType=[gn.prototype._getValue_direct,gn.prototype._getValue_array,gn.prototype._getValue_arrayElement,gn.prototype._getValue_toArray];gn.prototype.SetterByBindingTypeAndVersioning=[[gn.prototype._setValue_direct,gn.prototype._setValue_direct_setNeedsUpdate,gn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[gn.prototype._setValue_array,gn.prototype._setValue_array_setNeedsUpdate,gn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[gn.prototype._setValue_arrayElement,gn.prototype._setValue_arrayElement_setNeedsUpdate,gn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[gn.prototype._setValue_fromArray,gn.prototype._setValue_fromArray_setNeedsUpdate,gn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class sH{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Xs(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let h=0,p=arguments.length;h!==p;++h){const g=arguments[h],y=g.uuid;let _=t[y];if(_===void 0){_=l++,t[y]=_,e.push(g);for(let A=0,b=o;A!==b;++A)s[A].push(new gn(g,n[A],i[A]))}else if(_<u){a=e[_];const A=--u,b=e[A];t[b.uuid]=_,e[_]=b,t[y]=A,e[A]=g;for(let w=0,C=o;w!==C;++w){const E=s[w],R=E[A];let L=E[_];E[_]=R,L===void 0&&(L=new gn(g,n[w],i[w])),E[A]=L}}else e[_]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,h=t[u];if(h!==void 0&&h>=s){const p=s++,g=e[p];t[g.uuid]=h,e[h]=g,t[u]=p,e[p]=l;for(let y=0,_=i;y!==_;++y){const A=n[y],b=A[p],w=A[h];A[h]=b,A[p]=w}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],h=u.uuid,p=t[h];if(p!==void 0)if(delete t[h],p<s){const g=--s,y=e[g],_=--o,A=e[_];t[y.uuid]=p,e[p]=y,t[A.uuid]=g,e[g]=A,e.pop();for(let b=0,w=i;b!==w;++b){const C=n[b],E=C[g],R=C[_];C[p]=E,C[g]=R,C.pop()}}else{const g=--o,y=e[g];g>0&&(t[y.uuid]=p),e[p]=y,e.pop();for(let _=0,A=i;_!==A;++_){const b=n[_];b[p]=b[g],b.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,h=this.nCachedObjects_,p=new Array(u);i=s.length,n[e]=i,o.push(e),a.push(t),s.push(p);for(let g=h,y=l.length;g!==y;++g){const _=l[g];p[g]=new gn(_,e,t)}return p}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];t[u]=n,o[n]=l,o.pop(),s[n]=s[a],s.pop(),i[n]=i[a],i.pop()}}}class gI{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:pd,endingEnd:pd};for(let u=0;u!==o;++u){const h=s[u].createInterpolant(null);a[u]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=lP,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+n,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*n;l<0||n===0?t=0:(this._startTime=null,t=n*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case BA:for(let h=0,p=l.length;h!==p;++h)l[h].evaluate(o),u[h].accumulateAdditive(a);break;case Ly:default:for(let h=0,p=l.length;h!==p;++h)l[h].evaluate(o),u[h].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,s=this._loopCount;const o=n===cP;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(n===aP){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=md,i.endingEnd=md):(e?i.endingStart=this.zeroSlopeAtStart?md:pd:i.endingStart=ng,t?i.endingEnd=this.zeroSlopeAtEnd?md:pd:i.endingEnd=ng)}_scheduleFading(e,t,n){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=n,this}}const oH=new Float32Array(1);class aH extends Dl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=n.uuid,u=this._bindingsByRootAndName;let h=u[l];h===void 0&&(h={},u[l]=h);for(let p=0;p!==s;++p){const g=i[p],y=g.name;let _=h[y];if(_!==void 0)++_.referenceCount,o[p]=_;else{if(_=o[p],_!==void 0){_._cacheIndex===null&&(++_.referenceCount,this._addInactiveBinding(_,l,y));continue}const A=t&&t._propertyBindings[p].binding.parsedPath;_=new mI(gn.create(n,y,A),g.ValueTypeName,g.getValueSize()),++_.referenceCount,this._addInactiveBinding(_,l,y),o[p]=_}a[p].resultBuffer=_.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,n)}const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],h=e._byClipCacheIndex;u._byClipCacheIndex=h,l[h]=u,l.pop(),e._byClipCacheIndex=null;const p=a.actionByRoot,g=(e._localRoot||this._root).uuid;delete p[g],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,s=n.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new a1(new Float32Array(2),new Float32Array(2),1,oH),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?ip.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(n===void 0&&(o!==null?n=o.blendMode:n=Ly),l!==void 0){const p=l.actionByRoot[s];if(p!==void 0&&p.blendMode===n)return p;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const h=new gI(this,o,t,n);return this._bindAction(h,u),this._addInactiveAction(h,a,s),h}existingAction(e,t){const n=t||this._root,i=n.uuid,s=typeof e=="string"?ip.findByName(n,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==n;++u)t[u]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,s=i[n];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const h=u._cacheIndex,p=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,p._cacheIndex=h,t[h]=p,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const a=n[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class rx{constructor(e){this.value=e}clone(){return new rx(this.value.clone===void 0?this.value:this.value.clone())}}let lH=0;class cH extends Dl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:lH++}),this.name="",this.usage=rg,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,i=t.length;n<i;n++)this.uniforms.push(t[n].clone());return this}clone(){return new this.constructor().copy(this)}}class fy extends Ag{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class uH{constructor(e,t,n,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class x1{constructor(e,t,n=0,i=1/0){this.ray=new Vd(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new Cd,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return kb(e,this,n,t),n.sort(KM),n}intersectObjects(e,t=!0,n=[]){for(let i=0,s=e.length;i<s;i++)kb(e[i],this,n,t);return n.sort(KM),n}}function KM(r,e){return r.distance-e.distance}function kb(r,e,t,n){if(r.layers.test(e.layers)&&r.raycast(e,t),n===!0){const i=r.children;for(let s=0,o=i.length;s<o;s++)kb(i[s],e,t,!0)}}class Db{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Sr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class dH{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}const YM=new We;class hH{constructor(e=new We(1/0,1/0),t=new We(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=YM.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,YM).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const qM=new q,wv=new q;class vI{constructor(e=new q,t=new q){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){qM.subVectors(e,this.start),wv.subVectors(this.end,this.start);const n=wv.dot(wv);let s=wv.dot(qM)/n;return t&&(s=Sr(s,0,1)),s}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const QM=new q;class fH extends Cn{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new rn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,h=a/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(h),Math.sin(h),1)}n.setAttribute("position",new Rt(i,3));const s=new Hi({fog:!1,toneMapped:!1});this.cone=new ta(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),QM.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(QM),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Cc=new q,bv=new Jt,D_=new Jt;class pH extends ta{constructor(e){const t=yI(e),n=new rn,i=[],s=[],o=new mt(0,0,1),a=new mt(0,1,0);for(let u=0;u<t.length;u++){const h=t[u];h.parent&&h.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}n.setAttribute("position",new Rt(i,3)),n.setAttribute("color",new Rt(s,3));const l=new Hi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");D_.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(bv.multiplyMatrices(D_,a.matrixWorld),Cc.setFromMatrixPosition(bv),i.setXYZ(o,Cc.x,Cc.y,Cc.z),bv.multiplyMatrices(D_,a.parent.matrixWorld),Cc.setFromMatrixPosition(bv),i.setXYZ(o+1,Cc.x,Cc.y,Cc.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function yI(r){const e=[];r.isBone===!0&&e.push(r);for(let t=0;t<r.children.length;t++)e.push.apply(e,yI(r.children[t]));return e}class mH extends hr{constructor(e,t,n){const i=new Rg(t,4,2),s=new Cs({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const gH=new q,ZM=new mt,$M=new mt;class vH extends Cn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new Tg(t);i.rotateY(Math.PI*.5),this.material=new Cs({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Sn(o,3)),this.add(new hr(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");ZM.copy(this.light.color),$M.copy(this.light.groundColor);for(let n=0,i=t.count;n<i;n++){const s=n<i/2?ZM:$M;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(gH.setFromMatrixPosition(this.light.matrixWorld).negate())}}class yH extends ta{constructor(e=10,t=10,n=4473924,i=8947848){n=new mt(n),i=new mt(i);const s=t/2,o=e/t,a=e/2,l=[],u=[];for(let g=0,y=0,_=-a;g<=t;g++,_+=o){l.push(-a,0,_,a,0,_),l.push(_,0,-a,_,0,a);const A=g===s?n:i;A.toArray(u,y),y+=3,A.toArray(u,y),y+=3,A.toArray(u,y),y+=3,A.toArray(u,y),y+=3}const h=new rn;h.setAttribute("position",new Rt(l,3)),h.setAttribute("color",new Rt(u,3));const p=new Hi({vertexColors:!0,toneMapped:!1});super(h,p),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class xH extends ta{constructor(e=10,t=16,n=8,i=64,s=4473924,o=8947848){s=new mt(s),o=new mt(o);const a=[],l=[];if(t>1)for(let p=0;p<t;p++){const g=p/t*(Math.PI*2),y=Math.sin(g)*e,_=Math.cos(g)*e;a.push(0,0,0),a.push(y,0,_);const A=p&1?s:o;l.push(A.r,A.g,A.b),l.push(A.r,A.g,A.b)}for(let p=0;p<n;p++){const g=p&1?s:o,y=e-e/n*p;for(let _=0;_<i;_++){let A=_/i*(Math.PI*2),b=Math.sin(A)*y,w=Math.cos(A)*y;a.push(b,0,w),l.push(g.r,g.g,g.b),A=(_+1)/i*(Math.PI*2),b=Math.sin(A)*y,w=Math.cos(A)*y,a.push(b,0,w),l.push(g.r,g.g,g.b)}}const u=new rn;u.setAttribute("position",new Rt(a,3)),u.setAttribute("color",new Rt(l,3));const h=new Hi({vertexColors:!0,toneMapped:!1});super(u,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const eC=new q,Av=new q,tC=new q;class _H extends Cn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new rn;i.setAttribute("position",new Rt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Hi({fog:!1,toneMapped:!1});this.lightPlane=new Ll(i,s),this.add(this.lightPlane),i=new rn,i.setAttribute("position",new Rt([0,0,0,0,0,1],3)),this.targetLine=new Ll(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),eC.setFromMatrixPosition(this.light.matrixWorld),Av.setFromMatrixPosition(this.light.target.matrixWorld),tC.subVectors(Av,eC),this.lightPlane.lookAt(Av),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Av),this.targetLine.scale.z=tC.length()}}const Sv=new q,Ar=new _g;class wH extends ta{constructor(e){const t=new rn,n=new Hi({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(_,A){l(_),l(A)}function l(_){i.push(0,0,0),s.push(0,0,0),o[_]===void 0&&(o[_]=[]),o[_].push(i.length/3-1)}t.setAttribute("position",new Rt(i,3)),t.setAttribute("color",new Rt(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new mt(16755200),h=new mt(16711680),p=new mt(43775),g=new mt(16777215),y=new mt(3355443);this.setColors(u,h,p,g,y)}setColors(e,t,n,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,i=1;Ar.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Ir("c",t,e,Ar,0,0,-1),Ir("t",t,e,Ar,0,0,1),Ir("n1",t,e,Ar,-n,-i,-1),Ir("n2",t,e,Ar,n,-i,-1),Ir("n3",t,e,Ar,-n,i,-1),Ir("n4",t,e,Ar,n,i,-1),Ir("f1",t,e,Ar,-n,-i,1),Ir("f2",t,e,Ar,n,-i,1),Ir("f3",t,e,Ar,-n,i,1),Ir("f4",t,e,Ar,n,i,1),Ir("u1",t,e,Ar,n*.7,i*1.1,-1),Ir("u2",t,e,Ar,-n*.7,i*1.1,-1),Ir("u3",t,e,Ar,0,i*2,-1),Ir("cf1",t,e,Ar,-n,0,1),Ir("cf2",t,e,Ar,n,0,1),Ir("cf3",t,e,Ar,0,-i,1),Ir("cf4",t,e,Ar,0,i,1),Ir("cn1",t,e,Ar,-n,0,-1),Ir("cn2",t,e,Ar,n,0,-1),Ir("cn3",t,e,Ar,0,-i,-1),Ir("cn4",t,e,Ar,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ir(r,e,t,n,i,s,o){Sv.set(i,s,o).unproject(n);const a=e[r];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,h=a.length;u<h;u++)l.setXYZ(a[u],Sv.x,Sv.y,Sv.z)}}const Ev=new as;class bH extends ta{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),s=new rn;s.setIndex(new Sn(n,1)),s.setAttribute("position",new Sn(i,3)),super(s,new Hi({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Ev.setFromObject(this.object),Ev.isEmpty())return;const t=Ev.min,n=Ev.max,i=this.geometry.attributes.position,s=i.array;s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=t.x,s[4]=n.y,s[5]=n.z,s[6]=t.x,s[7]=t.y,s[8]=n.z,s[9]=n.x,s[10]=t.y,s[11]=n.z,s[12]=n.x,s[13]=n.y,s[14]=t.z,s[15]=t.x,s[16]=n.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=n.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class AH extends ta{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new rn;s.setIndex(new Sn(n,1)),s.setAttribute("position",new Rt(i,3)),super(s,new Hi({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class SH extends Ll{constructor(e,t=1,n=16776960){const i=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new rn;o.setAttribute("position",new Rt(s,3)),o.computeBoundingSphere(),super(o,new Hi({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new rn;l.setAttribute("position",new Rt(a,3)),l.computeBoundingSphere(),this.add(new hr(l,new Cs({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const nC=new q;let Mv,F_;class EH extends Cn{constructor(e=new q(0,0,1),t=new q(0,0,0),n=1,i=16776960,s=n*.2,o=s*.2){super(),this.type="ArrowHelper",Mv===void 0&&(Mv=new rn,Mv.setAttribute("position",new Rt([0,0,0,0,1,0],3)),F_=new mp(0,.5,1,5,1),F_.translate(0,-.5,0)),this.position.copy(t),this.line=new Ll(Mv,new Hi({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new hr(F_,new Cs({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{nC.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(nC,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class MH extends ta{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new rn;i.setAttribute("position",new Rt(t,3)),i.setAttribute("color",new Rt(n,3));const s=new Hi({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,n){const i=new mt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(n),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class CH{constructor(){this.type="ShapePath",this.color=new mt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new og,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,s,o){return this.currentPath.bezierCurveTo(e,t,n,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(w){const C=[];for(let E=0,R=w.length;E<R;E++){const L=w[E],D=new Pd;D.curves=L.curves,C.push(D)}return C}function n(w,C){const E=C.length;let R=!1;for(let L=E-1,D=0;D<E;L=D++){let j=C[L],O=C[D],I=O.x-j.x,U=O.y-j.y;if(Math.abs(U)>Number.EPSILON){if(U<0&&(j=C[D],I=-I,O=C[L],U=-U),w.y<j.y||w.y>O.y)continue;if(w.y===j.y){if(w.x===j.x)return!0}else{const V=U*(w.x-j.x)-I*(w.y-j.y);if(V===0)return!0;if(V<0)continue;R=!R}}else{if(w.y!==j.y)continue;if(O.x<=w.x&&w.x<=j.x||j.x<=w.x&&w.x<=O.x)return!0}}return R}const i=ka.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new Pd,l.curves=a.curves,u.push(l),u;let h=!i(s[0].getPoints());h=e?!h:h;const p=[],g=[];let y=[],_=0,A;g[_]=void 0,y[_]=[];for(let w=0,C=s.length;w<C;w++)a=s[w],A=a.getPoints(),o=i(A),o=e?!o:o,o?(!h&&g[_]&&_++,g[_]={s:new Pd,p:A},g[_].s.curves=a.curves,h&&_++,y[_]=[]):y[_].push({h:a,p:A[0]});if(!g[0])return t(s);if(g.length>1){let w=!1,C=0;for(let E=0,R=g.length;E<R;E++)p[E]=[];for(let E=0,R=g.length;E<R;E++){const L=y[E];for(let D=0;D<L.length;D++){const j=L[D];let O=!0;for(let I=0;I<g.length;I++)n(j.p,g[I].p)&&(E!==I&&C++,O?(O=!1,p[I].push(j)):w=!0);O&&p[E].push(j)}}C>0&&w===!1&&(y=p)}let b;for(let w=0,C=g.length;w<C;w++){l=g[w].s,u.push(l),b=y[w];for(let E=0,R=b.length;E<R;E++)l.holes.push(b[E].h)}return u}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:hp}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=hp);const TH=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:EA,AddEquation:dd,AddOperation:qR,AdditiveAnimationBlendMode:BA,AdditiveBlending:Zw,AlphaFormat:tP,AlwaysCompare:bP,AlwaysDepth:GR,AlwaysStencilFunc:pP,AmbientLight:cI,AmbientLightProbe:Gz,AnimationAction:gI,AnimationClip:ip,AnimationLoader:Bz,AnimationMixer:aH,AnimationObjectGroup:sH,AnimationUtils:Pz,ArcCurve:jP,ArrayCamera:BP,ArrowHelper:EH,Audio:pI,AudioAnalyser:Yz,AudioContext:m1,AudioListener:Jz,AudioLoader:zz,AxesHelper:MH,BackSide:is,BasicDepthPacking:dP,BasicShadowMap:RR,Bone:Uy,BooleanKeyframeTrack:Jd,Box2:hH,Box3:as,Box3Helper:AH,BoxGeometry:nu,BoxHelper:bH,BufferAttribute:Sn,BufferGeometry:rn,BufferGeometryLoader:hI,ByteType:MA,Cache:jd,Camera:_g,CameraHelper:wH,CanvasTexture:ez,CapsuleGeometry:Hy,CatmullRomCurve3:zP,CineonToneMapping:$R,CircleGeometry:Gy,ClampToEdgeWrapping:er,Clock:g1,Color:mt,ColorKeyframeTrack:l1,ColorManagement:po,CompressedArrayTexture:Z5,CompressedCubeTexture:$5,CompressedTexture:Rd,CompressedTextureLoader:kz,ConeGeometry:Vy,CubeCamera:GA,CubeReflectionMapping:Oa,CubeRefractionMapping:Jc,CubeTexture:wg,CubeTextureLoader:aI,CubeUVReflectionMapping:fp,CubicBezierCurve:$A,CubicBezierCurve3:HP,CubicInterpolant:iI,CullFaceBack:Qw,CullFaceFront:TR,CullFaceFrontBack:$D,CullFaceNone:CR,Curve:na,CurvePath:VP,CustomBlending:PR,CustomToneMapping:eP,CylinderGeometry:mp,Cylindrical:dH,Data3DTexture:jA,DataArrayTexture:Ny,DataTexture:Td,DataTextureLoader:c1,DataUtils:vd,DecrementStencilOp:aF,DecrementWrapStencilOp:cF,DefaultLoadingManager:Hf,DepthFormat:jc,DepthStencilFormat:Bd,DepthTexture:kP,DirectionalLight:f1,DirectionalLightHelper:_H,DiscreteInterpolant:sI,DisplayP3ColorSpace:FA,DodecahedronGeometry:Wy,DoubleSide:Es,DstAlphaFactor:FR,DstColorFactor:UR,DynamicCopyUsage:AF,DynamicDrawUsage:Ed,DynamicReadUsage:_F,EdgesGeometry:WP,EllipseCurve:jy,EqualCompare:vP,EqualDepth:WR,EqualStencilFunc:fF,EquirectangularReflectionMapping:ep,EquirectangularRefractionMapping:tg,Euler:Wd,EventDispatcher:Dl,ExtrudeGeometry:Xy,FileLoader:Mi,Float16BufferAttribute:dO,Float32BufferAttribute:Rt,Float64BufferAttribute:hO,FloatType:ei,Fog:Oy,FogExp2:Fy,FramebufferTexture:Q5,FrontSide:Fa,Frustum:ky,GLBufferAttribute:uH,GLSL1:EF,GLSL3:Cb,GreaterCompare:xP,GreaterDepth:XR,GreaterEqualCompare:wP,GreaterEqualDepth:JR,GreaterEqualStencilFunc:vF,GreaterStencilFunc:mF,GridHelper:yH,Group:Sl,HalfFloatType:ci,HemisphereLight:lI,HemisphereLightHelper:vH,HemisphereLightProbe:Hz,IcosahedronGeometry:Cg,ImageBitmapLoader:fI,ImageLoader:ug,ImageUtils:UA,IncrementStencilOp:oF,IncrementWrapStencilOp:lF,InstancedBufferAttribute:Dd,InstancedBufferGeometry:p1,InstancedInterleavedBuffer:fy,InstancedMesh:YA,Int16BufferAttribute:cO,Int32BufferAttribute:uO,Int8BufferAttribute:oO,IntType:Iy,InterleavedBuffer:Ag,InterleavedBufferAttribute:Ts,Interpolant:vp,InterpolateDiscrete:kd,InterpolateLinear:Xc,InterpolateSmooth:Qv,InvertStencilOp:uF,KeepStencilOp:Zv,KeyframeTrack:ra,LOD:UP,LatheGeometry:Mg,Layers:Cd,LessCompare:gP,LessDepth:VR,LessEqualCompare:yP,LessEqualDepth:ly,LessEqualStencilFunc:pF,LessStencilFunc:hF,Light:su,LightProbe:tx,Line:Ll,Line3:vI,LineBasicMaterial:Hi,LineCurve:zy,LineCurve3:GP,LineDashedMaterial:nI,LineLoop:qA,LineSegments:ta,LinearEncoding:DA,LinearFilter:Pn,LinearInterpolant:a1,LinearMipMapLinearFilter:rb,LinearMipMapNearestFilter:rF,LinearMipmapLinearFilter:ea,LinearMipmapNearestFilter:xg,LinearSRGBColorSpace:Rs,LinearToneMapping:QR,Loader:Ci,LoaderUtils:Hc,LoadingManager:ex,LoopOnce:aP,LoopPingPong:cP,LoopRepeat:lP,LuminanceAlphaFormat:rP,LuminanceFormat:nP,MOUSE:sd,Material:Jr,MaterialLoader:nx,MathUtils:Ba,Matrix3:pn,Matrix4:Jt,MaxEquation:nb,Mesh:hr,MeshBasicMaterial:Cs,MeshDepthMaterial:WA,MeshDistanceMaterial:JA,MeshLambertMaterial:eI,MeshMatcapMaterial:tI,MeshNormalMaterial:$P,MeshPhongMaterial:QP,MeshPhysicalMaterial:wo,MeshStandardMaterial:gp,MeshToonMaterial:ZP,MinEquation:tb,MirroredRepeatWrapping:Nd,MixOperation:YR,MultiplyBlending:eb,MultiplyOperation:yg,NearestFilter:gr,NearestMipMapLinearFilter:nF,NearestMipMapNearestFilter:tF,NearestMipmapLinearFilter:Sd,NearestMipmapNearestFilter:tp,NeverCompare:mP,NeverDepth:HR,NeverStencilFunc:dF,NoBlending:La,NoColorSpace:zc,NoToneMapping:Na,NormalAnimationBlendMode:Ly,NormalBlending:Ad,NotEqualCompare:_P,NotEqualDepth:KR,NotEqualStencilFunc:gF,NumberKeyframeTrack:Od,Object3D:Cn,ObjectLoader:Uz,ObjectSpaceNormalMap:fP,OctahedronGeometry:Tg,OneFactor:BR,OneMinusDstAlphaFactor:OR,OneMinusDstColorFactor:jR,OneMinusSrcAlphaFactor:SA,OneMinusSrcColorFactor:DR,OrthographicCamera:xo,PCFShadowMap:Ry,PCFSoftShadowMap:zm,PMREMGenerator:Rb,Path:og,PerspectiveCamera:ar,Plane:bl,PlaneGeometry:ru,PlaneHelper:SH,PointLight:h1,PointLightHelper:mH,Points:QA,PointsMaterial:Eg,PolarGridHelper:xH,PolyhedronGeometry:iu,PositionalAudio:Kz,PropertyBinding:gn,PropertyMixer:mI,QuadraticBezierCurve:e1,QuadraticBezierCurve3:t1,Quaternion:ui,QuaternionKeyframeTrack:Kc,QuaternionLinearInterpolant:oI,RED_GREEN_RGTC2_Format:Eb,RED_RGTC1_Format:oP,REVISION:hp,RGBADepthPacking:hP,RGBAFormat:Wr,RGBAIntegerFormat:NA,RGBA_ASTC_10x10_Format:wb,RGBA_ASTC_10x5_Format:yb,RGBA_ASTC_10x6_Format:xb,RGBA_ASTC_10x8_Format:_b,RGBA_ASTC_12x10_Format:bb,RGBA_ASTC_12x12_Format:Ab,RGBA_ASTC_4x4_Format:ub,RGBA_ASTC_5x4_Format:db,RGBA_ASTC_5x5_Format:hb,RGBA_ASTC_6x5_Format:fb,RGBA_ASTC_6x6_Format:pb,RGBA_ASTC_8x5_Format:mb,RGBA_ASTC_8x6_Format:gb,RGBA_ASTC_8x8_Format:vb,RGBA_BPTC_Format:qv,RGBA_ETC2_EAC_Format:cb,RGBA_PVRTC_2BPPV1_Format:ab,RGBA_PVRTC_4BPPV1_Format:ob,RGBA_S3TC_DXT1_Format:Xv,RGBA_S3TC_DXT3_Format:Kv,RGBA_S3TC_DXT5_Format:Yv,RGB_ETC1_Format:sP,RGB_ETC2_Format:lb,RGB_PVRTC_2BPPV1_Format:sb,RGB_PVRTC_4BPPV1_Format:ib,RGB_S3TC_DXT1_Format:Jv,RGFormat:iP,RGIntegerFormat:LA,RawShaderMaterial:qP,Ray:Vd,Raycaster:x1,RectAreaLight:uI,RedFormat:PA,RedIntegerFormat:IA,ReinhardToneMapping:ZR,RenderTarget:EP,RepeatWrapping:Pl,ReplaceStencilOp:sF,ReverseSubtractEquation:LR,RingGeometry:Ky,SIGNED_RED_GREEN_RGTC2_Format:Mb,SIGNED_RED_RGTC1_Format:Sb,SRGBColorSpace:nn,Scene:Il,ShaderChunk:cn,ShaderLib:Qo,ShaderMaterial:ss,ShadowMaterial:YP,Shape:Pd,ShapeGeometry:Yy,ShapePath:CH,ShapeUtils:ka,ShortType:CA,Skeleton:Sg,SkeletonHelper:pH,SkinnedMesh:KA,Source:gd,Sphere:Is,SphereGeometry:Rg,Spherical:Db,SphericalHarmonics3:dI,SplineCurve:n1,SpotLight:d1,SpotLightHelper:fH,Sprite:OP,SpriteMaterial:XA,SrcAlphaFactor:AA,SrcAlphaSaturateFactor:zR,SrcColorFactor:kR,StaticCopyUsage:bF,StaticDrawUsage:rg,StaticReadUsage:xF,StereoCamera:Vz,StreamCopyUsage:SF,StreamDrawUsage:yF,StreamReadUsage:wF,StringKeyframeTrack:Xd,SubtractEquation:IR,SubtractiveBlending:$w,TOUCH:od,TangentSpaceNormalMap:tu,TetrahedronGeometry:qy,Texture:In,TextureLoader:Pg,TorusGeometry:Qy,TorusKnotGeometry:Zy,Triangle:Ss,TriangleFanDrawMode:cy,TriangleStripDrawMode:kA,TrianglesDrawMode:uP,TubeGeometry:$y,TwoPassDoubleSide:eF,UVMapping:Wc,Uint16BufferAttribute:zA,Uint32BufferAttribute:HA,Uint8BufferAttribute:aO,Uint8ClampedBufferAttribute:lO,Uniform:rx,UniformsGroup:cH,UniformsLib:ht,UniformsUtils:hy,UnsignedByteType:Js,UnsignedInt248Type:Uc,UnsignedIntType:Ta,UnsignedShort4444Type:TA,UnsignedShort5551Type:RA,UnsignedShortType:Py,VSMShadowMap:Yo,Vector2:We,Vector3:q,Vector4:Mn,VectorKeyframeTrack:Ud,VideoTexture:q5,WebGL1Renderer:DP,WebGL3DRenderTarget:YF,WebGLArrayRenderTarget:KF,WebGLCoordinateSystem:Ra,WebGLCubeRenderTarget:By,WebGLMultipleRenderTargets:qF,WebGLRenderTarget:Ys,WebGLRenderer:bg,WebGLUtils:NP,WebGPUCoordinateSystem:ig,WireframeGeometry:i1,WrapAroundEnding:ng,ZeroCurvatureEnding:pd,ZeroFactor:NR,ZeroSlopeEnding:md,ZeroStencilOp:iF,_SRGBAFormat:uy,sRGBEncoding:Ml},Symbol.toStringTag,{value:"Module"}));var O_={exports:{}},Tc={};var rC;function RH(){return rC||(rC=1,Tc.ConcurrentRoot=1,Tc.ContinuousEventPriority=4,Tc.DefaultEventPriority=16,Tc.DiscreteEventPriority=1,Tc.IdleEventPriority=536870912,Tc.LegacyRoot=0),Tc}var iC;function PH(){return iC||(iC=1,O_.exports=RH()),O_.exports}var Gf=PH();function IH(r){let e;const t=new Set,n=(u,h)=>{const p=typeof u=="function"?u(e):u;if(p!==e){const g=e;e=h?p:Object.assign({},e,p),t.forEach(y=>y(e,g))}},i=()=>e,s=(u,h=i,p=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let g=h(e);function y(){const _=h(e);if(!p(g,_)){const A=g;u(g=_,A)}}return t.add(y),()=>t.delete(y)},l={setState:n,getState:i,subscribe:(u,h,p)=>h||p?s(u,h,p):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=r(n,i,l),l}const LH=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),sC=LH?F.useEffect:F.useLayoutEffect;function xI(r){const e=typeof r=="function"?IH(r):r,t=(n=e.getState,i=Object.is)=>{const[,s]=F.useReducer(b=>b+1,0),o=e.getState(),a=F.useRef(o),l=F.useRef(n),u=F.useRef(i),h=F.useRef(!1),p=F.useRef();p.current===void 0&&(p.current=n(o));let g,y=!1;(a.current!==o||l.current!==n||u.current!==i||h.current)&&(g=n(o),y=!i(p.current,g)),sC(()=>{y&&(p.current=g),a.current=o,l.current=n,u.current=i,h.current=!1});const _=F.useRef(o);sC(()=>{const b=()=>{try{const C=e.getState(),E=l.current(C);u.current(p.current,E)||(a.current=C,p.current=E,s())}catch{h.current=!0,s()}},w=e.subscribe(b);return e.getState()!==_.current&&b(),w},[]);const A=y?g:p.current;return F.useDebugValue(A),A};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const i=n.length<=0;return{value:n.shift(),done:i}}}},t}var U_={exports:{}},j_={exports:{}},z_={};var oC;function NH(){return oC||(oC=1,(function(r){function e(J,Q){var H=J.length;J.push(Q);e:for(;0<H;){var X=H-1>>>1,Z=J[X];if(0<i(Z,Q))J[X]=Q,J[H]=Z,H=X;else break e}}function t(J){return J.length===0?null:J[0]}function n(J){if(J.length===0)return null;var Q=J[0],H=J.pop();if(H!==Q){J[0]=H;e:for(var X=0,Z=J.length,ye=Z>>>1;X<ye;){var be=2*(X+1)-1,Le=J[be],pe=be+1,Ae=J[pe];if(0>i(Le,H))pe<Z&&0>i(Ae,Le)?(J[X]=Ae,J[pe]=H,X=pe):(J[X]=Le,J[be]=H,X=be);else if(pe<Z&&0>i(Ae,H))J[X]=Ae,J[pe]=H,X=pe;else break e}}return Q}function i(J,Q){var H=J.sortIndex-Q.sortIndex;return H!==0?H:J.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();r.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,p=null,g=3,y=!1,_=!1,A=!1,b=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(J){for(var Q=t(u);Q!==null;){if(Q.callback===null)n(u);else if(Q.startTime<=J)n(u),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=t(u)}}function R(J){if(A=!1,E(J),!_)if(t(l)!==null)_=!0,de(L);else{var Q=t(u);Q!==null&&ie(R,Q.startTime-J)}}function L(J,Q){_=!1,A&&(A=!1,w(O),O=-1),y=!0;var H=g;try{for(E(Q),p=t(l);p!==null&&(!(p.expirationTime>Q)||J&&!V());){var X=p.callback;if(typeof X=="function"){p.callback=null,g=p.priorityLevel;var Z=X(p.expirationTime<=Q);Q=r.unstable_now(),typeof Z=="function"?p.callback=Z:p===t(l)&&n(l),E(Q)}else n(l);p=t(l)}if(p!==null)var ye=!0;else{var be=t(u);be!==null&&ie(R,be.startTime-Q),ye=!1}return ye}finally{p=null,g=H,y=!1}}var D=!1,j=null,O=-1,I=5,U=-1;function V(){return!(r.unstable_now()-U<I)}function ee(){if(j!==null){var J=r.unstable_now();U=J;var Q=!0;try{Q=j(!0,J)}finally{Q?te():(D=!1,j=null)}}else D=!1}var te;if(typeof C=="function")te=function(){C(ee)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,le=ne.port2;ne.port1.onmessage=ee,te=function(){le.postMessage(null)}}else te=function(){b(ee,0)};function de(J){j=J,D||(D=!0,te())}function ie(J,Q){O=b(function(){J(r.unstable_now())},Q)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(J){J.callback=null},r.unstable_continueExecution=function(){_||y||(_=!0,de(L))},r.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<J?Math.floor(1e3/J):5},r.unstable_getCurrentPriorityLevel=function(){return g},r.unstable_getFirstCallbackNode=function(){return t(l)},r.unstable_next=function(J){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var H=g;g=Q;try{return J()}finally{g=H}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(J,Q){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var H=g;g=J;try{return Q()}finally{g=H}},r.unstable_scheduleCallback=function(J,Q,H){var X=r.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?X+H:X):H=X,J){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=H+Z,J={id:h++,callback:Q,priorityLevel:J,startTime:H,expirationTime:Z,sortIndex:-1},H>X?(J.sortIndex=H,e(u,J),t(l)===null&&J===t(u)&&(A?(w(O),O=-1):A=!0,ie(R,H-X))):(J.sortIndex=Z,e(l,J),_||y||(_=!0,de(L))),J},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(J){var Q=g;return function(){var H=g;g=Q;try{return J.apply(this,arguments)}finally{g=H}}}})(z_)),z_}var aC;function BH(){return aC||(aC=1,j_.exports=NH()),j_.exports}var H_,lC;function kH(){return lC||(lC=1,H_=function(e){var t={},n=zd(),i=BH(),s=Object.assign;function o(f){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+f,S=1;S<arguments.length;S++)m+="&args[]="+encodeURIComponent(arguments[S]);return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),_=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),R=Symbol.for("react.offscreen"),L=Symbol.iterator;function D(f){return f===null||typeof f!="object"?null:(f=L&&f[L]||f["@@iterator"],typeof f=="function"?f:null)}function j(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case h:return"Fragment";case u:return"Portal";case g:return"Profiler";case p:return"StrictMode";case b:return"Suspense";case w:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case _:return(f.displayName||"Context")+".Consumer";case y:return(f._context.displayName||"Context")+".Provider";case A:var m=f.render;return f=f.displayName,f||(f=m.displayName||m.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case C:return m=f.displayName||null,m!==null?m:j(f.type)||"Memo";case E:m=f._payload,f=f._init;try{return j(f(m))}catch{}}return null}function O(f){var m=f.type;switch(f.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=m.render,f=f.displayName||f.name||"",m.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(m);case 8:return m===p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function I(f){var m=f,S=f;if(f.alternate)for(;m.return;)m=m.return;else{f=m;do m=f,(m.flags&4098)!==0&&(S=m.return),f=m.return;while(f)}return m.tag===3?S:null}function U(f){if(I(f)!==f)throw Error(o(188))}function V(f){var m=f.alternate;if(!m){if(m=I(f),m===null)throw Error(o(188));return m!==f?null:f}for(var S=f,T=m;;){var N=S.return;if(N===null)break;var z=N.alternate;if(z===null){if(T=N.return,T!==null){S=T;continue}break}if(N.child===z.child){for(z=N.child;z;){if(z===S)return U(N),f;if(z===T)return U(N),m;z=z.sibling}throw Error(o(188))}if(S.return!==T.return)S=N,T=z;else{for(var oe=!1,xe=N.child;xe;){if(xe===S){oe=!0,S=N,T=z;break}if(xe===T){oe=!0,T=N,S=z;break}xe=xe.sibling}if(!oe){for(xe=z.child;xe;){if(xe===S){oe=!0,S=z,T=N;break}if(xe===T){oe=!0,T=z,S=N;break}xe=xe.sibling}if(!oe)throw Error(o(189))}}if(S.alternate!==T)throw Error(o(190))}if(S.tag!==3)throw Error(o(188));return S.stateNode.current===S?f:m}function ee(f){return f=V(f),f!==null?te(f):null}function te(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var m=te(f);if(m!==null)return m;f=f.sibling}return null}function ne(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){if(f.tag!==4){var m=ne(f);if(m!==null)return m}f=f.sibling}return null}var le=Array.isArray,de=e.getPublicInstance,ie=e.getRootHostContext,J=e.getChildHostContext,Q=e.prepareForCommit,H=e.resetAfterCommit,X=e.createInstance,Z=e.appendInitialChild,ye=e.finalizeInitialChildren,be=e.prepareUpdate,Le=e.shouldSetTextContent,pe=e.createTextInstance,Ae=e.scheduleTimeout,je=e.cancelTimeout,ft=e.noTimeout,St=e.isPrimaryRenderer,Xe=e.supportsMutation,ce=e.supportsPersistence,ge=e.supportsHydration,we=e.getInstanceFromNode,De=e.preparePortalMount,Fe=e.getCurrentEventPriority,Qe=e.detachDeletedInstance,st=e.supportsMicrotasks,lt=e.scheduleMicrotask,Et=e.supportsTestSelectors,Ut=e.findFiberRoot,dn=e.getBoundingRect,se=e.getTextContent,Y=e.isHiddenSubtree,Ce=e.matchAccessibilityRole,et=e.setFocusIfFocusable,Ke=e.setupIntersectionObserver,qe=e.appendChild,xt=e.appendChildToContainer,tt=e.commitTextUpdate,Be=e.commitMount,Ft=e.commitUpdate,Ct=e.insertBefore,vt=e.insertInContainerBefore,bt=e.removeChild,he=e.removeChildFromContainer,Ue=e.resetTextContent,nt=e.hideInstance,fe=e.hideTextInstance,Se=e.unhideInstance,Me=e.unhideTextInstance,Ze=e.clearContainer,pt=e.cloneInstance,en=e.createContainerChildSet,an=e.appendChildToContainerChildSet,vn=e.finalizeContainerChildren,_r=e.replaceContainerChildren,hn=e.cloneHiddenInstance,cr=e.cloneHiddenTextInstance,zn=e.canHydrateInstance,ia=e.canHydrateTextInstance,Qs=e.canHydrateSuspenseInstance,bo=e.isSuspenseInstancePending,Ti=e.isSuspenseInstanceFallback,Gi=e.registerSuspenseInstanceRetry,Er=e.getNextHydratableSibling,$t=e.getFirstHydratableChild,Ol=e.getFirstHydratableChildWithinContainer,lu=e.getFirstHydratableChildWithinSuspenseInstance,G=e.hydrateInstance,k=e.hydrateTextInstance,K=e.hydrateSuspenseInstance,re=e.getNextHydratableInstanceAfterSuspenseInstance,$=e.commitHydratedContainer,ae=e.commitHydratedSuspenseInstance,Te=e.clearSuspenseBoundary,Ne=e.clearSuspenseBoundaryFromContainer,He=e.shouldDeleteUnhydratedTailInstances,Ge=e.didNotMatchHydratedContainerTextInstance,Je=e.didNotMatchHydratedTextInstance,Pe;function _t(f){if(Pe===void 0)try{throw Error()}catch(S){var m=S.stack.trim().match(/\n( *(at )?)/);Pe=m&&m[1]||""}return`
`+Pe+f}var at=!1;function ut(f,m){if(!f||at)return"";at=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(it){var T=it}Reflect.construct(f,[],m)}else{try{m.call()}catch(it){T=it}f.call(m.prototype)}else{try{throw Error()}catch(it){T=it}f()}}catch(it){if(it&&T&&typeof it.stack=="string"){for(var N=it.stack.split(`
`),z=T.stack.split(`
`),oe=N.length-1,xe=z.length-1;1<=oe&&0<=xe&&N[oe]!==z[xe];)xe--;for(;1<=oe&&0<=xe;oe--,xe--)if(N[oe]!==z[xe]){if(oe!==1||xe!==1)do if(oe--,xe--,0>xe||N[oe]!==z[xe]){var ze=`
`+N[oe].replace(" at new "," at ");return f.displayName&&ze.includes("<anonymous>")&&(ze=ze.replace("<anonymous>",f.displayName)),ze}while(1<=oe&&0<=xe);break}}}finally{at=!1,Error.prepareStackTrace=S}return(f=f?f.displayName||f.name:"")?_t(f):""}var Lt=Object.prototype.hasOwnProperty,Ht=[],Ot=-1;function gt(f){return{current:f}}function kt(f){0>Ot||(f.current=Ht[Ot],Ht[Ot]=null,Ot--)}function Pt(f,m){Ot++,Ht[Ot]=f.current,f.current=m}var jt={},Fn=gt(jt),Yt=gt(!1),On=jt;function yn(f,m){var S=f.type.contextTypes;if(!S)return jt;var T=f.stateNode;if(T&&T.__reactInternalMemoizedUnmaskedChildContext===m)return T.__reactInternalMemoizedMaskedChildContext;var N={},z;for(z in S)N[z]=m[z];return T&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=m,f.__reactInternalMemoizedMaskedChildContext=N),N}function Ln(f){return f=f.childContextTypes,f!=null}function Xn(){kt(Yt),kt(Fn)}function Xt(f,m,S){if(Fn.current!==jt)throw Error(o(168));Pt(Fn,m),Pt(Yt,S)}function nr(f,m,S){var T=f.stateNode;if(m=m.childContextTypes,typeof T.getChildContext!="function")return S;T=T.getChildContext();for(var N in T)if(!(N in m))throw Error(o(108,O(f)||"Unknown",N));return s({},S,T)}function Nn(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||jt,On=Fn.current,Pt(Fn,f),Pt(Yt,Yt.current),!0}function mn(f,m,S){var T=f.stateNode;if(!T)throw Error(o(169));S?(f=nr(f,m,On),T.__reactInternalMemoizedMergedChildContext=f,kt(Yt),kt(Fn),Pt(Fn,f)):kt(Yt),Pt(Yt,S)}var Kn=Math.clz32?Math.clz32:Zs,Ls=Math.log,Mr=Math.LN2;function Zs(f){return f>>>=0,f===0?32:31-(Ls(f)/Mr|0)|0}var Ul=64,Tn=4194304;function jl(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function cu(f,m){var S=f.pendingLanes;if(S===0)return 0;var T=0,N=f.suspendedLanes,z=f.pingedLanes,oe=S&268435455;if(oe!==0){var xe=oe&~N;xe!==0?T=jl(xe):(z&=oe,z!==0&&(T=jl(z)))}else oe=S&~N,oe!==0?T=jl(oe):z!==0&&(T=jl(z));if(T===0)return 0;if(m!==0&&m!==T&&(m&N)===0&&(N=T&-T,z=m&-m,N>=z||N===16&&(z&4194240)!==0))return m;if((T&4)!==0&&(T|=S&16),m=f.entangledLanes,m!==0)for(f=f.entanglements,m&=T;0<m;)S=31-Kn(m),N=1<<S,T|=f[S],m&=~N;return T}function xp(f,m){switch(f){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jg(f,m){for(var S=f.suspendedLanes,T=f.pingedLanes,N=f.expirationTimes,z=f.pendingLanes;0<z;){var oe=31-Kn(z),xe=1<<oe,ze=N[oe];ze===-1?((xe&S)===0||(xe&T)!==0)&&(N[oe]=xp(xe,m)):ze<=m&&(f.expiredLanes|=xe),z&=~xe}}function Qd(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function Zd(f){for(var m=[],S=0;31>S;S++)m.push(f);return m}function Ua(f,m,S){f.pendingLanes|=m,m!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,m=31-Kn(m),f[m]=S}function $d(f,m){var S=f.pendingLanes&~m;f.pendingLanes=m,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=m,f.mutableReadLanes&=m,f.entangledLanes&=m,m=f.entanglements;var T=f.eventTimes;for(f=f.expirationTimes;0<S;){var N=31-Kn(S),z=1<<N;m[N]=0,T[N]=-1,f[N]=-1,S&=~z}}function $s(f,m){var S=f.entangledLanes|=m;for(f=f.entanglements;S;){var T=31-Kn(S),N=1<<T;N&m|f[T]&m&&(f[T]|=m),S&=~N}}var ln=0;function Ao(f){return f&=-f,1<f?4<f?(f&268435455)!==0?16:536870912:4:1}var ja=i.unstable_scheduleCallback,zl=i.unstable_cancelCallback,sa=i.unstable_shouldYield,mx=i.unstable_requestPaint,Cr=i.unstable_now,za=i.unstable_ImmediatePriority,gx=i.unstable_UserBlockingPriority,eh=i.unstable_NormalPriority,th=i.unstable_IdlePriority,uu=null,eo=null;function du(f){if(eo&&typeof eo.onCommitFiberRoot=="function")try{eo.onCommitFiberRoot(uu,f,void 0,(f.current.flags&128)===128)}catch{}}function hu(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var di=typeof Object.is=="function"?Object.is:hu,ls=null,nh=!1,_p=!1;function rh(f){ls===null?ls=[f]:ls.push(f)}function ih(f){nh=!0,rh(f)}function cs(){if(!_p&&ls!==null){_p=!0;var f=0,m=ln;try{var S=ls;for(ln=1;f<S.length;f++){var T=S[f];do T=T(!0);while(T!==null)}ls=null,nh=!1}catch(N){throw ls!==null&&(ls=ls.slice(f+1)),ja(za,cs),N}finally{ln=m,_p=!1}}return null}var zg=a.ReactCurrentBatchConfig;function Ns(f,m){if(di(f,m))return!0;if(typeof f!="object"||f===null||typeof m!="object"||m===null)return!1;var S=Object.keys(f),T=Object.keys(m);if(S.length!==T.length)return!1;for(T=0;T<S.length;T++){var N=S[T];if(!Lt.call(m,N)||!di(f[N],m[N]))return!1}return!0}function wp(f){switch(f.tag){case 5:return _t(f.type);case 16:return _t("Lazy");case 13:return _t("Suspense");case 19:return _t("SuspenseList");case 0:case 2:case 15:return f=ut(f.type,!1),f;case 11:return f=ut(f.type.render,!1),f;case 1:return f=ut(f.type,!0),f;default:return""}}function Ri(f,m){if(f&&f.defaultProps){m=s({},m),f=f.defaultProps;for(var S in f)m[S]===void 0&&(m[S]=f[S]);return m}return m}var fu=gt(null),Ha=null,So=null,sh=null;function hi(){sh=So=Ha=null}function Ga(f,m,S){St?(Pt(fu,m._currentValue),m._currentValue=S):(Pt(fu,m._currentValue2),m._currentValue2=S)}function pu(f){var m=fu.current;kt(fu),St?f._currentValue=m:f._currentValue2=m}function Va(f,m,S){for(;f!==null;){var T=f.alternate;if((f.childLanes&m)!==m?(f.childLanes|=m,T!==null&&(T.childLanes|=m)):T!==null&&(T.childLanes&m)!==m&&(T.childLanes|=m),f===S)break;f=f.return}}function Hl(f,m){Ha=f,sh=So=null,f=f.dependencies,f!==null&&f.firstContext!==null&&((f.lanes&m)!==0&&(Fr=!0),f.firstContext=null)}function Pi(f){var m=St?f._currentValue:f._currentValue2;if(sh!==f)if(f={context:f,memoizedValue:m,next:null},So===null){if(Ha===null)throw Error(o(308));So=f,Ha.dependencies={lanes:0,firstContext:f}}else So=So.next=f;return m}var us=null,ds=!1;function Gl(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bp(f,m){f=f.updateQueue,m.updateQueue===f&&(m.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function Eo(f,m){return{eventTime:f,lane:m,tag:0,payload:null,callback:null,next:null}}function oa(f,m){var S=f.updateQueue;S!==null&&(S=S.shared,sr!==null&&(f.mode&1)!==0&&(sn&2)===0?(f=S.interleaved,f===null?(m.next=m,us===null?us=[S]:us.push(S)):(m.next=f.next,f.next=m),S.interleaved=m):(f=S.pending,f===null?m.next=m:(m.next=f.next,f.next=m),S.pending=m))}function oh(f,m,S){if(m=m.updateQueue,m!==null&&(m=m.shared,(S&4194240)!==0)){var T=m.lanes;T&=f.pendingLanes,S|=T,m.lanes=S,$s(f,S)}}function ah(f,m){var S=f.updateQueue,T=f.alternate;if(T!==null&&(T=T.updateQueue,S===T)){var N=null,z=null;if(S=S.firstBaseUpdate,S!==null){do{var oe={eventTime:S.eventTime,lane:S.lane,tag:S.tag,payload:S.payload,callback:S.callback,next:null};z===null?N=z=oe:z=z.next=oe,S=S.next}while(S!==null);z===null?N=z=m:z=z.next=m}else N=z=m;S={baseState:T.baseState,firstBaseUpdate:N,lastBaseUpdate:z,shared:T.shared,effects:T.effects},f.updateQueue=S;return}f=S.lastBaseUpdate,f===null?S.firstBaseUpdate=m:f.next=m,S.lastBaseUpdate=m}function lh(f,m,S,T){var N=f.updateQueue;ds=!1;var z=N.firstBaseUpdate,oe=N.lastBaseUpdate,xe=N.shared.pending;if(xe!==null){N.shared.pending=null;var ze=xe,it=ze.next;ze.next=null,oe===null?z=it:oe.next=it,oe=ze;var Mt=f.alternate;Mt!==null&&(Mt=Mt.updateQueue,xe=Mt.lastBaseUpdate,xe!==oe&&(xe===null?Mt.firstBaseUpdate=it:xe.next=it,Mt.lastBaseUpdate=ze))}if(z!==null){var Zt=N.baseState;oe=0,Mt=it=ze=null,xe=z;do{var zt=xe.lane,Gn=xe.eventTime;if((T&zt)===zt){Mt!==null&&(Mt=Mt.next={eventTime:Gn,lane:0,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null});e:{var wt=f,Un=xe;switch(zt=m,Gn=S,Un.tag){case 1:if(wt=Un.payload,typeof wt=="function"){Zt=wt.call(Gn,Zt,zt);break e}Zt=wt;break e;case 3:wt.flags=wt.flags&-65537|128;case 0:if(wt=Un.payload,zt=typeof wt=="function"?wt.call(Gn,Zt,zt):wt,zt==null)break e;Zt=s({},Zt,zt);break e;case 2:ds=!0}}xe.callback!==null&&xe.lane!==0&&(f.flags|=64,zt=N.effects,zt===null?N.effects=[xe]:zt.push(xe))}else Gn={eventTime:Gn,lane:zt,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null},Mt===null?(it=Mt=Gn,ze=Zt):Mt=Mt.next=Gn,oe|=zt;if(xe=xe.next,xe===null){if(xe=N.shared.pending,xe===null)break;zt=xe,xe=zt.next,zt.next=null,N.lastBaseUpdate=zt,N.shared.pending=null}}while(!0);if(Mt===null&&(ze=Zt),N.baseState=ze,N.firstBaseUpdate=it,N.lastBaseUpdate=Mt,m=N.shared.interleaved,m!==null){N=m;do oe|=N.lane,N=N.next;while(N!==m)}else z===null&&(N.shared.lanes=0);ol|=oe,f.lanes=oe,f.memoizedState=Zt}}function Hg(f,m,S){if(f=m.effects,m.effects=null,f!==null)for(m=0;m<f.length;m++){var T=f[m],N=T.callback;if(N!==null){if(T.callback=null,T=S,typeof N!="function")throw Error(o(191,N));N.call(T)}}}var Gg=new n.Component().refs;function Ap(f,m,S,T){m=f.memoizedState,S=S(T,m),S=S==null?m:s({},m,S),f.memoizedState=S,f.lanes===0&&(f.updateQueue.baseState=S)}var ch={isMounted:function(f){return(f=f._reactInternals)?I(f)===f:!1},enqueueSetState:function(f,m,S){f=f._reactInternals;var T=jr(),N=oo(f),z=Eo(T,N);z.payload=m,S!=null&&(z.callback=S),oa(f,z),m=Bi(f,N,T),m!==null&&oh(m,f,N)},enqueueReplaceState:function(f,m,S){f=f._reactInternals;var T=jr(),N=oo(f),z=Eo(T,N);z.tag=1,z.payload=m,S!=null&&(z.callback=S),oa(f,z),m=Bi(f,N,T),m!==null&&oh(m,f,N)},enqueueForceUpdate:function(f,m){f=f._reactInternals;var S=jr(),T=oo(f),N=Eo(S,T);N.tag=2,m!=null&&(N.callback=m),oa(f,N),m=Bi(f,T,S),m!==null&&oh(m,f,T)}};function Sp(f,m,S,T,N,z,oe){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(T,z,oe):m.prototype&&m.prototype.isPureReactComponent?!Ns(S,T)||!Ns(N,z):!0}function Vg(f,m,S){var T=!1,N=jt,z=m.contextType;return typeof z=="object"&&z!==null?z=Pi(z):(N=Ln(m)?On:Fn.current,T=m.contextTypes,z=(T=T!=null)?yn(f,N):jt),m=new m(S,z),f.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=ch,f.stateNode=m,m._reactInternals=f,T&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=N,f.__reactInternalMemoizedMaskedChildContext=z),m}function Wg(f,m,S,T){f=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(S,T),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(S,T),m.state!==f&&ch.enqueueReplaceState(m,m.state,null)}function Ep(f,m,S,T){var N=f.stateNode;N.props=S,N.state=f.memoizedState,N.refs=Gg,Gl(f);var z=m.contextType;typeof z=="object"&&z!==null?N.context=Pi(z):(z=Ln(m)?On:Fn.current,N.context=yn(f,z)),N.state=f.memoizedState,z=m.getDerivedStateFromProps,typeof z=="function"&&(Ap(f,m,z,S),N.state=f.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(m=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),m!==N.state&&ch.enqueueReplaceState(N,N.state,null),lh(f,S,N,T),N.state=f.memoizedState),typeof N.componentDidMount=="function"&&(f.flags|=4194308)}var Vl=[],aa=0,uh=null,dh=0,hs=[],Vi=0,Wa=null,Mo=1,Co="";function Ja(f,m){Vl[aa++]=dh,Vl[aa++]=uh,uh=f,dh=m}function Jg(f,m,S){hs[Vi++]=Mo,hs[Vi++]=Co,hs[Vi++]=Wa,Wa=f;var T=Mo;f=Co;var N=32-Kn(T)-1;T&=~(1<<N),S+=1;var z=32-Kn(m)+N;if(30<z){var oe=N-N%5;z=(T&(1<<oe)-1).toString(32),T>>=oe,N-=oe,Mo=1<<32-Kn(m)+N|S<<N|T,Co=z+f}else Mo=1<<z|S<<N|T,Co=f}function Mp(f){f.return!==null&&(Ja(f,1),Jg(f,1,0))}function Cp(f){for(;f===uh;)uh=Vl[--aa],Vl[aa]=null,dh=Vl[--aa],Vl[aa]=null;for(;f===Wa;)Wa=hs[--Vi],hs[Vi]=null,Co=hs[--Vi],hs[Vi]=null,Mo=hs[--Vi],hs[Vi]=null}var fi=null,Xr=null,Qn=!1,Wl=!1,fs=null;function Tp(f,m){var S=Yi(5,null,null,0);S.elementType="DELETED",S.stateNode=m,S.return=f,m=f.deletions,m===null?(f.deletions=[S],f.flags|=16):m.push(S)}function Rp(f,m){switch(f.tag){case 5:return m=zn(m,f.type,f.pendingProps),m!==null?(f.stateNode=m,fi=f,Xr=$t(m),!0):!1;case 6:return m=ia(m,f.pendingProps),m!==null?(f.stateNode=m,fi=f,Xr=null,!0):!1;case 13:if(m=Qs(m),m!==null){var S=Wa!==null?{id:Mo,overflow:Co}:null;return f.memoizedState={dehydrated:m,treeContext:S,retryLane:1073741824},S=Yi(18,null,null,0),S.stateNode=m,S.return=f,f.child=S,fi=f,Xr=null,!0}return!1;default:return!1}}function hh(f){return(f.mode&1)!==0&&(f.flags&128)===0}function la(f){if(Qn){var m=Xr;if(m){var S=m;if(!Rp(f,m)){if(hh(f))throw Error(o(418));m=Er(S);var T=fi;m&&Rp(f,m)?Tp(T,S):(f.flags=f.flags&-4097|2,Qn=!1,fi=f)}}else{if(hh(f))throw Error(o(418));f.flags=f.flags&-4097|2,Qn=!1,fi=f}}}function Xg(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;fi=f}function mu(f){if(!ge||f!==fi)return!1;if(!Qn)return Xg(f),Qn=!0,!1;if(f.tag!==3&&(f.tag!==5||He(f.type)&&!Le(f.type,f.memoizedProps))){var m=Xr;if(m){if(hh(f)){for(f=Xr;f;)f=Er(f);throw Error(o(418))}for(;m;)Tp(f,m),m=Er(m)}}if(Xg(f),f.tag===13){if(!ge)throw Error(o(316));if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));Xr=re(f)}else Xr=fi?Er(f.stateNode):null;return!0}function Jl(){ge&&(Xr=fi=null,Wl=Qn=!1)}function fh(f){fs===null?fs=[f]:fs.push(f)}function Xl(f,m,S){if(f=S.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(S._owner){if(S=S._owner,S){if(S.tag!==1)throw Error(o(309));var T=S.stateNode}if(!T)throw Error(o(147,f));var N=T,z=""+f;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===z?m.ref:(m=function(oe){var xe=N.refs;xe===Gg&&(xe=N.refs={}),oe===null?delete xe[z]:xe[z]=oe},m._stringRef=z,m)}if(typeof f!="string")throw Error(o(284));if(!S._owner)throw Error(o(290,f))}return f}function ca(f,m){throw f=Object.prototype.toString.call(m),Error(o(31,f==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":f))}function Kl(f){var m=f._init;return m(f._payload)}function Kg(f){function m(Ie,_e){if(f){var Oe=Ie.deletions;Oe===null?(Ie.deletions=[_e],Ie.flags|=16):Oe.push(_e)}}function S(Ie,_e){if(!f)return null;for(;_e!==null;)m(Ie,_e),_e=_e.sibling;return null}function T(Ie,_e){for(Ie=new Map;_e!==null;)_e.key!==null?Ie.set(_e.key,_e):Ie.set(_e.index,_e),_e=_e.sibling;return Ie}function N(Ie,_e){return Ie=Uo(Ie,_e),Ie.index=0,Ie.sibling=null,Ie}function z(Ie,_e,Oe){return Ie.index=Oe,f?(Oe=Ie.alternate,Oe!==null?(Oe=Oe.index,Oe<_e?(Ie.flags|=2,_e):Oe):(Ie.flags|=2,_e)):(Ie.flags|=1048576,_e)}function oe(Ie){return f&&Ie.alternate===null&&(Ie.flags|=2),Ie}function xe(Ie,_e,Oe,yt){return _e===null||_e.tag!==6?(_e=Wh(Oe,Ie.mode,yt),_e.return=Ie,_e):(_e=N(_e,Oe),_e.return=Ie,_e)}function ze(Ie,_e,Oe,yt){var Nt=Oe.type;return Nt===h?Mt(Ie,_e,Oe.props.children,yt,Oe.key):_e!==null&&(_e.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===E&&Kl(Nt)===_e.type)?(yt=N(_e,Oe.props),yt.ref=Xl(Ie,_e,Oe),yt.return=Ie,yt):(yt=Ou(Oe.type,Oe.key,Oe.props,null,Ie.mode,yt),yt.ref=Xl(Ie,_e,Oe),yt.return=Ie,yt)}function it(Ie,_e,Oe,yt){return _e===null||_e.tag!==4||_e.stateNode.containerInfo!==Oe.containerInfo||_e.stateNode.implementation!==Oe.implementation?(_e=Jh(Oe,Ie.mode,yt),_e.return=Ie,_e):(_e=N(_e,Oe.children||[]),_e.return=Ie,_e)}function Mt(Ie,_e,Oe,yt,Nt){return _e===null||_e.tag!==7?(_e=wa(Oe,Ie.mode,yt,Nt),_e.return=Ie,_e):(_e=N(_e,Oe),_e.return=Ie,_e)}function Zt(Ie,_e,Oe){if(typeof _e=="string"&&_e!==""||typeof _e=="number")return _e=Wh(""+_e,Ie.mode,Oe),_e.return=Ie,_e;if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case l:return Oe=Ou(_e.type,_e.key,_e.props,null,Ie.mode,Oe),Oe.ref=Xl(Ie,null,_e),Oe.return=Ie,Oe;case u:return _e=Jh(_e,Ie.mode,Oe),_e.return=Ie,_e;case E:var yt=_e._init;return Zt(Ie,yt(_e._payload),Oe)}if(le(_e)||D(_e))return _e=wa(_e,Ie.mode,Oe,null),_e.return=Ie,_e;ca(Ie,_e)}return null}function zt(Ie,_e,Oe,yt){var Nt=_e!==null?_e.key:null;if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number")return Nt!==null?null:xe(Ie,_e,""+Oe,yt);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case l:return Oe.key===Nt?ze(Ie,_e,Oe,yt):null;case u:return Oe.key===Nt?it(Ie,_e,Oe,yt):null;case E:return Nt=Oe._init,zt(Ie,_e,Nt(Oe._payload),yt)}if(le(Oe)||D(Oe))return Nt!==null?null:Mt(Ie,_e,Oe,yt,null);ca(Ie,Oe)}return null}function Gn(Ie,_e,Oe,yt,Nt){if(typeof yt=="string"&&yt!==""||typeof yt=="number")return Ie=Ie.get(Oe)||null,xe(_e,Ie,""+yt,Nt);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case l:return Ie=Ie.get(yt.key===null?Oe:yt.key)||null,ze(_e,Ie,yt,Nt);case u:return Ie=Ie.get(yt.key===null?Oe:yt.key)||null,it(_e,Ie,yt,Nt);case E:var tn=yt._init;return Gn(Ie,_e,Oe,tn(yt._payload),Nt)}if(le(yt)||D(yt))return Ie=Ie.get(Oe)||null,Mt(_e,Ie,yt,Nt,null);ca(_e,yt)}return null}function wt(Ie,_e,Oe,yt){for(var Nt=null,tn=null,qt=_e,En=_e=0,Rr=null;qt!==null&&En<Oe.length;En++){qt.index>En?(Rr=qt,qt=null):Rr=qt.sibling;var An=zt(Ie,qt,Oe[En],yt);if(An===null){qt===null&&(qt=Rr);break}f&&qt&&An.alternate===null&&m(Ie,qt),_e=z(An,_e,En),tn===null?Nt=An:tn.sibling=An,tn=An,qt=Rr}if(En===Oe.length)return S(Ie,qt),Qn&&Ja(Ie,En),Nt;if(qt===null){for(;En<Oe.length;En++)qt=Zt(Ie,Oe[En],yt),qt!==null&&(_e=z(qt,_e,En),tn===null?Nt=qt:tn.sibling=qt,tn=qt);return Qn&&Ja(Ie,En),Nt}for(qt=T(Ie,qt);En<Oe.length;En++)Rr=Gn(qt,Ie,En,Oe[En],yt),Rr!==null&&(f&&Rr.alternate!==null&&qt.delete(Rr.key===null?En:Rr.key),_e=z(Rr,_e,En),tn===null?Nt=Rr:tn.sibling=Rr,tn=Rr);return f&&qt.forEach(function(ao){return m(Ie,ao)}),Qn&&Ja(Ie,En),Nt}function Un(Ie,_e,Oe,yt){var Nt=D(Oe);if(typeof Nt!="function")throw Error(o(150));if(Oe=Nt.call(Oe),Oe==null)throw Error(o(151));for(var tn=Nt=null,qt=_e,En=_e=0,Rr=null,An=Oe.next();qt!==null&&!An.done;En++,An=Oe.next()){qt.index>En?(Rr=qt,qt=null):Rr=qt.sibling;var ao=zt(Ie,qt,An.value,yt);if(ao===null){qt===null&&(qt=Rr);break}f&&qt&&ao.alternate===null&&m(Ie,qt),_e=z(ao,_e,En),tn===null?Nt=ao:tn.sibling=ao,tn=ao,qt=Rr}if(An.done)return S(Ie,qt),Qn&&Ja(Ie,En),Nt;if(qt===null){for(;!An.done;En++,An=Oe.next())An=Zt(Ie,An.value,yt),An!==null&&(_e=z(An,_e,En),tn===null?Nt=An:tn.sibling=An,tn=An);return Qn&&Ja(Ie,En),Nt}for(qt=T(Ie,qt);!An.done;En++,An=Oe.next())An=Gn(qt,Ie,En,An.value,yt),An!==null&&(f&&An.alternate!==null&&qt.delete(An.key===null?En:An.key),_e=z(An,_e,En),tn===null?Nt=An:tn.sibling=An,tn=An);return f&&qt.forEach(function(f0){return m(Ie,f0)}),Qn&&Ja(Ie,En),Nt}function qi(Ie,_e,Oe,yt){if(typeof Oe=="object"&&Oe!==null&&Oe.type===h&&Oe.key===null&&(Oe=Oe.props.children),typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case l:e:{for(var Nt=Oe.key,tn=_e;tn!==null;){if(tn.key===Nt){if(Nt=Oe.type,Nt===h){if(tn.tag===7){S(Ie,tn.sibling),_e=N(tn,Oe.props.children),_e.return=Ie,Ie=_e;break e}}else if(tn.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===E&&Kl(Nt)===tn.type){S(Ie,tn.sibling),_e=N(tn,Oe.props),_e.ref=Xl(Ie,tn,Oe),_e.return=Ie,Ie=_e;break e}S(Ie,tn);break}else m(Ie,tn);tn=tn.sibling}Oe.type===h?(_e=wa(Oe.props.children,Ie.mode,yt,Oe.key),_e.return=Ie,Ie=_e):(yt=Ou(Oe.type,Oe.key,Oe.props,null,Ie.mode,yt),yt.ref=Xl(Ie,_e,Oe),yt.return=Ie,Ie=yt)}return oe(Ie);case u:e:{for(tn=Oe.key;_e!==null;){if(_e.key===tn)if(_e.tag===4&&_e.stateNode.containerInfo===Oe.containerInfo&&_e.stateNode.implementation===Oe.implementation){S(Ie,_e.sibling),_e=N(_e,Oe.children||[]),_e.return=Ie,Ie=_e;break e}else{S(Ie,_e);break}else m(Ie,_e);_e=_e.sibling}_e=Jh(Oe,Ie.mode,yt),_e.return=Ie,Ie=_e}return oe(Ie);case E:return tn=Oe._init,qi(Ie,_e,tn(Oe._payload),yt)}if(le(Oe))return wt(Ie,_e,Oe,yt);if(D(Oe))return Un(Ie,_e,Oe,yt);ca(Ie,Oe)}return typeof Oe=="string"&&Oe!==""||typeof Oe=="number"?(Oe=""+Oe,_e!==null&&_e.tag===6?(S(Ie,_e.sibling),_e=N(_e,Oe),_e.return=Ie,Ie=_e):(S(Ie,_e),_e=Wh(Oe,Ie.mode,yt),_e.return=Ie,Ie=_e),oe(Ie)):S(Ie,_e)}return qi}var To=Kg(!0),Yg=Kg(!1),Yl={},Ii=gt(Yl),Xa=gt(Yl),Ka=gt(Yl);function Bs(f){if(f===Yl)throw Error(o(174));return f}function ph(f,m){Pt(Ka,m),Pt(Xa,f),Pt(Ii,Yl),f=ie(m),kt(Ii),Pt(Ii,f)}function ql(){kt(Ii),kt(Xa),kt(Ka)}function qg(f){var m=Bs(Ka.current),S=Bs(Ii.current);m=J(S,f.type,m),S!==m&&(Pt(Xa,f),Pt(Ii,m))}function Pp(f){Xa.current===f&&(kt(Ii),kt(Xa))}var rr=gt(0);function mh(f){for(var m=f;m!==null;){if(m.tag===13){var S=m.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||bo(S)||Ti(S)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===f)break;for(;m.sibling===null;){if(m.return===null||m.return===f)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var Wi=[];function Ya(){for(var f=0;f<Wi.length;f++){var m=Wi[f];St?m._workInProgressVersionPrimary=null:m._workInProgressVersionSecondary=null}Wi.length=0}var gu=a.ReactCurrentDispatcher,Ji=a.ReactCurrentBatchConfig,qa=0,ir=null,Br=null,kr=null,gh=!1,to=!1,Qa=0,vu=0;function Dr(){throw Error(o(321))}function vh(f,m){if(m===null)return!1;for(var S=0;S<m.length&&S<f.length;S++)if(!di(f[S],m[S]))return!1;return!0}function Ql(f,m,S,T,N,z){if(qa=z,ir=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,gu.current=f===null||f.memoizedState===null?Dp:Fp,f=S(T,N),to){z=0;do{if(to=!1,Qa=0,25<=z)throw Error(o(301));z+=1,kr=Br=null,m.updateQueue=null,gu.current=Op,f=S(T,N)}while(to)}if(gu.current=tc,m=Br!==null&&Br.next!==null,qa=0,kr=Br=ir=null,gh=!1,m)throw Error(o(300));return f}function ua(){var f=Qa!==0;return Qa=0,f}function ks(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kr===null?ir.memoizedState=kr=f:kr=kr.next=f,kr}function Ds(){if(Br===null){var f=ir.alternate;f=f!==null?f.memoizedState:null}else f=Br.next;var m=kr===null?ir.memoizedState:kr.next;if(m!==null)kr=m,Br=f;else{if(f===null)throw Error(o(310));Br=f,f={memoizedState:Br.memoizedState,baseState:Br.baseState,baseQueue:Br.baseQueue,queue:Br.queue,next:null},kr===null?ir.memoizedState=kr=f:kr=kr.next=f}return kr}function no(f,m){return typeof m=="function"?m(f):m}function yu(f){var m=Ds(),S=m.queue;if(S===null)throw Error(o(311));S.lastRenderedReducer=f;var T=Br,N=T.baseQueue,z=S.pending;if(z!==null){if(N!==null){var oe=N.next;N.next=z.next,z.next=oe}T.baseQueue=N=z,S.pending=null}if(N!==null){z=N.next,T=T.baseState;var xe=oe=null,ze=null,it=z;do{var Mt=it.lane;if((qa&Mt)===Mt)ze!==null&&(ze=ze.next={lane:0,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null}),T=it.hasEagerState?it.eagerState:f(T,it.action);else{var Zt={lane:Mt,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null};ze===null?(xe=ze=Zt,oe=T):ze=ze.next=Zt,ir.lanes|=Mt,ol|=Mt}it=it.next}while(it!==null&&it!==z);ze===null?oe=T:ze.next=xe,di(T,m.memoizedState)||(Fr=!0),m.memoizedState=T,m.baseState=oe,m.baseQueue=ze,S.lastRenderedState=T}if(f=S.interleaved,f!==null){N=f;do z=N.lane,ir.lanes|=z,ol|=z,N=N.next;while(N!==f)}else N===null&&(S.lanes=0);return[m.memoizedState,S.dispatch]}function xu(f){var m=Ds(),S=m.queue;if(S===null)throw Error(o(311));S.lastRenderedReducer=f;var T=S.dispatch,N=S.pending,z=m.memoizedState;if(N!==null){S.pending=null;var oe=N=N.next;do z=f(z,oe.action),oe=oe.next;while(oe!==N);di(z,m.memoizedState)||(Fr=!0),m.memoizedState=z,m.baseQueue===null&&(m.baseState=z),S.lastRenderedState=z}return[z,T]}function Ip(){}function Lp(f,m){var S=ir,T=Ds(),N=m(),z=!di(T.memoizedState,N);if(z&&(T.memoizedState=N,Fr=!0),T=T.queue,Zl(Ro.bind(null,S,T,f),[f]),T.getSnapshot!==m||z||kr!==null&&kr.memoizedState.tag&1){if(S.flags|=2048,wu(9,Bp.bind(null,S,T,N,m),void 0,null),sr===null)throw Error(o(349));(qa&30)!==0||Np(S,m,N)}return N}function Np(f,m,S){f.flags|=16384,f={getSnapshot:m,value:S},m=ir.updateQueue,m===null?(m={lastEffect:null,stores:null},ir.updateQueue=m,m.stores=[f]):(S=m.stores,S===null?m.stores=[f]:S.push(f))}function Bp(f,m,S,T){m.value=S,m.getSnapshot=T,yh(m)&&Bi(f,1,-1)}function Ro(f,m,S){return S(function(){yh(m)&&Bi(f,1,-1)})}function yh(f){var m=f.getSnapshot;f=f.value;try{var S=m();return!di(f,S)}catch{return!0}}function _u(f){var m=ks();return typeof f=="function"&&(f=f()),m.memoizedState=m.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:no,lastRenderedState:f},m.queue=f,f=f.dispatch=vx.bind(null,ir,f),[m.memoizedState,f]}function wu(f,m,S,T){return f={tag:f,create:m,destroy:S,deps:T,next:null},m=ir.updateQueue,m===null?(m={lastEffect:null,stores:null},ir.updateQueue=m,m.lastEffect=f.next=f):(S=m.lastEffect,S===null?m.lastEffect=f.next=f:(T=S.next,S.next=f,f.next=T,m.lastEffect=f)),f}function Qg(){return Ds().memoizedState}function da(f,m,S,T){var N=ks();ir.flags|=f,N.memoizedState=wu(1|m,S,void 0,T===void 0?null:T)}function xh(f,m,S,T){var N=Ds();T=T===void 0?null:T;var z=void 0;if(Br!==null){var oe=Br.memoizedState;if(z=oe.destroy,T!==null&&vh(T,oe.deps)){N.memoizedState=wu(m,S,z,T);return}}ir.flags|=f,N.memoizedState=wu(1|m,S,z,T)}function _h(f,m){return da(8390656,8,f,m)}function Zl(f,m){return xh(2048,8,f,m)}function Vn(f,m){return xh(4,2,f,m)}function wh(f,m){return xh(4,4,f,m)}function bu(f,m){if(typeof m=="function")return f=f(),m(f),function(){m(null)};if(m!=null)return f=f(),m.current=f,function(){m.current=null}}function $l(f,m,S){return S=S!=null?S.concat([f]):null,xh(4,4,bu.bind(null,m,f),S)}function bh(){}function Ah(f,m){var S=Ds();m=m===void 0?null:m;var T=S.memoizedState;return T!==null&&m!==null&&vh(m,T[1])?T[0]:(S.memoizedState=[f,m],f)}function ec(f,m){var S=Ds();m=m===void 0?null:m;var T=S.memoizedState;return T!==null&&m!==null&&vh(m,T[1])?T[0]:(f=f(),S.memoizedState=[f,m],f)}function Sh(f,m){var S=ln;ln=S!==0&&4>S?S:4,f(!0);var T=Ji.transition;Ji.transition={};try{f(!1),m()}finally{ln=S,Ji.transition=T}}function Za(){return Ds().memoizedState}function Zg(f,m,S){var T=oo(f);S={lane:T,action:S,hasEagerState:!1,eagerState:null,next:null},$g(f)?kp(m,S):(Au(f,m,S),S=jr(),f=Bi(f,T,S),f!==null&&Su(f,m,T))}function vx(f,m,S){var T=oo(f),N={lane:T,action:S,hasEagerState:!1,eagerState:null,next:null};if($g(f))kp(m,N);else{Au(f,m,N);var z=f.alternate;if(f.lanes===0&&(z===null||z.lanes===0)&&(z=m.lastRenderedReducer,z!==null))try{var oe=m.lastRenderedState,xe=z(oe,S);if(N.hasEagerState=!0,N.eagerState=xe,di(xe,oe))return}catch{}finally{}S=jr(),f=Bi(f,T,S),f!==null&&Su(f,m,T)}}function $g(f){var m=f.alternate;return f===ir||m!==null&&m===ir}function kp(f,m){to=gh=!0;var S=f.pending;S===null?m.next=m:(m.next=S.next,S.next=m),f.pending=m}function Au(f,m,S){sr!==null&&(f.mode&1)!==0&&(sn&2)===0?(f=m.interleaved,f===null?(S.next=S,us===null?us=[m]:us.push(m)):(S.next=f.next,f.next=S),m.interleaved=S):(f=m.pending,f===null?S.next=S:(S.next=f.next,f.next=S),m.pending=S)}function Su(f,m,S){if((S&4194240)!==0){var T=m.lanes;T&=f.pendingLanes,S|=T,m.lanes=S,$s(f,S)}}var tc={readContext:Pi,useCallback:Dr,useContext:Dr,useEffect:Dr,useImperativeHandle:Dr,useInsertionEffect:Dr,useLayoutEffect:Dr,useMemo:Dr,useReducer:Dr,useRef:Dr,useState:Dr,useDebugValue:Dr,useDeferredValue:Dr,useTransition:Dr,useMutableSource:Dr,useSyncExternalStore:Dr,useId:Dr,unstable_isNewReconciler:!1},Dp={readContext:Pi,useCallback:function(f,m){return ks().memoizedState=[f,m===void 0?null:m],f},useContext:Pi,useEffect:_h,useImperativeHandle:function(f,m,S){return S=S!=null?S.concat([f]):null,da(4194308,4,bu.bind(null,m,f),S)},useLayoutEffect:function(f,m){return da(4194308,4,f,m)},useInsertionEffect:function(f,m){return da(4,2,f,m)},useMemo:function(f,m){var S=ks();return m=m===void 0?null:m,f=f(),S.memoizedState=[f,m],f},useReducer:function(f,m,S){var T=ks();return m=S!==void 0?S(m):m,T.memoizedState=T.baseState=m,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:m},T.queue=f,f=f.dispatch=Zg.bind(null,ir,f),[T.memoizedState,f]},useRef:function(f){var m=ks();return f={current:f},m.memoizedState=f},useState:_u,useDebugValue:bh,useDeferredValue:function(f){var m=_u(f),S=m[0],T=m[1];return _h(function(){var N=Ji.transition;Ji.transition={};try{T(f)}finally{Ji.transition=N}},[f]),S},useTransition:function(){var f=_u(!1),m=f[0];return f=Sh.bind(null,f[1]),ks().memoizedState=f,[m,f]},useMutableSource:function(){},useSyncExternalStore:function(f,m,S){var T=ir,N=ks();if(Qn){if(S===void 0)throw Error(o(407));S=S()}else{if(S=m(),sr===null)throw Error(o(349));(qa&30)!==0||Np(T,m,S)}N.memoizedState=S;var z={value:S,getSnapshot:m};return N.queue=z,_h(Ro.bind(null,T,z,f),[f]),T.flags|=2048,wu(9,Bp.bind(null,T,z,S,m),void 0,null),S},useId:function(){var f=ks(),m=sr.identifierPrefix;if(Qn){var S=Co,T=Mo;S=(T&~(1<<32-Kn(T)-1)).toString(32)+S,m=":"+m+"R"+S,S=Qa++,0<S&&(m+="H"+S.toString(32)),m+=":"}else S=vu++,m=":"+m+"r"+S.toString(32)+":";return f.memoizedState=m},unstable_isNewReconciler:!1},Fp={readContext:Pi,useCallback:Ah,useContext:Pi,useEffect:Zl,useImperativeHandle:$l,useInsertionEffect:Vn,useLayoutEffect:wh,useMemo:ec,useReducer:yu,useRef:Qg,useState:function(){return yu(no)},useDebugValue:bh,useDeferredValue:function(f){var m=yu(no),S=m[0],T=m[1];return Zl(function(){var N=Ji.transition;Ji.transition={};try{T(f)}finally{Ji.transition=N}},[f]),S},useTransition:function(){var f=yu(no)[0],m=Ds().memoizedState;return[f,m]},useMutableSource:Ip,useSyncExternalStore:Lp,useId:Za,unstable_isNewReconciler:!1},Op={readContext:Pi,useCallback:Ah,useContext:Pi,useEffect:Zl,useImperativeHandle:$l,useInsertionEffect:Vn,useLayoutEffect:wh,useMemo:ec,useReducer:xu,useRef:Qg,useState:function(){return xu(no)},useDebugValue:bh,useDeferredValue:function(f){var m=xu(no),S=m[0],T=m[1];return Zl(function(){var N=Ji.transition;Ji.transition={};try{T(f)}finally{Ji.transition=N}},[f]),S},useTransition:function(){var f=xu(no)[0],m=Ds().memoizedState;return[f,m]},useMutableSource:Ip,useSyncExternalStore:Lp,useId:Za,unstable_isNewReconciler:!1};function Up(f,m){try{var S="",T=m;do S+=wp(T),T=T.return;while(T);var N=S}catch(z){N=`
Error generating stack: `+z.message+`
`+z.stack}return{value:f,source:m,stack:N}}function Eh(f,m){try{console.error(m.value)}catch(S){setTimeout(function(){throw S})}}var yx=typeof WeakMap=="function"?WeakMap:Map;function e0(f,m,S){S=Eo(-1,S),S.tag=3,S.payload={element:null};var T=m.value;return S.callback=function(){ga||(ga=!0,vs=T),Eh(f,m)},S}function Mh(f,m,S){S=Eo(-1,S),S.tag=3;var T=f.type.getDerivedStateFromError;if(typeof T=="function"){var N=m.value;S.payload=function(){return T(N)},S.callback=function(){Eh(f,m)}}var z=f.stateNode;return z!==null&&typeof z.componentDidCatch=="function"&&(S.callback=function(){Eh(f,m),typeof T!="function"&&(ys===null?ys=new Set([this]):ys.add(this));var oe=m.stack;this.componentDidCatch(m.value,{componentStack:oe!==null?oe:""})}),S}function Po(f,m,S){var T=f.pingCache;if(T===null){T=f.pingCache=new yx;var N=new Set;T.set(m,N)}else N=T.get(m),N===void 0&&(N=new Set,T.set(m,N));N.has(S)||(N.add(S),f=i0.bind(null,f,m,S),m.then(f,f))}function jp(f){do{var m;if((m=f.tag===13)&&(m=f.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return f;f=f.return}while(f!==null);return null}function $a(f,m,S,T,N){return(f.mode&1)===0?(f===m?f.flags|=65536:(f.flags|=128,S.flags|=131072,S.flags&=-52805,S.tag===1&&(S.alternate===null?S.tag=17:(m=Eo(-1,1),m.tag=2,oa(S,m))),S.lanes|=1),f):(f.flags|=65536,f.lanes=N,f)}function Tr(f){f.flags|=4}function nc(f,m){if(f!==null&&f.child===m.child)return!0;if((m.flags&16)!==0)return!1;for(f=m.child;f!==null;){if((f.flags&12854)!==0||(f.subtreeFlags&12854)!==0)return!1;f=f.sibling}return!0}var Xi,el,Ch,Th;if(Xe)Xi=function(f,m){for(var S=m.child;S!==null;){if(S.tag===5||S.tag===6)Z(f,S.stateNode);else if(S.tag!==4&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===m)break;for(;S.sibling===null;){if(S.return===null||S.return===m)return;S=S.return}S.sibling.return=S.return,S=S.sibling}},el=function(){},Ch=function(f,m,S,T,N){if(f=f.memoizedProps,f!==T){var z=m.stateNode,oe=Bs(Ii.current);S=be(z,S,f,T,N,oe),(m.updateQueue=S)&&Tr(m)}},Th=function(f,m,S,T){S!==T&&Tr(m)};else if(ce){Xi=function(f,m,S,T){for(var N=m.child;N!==null;){if(N.tag===5){var z=N.stateNode;S&&T&&(z=hn(z,N.type,N.memoizedProps,N)),Z(f,z)}else if(N.tag===6)z=N.stateNode,S&&T&&(z=cr(z,N.memoizedProps,N)),Z(f,z);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)z=N.child,z!==null&&(z.return=N),Xi(f,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===m)break;for(;N.sibling===null;){if(N.return===null||N.return===m)return;N=N.return}N.sibling.return=N.return,N=N.sibling}};var ha=function(f,m,S,T){for(var N=m.child;N!==null;){if(N.tag===5){var z=N.stateNode;S&&T&&(z=hn(z,N.type,N.memoizedProps,N)),an(f,z)}else if(N.tag===6)z=N.stateNode,S&&T&&(z=cr(z,N.memoizedProps,N)),an(f,z);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)z=N.child,z!==null&&(z.return=N),ha(f,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===m)break;for(;N.sibling===null;){if(N.return===null||N.return===m)return;N=N.return}N.sibling.return=N.return,N=N.sibling}};el=function(f,m){var S=m.stateNode;if(!nc(f,m)){f=S.containerInfo;var T=en(f);ha(T,m,!1,!1),S.pendingChildren=T,Tr(m),vn(f,T)}},Ch=function(f,m,S,T,N){var z=f.stateNode,oe=f.memoizedProps;if((f=nc(f,m))&&oe===T)m.stateNode=z;else{var xe=m.stateNode,ze=Bs(Ii.current),it=null;oe!==T&&(it=be(xe,S,oe,T,N,ze)),f&&it===null?m.stateNode=z:(z=pt(z,it,S,oe,T,m,f,xe),ye(z,S,T,N,ze)&&Tr(m),m.stateNode=z,f?Tr(m):Xi(z,m,!1,!1))}},Th=function(f,m,S,T){S!==T?(f=Bs(Ka.current),S=Bs(Ii.current),m.stateNode=pe(T,f,S,m),Tr(m)):m.stateNode=f.stateNode}}else el=function(){},Ch=function(){},Th=function(){};function Io(f,m){if(!Qn)switch(f.tailMode){case"hidden":m=f.tail;for(var S=null;m!==null;)m.alternate!==null&&(S=m),m=m.sibling;S===null?f.tail=null:S.sibling=null;break;case"collapsed":S=f.tail;for(var T=null;S!==null;)S.alternate!==null&&(T=S),S=S.sibling;T===null?m||f.tail===null?f.tail=null:f.tail.sibling=null:T.sibling=null}}function fr(f){var m=f.alternate!==null&&f.alternate.child===f.child,S=0,T=0;if(m)for(var N=f.child;N!==null;)S|=N.lanes|N.childLanes,T|=N.subtreeFlags&14680064,T|=N.flags&14680064,N.return=f,N=N.sibling;else for(N=f.child;N!==null;)S|=N.lanes|N.childLanes,T|=N.subtreeFlags,T|=N.flags,N.return=f,N=N.sibling;return f.subtreeFlags|=T,f.childLanes=S,m}function Rh(f,m,S){var T=m.pendingProps;switch(Cp(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fr(m),null;case 1:return Ln(m.type)&&Xn(),fr(m),null;case 3:return T=m.stateNode,ql(),kt(Yt),kt(Fn),Ya(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(f===null||f.child===null)&&(mu(m)?Tr(m):f===null||f.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,fs!==null&&(mr(fs),fs=null))),el(f,m),fr(m),null;case 5:Pp(m),S=Bs(Ka.current);var N=m.type;if(f!==null&&m.stateNode!=null)Ch(f,m,N,T,S),f.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!T){if(m.stateNode===null)throw Error(o(166));return fr(m),null}if(f=Bs(Ii.current),mu(m)){if(!ge)throw Error(o(175));f=G(m.stateNode,m.type,m.memoizedProps,S,f,m,!Wl),m.updateQueue=f,f!==null&&Tr(m)}else{var z=X(N,T,S,f,m);Xi(z,m,!1,!1),m.stateNode=z,ye(z,N,T,S,f)&&Tr(m)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return fr(m),null;case 6:if(f&&m.stateNode!=null)Th(f,m,f.memoizedProps,T);else{if(typeof T!="string"&&m.stateNode===null)throw Error(o(166));if(f=Bs(Ka.current),S=Bs(Ii.current),mu(m)){if(!ge)throw Error(o(176));if(f=m.stateNode,T=m.memoizedProps,(S=k(f,T,m,!Wl))&&(N=fi,N!==null))switch(z=(N.mode&1)!==0,N.tag){case 3:Ge(N.stateNode.containerInfo,f,T,z);break;case 5:Je(N.type,N.memoizedProps,N.stateNode,f,T,z)}S&&Tr(m)}else m.stateNode=pe(T,f,S,m)}return fr(m),null;case 13:if(kt(rr),T=m.memoizedState,Qn&&Xr!==null&&(m.mode&1)!==0&&(m.flags&128)===0){for(f=Xr;f;)f=Er(f);return Jl(),m.flags|=98560,m}if(T!==null&&T.dehydrated!==null){if(T=mu(m),f===null){if(!T)throw Error(o(318));if(!ge)throw Error(o(344));if(f=m.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));K(f,m)}else Jl(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;return fr(m),null}return fs!==null&&(mr(fs),fs=null),(m.flags&128)!==0?(m.lanes=S,m):(T=T!==null,S=!1,f===null?mu(m):S=f.memoizedState!==null,T&&!S&&(m.child.flags|=8192,(m.mode&1)!==0&&(f===null||(rr.current&1)!==0?wr===0&&(wr=3):Nu())),m.updateQueue!==null&&(m.flags|=4),fr(m),null);case 4:return ql(),el(f,m),f===null&&De(m.stateNode.containerInfo),fr(m),null;case 10:return pu(m.type._context),fr(m),null;case 17:return Ln(m.type)&&Xn(),fr(m),null;case 19:if(kt(rr),N=m.memoizedState,N===null)return fr(m),null;if(T=(m.flags&128)!==0,z=N.rendering,z===null)if(T)Io(N,!1);else{if(wr!==0||f!==null&&(f.flags&128)!==0)for(f=m.child;f!==null;){if(z=mh(f),z!==null){for(m.flags|=128,Io(N,!1),f=z.updateQueue,f!==null&&(m.updateQueue=f,m.flags|=4),m.subtreeFlags=0,f=S,T=m.child;T!==null;)S=T,N=f,S.flags&=14680066,z=S.alternate,z===null?(S.childLanes=0,S.lanes=N,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=z.childLanes,S.lanes=z.lanes,S.child=z.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=z.memoizedProps,S.memoizedState=z.memoizedState,S.updateQueue=z.updateQueue,S.type=z.type,N=z.dependencies,S.dependencies=N===null?null:{lanes:N.lanes,firstContext:N.firstContext}),T=T.sibling;return Pt(rr,rr.current&1|2),m.child}f=f.sibling}N.tail!==null&&Cr()>ma&&(m.flags|=128,T=!0,Io(N,!1),m.lanes=4194304)}else{if(!T)if(f=mh(z),f!==null){if(m.flags|=128,T=!0,f=f.updateQueue,f!==null&&(m.updateQueue=f,m.flags|=4),Io(N,!0),N.tail===null&&N.tailMode==="hidden"&&!z.alternate&&!Qn)return fr(m),null}else 2*Cr()-N.renderingStartTime>ma&&S!==1073741824&&(m.flags|=128,T=!0,Io(N,!1),m.lanes=4194304);N.isBackwards?(z.sibling=m.child,m.child=z):(f=N.last,f!==null?f.sibling=z:m.child=z,N.last=z)}return N.tail!==null?(m=N.tail,N.rendering=m,N.tail=m.sibling,N.renderingStartTime=Cr(),m.sibling=null,f=rr.current,Pt(rr,T?f&1|2:f&1),m):(fr(m),null);case 22:case 23:return Yp(),T=m.memoizedState!==null,f!==null&&f.memoizedState!==null!==T&&(m.flags|=8192),T&&(m.mode&1)!==0?(yi&1073741824)!==0&&(fr(m),Xe&&m.subtreeFlags&6&&(m.flags|=8192)):fr(m),null;case 24:return null;case 25:return null}throw Error(o(156,m.tag))}var zp=a.ReactCurrentOwner,Fr=!1;function ur(f,m,S,T){m.child=f===null?Yg(m,null,S,T):To(m,f.child,S,T)}function Wn(f,m,S,T,N){S=S.render;var z=m.ref;return Hl(m,N),T=Ql(f,m,S,T,z,N),S=ua(),f!==null&&!Fr?(m.updateQueue=f.updateQueue,m.flags&=-2053,f.lanes&=~N,Li(f,m,N)):(Qn&&S&&Mp(m),m.flags|=1,ur(f,m,T,N),m.child)}function Hn(f,m,S,T,N){if(f===null){var z=S.type;return typeof z=="function"&&!Fu(z)&&z.defaultProps===void 0&&S.compare===null&&S.defaultProps===void 0?(m.tag=15,m.type=z,Lo(f,m,z,T,N)):(f=Ou(S.type,null,T,m,m.mode,N),f.ref=m.ref,f.return=m,m.child=f)}if(z=f.child,(f.lanes&N)===0){var oe=z.memoizedProps;if(S=S.compare,S=S!==null?S:Ns,S(oe,T)&&f.ref===m.ref)return Li(f,m,N)}return m.flags|=1,f=Uo(z,T),f.ref=m.ref,f.return=m,m.child=f}function Lo(f,m,S,T,N){if(f!==null&&Ns(f.memoizedProps,T)&&f.ref===m.ref)if(Fr=!1,(f.lanes&N)!==0)(f.flags&131072)!==0&&(Fr=!0);else return m.lanes=f.lanes,Li(f,m,N);return No(f,m,S,T,N)}function Kr(f,m,S){var T=m.pendingProps,N=T.children,z=f!==null?f.memoizedState:null;if(T.mode==="hidden")if((m.mode&1)===0)m.memoizedState={baseLanes:0,cachePool:null},Pt(Oo,yi),yi|=S;else if((S&1073741824)!==0)m.memoizedState={baseLanes:0,cachePool:null},T=z!==null?z.baseLanes:S,Pt(Oo,yi),yi|=T;else return f=z!==null?z.baseLanes|S:S,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:f,cachePool:null},m.updateQueue=null,Pt(Oo,yi),yi|=f,null;else z!==null?(T=z.baseLanes|S,m.memoizedState=null):T=S,Pt(Oo,yi),yi|=T;return ur(f,m,N,S),m.child}function pi(f,m){var S=m.ref;(f===null&&S!==null||f!==null&&f.ref!==S)&&(m.flags|=512,m.flags|=2097152)}function No(f,m,S,T,N){var z=Ln(S)?On:Fn.current;return z=yn(m,z),Hl(m,N),S=Ql(f,m,S,T,z,N),T=ua(),f!==null&&!Fr?(m.updateQueue=f.updateQueue,m.flags&=-2053,f.lanes&=~N,Li(f,m,N)):(Qn&&T&&Mp(m),m.flags|=1,ur(f,m,S,N),m.child)}function tl(f,m,S,T,N){if(Ln(S)){var z=!0;Nn(m)}else z=!1;if(Hl(m,N),m.stateNode===null)f!==null&&(f.alternate=null,m.alternate=null,m.flags|=2),Vg(m,S,T),Ep(m,S,T,N),T=!0;else if(f===null){var oe=m.stateNode,xe=m.memoizedProps;oe.props=xe;var ze=oe.context,it=S.contextType;typeof it=="object"&&it!==null?it=Pi(it):(it=Ln(S)?On:Fn.current,it=yn(m,it));var Mt=S.getDerivedStateFromProps,Zt=typeof Mt=="function"||typeof oe.getSnapshotBeforeUpdate=="function";Zt||typeof oe.UNSAFE_componentWillReceiveProps!="function"&&typeof oe.componentWillReceiveProps!="function"||(xe!==T||ze!==it)&&Wg(m,oe,T,it),ds=!1;var zt=m.memoizedState;oe.state=zt,lh(m,T,oe,N),ze=m.memoizedState,xe!==T||zt!==ze||Yt.current||ds?(typeof Mt=="function"&&(Ap(m,S,Mt,T),ze=m.memoizedState),(xe=ds||Sp(m,S,xe,T,zt,ze,it))?(Zt||typeof oe.UNSAFE_componentWillMount!="function"&&typeof oe.componentWillMount!="function"||(typeof oe.componentWillMount=="function"&&oe.componentWillMount(),typeof oe.UNSAFE_componentWillMount=="function"&&oe.UNSAFE_componentWillMount()),typeof oe.componentDidMount=="function"&&(m.flags|=4194308)):(typeof oe.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=T,m.memoizedState=ze),oe.props=T,oe.state=ze,oe.context=it,T=xe):(typeof oe.componentDidMount=="function"&&(m.flags|=4194308),T=!1)}else{oe=m.stateNode,bp(f,m),xe=m.memoizedProps,it=m.type===m.elementType?xe:Ri(m.type,xe),oe.props=it,Zt=m.pendingProps,zt=oe.context,ze=S.contextType,typeof ze=="object"&&ze!==null?ze=Pi(ze):(ze=Ln(S)?On:Fn.current,ze=yn(m,ze));var Gn=S.getDerivedStateFromProps;(Mt=typeof Gn=="function"||typeof oe.getSnapshotBeforeUpdate=="function")||typeof oe.UNSAFE_componentWillReceiveProps!="function"&&typeof oe.componentWillReceiveProps!="function"||(xe!==Zt||zt!==ze)&&Wg(m,oe,T,ze),ds=!1,zt=m.memoizedState,oe.state=zt,lh(m,T,oe,N);var wt=m.memoizedState;xe!==Zt||zt!==wt||Yt.current||ds?(typeof Gn=="function"&&(Ap(m,S,Gn,T),wt=m.memoizedState),(it=ds||Sp(m,S,it,T,zt,wt,ze)||!1)?(Mt||typeof oe.UNSAFE_componentWillUpdate!="function"&&typeof oe.componentWillUpdate!="function"||(typeof oe.componentWillUpdate=="function"&&oe.componentWillUpdate(T,wt,ze),typeof oe.UNSAFE_componentWillUpdate=="function"&&oe.UNSAFE_componentWillUpdate(T,wt,ze)),typeof oe.componentDidUpdate=="function"&&(m.flags|=4),typeof oe.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof oe.componentDidUpdate!="function"||xe===f.memoizedProps&&zt===f.memoizedState||(m.flags|=4),typeof oe.getSnapshotBeforeUpdate!="function"||xe===f.memoizedProps&&zt===f.memoizedState||(m.flags|=1024),m.memoizedProps=T,m.memoizedState=wt),oe.props=T,oe.state=wt,oe.context=ze,T=it):(typeof oe.componentDidUpdate!="function"||xe===f.memoizedProps&&zt===f.memoizedState||(m.flags|=4),typeof oe.getSnapshotBeforeUpdate!="function"||xe===f.memoizedProps&&zt===f.memoizedState||(m.flags|=1024),T=!1)}return ri(f,m,S,T,z,N)}function ri(f,m,S,T,N,z){pi(f,m);var oe=(m.flags&128)!==0;if(!T&&!oe)return N&&mn(m,S,!1),Li(f,m,z);T=m.stateNode,zp.current=m;var xe=oe&&typeof S.getDerivedStateFromError!="function"?null:T.render();return m.flags|=1,f!==null&&oe?(m.child=To(m,f.child,null,z),m.child=To(m,null,xe,z)):ur(f,m,xe,z),m.memoizedState=T.state,N&&mn(m,S,!0),m.child}function Eu(f){var m=f.stateNode;m.pendingContext?Xt(f,m.pendingContext,m.pendingContext!==m.context):m.context&&Xt(f,m.context,!1),ph(f,m.containerInfo)}function Hp(f,m,S,T,N){return Jl(),fh(N),m.flags|=256,ur(f,m,S,T),m.child}var Mu={dehydrated:null,treeContext:null,retryLane:0};function nl(f){return{baseLanes:f,cachePool:null}}function Gp(f,m,S){var T=m.pendingProps,N=rr.current,z=!1,oe=(m.flags&128)!==0,xe;if((xe=oe)||(xe=f!==null&&f.memoizedState===null?!1:(N&2)!==0),xe?(z=!0,m.flags&=-129):(f===null||f.memoizedState!==null)&&(N|=1),Pt(rr,N&1),f===null)return la(m),f=m.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?((m.mode&1)===0?m.lanes=1:Ti(f)?m.lanes=8:m.lanes=1073741824,null):(N=T.children,f=T.fallback,z?(T=m.mode,z=m.child,N={mode:"hidden",children:N},(T&1)===0&&z!==null?(z.childLanes=0,z.pendingProps=N):z=pc(N,T,0,null),f=wa(f,T,S,null),z.return=m,f.return=m,z.sibling=f,m.child=z,m.child.memoizedState=nl(S),m.memoizedState=Mu,f):Fs(m,N));if(N=f.memoizedState,N!==null){if(xe=N.dehydrated,xe!==null){if(oe)return m.flags&256?(m.flags&=-257,Tu(f,m,S,Error(o(422)))):m.memoizedState!==null?(m.child=f.child,m.flags|=128,null):(z=T.fallback,N=m.mode,T=pc({mode:"visible",children:T.children},N,0,null),z=wa(z,N,S,null),z.flags|=2,T.return=m,z.return=m,T.sibling=z,m.child=T,(m.mode&1)!==0&&To(m,f.child,null,S),m.child.memoizedState=nl(S),m.memoizedState=Mu,z);if((m.mode&1)===0)m=Tu(f,m,S,null);else if(Ti(xe))m=Tu(f,m,S,Error(o(419)));else if(T=(S&f.childLanes)!==0,Fr||T){if(T=sr,T!==null){switch(S&-S){case 4:z=2;break;case 16:z=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:z=32;break;case 536870912:z=268435456;break;default:z=0}T=(z&(T.suspendedLanes|S))!==0?0:z,T!==0&&T!==N.retryLane&&(N.retryLane=T,Bi(f,T,-1))}Nu(),m=Tu(f,m,S,Error(o(421)))}else bo(xe)?(m.flags|=128,m.child=f.child,m=s0.bind(null,f),Gi(xe,m),m=null):(S=N.treeContext,ge&&(Xr=lu(xe),fi=m,Qn=!0,fs=null,Wl=!1,S!==null&&(hs[Vi++]=Mo,hs[Vi++]=Co,hs[Vi++]=Wa,Mo=S.id,Co=S.overflow,Wa=m)),m=Fs(m,m.pendingProps.children),m.flags|=4096);return m}return z?(T=Ph(f,m,T.children,T.fallback,S),z=m.child,N=f.child.memoizedState,z.memoizedState=N===null?nl(S):{baseLanes:N.baseLanes|S,cachePool:null},z.childLanes=f.childLanes&~S,m.memoizedState=Mu,T):(S=Cu(f,m,T.children,S),m.memoizedState=null,S)}return z?(T=Ph(f,m,T.children,T.fallback,S),z=m.child,N=f.child.memoizedState,z.memoizedState=N===null?nl(S):{baseLanes:N.baseLanes|S,cachePool:null},z.childLanes=f.childLanes&~S,m.memoizedState=Mu,T):(S=Cu(f,m,T.children,S),m.memoizedState=null,S)}function Fs(f,m){return m=pc({mode:"visible",children:m},f.mode,0,null),m.return=f,f.child=m}function Cu(f,m,S,T){var N=f.child;return f=N.sibling,S=Uo(N,{mode:"visible",children:S}),(m.mode&1)===0&&(S.lanes=T),S.return=m,S.sibling=null,f!==null&&(T=m.deletions,T===null?(m.deletions=[f],m.flags|=16):T.push(f)),m.child=S}function Ph(f,m,S,T,N){var z=m.mode;f=f.child;var oe=f.sibling,xe={mode:"hidden",children:S};return(z&1)===0&&m.child!==f?(S=m.child,S.childLanes=0,S.pendingProps=xe,m.deletions=null):(S=Uo(f,xe),S.subtreeFlags=f.subtreeFlags&14680064),oe!==null?T=Uo(oe,T):(T=wa(T,z,N,null),T.flags|=2),T.return=m,S.return=m,S.sibling=T,m.child=S,T}function Tu(f,m,S,T){return T!==null&&fh(T),To(m,f.child,null,S),f=Fs(m,m.pendingProps.children),f.flags|=2,m.memoizedState=null,f}function t0(f,m,S){f.lanes|=m;var T=f.alternate;T!==null&&(T.lanes|=m),Va(f.return,m,S)}function ro(f,m,S,T,N){var z=f.memoizedState;z===null?f.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:T,tail:S,tailMode:N}:(z.isBackwards=m,z.rendering=null,z.renderingStartTime=0,z.last=T,z.tail=S,z.tailMode=N)}function rl(f,m,S){var T=m.pendingProps,N=T.revealOrder,z=T.tail;if(ur(f,m,T.children,S),T=rr.current,(T&2)!==0)T=T&1|2,m.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=m.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&t0(f,S,m);else if(f.tag===19)t0(f,S,m);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===m)break e;for(;f.sibling===null;){if(f.return===null||f.return===m)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}T&=1}if(Pt(rr,T),(m.mode&1)===0)m.memoizedState=null;else switch(N){case"forwards":for(S=m.child,N=null;S!==null;)f=S.alternate,f!==null&&mh(f)===null&&(N=S),S=S.sibling;S=N,S===null?(N=m.child,m.child=null):(N=S.sibling,S.sibling=null),ro(m,!1,N,S,z);break;case"backwards":for(S=null,N=m.child,m.child=null;N!==null;){if(f=N.alternate,f!==null&&mh(f)===null){m.child=N;break}f=N.sibling,N.sibling=S,S=N,N=f}ro(m,!0,S,null,z);break;case"together":ro(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function Li(f,m,S){if(f!==null&&(m.dependencies=f.dependencies),ol|=m.lanes,(S&m.childLanes)===0)return null;if(f!==null&&m.child!==f.child)throw Error(o(153));if(m.child!==null){for(f=m.child,S=Uo(f,f.pendingProps),m.child=S,S.return=m;f.sibling!==null;)f=f.sibling,S=S.sibling=Uo(f,f.pendingProps),S.return=m;S.sibling=null}return m.child}function Ih(f,m,S){switch(m.tag){case 3:Eu(m),Jl();break;case 5:qg(m);break;case 1:Ln(m.type)&&Nn(m);break;case 4:ph(m,m.stateNode.containerInfo);break;case 10:Ga(m,m.type._context,m.memoizedProps.value);break;case 13:var T=m.memoizedState;if(T!==null)return T.dehydrated!==null?(Pt(rr,rr.current&1),m.flags|=128,null):(S&m.child.childLanes)!==0?Gp(f,m,S):(Pt(rr,rr.current&1),f=Li(f,m,S),f!==null?f.sibling:null);Pt(rr,rr.current&1);break;case 19:if(T=(S&m.childLanes)!==0,(f.flags&128)!==0){if(T)return rl(f,m,S);m.flags|=128}var N=m.memoizedState;if(N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),Pt(rr,rr.current),T)break;return null;case 22:case 23:return m.lanes=0,Kr(f,m,S)}return Li(f,m,S)}function Lh(f,m){switch(Cp(m),m.tag){case 1:return Ln(m.type)&&Xn(),f=m.flags,f&65536?(m.flags=f&-65537|128,m):null;case 3:return ql(),kt(Yt),kt(Fn),Ya(),f=m.flags,(f&65536)!==0&&(f&128)===0?(m.flags=f&-65537|128,m):null;case 5:return Pp(m),null;case 13:if(kt(rr),f=m.memoizedState,f!==null&&f.dehydrated!==null){if(m.alternate===null)throw Error(o(340));Jl()}return f=m.flags,f&65536?(m.flags=f&-65537|128,m):null;case 19:return kt(rr),null;case 4:return ql(),null;case 10:return pu(m.type._context),null;case 22:case 23:return Yp(),null;case 24:return null;default:return null}}var mi=!1,Or=!1,il=typeof WeakSet=="function"?WeakSet:Set,ct=null;function ps(f,m){var S=f.ref;if(S!==null)if(typeof S=="function")try{S(null)}catch(T){_i(f,m,T)}else S.current=null}function Bo(f,m,S){try{S()}catch(T){_i(f,m,T)}}var Vp=!1;function Wp(f,m){for(Q(f.containerInfo),ct=m;ct!==null;)if(f=ct,m=f.child,(f.subtreeFlags&1028)!==0&&m!==null)m.return=f,ct=m;else for(;ct!==null;){f=ct;try{var S=f.alternate;if((f.flags&1024)!==0)switch(f.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var T=S.memoizedProps,N=S.memoizedState,z=f.stateNode,oe=z.getSnapshotBeforeUpdate(f.elementType===f.type?T:Ri(f.type,T),N);z.__reactInternalSnapshotBeforeUpdate=oe}break;case 3:Xe&&Ze(f.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(xe){_i(f,f.return,xe)}if(m=f.sibling,m!==null){m.return=f.return,ct=m;break}ct=f.return}return S=Vp,Vp=!1,S}function ko(f,m,S){var T=m.updateQueue;if(T=T!==null?T.lastEffect:null,T!==null){var N=T=T.next;do{if((N.tag&f)===f){var z=N.destroy;N.destroy=void 0,z!==void 0&&Bo(m,S,z)}N=N.next}while(N!==T)}}function Yr(f,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var S=m=m.next;do{if((S.tag&f)===f){var T=S.create;S.destroy=T()}S=S.next}while(S!==m)}}function gi(f){var m=f.ref;if(m!==null){var S=f.stateNode;switch(f.tag){case 5:f=de(S);break;default:f=S}typeof m=="function"?m(f):m.current=f}}function Yn(f,m,S){if(eo&&typeof eo.onCommitFiberUnmount=="function")try{eo.onCommitFiberUnmount(uu,m)}catch{}switch(m.tag){case 0:case 11:case 14:case 15:if(f=m.updateQueue,f!==null&&(f=f.lastEffect,f!==null)){var T=f=f.next;do{var N=T,z=N.destroy;N=N.tag,z!==void 0&&((N&2)!==0||(N&4)!==0)&&Bo(m,S,z),T=T.next}while(T!==f)}break;case 1:if(ps(m,S),f=m.stateNode,typeof f.componentWillUnmount=="function")try{f.props=m.memoizedProps,f.state=m.memoizedState,f.componentWillUnmount()}catch(oe){_i(m,S,oe)}break;case 5:ps(m,S);break;case 4:Xe?Kp(f,m,S):ce&&ce&&(m=m.stateNode.containerInfo,S=en(m),_r(m,S))}}function ms(f,m,S){for(var T=m;;)if(Yn(f,T,S),T.child===null||Xe&&T.tag===4){if(T===m)break;for(;T.sibling===null;){if(T.return===null||T.return===m)return;T=T.return}T.sibling.return=T.return,T=T.sibling}else T.child.return=T,T=T.child}function Jp(f){var m=f.alternate;m!==null&&(f.alternate=null,Jp(m)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(m=f.stateNode,m!==null&&Qe(m)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function Xp(f){return f.tag===5||f.tag===3||f.tag===4}function Nh(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||Xp(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function Bh(f){if(Xe){e:{for(var m=f.return;m!==null;){if(Xp(m))break e;m=m.return}throw Error(o(160))}var S=m;switch(S.tag){case 5:m=S.stateNode,S.flags&32&&(Ue(m),S.flags&=-33),S=Nh(f),rc(f,S,m);break;case 3:case 4:m=S.stateNode.containerInfo,S=Nh(f),kh(f,S,m);break;default:throw Error(o(161))}}}function kh(f,m,S){var T=f.tag;if(T===5||T===6)f=f.stateNode,m?vt(S,f,m):xt(S,f);else if(T!==4&&(f=f.child,f!==null))for(kh(f,m,S),f=f.sibling;f!==null;)kh(f,m,S),f=f.sibling}function rc(f,m,S){var T=f.tag;if(T===5||T===6)f=f.stateNode,m?Ct(S,f,m):qe(S,f);else if(T!==4&&(f=f.child,f!==null))for(rc(f,m,S),f=f.sibling;f!==null;)rc(f,m,S),f=f.sibling}function Kp(f,m,S){for(var T=m,N=!1,z,oe;;){if(!N){N=T.return;e:for(;;){if(N===null)throw Error(o(160));switch(z=N.stateNode,N.tag){case 5:oe=!1;break e;case 3:z=z.containerInfo,oe=!0;break e;case 4:z=z.containerInfo,oe=!0;break e}N=N.return}N=!0}if(T.tag===5||T.tag===6)ms(f,T,S),oe?he(z,T.stateNode):bt(z,T.stateNode);else if(T.tag===18)oe?Ne(z,T.stateNode):Te(z,T.stateNode);else if(T.tag===4){if(T.child!==null){z=T.stateNode.containerInfo,oe=!0,T.child.return=T,T=T.child;continue}}else if(Yn(f,T,S),T.child!==null){T.child.return=T,T=T.child;continue}if(T===m)break;for(;T.sibling===null;){if(T.return===null||T.return===m)return;T=T.return,T.tag===4&&(N=!1)}T.sibling.return=T.return,T=T.sibling}}function fa(f,m){if(Xe){switch(m.tag){case 0:case 11:case 14:case 15:ko(3,m,m.return),Yr(3,m),ko(5,m,m.return);return;case 1:return;case 5:var S=m.stateNode;if(S!=null){var T=m.memoizedProps;f=f!==null?f.memoizedProps:T;var N=m.type,z=m.updateQueue;m.updateQueue=null,z!==null&&Ft(S,z,N,f,T,m)}return;case 6:if(m.stateNode===null)throw Error(o(162));S=m.memoizedProps,tt(m.stateNode,f!==null?f.memoizedProps:S,S);return;case 3:ge&&f!==null&&f.memoizedState.isDehydrated&&$(m.stateNode.containerInfo);return;case 12:return;case 13:ic(m);return;case 19:ic(m);return;case 17:return}throw Error(o(163))}switch(m.tag){case 0:case 11:case 14:case 15:ko(3,m,m.return),Yr(3,m),ko(5,m,m.return);return;case 12:return;case 13:ic(m);return;case 19:ic(m);return;case 3:ge&&f!==null&&f.memoizedState.isDehydrated&&$(m.stateNode.containerInfo);break;case 22:case 23:return}e:if(ce){switch(m.tag){case 1:case 5:case 6:break e;case 3:case 4:m=m.stateNode,_r(m.containerInfo,m.pendingChildren);break e}throw Error(o(163))}}function ic(f){var m=f.updateQueue;if(m!==null){f.updateQueue=null;var S=f.stateNode;S===null&&(S=f.stateNode=new il),m.forEach(function(T){var N=ku.bind(null,f,T);S.has(T)||(S.add(T),T.then(N,N))})}}function xx(f,m){for(ct=m;ct!==null;){m=ct;var S=m.deletions;if(S!==null)for(var T=0;T<S.length;T++){var N=S[T];try{var z=f;Xe?Kp(z,N,m):ms(z,N,m);var oe=N.alternate;oe!==null&&(oe.return=null),N.return=null}catch(Nt){_i(N,m,Nt)}}if(S=m.child,(m.subtreeFlags&12854)!==0&&S!==null)S.return=m,ct=S;else for(;ct!==null;){m=ct;try{var xe=m.flags;if(xe&32&&Xe&&Ue(m.stateNode),xe&512){var ze=m.alternate;if(ze!==null){var it=ze.ref;it!==null&&(typeof it=="function"?it(null):it.current=null)}}if(xe&8192)switch(m.tag){case 13:if(m.memoizedState!==null){var Mt=m.alternate;(Mt===null||Mt.memoizedState===null)&&(Oh=Cr())}break;case 22:var Zt=m.memoizedState!==null,zt=m.alternate,Gn=zt!==null&&zt.memoizedState!==null;if(S=m,Xe){e:if(T=S,N=Zt,z=null,Xe)for(var wt=T;;){if(wt.tag===5){if(z===null){z=wt;var Un=wt.stateNode;N?nt(Un):Se(wt.stateNode,wt.memoizedProps)}}else if(wt.tag===6){if(z===null){var qi=wt.stateNode;N?fe(qi):Me(qi,wt.memoizedProps)}}else if((wt.tag!==22&&wt.tag!==23||wt.memoizedState===null||wt===T)&&wt.child!==null){wt.child.return=wt,wt=wt.child;continue}if(wt===T)break;for(;wt.sibling===null;){if(wt.return===null||wt.return===T)break e;z===wt&&(z=null),wt=wt.return}z===wt&&(z=null),wt.sibling.return=wt.return,wt=wt.sibling}}if(Zt&&!Gn&&(S.mode&1)!==0){ct=S;for(var Ie=S.child;Ie!==null;){for(S=ct=Ie;ct!==null;){T=ct;var _e=T.child;switch(T.tag){case 0:case 11:case 14:case 15:ko(4,T,T.return);break;case 1:ps(T,T.return);var Oe=T.stateNode;if(typeof Oe.componentWillUnmount=="function"){var yt=T.return;try{Oe.props=T.memoizedProps,Oe.state=T.memoizedState,Oe.componentWillUnmount()}catch(Nt){_i(T,yt,Nt)}}break;case 5:ps(T,T.return);break;case 22:if(T.memoizedState!==null){sl(S);continue}}_e!==null?(_e.return=T,ct=_e):sl(S)}Ie=Ie.sibling}}}switch(xe&4102){case 2:Bh(m),m.flags&=-3;break;case 6:Bh(m),m.flags&=-3,fa(m.alternate,m);break;case 4096:m.flags&=-4097;break;case 4100:m.flags&=-4097,fa(m.alternate,m);break;case 4:fa(m.alternate,m)}}catch(Nt){_i(m,m.return,Nt)}if(S=m.sibling,S!==null){S.return=m.return,ct=S;break}ct=m.return}}}function Os(f,m,S){ct=f,Ru(f)}function Ru(f,m,S){for(var T=(f.mode&1)!==0;ct!==null;){var N=ct,z=N.child;if(N.tag===22&&T){var oe=N.memoizedState!==null||mi;if(!oe){var xe=N.alternate,ze=xe!==null&&xe.memoizedState!==null||Or;xe=mi;var it=Or;if(mi=oe,(Or=ze)&&!it)for(ct=N;ct!==null;)oe=ct,ze=oe.child,oe.tag===22&&oe.memoizedState!==null?Dh(N):ze!==null?(ze.return=oe,ct=ze):Dh(N);for(;z!==null;)ct=z,Ru(z),z=z.sibling;ct=N,mi=xe,Or=it}Pu(f)}else(N.subtreeFlags&8772)!==0&&z!==null?(z.return=N,ct=z):Pu(f)}}function Pu(f){for(;ct!==null;){var m=ct;if((m.flags&8772)!==0){var S=m.alternate;try{if((m.flags&8772)!==0)switch(m.tag){case 0:case 11:case 15:Or||Yr(5,m);break;case 1:var T=m.stateNode;if(m.flags&4&&!Or)if(S===null)T.componentDidMount();else{var N=m.elementType===m.type?S.memoizedProps:Ri(m.type,S.memoizedProps);T.componentDidUpdate(N,S.memoizedState,T.__reactInternalSnapshotBeforeUpdate)}var z=m.updateQueue;z!==null&&Hg(m,z,T);break;case 3:var oe=m.updateQueue;if(oe!==null){if(S=null,m.child!==null)switch(m.child.tag){case 5:S=de(m.child.stateNode);break;case 1:S=m.child.stateNode}Hg(m,oe,S)}break;case 5:var xe=m.stateNode;S===null&&m.flags&4&&Be(xe,m.type,m.memoizedProps,m);break;case 6:break;case 4:break;case 12:break;case 13:if(ge&&m.memoizedState===null){var ze=m.alternate;if(ze!==null){var it=ze.memoizedState;if(it!==null){var Mt=it.dehydrated;Mt!==null&&ae(Mt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Or||m.flags&512&&gi(m)}catch(Zt){_i(m,m.return,Zt)}}if(m===f){ct=null;break}if(S=m.sibling,S!==null){S.return=m.return,ct=S;break}ct=m.return}}function sl(f){for(;ct!==null;){var m=ct;if(m===f){ct=null;break}var S=m.sibling;if(S!==null){S.return=m.return,ct=S;break}ct=m.return}}function Dh(f){for(;ct!==null;){var m=ct;try{switch(m.tag){case 0:case 11:case 15:var S=m.return;try{Yr(4,m)}catch(ze){_i(m,S,ze)}break;case 1:var T=m.stateNode;if(typeof T.componentDidMount=="function"){var N=m.return;try{T.componentDidMount()}catch(ze){_i(m,N,ze)}}var z=m.return;try{gi(m)}catch(ze){_i(m,z,ze)}break;case 5:var oe=m.return;try{gi(m)}catch(ze){_i(m,oe,ze)}}}catch(ze){_i(m,m.return,ze)}if(m===f){ct=null;break}var xe=m.sibling;if(xe!==null){xe.return=m.return,ct=xe;break}ct=m.return}}var sc=0,oc=1,ac=2,Do=3,vi=4;if(typeof Symbol=="function"&&Symbol.for){var Us=Symbol.for;sc=Us("selector.component"),oc=Us("selector.has_pseudo_class"),ac=Us("selector.role"),Do=Us("selector.test_id"),vi=Us("selector.text")}function Iu(f){var m=we(f);if(m!=null){if(typeof m.memoizedProps["data-testname"]!="string")throw Error(o(364));return m}if(f=Ut(f),f===null)throw Error(o(362));return f.stateNode.current}function Fh(f,m){switch(m.$$typeof){case sc:if(f.type===m.value)return!0;break;case oc:e:{m=m.value,f=[f,0];for(var S=0;S<f.length;){var T=f[S++],N=f[S++],z=m[N];if(T.tag!==5||!Y(T)){for(;z!=null&&Fh(T,z);)N++,z=m[N];if(N===m.length){m=!0;break e}else for(T=T.child;T!==null;)f.push(T,N),T=T.sibling}}m=!1}return m;case ac:if(f.tag===5&&Ce(f.stateNode,m.value))return!0;break;case vi:if((f.tag===5||f.tag===6)&&(f=se(f),f!==null&&0<=f.indexOf(m.value)))return!0;break;case Do:if(f.tag===5&&(f=f.memoizedProps["data-testname"],typeof f=="string"&&f.toLowerCase()===m.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function js(f){switch(f.$$typeof){case sc:return"<"+(j(f.value)||"Unknown")+">";case oc:return":has("+(js(f)||"")+")";case ac:return'[role="'+f.value+'"]';case vi:return'"'+f.value+'"';case Do:return'[data-testname="'+f.value+'"]';default:throw Error(o(365))}}function Fo(f,m){var S=[];f=[f,0];for(var T=0;T<f.length;){var N=f[T++],z=f[T++],oe=m[z];if(N.tag!==5||!Y(N)){for(;oe!=null&&Fh(N,oe);)z++,oe=m[z];if(z===m.length)S.push(N);else for(N=N.child;N!==null;)f.push(N,z),N=N.sibling}}return S}function Lu(f,m){if(!Et)throw Error(o(363));f=Iu(f),f=Fo(f,m),m=[],f=Array.from(f);for(var S=0;S<f.length;){var T=f[S++];if(T.tag===5)Y(T)||m.push(T.stateNode);else for(T=T.child;T!==null;)f.push(T),T=T.sibling}return m}var n0=Math.ceil,gs=a.ReactCurrentDispatcher,io=a.ReactCurrentOwner,Zn=a.ReactCurrentBatchConfig,sn=0,sr=null,pr=null,Ur=0,yi=0,Oo=gt(0),wr=0,lc=null,ol=0,cc=0,al=0,pa=null,xi=null,Oh=0,ma=1/0;function ll(){ma=Cr()+500}var ga=!1,vs=null,ys=null,va=!1,Ni=null,uc=0,so=0,Uh=null,dc=-1,Jn=0;function jr(){return(sn&6)!==0?Cr():dc!==-1?dc:dc=Cr()}function oo(f){return(f.mode&1)===0?1:(sn&2)!==0&&Ur!==0?Ur&-Ur:zg.transition!==null?(Jn===0&&(f=Ul,Ul<<=1,(Ul&4194240)===0&&(Ul=64),Jn=f),Jn):(f=ln,f!==0?f:Fe())}function Bi(f,m,S){if(50<so)throw so=0,Uh=null,Error(o(185));var T=cl(f,m);return T===null?null:(Ua(T,m,S),((sn&2)===0||T!==sr)&&(T===sr&&((sn&2)===0&&(cc|=m),wr===4&&zs(T,Ur)),ii(T,S),m===1&&sn===0&&(f.mode&1)===0&&(ll(),nh&&cs())),T)}function cl(f,m){f.lanes|=m;var S=f.alternate;for(S!==null&&(S.lanes|=m),S=f,f=f.return;f!==null;)f.childLanes|=m,S=f.alternate,S!==null&&(S.childLanes|=m),S=f,f=f.return;return S.tag===3?S.stateNode:null}function ii(f,m){var S=f.callbackNode;jg(f,m);var T=cu(f,f===sr?Ur:0);if(T===0)S!==null&&zl(S),f.callbackNode=null,f.callbackPriority=0;else if(m=T&-T,f.callbackPriority!==m){if(S!=null&&zl(S),m===1)f.tag===0?ih(hc.bind(null,f)):rh(hc.bind(null,f)),st?lt(function(){sn===0&&cs()}):ja(za,cs),S=null;else{switch(Ao(T)){case 1:S=za;break;case 4:S=gx;break;case 16:S=eh;break;case 536870912:S=th;break;default:S=eh}S=Du(S,ya.bind(null,f))}f.callbackPriority=m,f.callbackNode=S}}function ya(f,m){if(dc=-1,Jn=0,(sn&6)!==0)throw Error(o(327));var S=f.callbackNode;if(_a()&&f.callbackNode!==S)return null;var T=cu(f,f===sr?Ur:0);if(T===0)return null;if((T&30)!==0||(T&f.expiredLanes)!==0||m)m=Ki(f,T);else{m=T;var N=sn;sn|=2;var z=zh();(sr!==f||Ur!==m)&&(ll(),dr(f,m));do try{Bu();break}catch(xe){jh(f,xe)}while(!0);hi(),gs.current=z,sn=N,pr!==null?m=0:(sr=null,Ur=0,m=wr)}if(m!==0){if(m===2&&(N=Qd(f),N!==0&&(T=N,m=qn(f,N))),m===1)throw S=lc,dr(f,0),zs(f,T),ii(f,Cr()),S;if(m===6)zs(f,T);else{if(N=f.current.alternate,(T&30)===0&&!zr(N)&&(m=Ki(f,T),m===2&&(z=Qd(f),z!==0&&(T=z,m=qn(f,z))),m===1))throw S=lc,dr(f,0),zs(f,T),ii(f,Cr()),S;switch(f.finishedWork=N,f.finishedLanes=T,m){case 0:case 1:throw Error(o(345));case 2:xa(f,xi);break;case 3:if(zs(f,T),(T&130023424)===T&&(m=Oh+500-Cr(),10<m)){if(cu(f,0)!==0)break;if(N=f.suspendedLanes,(N&T)!==T){jr(),f.pingedLanes|=f.suspendedLanes&N;break}f.timeoutHandle=Ae(xa.bind(null,f,xi),m);break}xa(f,xi);break;case 4:if(zs(f,T),(T&4194240)===T)break;for(m=f.eventTimes,N=-1;0<T;){var oe=31-Kn(T);z=1<<oe,oe=m[oe],oe>N&&(N=oe),T&=~z}if(T=N,T=Cr()-T,T=(120>T?120:480>T?480:1080>T?1080:1920>T?1920:3e3>T?3e3:4320>T?4320:1960*n0(T/1960))-T,10<T){f.timeoutHandle=Ae(xa.bind(null,f,xi),T);break}xa(f,xi);break;case 5:xa(f,xi);break;default:throw Error(o(329))}}}return ii(f,Cr()),f.callbackNode===S?ya.bind(null,f):null}function qn(f,m){var S=pa;return f.current.memoizedState.isDehydrated&&(dr(f,m).flags|=256),f=Ki(f,m),f!==2&&(m=xi,xi=S,m!==null&&mr(m)),f}function mr(f){xi===null?xi=f:xi.push.apply(xi,f)}function zr(f){for(var m=f;;){if(m.flags&16384){var S=m.updateQueue;if(S!==null&&(S=S.stores,S!==null))for(var T=0;T<S.length;T++){var N=S[T],z=N.getSnapshot;N=N.value;try{if(!di(z(),N))return!1}catch{return!1}}}if(S=m.child,m.subtreeFlags&16384&&S!==null)S.return=m,m=S;else{if(m===f)break;for(;m.sibling===null;){if(m.return===null||m.return===f)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function zs(f,m){for(m&=~al,m&=~cc,f.suspendedLanes|=m,f.pingedLanes&=~m,f=f.expirationTimes;0<m;){var S=31-Kn(m),T=1<<S;f[S]=-1,m&=~T}}function hc(f){if((sn&6)!==0)throw Error(o(327));_a();var m=cu(f,0);if((m&1)===0)return ii(f,Cr()),null;var S=Ki(f,m);if(f.tag!==0&&S===2){var T=Qd(f);T!==0&&(m=T,S=qn(f,T))}if(S===1)throw S=lc,dr(f,0),zs(f,m),ii(f,Cr()),S;if(S===6)throw Error(o(345));return f.finishedWork=f.current.alternate,f.finishedLanes=m,xa(f,xi),ii(f,Cr()),null}function fc(f){Ni!==null&&Ni.tag===0&&(sn&6)===0&&_a();var m=sn;sn|=1;var S=Zn.transition,T=ln;try{if(Zn.transition=null,ln=1,f)return f()}finally{ln=T,Zn.transition=S,sn=m,(sn&6)===0&&cs()}}function Yp(){yi=Oo.current,kt(Oo)}function dr(f,m){f.finishedWork=null,f.finishedLanes=0;var S=f.timeoutHandle;if(S!==ft&&(f.timeoutHandle=ft,je(S)),pr!==null)for(S=pr.return;S!==null;){var T=S;switch(Cp(T),T.tag){case 1:T=T.type.childContextTypes,T!=null&&Xn();break;case 3:ql(),kt(Yt),kt(Fn),Ya();break;case 5:Pp(T);break;case 4:ql();break;case 13:kt(rr);break;case 19:kt(rr);break;case 10:pu(T.type._context);break;case 22:case 23:Yp()}S=S.return}if(sr=f,pr=f=Uo(f.current,null),Ur=yi=m,wr=0,lc=null,al=cc=ol=0,xi=pa=null,us!==null){for(m=0;m<us.length;m++)if(S=us[m],T=S.interleaved,T!==null){S.interleaved=null;var N=T.next,z=S.pending;if(z!==null){var oe=z.next;z.next=N,T.next=oe}S.pending=T}us=null}return f}function jh(f,m){do{var S=pr;try{if(hi(),gu.current=tc,gh){for(var T=ir.memoizedState;T!==null;){var N=T.queue;N!==null&&(N.pending=null),T=T.next}gh=!1}if(qa=0,kr=Br=ir=null,to=!1,Qa=0,io.current=null,S===null||S.return===null){wr=1,lc=m,pr=null;break}e:{var z=f,oe=S.return,xe=S,ze=m;if(m=Ur,xe.flags|=32768,ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var it=ze,Mt=xe,Zt=Mt.tag;if((Mt.mode&1)===0&&(Zt===0||Zt===11||Zt===15)){var zt=Mt.alternate;zt?(Mt.updateQueue=zt.updateQueue,Mt.memoizedState=zt.memoizedState,Mt.lanes=zt.lanes):(Mt.updateQueue=null,Mt.memoizedState=null)}var Gn=jp(oe);if(Gn!==null){Gn.flags&=-257,$a(Gn,oe,xe,z,m),Gn.mode&1&&Po(z,it,m),m=Gn,ze=it;var wt=m.updateQueue;if(wt===null){var Un=new Set;Un.add(ze),m.updateQueue=Un}else wt.add(ze);break e}else{if((m&1)===0){Po(z,it,m),Nu();break e}ze=Error(o(426))}}else if(Qn&&xe.mode&1){var qi=jp(oe);if(qi!==null){(qi.flags&65536)===0&&(qi.flags|=256),$a(qi,oe,xe,z,m),fh(ze);break e}}z=ze,wr!==4&&(wr=2),pa===null?pa=[z]:pa.push(z),ze=Up(ze,xe),xe=oe;do{switch(xe.tag){case 3:xe.flags|=65536,m&=-m,xe.lanes|=m;var Ie=e0(xe,ze,m);ah(xe,Ie);break e;case 1:z=ze;var _e=xe.type,Oe=xe.stateNode;if((xe.flags&128)===0&&(typeof _e.getDerivedStateFromError=="function"||Oe!==null&&typeof Oe.componentDidCatch=="function"&&(ys===null||!ys.has(Oe)))){xe.flags|=65536,m&=-m,xe.lanes|=m;var yt=Mh(xe,z,m);ah(xe,yt);break e}}xe=xe.return}while(xe!==null)}Gh(S)}catch(Nt){m=Nt,pr===S&&S!==null&&(pr=S=S.return);continue}break}while(!0)}function zh(){var f=gs.current;return gs.current=tc,f===null?tc:f}function Nu(){(wr===0||wr===3||wr===2)&&(wr=4),sr===null||(ol&268435455)===0&&(cc&268435455)===0||zs(sr,Ur)}function Ki(f,m){var S=sn;sn|=2;var T=zh();sr===f&&Ur===m||dr(f,m);do try{xs();break}catch(N){jh(f,N)}while(!0);if(hi(),sn=S,gs.current=T,pr!==null)throw Error(o(261));return sr=null,Ur=0,wr}function xs(){for(;pr!==null;)Hh(pr)}function Bu(){for(;pr!==null&&!sa();)Hh(pr)}function Hh(f){var m=Zp(f.alternate,f,yi);f.memoizedProps=f.pendingProps,m===null?Gh(f):pr=m,io.current=null}function Gh(f){var m=f;do{var S=m.alternate;if(f=m.return,(m.flags&32768)===0){if(S=Rh(S,m,yi),S!==null){pr=S;return}}else{if(S=Lh(S,m),S!==null){S.flags&=32767,pr=S;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{wr=6,pr=null;return}}if(m=m.sibling,m!==null){pr=m;return}pr=m=f}while(m!==null);wr===0&&(wr=5)}function xa(f,m){var S=ln,T=Zn.transition;try{Zn.transition=null,ln=1,r0(f,m,S)}finally{Zn.transition=T,ln=S}return null}function r0(f,m,S){do _a();while(Ni!==null);if((sn&6)!==0)throw Error(o(327));var T=f.finishedWork,N=f.finishedLanes;if(T===null)return null;if(f.finishedWork=null,f.finishedLanes=0,T===f.current)throw Error(o(177));f.callbackNode=null,f.callbackPriority=0;var z=T.lanes|T.childLanes;if($d(f,z),f===sr&&(pr=sr=null,Ur=0),(T.subtreeFlags&2064)===0&&(T.flags&2064)===0||va||(va=!0,Du(eh,function(){return _a(),null})),z=(T.flags&15990)!==0,(T.subtreeFlags&15990)!==0||z){z=Zn.transition,Zn.transition=null;var oe=ln;ln=1;var xe=sn;sn|=4,io.current=null,Wp(f,T),xx(f,T),H(f.containerInfo),f.current=T,Os(T),mx(),sn=xe,ln=oe,Zn.transition=z}else f.current=T;if(va&&(va=!1,Ni=f,uc=N),z=f.pendingLanes,z===0&&(ys=null),du(T.stateNode),ii(f,Cr()),m!==null)for(S=f.onRecoverableError,T=0;T<m.length;T++)S(m[T]);if(ga)throw ga=!1,f=vs,vs=null,f;return(uc&1)!==0&&f.tag!==0&&_a(),z=f.pendingLanes,(z&1)!==0?f===Uh?so++:(so=0,Uh=f):so=0,cs(),null}function _a(){if(Ni!==null){var f=Ao(uc),m=Zn.transition,S=ln;try{if(Zn.transition=null,ln=16>f?16:f,Ni===null)var T=!1;else{if(f=Ni,Ni=null,uc=0,(sn&6)!==0)throw Error(o(331));var N=sn;for(sn|=4,ct=f.current;ct!==null;){var z=ct,oe=z.child;if((ct.flags&16)!==0){var xe=z.deletions;if(xe!==null){for(var ze=0;ze<xe.length;ze++){var it=xe[ze];for(ct=it;ct!==null;){var Mt=ct;switch(Mt.tag){case 0:case 11:case 15:ko(8,Mt,z)}var Zt=Mt.child;if(Zt!==null)Zt.return=Mt,ct=Zt;else for(;ct!==null;){Mt=ct;var zt=Mt.sibling,Gn=Mt.return;if(Jp(Mt),Mt===it){ct=null;break}if(zt!==null){zt.return=Gn,ct=zt;break}ct=Gn}}}var wt=z.alternate;if(wt!==null){var Un=wt.child;if(Un!==null){wt.child=null;do{var qi=Un.sibling;Un.sibling=null,Un=qi}while(Un!==null)}}ct=z}}if((z.subtreeFlags&2064)!==0&&oe!==null)oe.return=z,ct=oe;else e:for(;ct!==null;){if(z=ct,(z.flags&2048)!==0)switch(z.tag){case 0:case 11:case 15:ko(9,z,z.return)}var Ie=z.sibling;if(Ie!==null){Ie.return=z.return,ct=Ie;break e}ct=z.return}}var _e=f.current;for(ct=_e;ct!==null;){oe=ct;var Oe=oe.child;if((oe.subtreeFlags&2064)!==0&&Oe!==null)Oe.return=oe,ct=Oe;else e:for(oe=_e;ct!==null;){if(xe=ct,(xe.flags&2048)!==0)try{switch(xe.tag){case 0:case 11:case 15:Yr(9,xe)}}catch(Nt){_i(xe,xe.return,Nt)}if(xe===oe){ct=null;break e}var yt=xe.sibling;if(yt!==null){yt.return=xe.return,ct=yt;break e}ct=xe.return}}if(sn=N,cs(),eo&&typeof eo.onPostCommitFiberRoot=="function")try{eo.onPostCommitFiberRoot(uu,f)}catch{}T=!0}return T}finally{ln=S,Zn.transition=m}}return!1}function qp(f,m,S){m=Up(S,m),m=e0(f,m,1),oa(f,m),m=jr(),f=cl(f,1),f!==null&&(Ua(f,1,m),ii(f,m))}function _i(f,m,S){if(f.tag===3)qp(f,f,S);else for(;m!==null;){if(m.tag===3){qp(m,f,S);break}else if(m.tag===1){var T=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(ys===null||!ys.has(T))){f=Up(S,f),f=Mh(m,f,1),oa(m,f),f=jr(),m=cl(m,1),m!==null&&(Ua(m,1,f),ii(m,f));break}}m=m.return}}function i0(f,m,S){var T=f.pingCache;T!==null&&T.delete(m),m=jr(),f.pingedLanes|=f.suspendedLanes&S,sr===f&&(Ur&S)===S&&(wr===4||wr===3&&(Ur&130023424)===Ur&&500>Cr()-Oh?dr(f,0):al|=S),ii(f,m)}function Qp(f,m){m===0&&((f.mode&1)===0?m=1:(m=Tn,Tn<<=1,(Tn&130023424)===0&&(Tn=4194304)));var S=jr();f=cl(f,m),f!==null&&(Ua(f,m,S),ii(f,S))}function s0(f){var m=f.memoizedState,S=0;m!==null&&(S=m.retryLane),Qp(f,S)}function ku(f,m){var S=0;switch(f.tag){case 13:var T=f.stateNode,N=f.memoizedState;N!==null&&(S=N.retryLane);break;case 19:T=f.stateNode;break;default:throw Error(o(314))}T!==null&&T.delete(m),Qp(f,S)}var Zp;Zp=function(f,m,S){if(f!==null)if(f.memoizedProps!==m.pendingProps||Yt.current)Fr=!0;else{if((f.lanes&S)===0&&(m.flags&128)===0)return Fr=!1,Ih(f,m,S);Fr=(f.flags&131072)!==0}else Fr=!1,Qn&&(m.flags&1048576)!==0&&Jg(m,dh,m.index);switch(m.lanes=0,m.tag){case 2:var T=m.type;f!==null&&(f.alternate=null,m.alternate=null,m.flags|=2),f=m.pendingProps;var N=yn(m,Fn.current);Hl(m,S),N=Ql(null,m,T,f,N,S);var z=ua();return m.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,Ln(T)?(z=!0,Nn(m)):z=!1,m.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,Gl(m),N.updater=ch,m.stateNode=N,N._reactInternals=m,Ep(m,T,f,S),m=ri(null,m,T,!0,z,S)):(m.tag=0,Qn&&z&&Mp(m),ur(null,m,N,S),m=m.child),m;case 16:T=m.elementType;e:{switch(f!==null&&(f.alternate=null,m.alternate=null,m.flags|=2),f=m.pendingProps,N=T._init,T=N(T._payload),m.type=T,N=m.tag=o0(T),f=Ri(T,f),N){case 0:m=No(null,m,T,f,S);break e;case 1:m=tl(null,m,T,f,S);break e;case 11:m=Wn(null,m,T,f,S);break e;case 14:m=Hn(null,m,T,Ri(T.type,f),S);break e}throw Error(o(306,T,""))}return m;case 0:return T=m.type,N=m.pendingProps,N=m.elementType===T?N:Ri(T,N),No(f,m,T,N,S);case 1:return T=m.type,N=m.pendingProps,N=m.elementType===T?N:Ri(T,N),tl(f,m,T,N,S);case 3:e:{if(Eu(m),f===null)throw Error(o(387));T=m.pendingProps,z=m.memoizedState,N=z.element,bp(f,m),lh(m,T,null,S);var oe=m.memoizedState;if(T=oe.element,ge&&z.isDehydrated)if(z={element:T,isDehydrated:!1,cache:oe.cache,transitions:oe.transitions},m.updateQueue.baseState=z,m.memoizedState=z,m.flags&256){N=Error(o(423)),m=Hp(f,m,T,S,N);break e}else if(T!==N){N=Error(o(424)),m=Hp(f,m,T,S,N);break e}else for(ge&&(Xr=Ol(m.stateNode.containerInfo),fi=m,Qn=!0,fs=null,Wl=!1),S=Yg(m,null,T,S),m.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(Jl(),T===N){m=Li(f,m,S);break e}ur(f,m,T,S)}m=m.child}return m;case 5:return qg(m),f===null&&la(m),T=m.type,N=m.pendingProps,z=f!==null?f.memoizedProps:null,oe=N.children,Le(T,N)?oe=null:z!==null&&Le(T,z)&&(m.flags|=32),pi(f,m),ur(f,m,oe,S),m.child;case 6:return f===null&&la(m),null;case 13:return Gp(f,m,S);case 4:return ph(m,m.stateNode.containerInfo),T=m.pendingProps,f===null?m.child=To(m,null,T,S):ur(f,m,T,S),m.child;case 11:return T=m.type,N=m.pendingProps,N=m.elementType===T?N:Ri(T,N),Wn(f,m,T,N,S);case 7:return ur(f,m,m.pendingProps,S),m.child;case 8:return ur(f,m,m.pendingProps.children,S),m.child;case 12:return ur(f,m,m.pendingProps.children,S),m.child;case 10:e:{if(T=m.type._context,N=m.pendingProps,z=m.memoizedProps,oe=N.value,Ga(m,T,oe),z!==null)if(di(z.value,oe)){if(z.children===N.children&&!Yt.current){m=Li(f,m,S);break e}}else for(z=m.child,z!==null&&(z.return=m);z!==null;){var xe=z.dependencies;if(xe!==null){oe=z.child;for(var ze=xe.firstContext;ze!==null;){if(ze.context===T){if(z.tag===1){ze=Eo(-1,S&-S),ze.tag=2;var it=z.updateQueue;if(it!==null){it=it.shared;var Mt=it.pending;Mt===null?ze.next=ze:(ze.next=Mt.next,Mt.next=ze),it.pending=ze}}z.lanes|=S,ze=z.alternate,ze!==null&&(ze.lanes|=S),Va(z.return,S,m),xe.lanes|=S;break}ze=ze.next}}else if(z.tag===10)oe=z.type===m.type?null:z.child;else if(z.tag===18){if(oe=z.return,oe===null)throw Error(o(341));oe.lanes|=S,xe=oe.alternate,xe!==null&&(xe.lanes|=S),Va(oe,S,m),oe=z.sibling}else oe=z.child;if(oe!==null)oe.return=z;else for(oe=z;oe!==null;){if(oe===m){oe=null;break}if(z=oe.sibling,z!==null){z.return=oe.return,oe=z;break}oe=oe.return}z=oe}ur(f,m,N.children,S),m=m.child}return m;case 9:return N=m.type,T=m.pendingProps.children,Hl(m,S),N=Pi(N),T=T(N),m.flags|=1,ur(f,m,T,S),m.child;case 14:return T=m.type,N=Ri(T,m.pendingProps),N=Ri(T.type,N),Hn(f,m,T,N,S);case 15:return Lo(f,m,m.type,m.pendingProps,S);case 17:return T=m.type,N=m.pendingProps,N=m.elementType===T?N:Ri(T,N),f!==null&&(f.alternate=null,m.alternate=null,m.flags|=2),m.tag=1,Ln(T)?(f=!0,Nn(m)):f=!1,Hl(m,S),Vg(m,T,N),Ep(m,T,N,S),ri(null,m,T,!0,f,S);case 19:return rl(f,m,S);case 22:return Kr(f,m,S)}throw Error(o(156,m.tag))};function Du(f,m){return ja(f,m)}function Vh(f,m,S,T){this.tag=f,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yi(f,m,S,T){return new Vh(f,m,S,T)}function Fu(f){return f=f.prototype,!(!f||!f.isReactComponent)}function o0(f){if(typeof f=="function")return Fu(f)?1:0;if(f!=null){if(f=f.$$typeof,f===A)return 11;if(f===C)return 14}return 2}function Uo(f,m){var S=f.alternate;return S===null?(S=Yi(f.tag,m,f.key,f.mode),S.elementType=f.elementType,S.type=f.type,S.stateNode=f.stateNode,S.alternate=f,f.alternate=S):(S.pendingProps=m,S.type=f.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=f.flags&14680064,S.childLanes=f.childLanes,S.lanes=f.lanes,S.child=f.child,S.memoizedProps=f.memoizedProps,S.memoizedState=f.memoizedState,S.updateQueue=f.updateQueue,m=f.dependencies,S.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},S.sibling=f.sibling,S.index=f.index,S.ref=f.ref,S}function Ou(f,m,S,T,N,z){var oe=2;if(T=f,typeof f=="function")Fu(f)&&(oe=1);else if(typeof f=="string")oe=5;else e:switch(f){case h:return wa(S.children,N,z,m);case p:oe=8,N|=8;break;case g:return f=Yi(12,S,m,N|2),f.elementType=g,f.lanes=z,f;case b:return f=Yi(13,S,m,N),f.elementType=b,f.lanes=z,f;case w:return f=Yi(19,S,m,N),f.elementType=w,f.lanes=z,f;case R:return pc(S,N,z,m);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case y:oe=10;break e;case _:oe=9;break e;case A:oe=11;break e;case C:oe=14;break e;case E:oe=16,T=null;break e}throw Error(o(130,f==null?f:typeof f,""))}return m=Yi(oe,S,m,N),m.elementType=f,m.type=T,m.lanes=z,m}function wa(f,m,S,T){return f=Yi(7,f,T,m),f.lanes=S,f}function pc(f,m,S,T){return f=Yi(22,f,T,m),f.elementType=R,f.lanes=S,f.stateNode={},f}function Wh(f,m,S){return f=Yi(6,f,null,m),f.lanes=S,f}function Jh(f,m,S){return m=Yi(4,f.children!==null?f.children:[],f.key,m),m.lanes=S,m.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},m}function a0(f,m,S,T,N){this.tag=m,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ft,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zd(0),this.expirationTimes=Zd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zd(0),this.identifierPrefix=T,this.onRecoverableError=N,ge&&(this.mutableSourceEagerHydrationData=null)}function l0(f,m,S,T,N,z,oe,xe,ze){return f=new a0(f,m,S,xe,ze),m===1?(m=1,z===!0&&(m|=8)):m=0,z=Yi(3,null,null,m),f.current=z,z.stateNode=f,z.memoizedState={element:T,isDehydrated:S,cache:null,transitions:null},Gl(z),f}function $p(f){if(!f)return jt;f=f._reactInternals;e:{if(I(f)!==f||f.tag!==1)throw Error(o(170));var m=f;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(Ln(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(o(171))}if(f.tag===1){var S=f.type;if(Ln(S))return nr(f,S,m)}return m}function c0(f){var m=f._reactInternals;if(m===void 0)throw typeof f.render=="function"?Error(o(188)):(f=Object.keys(f).join(","),Error(o(268,f)));return f=ee(m),f===null?null:f.stateNode}function u0(f,m){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var S=f.retryLane;f.retryLane=S!==0&&S<m?S:m}}function Xh(f,m){u0(f,m),(f=f.alternate)&&u0(f,m)}function d0(f){return f=ee(f),f===null?null:f.stateNode}function h0(){return null}return t.attemptContinuousHydration=function(f){if(f.tag===13){var m=jr();Bi(f,134217728,m),Xh(f,134217728)}},t.attemptHydrationAtCurrentPriority=function(f){if(f.tag===13){var m=jr(),S=oo(f);Bi(f,S,m),Xh(f,S)}},t.attemptSynchronousHydration=function(f){switch(f.tag){case 3:var m=f.stateNode;if(m.current.memoizedState.isDehydrated){var S=jl(m.pendingLanes);S!==0&&($s(m,S|1),ii(m,Cr()),(sn&6)===0&&(ll(),cs()))}break;case 13:var T=jr();fc(function(){return Bi(f,1,T)}),Xh(f,1)}},t.batchedUpdates=function(f,m){var S=sn;sn|=1;try{return f(m)}finally{sn=S,sn===0&&(ll(),nh&&cs())}},t.createComponentSelector=function(f){return{$$typeof:sc,value:f}},t.createContainer=function(f,m,S,T,N,z,oe){return l0(f,m,!1,null,S,T,N,z,oe)},t.createHasPseudoClassSelector=function(f){return{$$typeof:oc,value:f}},t.createHydrationContainer=function(f,m,S,T,N,z,oe,xe,ze){return f=l0(S,T,!0,f,N,z,oe,xe,ze),f.context=$p(null),S=f.current,T=jr(),N=oo(S),z=Eo(T,N),z.callback=m??null,oa(S,z),f.current.lanes=N,Ua(f,N,T),ii(f,T),f},t.createPortal=function(f,m,S){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:T==null?null:""+T,children:f,containerInfo:m,implementation:S}},t.createRoleSelector=function(f){return{$$typeof:ac,value:f}},t.createTestNameSelector=function(f){return{$$typeof:Do,value:f}},t.createTextSelector=function(f){return{$$typeof:vi,value:f}},t.deferredUpdates=function(f){var m=ln,S=Zn.transition;try{return Zn.transition=null,ln=16,f()}finally{ln=m,Zn.transition=S}},t.discreteUpdates=function(f,m,S,T,N){var z=ln,oe=Zn.transition;try{return Zn.transition=null,ln=1,f(m,S,T,N)}finally{ln=z,Zn.transition=oe,sn===0&&ll()}},t.findAllNodes=Lu,t.findBoundingRects=function(f,m){if(!Et)throw Error(o(363));m=Lu(f,m),f=[];for(var S=0;S<m.length;S++)f.push(dn(m[S]));for(m=f.length-1;0<m;m--){S=f[m];for(var T=S.x,N=T+S.width,z=S.y,oe=z+S.height,xe=m-1;0<=xe;xe--)if(m!==xe){var ze=f[xe],it=ze.x,Mt=it+ze.width,Zt=ze.y,zt=Zt+ze.height;if(T>=it&&z>=Zt&&N<=Mt&&oe<=zt){f.splice(m,1);break}else if(T!==it||S.width!==ze.width||zt<z||Zt>oe){if(!(z!==Zt||S.height!==ze.height||Mt<T||it>N)){it>T&&(ze.width+=it-T,ze.x=T),Mt<N&&(ze.width=N-it),f.splice(m,1);break}}else{Zt>z&&(ze.height+=Zt-z,ze.y=z),zt<oe&&(ze.height=oe-Zt),f.splice(m,1);break}}}return f},t.findHostInstance=c0,t.findHostInstanceWithNoPortals=function(f){return f=V(f),f=f!==null?ne(f):null,f===null?null:f.stateNode},t.findHostInstanceWithWarning=function(f){return c0(f)},t.flushControlled=function(f){var m=sn;sn|=1;var S=Zn.transition,T=ln;try{Zn.transition=null,ln=1,f()}finally{ln=T,Zn.transition=S,sn=m,sn===0&&(ll(),cs())}},t.flushPassiveEffects=_a,t.flushSync=fc,t.focusWithin=function(f,m){if(!Et)throw Error(o(363));for(f=Iu(f),m=Fo(f,m),m=Array.from(m),f=0;f<m.length;){var S=m[f++];if(!Y(S)){if(S.tag===5&&et(S.stateNode))return!0;for(S=S.child;S!==null;)m.push(S),S=S.sibling}}return!1},t.getCurrentUpdatePriority=function(){return ln},t.getFindAllNodesFailureDescription=function(f,m){if(!Et)throw Error(o(363));var S=0,T=[];f=[Iu(f),0];for(var N=0;N<f.length;){var z=f[N++],oe=f[N++],xe=m[oe];if((z.tag!==5||!Y(z))&&(Fh(z,xe)&&(T.push(js(xe)),oe++,oe>S&&(S=oe)),oe<m.length))for(z=z.child;z!==null;)f.push(z,oe),z=z.sibling}if(S<m.length){for(f=[];S<m.length;S++)f.push(js(m[S]));return`findAllNodes was able to match part of the selector:
  `+(T.join(" > ")+`

No matching component was found for:
  `)+f.join(" > ")}return null},t.getPublicRootInstance=function(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return de(f.child.stateNode);default:return f.child.stateNode}},t.injectIntoDevTools=function(f){if(f={bundleType:f.bundleType,version:f.version,rendererPackageName:f.rendererPackageName,rendererConfig:f.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:d0,findFiberByHostInstance:f.findFiberByHostInstance||h0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")f=!1;else{var m=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(m.isDisabled||!m.supportsFiber)f=!0;else{try{uu=m.inject(f),eo=m}catch{}f=!!m.checkDCE}}return f},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(f,m,S,T){if(!Et)throw Error(o(363));f=Lu(f,m);var N=Ke(f,S,T).disconnect;return{disconnect:function(){N()}}},t.registerMutableSourceForHydration=function(f,m){var S=m._getVersion;S=S(m._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[m,S]:f.mutableSourceEagerHydrationData.push(m,S)},t.runWithPriority=function(f,m){var S=ln;try{return ln=f,m()}finally{ln=S}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(f,m,S,T){var N=m.current,z=jr(),oe=oo(N);return S=$p(S),m.context===null?m.context=S:m.pendingContext=S,m=Eo(z,oe),m.payload={element:f},T=T===void 0?null:T,T!==null&&(m.callback=T),oa(N,m),f=Bi(N,oe,z),f!==null&&oh(f,N,oe),oe},t}),H_}var cC;function DH(){return cC||(cC=1,U_.exports=kH()),U_.exports}var FH=DH();const OH=lp(FH);var G_={exports:{}},V_={};var uC;function UH(){return uC||(uC=1,(function(r){function e(J,Q){var H=J.length;J.push(Q);e:for(;0<H;){var X=H-1>>>1,Z=J[X];if(0<i(Z,Q))J[X]=Q,J[H]=Z,H=X;else break e}}function t(J){return J.length===0?null:J[0]}function n(J){if(J.length===0)return null;var Q=J[0],H=J.pop();if(H!==Q){J[0]=H;e:for(var X=0,Z=J.length,ye=Z>>>1;X<ye;){var be=2*(X+1)-1,Le=J[be],pe=be+1,Ae=J[pe];if(0>i(Le,H))pe<Z&&0>i(Ae,Le)?(J[X]=Ae,J[pe]=H,X=pe):(J[X]=Le,J[be]=H,X=be);else if(pe<Z&&0>i(Ae,H))J[X]=Ae,J[pe]=H,X=pe;else break e}}return Q}function i(J,Q){var H=J.sortIndex-Q.sortIndex;return H!==0?H:J.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();r.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,p=null,g=3,y=!1,_=!1,A=!1,b=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(J){for(var Q=t(u);Q!==null;){if(Q.callback===null)n(u);else if(Q.startTime<=J)n(u),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=t(u)}}function R(J){if(A=!1,E(J),!_)if(t(l)!==null)_=!0,de(L);else{var Q=t(u);Q!==null&&ie(R,Q.startTime-J)}}function L(J,Q){_=!1,A&&(A=!1,w(O),O=-1),y=!0;var H=g;try{for(E(Q),p=t(l);p!==null&&(!(p.expirationTime>Q)||J&&!V());){var X=p.callback;if(typeof X=="function"){p.callback=null,g=p.priorityLevel;var Z=X(p.expirationTime<=Q);Q=r.unstable_now(),typeof Z=="function"?p.callback=Z:p===t(l)&&n(l),E(Q)}else n(l);p=t(l)}if(p!==null)var ye=!0;else{var be=t(u);be!==null&&ie(R,be.startTime-Q),ye=!1}return ye}finally{p=null,g=H,y=!1}}var D=!1,j=null,O=-1,I=5,U=-1;function V(){return!(r.unstable_now()-U<I)}function ee(){if(j!==null){var J=r.unstable_now();U=J;var Q=!0;try{Q=j(!0,J)}finally{Q?te():(D=!1,j=null)}}else D=!1}var te;if(typeof C=="function")te=function(){C(ee)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,le=ne.port2;ne.port1.onmessage=ee,te=function(){le.postMessage(null)}}else te=function(){b(ee,0)};function de(J){j=J,D||(D=!0,te())}function ie(J,Q){O=b(function(){J(r.unstable_now())},Q)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(J){J.callback=null},r.unstable_continueExecution=function(){_||y||(_=!0,de(L))},r.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<J?Math.floor(1e3/J):5},r.unstable_getCurrentPriorityLevel=function(){return g},r.unstable_getFirstCallbackNode=function(){return t(l)},r.unstable_next=function(J){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var H=g;g=Q;try{return J()}finally{g=H}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(J,Q){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var H=g;g=J;try{return Q()}finally{g=H}},r.unstable_scheduleCallback=function(J,Q,H){var X=r.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?X+H:X):H=X,J){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=H+Z,J={id:h++,callback:Q,priorityLevel:J,startTime:H,expirationTime:Z,sortIndex:-1},H>X?(J.sortIndex=H,e(u,J),t(l)===null&&J===t(u)&&(A?(w(O),O=-1):A=!0,ie(R,H-X))):(J.sortIndex=Z,e(l,J),_||y||(_=!0,de(L))),J},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(J){var Q=g;return function(){var H=g;g=Q;try{return J.apply(this,arguments)}finally{g=H}}}})(V_)),V_}var dC;function jH(){return dC||(dC=1,G_.exports=UH()),G_.exports}var hC=jH();const zH=r=>typeof r=="object"&&typeof r.then=="function",xd=[];function _I(r,e,t=(n,i)=>n===i){if(r===e)return!0;if(!r||!e)return!1;const n=r.length;if(e.length!==n)return!1;for(let i=0;i<n;i++)if(!t(r[i],e[i]))return!1;return!0}function wI(r,e=null,t=!1,n={}){e===null&&(e=[r]);for(const s of xd)if(_I(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return n.lifespan&&n.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,n.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:n.equal,remove:()=>{const s=xd.indexOf(i);s!==-1&&xd.splice(s,1)},promise:(zH(r)?r:r(...e)).then(s=>{i.response=s,n.lifespan&&n.lifespan>0&&(i.timeout=setTimeout(i.remove,n.lifespan))}).catch(s=>i.error=s)};if(xd.push(i),!t)throw i.promise}const HH=(r,e,t)=>wI(r,e,!1,t),GH=(r,e,t)=>void wI(r,e,!0,t),VH=r=>{if(r===void 0||r.length===0)xd.splice(0,xd.length);else{const e=xd.find(t=>_I(r,t.keys,t.equal));e&&e.remove()}},_1={},bI=r=>void Object.assign(_1,r);function WH(r,e){function t(h,{args:p=[],attach:g,...y},_){let A=`${h[0].toUpperCase()}${h.slice(1)}`,b;if(h==="primitive"){if(y.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const w=y.object;b=Ff(w,{type:h,root:_,attach:g,primitive:!0})}else{const w=_1[A];if(!w)throw new Error(`R3F: ${A} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(p))throw new Error("R3F: The args prop must be an array!");b=Ff(new w(...p),{type:h,root:_,attach:g,memoizedProps:{args:p}})}return b.__r3f.attach===void 0&&(b instanceof rn?b.__r3f.attach="geometry":b instanceof Jr&&(b.__r3f.attach="material")),A!=="inject"&&X_(b,y),b}function n(h,p){let g=!1;if(p){var y,_;(y=p.__r3f)!=null&&y.attach?J_(h,p,p.__r3f.attach):p.isObject3D&&h.isObject3D&&(h.add(p),g=!0),g||(_=h.__r3f)==null||_.objects.push(p),p.__r3f||Ff(p,{}),p.__r3f.parent=h,Ob(p),Of(p)}}function i(h,p,g){let y=!1;if(p){var _,A;if((_=p.__r3f)!=null&&_.attach)J_(h,p,p.__r3f.attach);else if(p.isObject3D&&h.isObject3D){p.parent=h,p.dispatchEvent({type:"added"});const b=h.children.filter(C=>C!==p),w=b.indexOf(g);h.children=[...b.slice(0,w),p,...b.slice(w)],y=!0}y||(A=h.__r3f)==null||A.objects.push(p),p.__r3f||Ff(p,{}),p.__r3f.parent=h,Ob(p),Of(p)}}function s(h,p,g=!1){h&&[...h].forEach(y=>o(p,y,g))}function o(h,p,g){if(p){var y,_,A;if(p.__r3f&&(p.__r3f.parent=null),(y=h.__r3f)!=null&&y.objects&&(h.__r3f.objects=h.__r3f.objects.filter(R=>R!==p)),(_=p.__r3f)!=null&&_.attach)vC(h,p,p.__r3f.attach);else if(p.isObject3D&&h.isObject3D){var b;h.remove(p),(b=p.__r3f)!=null&&b.root&&ZH(p.__r3f.root,p)}const C=(A=p.__r3f)==null?void 0:A.primitive,E=g===void 0?p.dispose!==null&&!C:g;if(!C){var w;s((w=p.__r3f)==null?void 0:w.objects,p,E),s(p.children,p,E)}delete p.__r3f,E&&p.dispose&&p.type!=="Scene"&&hC.unstable_scheduleCallback(hC.unstable_IdlePriority,()=>{try{p.dispose()}catch{}}),Of(h)}}function a(h,p,g,y){var _;const A=(_=h.__r3f)==null?void 0:_.parent;if(!A)return;const b=t(p,g,h.__r3f.root);if(h.children){for(const w of h.children)w.__r3f&&n(b,w);h.children=h.children.filter(w=>!w.__r3f)}h.__r3f.objects.forEach(w=>n(b,w)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||o(A,h),b.parent&&(b.__r3f.autoRemovedBeforeAppend=!0),n(A,b),b.raycast&&b.__r3f.eventCount&&b.__r3f.root.getState().internal.interaction.push(b),[y,y.alternate].forEach(w=>{w!==null&&(w.stateNode=b,w.ref&&(typeof w.ref=="function"?w.ref(b):w.ref.current=b))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:OH({createInstance:t,removeChild:o,appendChild:n,appendInitialChild:n,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,p)=>{if(!p)return;const g=h.getState().scene;g.__r3f&&(g.__r3f.root=h,n(g,p))},removeChildFromContainer:(h,p)=>{p&&o(h.getState().scene,p)},insertInContainerBefore:(h,p,g)=>{if(!p||!g)return;const y=h.getState().scene;y.__r3f&&i(y,p,g)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var p;return!!((p=h?.__r3f)!=null?p:{}).handlers},prepareUpdate(h,p,g,y){var _;if(((_=h?.__r3f)!=null?_:{}).primitive&&y.object&&y.object!==h)return[!0];{const{args:b=[],children:w,...C}=y,{args:E=[],children:R,...L}=g;if(!Array.isArray(b))throw new Error("R3F: the args prop must be an array!");if(b.some((j,O)=>j!==E[O]))return[!0];const D=RI(h,C,L,!0);return D.changes.length?[!1,D]:null}},commitUpdate(h,[p,g],y,_,A,b){p?a(h,y,A,b):X_(h,g)},commitMount(h,p,g,y){var _;const A=(_=h.__r3f)!=null?_:{};h.raycast&&A.handlers&&A.eventCount&&h.__r3f.root.getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>Ff(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var p;const{attach:g,parent:y}=(p=h.__r3f)!=null?p:{};g&&y&&vC(y,h,g),h.isObject3D&&(h.visible=!1),Of(h)},unhideInstance(h,p){var g;const{attach:y,parent:_}=(g=h.__r3f)!=null?g:{};y&&_&&J_(_,h,y),(h.isObject3D&&p.visible==null||p.visible)&&(h.visible=!0),Of(h)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Gf.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&or.fun(performance.now)?performance.now:or.fun(Date.now)?Date.now:()=>0,scheduleTimeout:or.fun(setTimeout)?setTimeout:void 0,cancelTimeout:or.fun(clearTimeout)?clearTimeout:void 0}),applyProps:X_}}var fC,pC;const W_=r=>"colorSpace"in r||"outputColorSpace"in r,AI=()=>{var r;return(r=_1.ColorManagement)!=null?r:null},SI=r=>r&&r.isOrthographicCamera,JH=r=>r&&r.hasOwnProperty("current"),Ig=typeof window<"u"&&((fC=window.document)!=null&&fC.createElement||((pC=window.navigator)==null?void 0:pC.product)==="ReactNative")?F.useLayoutEffect:F.useEffect;function EI(r){const e=F.useRef(r);return Ig(()=>void(e.current=r),[r]),e}function XH({set:r}){return Ig(()=>(r(new Promise(()=>null)),()=>r(!1)),[r]),null}class MI extends F.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}MI.getDerivedStateFromError=()=>({error:!0});const CI="__default",mC=new Map,KH=r=>r&&!!r.memoized&&!!r.changes;function TI(r){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(r)?Math.min(Math.max(r[0],t),r[1]):r}const xm=r=>{var e;return(e=r.__r3f)==null?void 0:e.root.getState()},or={obj:r=>r===Object(r)&&!or.arr(r)&&typeof r!="function",fun:r=>typeof r=="function",str:r=>typeof r=="string",num:r=>typeof r=="number",boo:r=>typeof r=="boolean",und:r=>r===void 0,arr:r=>Array.isArray(r),equ(r,e,{arrays:t="shallow",objects:n="reference",strict:i=!0}={}){if(typeof r!=typeof e||!!r!=!!e)return!1;if(or.str(r)||or.num(r))return r===e;const s=or.obj(r);if(s&&n==="reference")return r===e;const o=or.arr(r);if(o&&t==="reference")return r===e;if((o||s)&&r===e)return!0;let a;for(a in r)if(!(a in e))return!1;if(s&&t==="shallow"&&n==="shallow"){for(a in i?e:r)if(!or.equ(r[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:r)if(r[a]!==e[a])return!1;if(or.und(a)){if(o&&r.length===0&&e.length===0||s&&Object.keys(r).length===0&&Object.keys(e).length===0)return!0;if(r!==e)return!1}return!0}};function YH(r){const e={nodes:{},materials:{}};return r&&r.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function qH(r){r.dispose&&r.type!=="Scene"&&r.dispose();for(const e in r)e.dispose==null||e.dispose(),delete r[e]}function Ff(r,e){const t=r;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},r}function Fb(r,e){let t=r;if(e.includes("-")){const n=e.split("-"),i=n.pop();return t=n.reduce((s,o)=>s[o],r),{target:t,key:i}}else return{target:t,key:e}}const gC=/-\d+$/;function J_(r,e,t){if(or.str(t)){if(gC.test(t)){const s=t.replace(gC,""),{target:o,key:a}=Fb(r,s);Array.isArray(o[a])||(o[a]=[])}const{target:n,key:i}=Fb(r,t);e.__r3f.previousAttach=n[i],n[i]=e}else e.__r3f.previousAttach=t(r,e)}function vC(r,e,t){var n,i;if(or.str(t)){const{target:s,key:o}=Fb(r,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(n=e.__r3f)==null||n.previousAttach==null||n.previousAttach(r,e);(i=e.__r3f)==null||delete i.previousAttach}function RI(r,{children:e,key:t,ref:n,...i},{children:s,key:o,ref:a,...l}={},u=!1){var h;const p=(h=r?.__r3f)!=null?h:{},g=Object.entries(i),y=[];if(u){const A=Object.keys(l);for(let b=0;b<A.length;b++)i.hasOwnProperty(A[b])||g.unshift([A[b],CI+"remove"])}g.forEach(([A,b])=>{var w;if((w=r.__r3f)!=null&&w.primitive&&A==="object"||or.equ(b,l[A]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(A))return y.push([A,b,!0,[]]);let C=[];A.includes("-")&&(C=A.split("-")),y.push([A,b,!1,C]);for(const E in i){const R=i[E];E.startsWith(`${A}-`)&&y.push([E,R,!1,E.split("-")])}});const _={...i};return p.memoizedProps&&p.memoizedProps.args&&(_.args=p.memoizedProps.args),p.memoizedProps&&p.memoizedProps.attach&&(_.attach=p.memoizedProps.attach),{memoized:_,changes:y}}function X_(r,e){var t,n,i;const s=(t=r.__r3f)!=null?t:{},o=s.root,a=(n=o==null||o.getState==null?void 0:o.getState())!=null?n:{},{memoized:l,changes:u}=KH(e)?e:RI(r,e),h=s.eventCount;r.__r3f&&(r.__r3f.memoizedProps=l);for(let g=0;g<u.length;g++){let[y,_,A,b]=u[g];if(W_(r)){const R="srgb",L="srgb-linear";y==="encoding"?(y="colorSpace",_=_===3001?R:L):y==="outputEncoding"&&(y="outputColorSpace",_=_===3001?R:L)}let w=r,C=w[y];if(b.length&&(C=b.reduce((E,R)=>E[R],r),!(C&&C.set))){const[E,...R]=b.reverse();w=R.reverse().reduce((L,D)=>L[D],r),y=E}if(_===CI+"remove")if(w.constructor){let E=mC.get(w.constructor);E||(E=new w.constructor,mC.set(w.constructor,E)),_=E[y]}else _=0;if(A)_?s.handlers[y]=_:delete s.handlers[y],s.eventCount=Object.keys(s.handlers).length;else if(C&&C.set&&(C.copy||C instanceof Cd)){if(Array.isArray(_))C.fromArray?C.fromArray(_):C.set(..._);else if(C.copy&&_&&_.constructor&&C.constructor===_.constructor)C.copy(_);else if(_!==void 0){const E=C instanceof mt;!E&&C.setScalar?C.setScalar(_):C instanceof Cd&&_ instanceof Cd?C.mask=_.mask:C.set(_),!AI()&&!a.linear&&E&&C.convertSRGBToLinear()}}else if(w[y]=_,w[y]instanceof In&&w[y].format===Wr&&w[y].type===Js){const E=w[y];W_(E)&&W_(a.gl)?E.colorSpace=a.gl.outputColorSpace:E.encoding=a.gl.outputEncoding}Of(r)}if(s.parent&&a.internal&&r.raycast&&h!==s.eventCount){const g=a.internal.interaction.indexOf(r);g>-1&&a.internal.interaction.splice(g,1),s.eventCount&&a.internal.interaction.push(r)}return!(u.length===1&&u[0][0]==="onUpdate")&&u.length&&(i=r.__r3f)!=null&&i.parent&&Ob(r),r}function Of(r){var e,t;const n=(e=r.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();n&&n.internal.frames===0&&n.invalidate()}function Ob(r){r.onUpdate==null||r.onUpdate(r)}function PI(r,e){r.manual||(SI(r)?(r.left=e.width/-2,r.right=e.width/2,r.top=e.height/2,r.bottom=e.height/-2):r.aspect=e.width/e.height,r.updateProjectionMatrix(),r.updateMatrixWorld())}function Cv(r){return(r.eventObject||r.object).uuid+"/"+r.index+r.instanceId}function QH(){var r;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Gf.DefaultEventPriority;switch((r=e.event)==null?void 0:r.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Gf.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Gf.ContinuousEventPriority;default:return Gf.DefaultEventPriority}}function II(r,e,t,n){const i=t.get(e);i&&(t.delete(e),t.size===0&&(r.delete(n),i.target.releasePointerCapture(n)))}function ZH(r,e){const{internal:t}=r.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,i)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((n,i)=>{II(t.capturedMap,e,n,i)})}function $H(r){function e(l){const{internal:u}=r.getState(),h=l.offsetX-u.initialClick[0],p=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(h*h+p*p))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(h=>{var p;return(p=u.__r3f)==null?void 0:p.handlers["onPointer"+h]}))}function n(l,u){const h=r.getState(),p=new Set,g=[],y=u?u(h.internal.interaction):h.internal.interaction;for(let w=0;w<y.length;w++){const C=xm(y[w]);C&&(C.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(l,h);function _(w){const C=xm(w);if(!C||!C.events.enabled||C.raycaster.camera===null)return[];if(C.raycaster.camera===void 0){var E;C.events.compute==null||C.events.compute(l,C,(E=C.previousRoot)==null?void 0:E.getState()),C.raycaster.camera===void 0&&(C.raycaster.camera=null)}return C.raycaster.camera?C.raycaster.intersectObject(w,!0):[]}let A=y.flatMap(_).sort((w,C)=>{const E=xm(w.object),R=xm(C.object);return!E||!R?w.distance-C.distance:R.events.priority-E.events.priority||w.distance-C.distance}).filter(w=>{const C=Cv(w);return p.has(C)?!1:(p.add(C),!0)});h.events.filter&&(A=h.events.filter(A,h));for(const w of A){let C=w.object;for(;C;){var b;(b=C.__r3f)!=null&&b.eventCount&&g.push({...w,eventObject:C}),C=C.parent}}if("pointerId"in l&&h.internal.capturedMap.has(l.pointerId))for(let w of h.internal.capturedMap.get(l.pointerId).values())p.has(Cv(w.intersection))||g.push(w.intersection);return g}function i(l,u,h,p){const g=r.getState();if(l.length){const y={stopped:!1};for(const _ of l){const A=xm(_.object)||g,{raycaster:b,pointer:w,camera:C,internal:E}=A,R=new q(w.x,w.y,0).unproject(C),L=U=>{var V,ee;return(V=(ee=E.capturedMap.get(U))==null?void 0:ee.has(_.eventObject))!=null?V:!1},D=U=>{const V={intersection:_,target:u.target};E.capturedMap.has(U)?E.capturedMap.get(U).set(_.eventObject,V):E.capturedMap.set(U,new Map([[_.eventObject,V]])),u.target.setPointerCapture(U)},j=U=>{const V=E.capturedMap.get(U);V&&II(E.capturedMap,_.eventObject,V,U)};let O={};for(let U in u){let V=u[U];typeof V!="function"&&(O[U]=V)}let I={..._,...O,pointer:w,intersections:l,stopped:y.stopped,delta:h,unprojectedPoint:R,ray:b.ray,camera:C,stopPropagation(){const U="pointerId"in u&&E.capturedMap.get(u.pointerId);if((!U||U.has(_.eventObject))&&(I.stopped=y.stopped=!0,E.hovered.size&&Array.from(E.hovered.values()).find(V=>V.eventObject===_.eventObject))){const V=l.slice(0,l.indexOf(_));s([...V,_])}},target:{hasPointerCapture:L,setPointerCapture:D,releasePointerCapture:j},currentTarget:{hasPointerCapture:L,setPointerCapture:D,releasePointerCapture:j},nativeEvent:u};if(p(I),y.stopped===!0)break}}return l}function s(l){const{internal:u}=r.getState();for(const h of u.hovered.values())if(!l.length||!l.find(p=>p.object===h.object&&p.index===h.index&&p.instanceId===h.instanceId)){const g=h.eventObject.__r3f,y=g?.handlers;if(u.hovered.delete(Cv(h)),g!=null&&g.eventCount){const _={...h,intersections:l};y.onPointerOut==null||y.onPointerOut(_),y.onPointerLeave==null||y.onPointerLeave(_)}}}function o(l,u){for(let h=0;h<u.length;h++){const p=u[h].__r3f;p==null||p.handlers.onPointerMissed==null||p.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:h}=r.getState();"pointerId"in u&&h.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(u.pointerId)&&(h.capturedMap.delete(u.pointerId),s([]))})}}return function(h){const{onPointerMissed:p,internal:g}=r.getState();g.lastEvent.current=h;const y=l==="onPointerMove",_=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",b=n(h,y?t:void 0),w=_?e(h):0;l==="onPointerDown"&&(g.initialClick=[h.offsetX,h.offsetY],g.initialHits=b.map(E=>E.eventObject)),_&&!b.length&&w<=2&&(o(h,g.interaction),p&&p(h)),y&&s(b);function C(E){const R=E.eventObject,L=R.__r3f,D=L?.handlers;if(L!=null&&L.eventCount)if(y){if(D.onPointerOver||D.onPointerEnter||D.onPointerOut||D.onPointerLeave){const j=Cv(E),O=g.hovered.get(j);O?O.stopped&&E.stopPropagation():(g.hovered.set(j,E),D.onPointerOver==null||D.onPointerOver(E),D.onPointerEnter==null||D.onPointerEnter(E))}D.onPointerMove==null||D.onPointerMove(E)}else{const j=D[l];j?(!_||g.initialHits.includes(R))&&(o(h,g.interaction.filter(O=>!g.initialHits.includes(O))),j(E)):_&&g.initialHits.includes(R)&&o(h,g.interaction.filter(O=>!g.initialHits.includes(O)))}}i(b,h,w,C)}}return{handlePointer:a}}const eG=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],LI=r=>!!(r!=null&&r.render),w1=F.createContext(null),tG=(r,e)=>{const t=xI((a,l)=>{const u=new q,h=new q,p=new q;function g(w=l().camera,C=h,E=l().size){const{width:R,height:L,top:D,left:j}=E,O=R/L;C instanceof q?p.copy(C):p.set(...C);const I=w.getWorldPosition(u).distanceTo(p);if(SI(w))return{width:R/w.zoom,height:L/w.zoom,top:D,left:j,factor:1,distance:I,aspect:O};{const U=w.fov*Math.PI/180,V=2*Math.tan(U/2)*I,ee=V*(R/L);return{width:ee,height:V,top:D,left:j,factor:R/ee,distance:I,aspect:O}}}let y;const _=w=>a(C=>({performance:{...C.performance,current:w}})),A=new We;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(w=1)=>r(l(),w),advance:(w,C)=>e(w,C,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new g1,pointer:A,mouse:A,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const w=l();y&&clearTimeout(y),w.performance.current!==w.performance.min&&_(w.performance.min),y=setTimeout(()=>_(l().performance.max),w.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:g},setEvents:w=>a(C=>({...C,events:{...C.events,...w}})),setSize:(w,C,E,R,L)=>{const D=l().camera,j={width:w,height:C,top:R||0,left:L||0,updateStyle:E};a(O=>({size:j,viewport:{...O.viewport,...g(D,h,j)}}))},setDpr:w=>a(C=>{const E=TI(w);return{viewport:{...C.viewport,dpr:E,initialDpr:C.viewport.initialDpr||E}}}),setFrameloop:(w="always")=>{const C=l().clock;C.stop(),C.elapsedTime=0,w!=="never"&&(C.start(),C.elapsedTime=0),a(()=>({frameloop:w}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:F.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(w,C,E)=>{const R=l().internal;return R.priority=R.priority+(C>0?1:0),R.subscribers.push({ref:w,priority:C,store:E}),R.subscribers=R.subscribers.sort((L,D)=>L.priority-D.priority),()=>{const L=l().internal;L!=null&&L.subscribers&&(L.priority=L.priority-(C>0?1:0),L.subscribers=L.subscribers.filter(D=>D.ref!==w))}}}}}),n=t.getState();let i=n.size,s=n.viewport.dpr,o=n.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:h,set:p}=t.getState();if(l!==i||u.dpr!==s){var g;i=l,s=u.dpr,PI(a,l),h.setPixelRatio(u.dpr);const y=(g=l.updateStyle)!=null?g:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(l.width,l.height,y)}a!==o&&(o=a,p(y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>r(a)),t};let Tv,nG=new Set,rG=new Set,iG=new Set;function K_(r,e){if(r.size)for(const{callback:t}of r.values())t(e)}function _m(r,e){switch(r){case"before":return K_(nG,e);case"after":return K_(rG,e);case"tail":return K_(iG,e)}}let Y_,q_;function Q_(r,e,t){let n=e.clock.getDelta();for(e.frameloop==="never"&&typeof r=="number"&&(n=r-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=r),Y_=e.internal.subscribers,Tv=0;Tv<Y_.length;Tv++)q_=Y_[Tv],q_.ref.current(q_.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function sG(r){let e=!1,t,n,i;function s(l){n=requestAnimationFrame(s),e=!0,t=0,_m("before",l);for(const h of r.values()){var u;i=h.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((u=i.gl.xr)!=null&&u.isPresenting)&&(t+=Q_(l,i))}if(_m("after",l),t===0)return _m("tail",l),e=!1,cancelAnimationFrame(n)}function o(l,u=1){var h;if(!l)return r.forEach(p=>o(p.store.getState()),u);(h=l.gl.xr)!=null&&h.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+u),e||(e=!0,requestAnimationFrame(s)))}function a(l,u=!0,h,p){if(u&&_m("before",l),h)Q_(l,h,p);else for(const g of r.values())Q_(l,g.store.getState());u&&_m("after",l)}return{loop:s,invalidate:o,advance:a}}function b1(){const r=F.useContext(w1);if(!r)throw new Error("R3F: Hooks can only be used within the Canvas component!");return r}function $r(r=t=>t,e){return b1()(r,e)}function ou(r,e=0){const t=b1(),n=t.getState().internal.subscribe,i=EI(r);return Ig(()=>n(i,e,t),[e,n,t]),null}function NI(r,e){return function(t,...n){const i=new t;return r&&r(i),Promise.all(n.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,YH(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l.message}`))))))}}function _o(r,e,t,n){const i=Array.isArray(e)?e:[e],s=HH(NI(t,n),[r,...i],{equal:or.equ});return Array.isArray(e)?s:s[0]}_o.preload=function(r,e,t){const n=Array.isArray(e)?e:[e];return GH(NI(t),[r,...n])};_o.clear=function(r,e){const t=Array.isArray(e)?e:[e];return VH([r,...t])};const sp=new Map,{invalidate:yC,advance:xC}=sG(sp),{reconciler:dg,applyProps:vo}=WH(sp,QH),Lf={objects:"shallow",strict:!1},oG=(r,e)=>{const t=typeof r=="function"?r(e):r;return LI(t)?t:new bg({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...r})};function aG(r,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&r.parentElement){const{width:t,height:n,top:i,left:s}=r.parentElement.getBoundingClientRect();return{width:t,height:n,top:i,left:s}}else if(typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas)return{width:r.width,height:r.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function lG(r){const e=sp.get(r),t=e?.fiber,n=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=n||tG(yC,xC),o=t||dg.createContainer(s,Gf.ConcurrentRoot,null,!1,null,"",i,null);e||sp.set(r,{fiber:o,store:s});let a,l=!1,u;return{configure(h={}){let{gl:p,size:g,scene:y,events:_,onCreated:A,shadows:b=!1,linear:w=!1,flat:C=!1,legacy:E=!1,orthographic:R=!1,frameloop:L="always",dpr:D=[1,2],performance:j,raycaster:O,camera:I,onPointerMissed:U}=h,V=s.getState(),ee=V.gl;V.gl||V.set({gl:ee=oG(p,r)});let te=V.raycaster;te||V.set({raycaster:te=new x1});const{params:ne,...le}=O||{};if(or.equ(le,te,Lf)||vo(te,{...le}),or.equ(ne,te.params,Lf)||vo(te,{params:{...te.params,...ne}}),!V.camera||V.camera===u&&!or.equ(u,I,Lf)){u=I;const Z=I instanceof _g,ye=Z?I:R?new xo(0,0,0,0,.1,1e3):new ar(75,0,.1,1e3);Z||(ye.position.z=5,I&&vo(ye,I),!V.camera&&!(I!=null&&I.rotation)&&ye.lookAt(0,0,0)),V.set({camera:ye})}if(!V.scene){let Z;y instanceof Il?Z=y:(Z=new Il,y&&vo(Z,y)),V.set({scene:Ff(Z)})}if(!V.xr){var de;const Z=(Le,pe)=>{const Ae=s.getState();Ae.frameloop!=="never"&&xC(Le,!0,Ae,pe)},ye=()=>{const Le=s.getState();Le.gl.xr.enabled=Le.gl.xr.isPresenting,Le.gl.xr.setAnimationLoop(Le.gl.xr.isPresenting?Z:null),Le.gl.xr.isPresenting||yC(Le)},be={connect(){const Le=s.getState().gl;Le.xr.addEventListener("sessionstart",ye),Le.xr.addEventListener("sessionend",ye)},disconnect(){const Le=s.getState().gl;Le.xr.removeEventListener("sessionstart",ye),Le.xr.removeEventListener("sessionend",ye)}};typeof((de=ee.xr)==null?void 0:de.addEventListener)=="function"&&be.connect(),V.set({xr:be})}if(ee.shadowMap){const Z=ee.shadowMap.enabled,ye=ee.shadowMap.type;if(ee.shadowMap.enabled=!!b,or.boo(b))ee.shadowMap.type=zm;else if(or.str(b)){var ie;const be={basic:RR,percentage:Ry,soft:zm,variance:Yo};ee.shadowMap.type=(ie=be[b])!=null?ie:zm}else or.obj(b)&&Object.assign(ee.shadowMap,b);(Z!==ee.shadowMap.enabled||ye!==ee.shadowMap.type)&&(ee.shadowMap.needsUpdate=!0)}const J=AI();J&&("enabled"in J?J.enabled=!E:"legacyMode"in J&&(J.legacyMode=E)),vo(ee,{outputEncoding:w?3e3:3001,toneMapping:C?Na:EA}),V.legacy!==E&&V.set(()=>({legacy:E})),V.linear!==w&&V.set(()=>({linear:w})),V.flat!==C&&V.set(()=>({flat:C})),p&&!or.fun(p)&&!LI(p)&&!or.equ(p,ee,Lf)&&vo(ee,p),_&&!V.events.handlers&&V.set({events:_(s)});const X=aG(r,g);return or.equ(X,V.size,Lf)||V.setSize(X.width,X.height,X.updateStyle,X.top,X.left),D&&V.viewport.dpr!==TI(D)&&V.setDpr(D),V.frameloop!==L&&V.setFrameloop(L),V.onPointerMissed||V.set({onPointerMissed:U}),j&&!or.equ(j,V.performance,Lf)&&V.set(Z=>({performance:{...Z.performance,...j}})),a=A,l=!0,this},render(h){return l||this.configure(),dg.updateContainer(F.createElement(cG,{store:s,children:h,onCreated:a,rootElement:r}),o,null,()=>{}),s},unmount(){BI(r)}}}function cG({store:r,children:e,onCreated:t,rootElement:n}){return Ig(()=>{const i=r.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),r.getState().events.connected||i.events.connect==null||i.events.connect(n)},[]),F.createElement(w1.Provider,{value:r},e)}function BI(r,e){const t=sp.get(r),n=t?.fiber;if(n){const i=t?.store.getState();i&&(i.internal.active=!1),dg.updateContainer(null,n,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),qH(i),sp.delete(r)}catch{}},500)})}}function uG(r,e,t){return F.createElement(dG,{key:e.uuid,children:r,container:e,state:t})}function dG({state:r={},children:e,container:t}){const{events:n,size:i,...s}=r,o=b1(),[a]=F.useState(()=>new x1),[l]=F.useState(()=>new We),u=F.useCallback((p,g)=>{const y={...p};Object.keys(p).forEach(A=>{(eG.includes(A)||p[A]!==g[A]&&g[A])&&delete y[A]});let _;if(g&&i){const A=g.camera;_=p.viewport.getCurrentViewport(A,new q,i),A!==p.camera&&PI(A,i)}return{...y,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...p.events,...g?.events,...n},size:{...p.size,...i},viewport:{...p.viewport,..._},...s}},[r]),[h]=F.useState(()=>{const p=o.getState();return xI((y,_)=>({...p,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...p.events,...n},size:{...p.size,...i},...s,set:y,get:_,setEvents:A=>y(b=>({...b,events:{...b.events,...A}}))}))});return F.useEffect(()=>{const p=o.subscribe(g=>h.setState(y=>u(g,y)));return()=>{p(),h.destroy()}},[]),F.useEffect(()=>{h.setState(p=>u(o.getState(),p))},[u]),F.createElement(F.Fragment,null,dg.createPortal(F.createElement(w1.Provider,{value:h},e),h,null))}dg.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:F.version});function os(){return os=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},os.apply(null,arguments)}var Z_,_C;function hG(){if(_C)return Z_;_C=1;function r(e,t,n){var i,s,o,a,l;t==null&&(t=100);function u(){var p=Date.now()-a;p<t&&p>=0?i=setTimeout(u,t-p):(i=null,n||(l=e.apply(o,s),o=s=null))}var h=function(){o=this,s=arguments,a=Date.now();var p=n&&!i;return i||(i=setTimeout(u,t)),p&&(l=e.apply(o,s),o=s=null),l};return h.clear=function(){i&&(clearTimeout(i),i=null)},h.flush=function(){i&&(l=e.apply(o,s),o=s=null,clearTimeout(i),i=null)},h}return r.debounce=r,Z_=r,Z_}var fG=hG();const wC=lp(fG);function pG(r){let{debounce:e,scroll:t,polyfill:n,offsetSize:i}=r===void 0?{debounce:0,scroll:!1,offsetSize:!1}:r;const s=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=F.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=F.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),u=e?typeof e=="number"?e:e.scroll:null,h=e?typeof e=="number"?e:e.resize:null,p=F.useRef(!1);F.useEffect(()=>(p.current=!0,()=>void(p.current=!1)));const[g,y,_]=F.useMemo(()=>{const C=()=>{if(!l.current.element)return;const{left:E,top:R,width:L,height:D,bottom:j,right:O,x:I,y:U}=l.current.element.getBoundingClientRect(),V={left:E,top:R,width:L,height:D,bottom:j,right:O,x:I,y:U};l.current.element instanceof HTMLElement&&i&&(V.height=l.current.element.offsetHeight,V.width=l.current.element.offsetWidth),Object.freeze(V),p.current&&!yG(l.current.lastBounds,V)&&a(l.current.lastBounds=V)};return[C,h?wC(C,h):C,u?wC(C,u):C]},[a,i,u,h]);function A(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(C=>C.removeEventListener("scroll",_,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function b(){l.current.element&&(l.current.resizeObserver=new s(_),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(C=>C.addEventListener("scroll",_,{capture:!0,passive:!0})))}const w=C=>{!C||C===l.current.element||(A(),l.current.element=C,l.current.scrollContainers=kI(C),b())};return gG(_,!!t),mG(y),F.useEffect(()=>{A(),b()},[t,_,y]),F.useEffect(()=>A,[]),[w,o,g]}function mG(r){F.useEffect(()=>{const e=r;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[r])}function gG(r,e){F.useEffect(()=>{if(e){const t=r;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[r,e])}function kI(r){const e=[];if(!r||r===document.body)return e;const{overflow:t,overflowX:n,overflowY:i}=window.getComputedStyle(r);return[t,n,i].some(s=>s==="auto"||s==="scroll")&&e.push(r),[...e,...kI(r.parentElement)]}const vG=["x","y","top","bottom","left","right","width","height"],yG=(r,e)=>vG.every(t=>r[t]===e[t]);var xG=Object.defineProperty,_G=Object.defineProperties,wG=Object.getOwnPropertyDescriptors,bC=Object.getOwnPropertySymbols,bG=Object.prototype.hasOwnProperty,AG=Object.prototype.propertyIsEnumerable,AC=(r,e,t)=>e in r?xG(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,SC=(r,e)=>{for(var t in e||(e={}))bG.call(e,t)&&AC(r,t,e[t]);if(bC)for(var t of bC(e))AG.call(e,t)&&AC(r,t,e[t]);return r},SG=(r,e)=>_G(r,wG(e));function DI(r,e,t){if(!r)return;if(t(r)===!0)return r;let n=r.child;for(;n;){const i=DI(n,e,t);if(i)return i;n=n.sibling}}function FI(r){try{return Object.defineProperties(r,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return r}}const A1=FI(F.createContext(null));class OI extends F.Component{render(){return F.createElement(A1.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:EC,ReactCurrentDispatcher:MC}=F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function EG(){const r=F.useContext(A1);if(r===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=F.useId();return F.useMemo(()=>{for(const n of[EC?.current,r,r?.alternate]){if(!n)continue;const i=DI(n,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[r,e])}function MG(){var r,e;const t=EG(),[n]=F.useState(()=>new Map);n.clear();let i=t;for(;i;){const s=(r=i.type)==null?void 0:r._context;s&&s!==A1&&!n.has(s)&&n.set(s,(e=MC?.current)==null?void 0:e.readContext(FI(s))),i=i.return}return n}function CG(){const r=MG();return F.useMemo(()=>Array.from(r.keys()).reduce((e,t)=>n=>F.createElement(e,null,F.createElement(t.Provider,SG(SC({},n),{value:r.get(t)}))),e=>F.createElement(OI,SC({},e))),[r])}const $_={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function TG(r){const{handlePointer:e}=$H(r);return{priority:1,enabled:!0,compute(t,n,i){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys($_).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:i}=r.getState();(t=i.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var n;const{set:i,events:s}=r.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((n=s.handlers)!=null?n:[]).forEach(([o,a])=>{const[l,u]=$_[o];t.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:t,events:n}=r.getState();if(n.connected){var i;Object.entries((i=n.handlers)!=null?i:[]).forEach(([s,o])=>{if(n&&n.connected instanceof HTMLElement){const[a]=$_[s];n.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const RG=F.forwardRef(function({children:e,fallback:t,resize:n,style:i,gl:s,events:o=TG,eventSource:a,eventPrefix:l,shadows:u,linear:h,flat:p,legacy:g,orthographic:y,frameloop:_,dpr:A,performance:b,raycaster:w,camera:C,onPointerMissed:E,onCreated:R,...L},D){F.useMemo(()=>bI(TH),[]);const j=CG(),[O,I]=pG({scroll:!0,debounce:{scroll:50,resize:0},...n}),U=F.useRef(null),V=F.useRef(null);F.useImperativeHandle(D,()=>U.current);const ee=EI(E),[te,ne]=F.useState(!1),[le,de]=F.useState(!1);if(te)throw te;if(le)throw le;const ie=F.useRef(null);Ig(()=>{const Q=U.current;I.width>0&&I.height>0&&Q&&(ie.current||(ie.current=lG(Q)),ie.current.configure({gl:s,events:o,shadows:u,linear:h,flat:p,legacy:g,orthographic:y,frameloop:_,dpr:A,performance:b,raycaster:w,camera:C,size:I,onPointerMissed:(...H)=>ee.current==null?void 0:ee.current(...H),onCreated:H=>{H.events.connect==null||H.events.connect(a?JH(a)?a.current:a:V.current),l&&H.setEvents({compute:(X,Z)=>{const ye=X[l+"X"],be=X[l+"Y"];Z.pointer.set(ye/Z.size.width*2-1,-(be/Z.size.height)*2+1),Z.raycaster.setFromCamera(Z.pointer,Z.camera)}}),R?.(H)}}),ie.current.render(F.createElement(j,null,F.createElement(MI,{set:de},F.createElement(F.Suspense,{fallback:F.createElement(XH,{set:ne})},e)))))}),F.useEffect(()=>{const Q=U.current;if(Q)return()=>BI(Q)},[]);const J=a?"none":"auto";return F.createElement("div",os({ref:V,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:J,...i}},L),F.createElement("div",{ref:O,style:{width:"100%",height:"100%"}},F.createElement("canvas",{ref:U,style:{display:"block"}},t)))}),Lg=F.forwardRef(function(e,t){return F.createElement(OI,null,F.createElement(RG,os({},e,{ref:t})))});var Rv={},ew={exports:{}},bs={},tw={exports:{}},nw={};var CC;function PG(){return CC||(CC=1,(function(r){function e(J,Q){var H=J.length;J.push(Q);e:for(;0<H;){var X=H-1>>>1,Z=J[X];if(0<i(Z,Q))J[X]=Q,J[H]=Z,H=X;else break e}}function t(J){return J.length===0?null:J[0]}function n(J){if(J.length===0)return null;var Q=J[0],H=J.pop();if(H!==Q){J[0]=H;e:for(var X=0,Z=J.length,ye=Z>>>1;X<ye;){var be=2*(X+1)-1,Le=J[be],pe=be+1,Ae=J[pe];if(0>i(Le,H))pe<Z&&0>i(Ae,Le)?(J[X]=Ae,J[pe]=H,X=pe):(J[X]=Le,J[be]=H,X=be);else if(pe<Z&&0>i(Ae,H))J[X]=Ae,J[pe]=H,X=pe;else break e}}return Q}function i(J,Q){var H=J.sortIndex-Q.sortIndex;return H!==0?H:J.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();r.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,p=null,g=3,y=!1,_=!1,A=!1,b=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(J){for(var Q=t(u);Q!==null;){if(Q.callback===null)n(u);else if(Q.startTime<=J)n(u),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=t(u)}}function R(J){if(A=!1,E(J),!_)if(t(l)!==null)_=!0,de(L);else{var Q=t(u);Q!==null&&ie(R,Q.startTime-J)}}function L(J,Q){_=!1,A&&(A=!1,w(O),O=-1),y=!0;var H=g;try{for(E(Q),p=t(l);p!==null&&(!(p.expirationTime>Q)||J&&!V());){var X=p.callback;if(typeof X=="function"){p.callback=null,g=p.priorityLevel;var Z=X(p.expirationTime<=Q);Q=r.unstable_now(),typeof Z=="function"?p.callback=Z:p===t(l)&&n(l),E(Q)}else n(l);p=t(l)}if(p!==null)var ye=!0;else{var be=t(u);be!==null&&ie(R,be.startTime-Q),ye=!1}return ye}finally{p=null,g=H,y=!1}}var D=!1,j=null,O=-1,I=5,U=-1;function V(){return!(r.unstable_now()-U<I)}function ee(){if(j!==null){var J=r.unstable_now();U=J;var Q=!0;try{Q=j(!0,J)}finally{Q?te():(D=!1,j=null)}}else D=!1}var te;if(typeof C=="function")te=function(){C(ee)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,le=ne.port2;ne.port1.onmessage=ee,te=function(){le.postMessage(null)}}else te=function(){b(ee,0)};function de(J){j=J,D||(D=!0,te())}function ie(J,Q){O=b(function(){J(r.unstable_now())},Q)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(J){J.callback=null},r.unstable_continueExecution=function(){_||y||(_=!0,de(L))},r.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<J?Math.floor(1e3/J):5},r.unstable_getCurrentPriorityLevel=function(){return g},r.unstable_getFirstCallbackNode=function(){return t(l)},r.unstable_next=function(J){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var H=g;g=Q;try{return J()}finally{g=H}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(J,Q){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var H=g;g=J;try{return Q()}finally{g=H}},r.unstable_scheduleCallback=function(J,Q,H){var X=r.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?X+H:X):H=X,J){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=H+Z,J={id:h++,callback:Q,priorityLevel:J,startTime:H,expirationTime:Z,sortIndex:-1},H>X?(J.sortIndex=H,e(u,J),t(l)===null&&J===t(u)&&(A?(w(O),O=-1):A=!0,ie(R,H-X))):(J.sortIndex=Z,e(l,J),_||y||(_=!0,de(L))),J},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(J){var Q=g;return function(){var H=g;g=Q;try{return J.apply(this,arguments)}finally{g=H}}}})(nw)),nw}var TC;function IG(){return TC||(TC=1,tw.exports=PG()),tw.exports}var RC;function LG(){if(RC)return bs;RC=1;var r=zd(),e=IG();function t(c){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+c,v=1;v<arguments.length;v++)d+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function s(c,d){o(c,d),o(c+"Capture",d)}function o(c,d){for(i[c]=d,c=0;c<d.length;c++)n.add(d[c])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function g(c){return l.call(p,c)?!0:l.call(h,c)?!1:u.test(c)?p[c]=!0:(h[c]=!0,!1)}function y(c,d,v,M){if(v!==null&&v.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return M?!1:v!==null?!v.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function _(c,d,v,M){if(d===null||typeof d>"u"||y(c,d,v,M))return!0;if(M)return!1;if(v!==null)switch(v.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function A(c,d,v,M,P,B,W){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=M,this.attributeNamespace=P,this.mustUseProperty=v,this.propertyName=c,this.type=d,this.sanitizeURL=B,this.removeEmptyString=W}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){b[c]=new A(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var d=c[0];b[d]=new A(d,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){b[c]=new A(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){b[c]=new A(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){b[c]=new A(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){b[c]=new A(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){b[c]=new A(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){b[c]=new A(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){b[c]=new A(c,5,!1,c.toLowerCase(),null,!1,!1)});var w=/[\-:]([a-z])/g;function C(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var d=c.replace(w,C);b[d]=new A(d,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var d=c.replace(w,C);b[d]=new A(d,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var d=c.replace(w,C);b[d]=new A(d,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){b[c]=new A(c,1,!1,c.toLowerCase(),null,!1,!1)}),b.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){b[c]=new A(c,1,!1,c.toLowerCase(),null,!0,!0)});function E(c,d,v,M){var P=b.hasOwnProperty(d)?b[d]:null;(P!==null?P.type!==0:M||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(_(d,v,P,M)&&(v=null),M||P===null?g(d)&&(v===null?c.removeAttribute(d):c.setAttribute(d,""+v)):P.mustUseProperty?c[P.propertyName]=v===null?P.type===3?!1:"":v:(d=P.attributeName,M=P.attributeNamespace,v===null?c.removeAttribute(d):(P=P.type,v=P===3||P===4&&v===!0?"":""+v,M?c.setAttributeNS(M,d,v):c.setAttribute(d,v))))}var R=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),D=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),V=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),le=Symbol.for("react.memo"),de=Symbol.for("react.lazy"),ie=Symbol.for("react.offscreen"),J=Symbol.iterator;function Q(c){return c===null||typeof c!="object"?null:(c=J&&c[J]||c["@@iterator"],typeof c=="function"?c:null)}var H=Object.assign,X;function Z(c){if(X===void 0)try{throw Error()}catch(v){var d=v.stack.trim().match(/\n( *(at )?)/);X=d&&d[1]||""}return`
`+X+c}var ye=!1;function be(c,d){if(!c||ye)return"";ye=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(ke){var M=ke}Reflect.construct(c,[],d)}else{try{d.call()}catch(ke){M=ke}c.call(d.prototype)}else{try{throw Error()}catch(ke){M=ke}c()}}catch(ke){if(ke&&M&&typeof ke.stack=="string"){for(var P=ke.stack.split(`
`),B=M.stack.split(`
`),W=P.length-1,ue=B.length-1;1<=W&&0<=ue&&P[W]!==B[ue];)ue--;for(;1<=W&&0<=ue;W--,ue--)if(P[W]!==B[ue]){if(W!==1||ue!==1)do if(W--,ue--,0>ue||P[W]!==B[ue]){var me=`
`+P[W].replace(" at new "," at ");return c.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",c.displayName)),me}while(1<=W&&0<=ue);break}}}finally{ye=!1,Error.prepareStackTrace=v}return(c=c?c.displayName||c.name:"")?Z(c):""}function Le(c){switch(c.tag){case 5:return Z(c.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return c=be(c.type,!1),c;case 11:return c=be(c.type.render,!1),c;case 1:return c=be(c.type,!0),c;default:return""}}function pe(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case j:return"Fragment";case D:return"Portal";case I:return"Profiler";case O:return"StrictMode";case te:return"Suspense";case ne:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case V:return(c.displayName||"Context")+".Consumer";case U:return(c._context.displayName||"Context")+".Provider";case ee:var d=c.render;return c=c.displayName,c||(c=d.displayName||d.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case le:return d=c.displayName||null,d!==null?d:pe(c.type)||"Memo";case de:d=c._payload,c=c._init;try{return pe(c(d))}catch{}}return null}function Ae(c){var d=c.type;switch(c.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=d.render,c=c.displayName||c.name||"",d.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(d);case 8:return d===O?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function je(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function ft(c){var d=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function St(c){var d=ft(c)?"checked":"value",v=Object.getOwnPropertyDescriptor(c.constructor.prototype,d),M=""+c[d];if(!c.hasOwnProperty(d)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var P=v.get,B=v.set;return Object.defineProperty(c,d,{configurable:!0,get:function(){return P.call(this)},set:function(W){M=""+W,B.call(this,W)}}),Object.defineProperty(c,d,{enumerable:v.enumerable}),{getValue:function(){return M},setValue:function(W){M=""+W},stopTracking:function(){c._valueTracker=null,delete c[d]}}}}function Xe(c){c._valueTracker||(c._valueTracker=St(c))}function ce(c){if(!c)return!1;var d=c._valueTracker;if(!d)return!0;var v=d.getValue(),M="";return c&&(M=ft(c)?c.checked?"true":"false":c.value),c=M,c!==v?(d.setValue(c),!0):!1}function ge(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function we(c,d){var v=d.checked;return H({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:v??c._wrapperState.initialChecked})}function De(c,d){var v=d.defaultValue==null?"":d.defaultValue,M=d.checked!=null?d.checked:d.defaultChecked;v=je(d.value!=null?d.value:v),c._wrapperState={initialChecked:M,initialValue:v,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function Fe(c,d){d=d.checked,d!=null&&E(c,"checked",d,!1)}function Qe(c,d){Fe(c,d);var v=je(d.value),M=d.type;if(v!=null)M==="number"?(v===0&&c.value===""||c.value!=v)&&(c.value=""+v):c.value!==""+v&&(c.value=""+v);else if(M==="submit"||M==="reset"){c.removeAttribute("value");return}d.hasOwnProperty("value")?lt(c,d.type,v):d.hasOwnProperty("defaultValue")&&lt(c,d.type,je(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(c.defaultChecked=!!d.defaultChecked)}function st(c,d,v){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var M=d.type;if(!(M!=="submit"&&M!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+c._wrapperState.initialValue,v||d===c.value||(c.value=d),c.defaultValue=d}v=c.name,v!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,v!==""&&(c.name=v)}function lt(c,d,v){(d!=="number"||ge(c.ownerDocument)!==c)&&(v==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+v&&(c.defaultValue=""+v))}var Et=Array.isArray;function Ut(c,d,v,M){if(c=c.options,d){d={};for(var P=0;P<v.length;P++)d["$"+v[P]]=!0;for(v=0;v<c.length;v++)P=d.hasOwnProperty("$"+c[v].value),c[v].selected!==P&&(c[v].selected=P),P&&M&&(c[v].defaultSelected=!0)}else{for(v=""+je(v),d=null,P=0;P<c.length;P++){if(c[P].value===v){c[P].selected=!0,M&&(c[P].defaultSelected=!0);return}d!==null||c[P].disabled||(d=c[P])}d!==null&&(d.selected=!0)}}function dn(c,d){if(d.dangerouslySetInnerHTML!=null)throw Error(t(91));return H({},d,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function se(c,d){var v=d.value;if(v==null){if(v=d.children,d=d.defaultValue,v!=null){if(d!=null)throw Error(t(92));if(Et(v)){if(1<v.length)throw Error(t(93));v=v[0]}d=v}d==null&&(d=""),v=d}c._wrapperState={initialValue:je(v)}}function Y(c,d){var v=je(d.value),M=je(d.defaultValue);v!=null&&(v=""+v,v!==c.value&&(c.value=v),d.defaultValue==null&&c.defaultValue!==v&&(c.defaultValue=v)),M!=null&&(c.defaultValue=""+M)}function Ce(c){var d=c.textContent;d===c._wrapperState.initialValue&&d!==""&&d!==null&&(c.value=d)}function et(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ke(c,d){return c==null||c==="http://www.w3.org/1999/xhtml"?et(d):c==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var qe,xt=(function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,v,M,P){MSApp.execUnsafeLocalFunction(function(){return c(d,v,M,P)})}:c})(function(c,d){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=d;else{for(qe=qe||document.createElement("div"),qe.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=qe.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;d.firstChild;)c.appendChild(d.firstChild)}});function tt(c,d){if(d){var v=c.firstChild;if(v&&v===c.lastChild&&v.nodeType===3){v.nodeValue=d;return}}c.textContent=d}var Be={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ft=["Webkit","ms","Moz","O"];Object.keys(Be).forEach(function(c){Ft.forEach(function(d){d=d+c.charAt(0).toUpperCase()+c.substring(1),Be[d]=Be[c]})});function Ct(c,d,v){return d==null||typeof d=="boolean"||d===""?"":v||typeof d!="number"||d===0||Be.hasOwnProperty(c)&&Be[c]?(""+d).trim():d+"px"}function vt(c,d){c=c.style;for(var v in d)if(d.hasOwnProperty(v)){var M=v.indexOf("--")===0,P=Ct(v,d[v],M);v==="float"&&(v="cssFloat"),M?c.setProperty(v,P):c[v]=P}}var bt=H({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function he(c,d){if(d){if(bt[c]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(t(137,c));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(t(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(t(61))}if(d.style!=null&&typeof d.style!="object")throw Error(t(62))}}function Ue(c,d){if(c.indexOf("-")===-1)return typeof d.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nt=null;function fe(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Se=null,Me=null,Ze=null;function pt(c){if(c=Io(c)){if(typeof Se!="function")throw Error(t(280));var d=c.stateNode;d&&(d=Rh(d),Se(c.stateNode,c.type,d))}}function en(c){Me?Ze?Ze.push(c):Ze=[c]:Me=c}function an(){if(Me){var c=Me,d=Ze;if(Ze=Me=null,pt(c),d)for(c=0;c<d.length;c++)pt(d[c])}}function vn(c,d){return c(d)}function _r(){}var hn=!1;function cr(c,d,v){if(hn)return c(d,v);hn=!0;try{return vn(c,d,v)}finally{hn=!1,(Me!==null||Ze!==null)&&(_r(),an())}}function zn(c,d){var v=c.stateNode;if(v===null)return null;var M=Rh(v);if(M===null)return null;v=M[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(M=!M.disabled)||(c=c.type,M=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!M;break e;default:c=!1}if(c)return null;if(v&&typeof v!="function")throw Error(t(231,d,typeof v));return v}var ia=!1;if(a)try{var Qs={};Object.defineProperty(Qs,"passive",{get:function(){ia=!0}}),window.addEventListener("test",Qs,Qs),window.removeEventListener("test",Qs,Qs)}catch{ia=!1}function bo(c,d,v,M,P,B,W,ue,me){var ke=Array.prototype.slice.call(arguments,3);try{d.apply(v,ke)}catch($e){this.onError($e)}}var Ti=!1,Gi=null,Er=!1,$t=null,Ol={onError:function(c){Ti=!0,Gi=c}};function lu(c,d,v,M,P,B,W,ue,me){Ti=!1,Gi=null,bo.apply(Ol,arguments)}function G(c,d,v,M,P,B,W,ue,me){if(lu.apply(this,arguments),Ti){if(Ti){var ke=Gi;Ti=!1,Gi=null}else throw Error(t(198));Er||(Er=!0,$t=ke)}}function k(c){var d=c,v=c;if(c.alternate)for(;d.return;)d=d.return;else{c=d;do d=c,(d.flags&4098)!==0&&(v=d.return),c=d.return;while(c)}return d.tag===3?v:null}function K(c){if(c.tag===13){var d=c.memoizedState;if(d===null&&(c=c.alternate,c!==null&&(d=c.memoizedState)),d!==null)return d.dehydrated}return null}function re(c){if(k(c)!==c)throw Error(t(188))}function $(c){var d=c.alternate;if(!d){if(d=k(c),d===null)throw Error(t(188));return d!==c?null:c}for(var v=c,M=d;;){var P=v.return;if(P===null)break;var B=P.alternate;if(B===null){if(M=P.return,M!==null){v=M;continue}break}if(P.child===B.child){for(B=P.child;B;){if(B===v)return re(P),c;if(B===M)return re(P),d;B=B.sibling}throw Error(t(188))}if(v.return!==M.return)v=P,M=B;else{for(var W=!1,ue=P.child;ue;){if(ue===v){W=!0,v=P,M=B;break}if(ue===M){W=!0,M=P,v=B;break}ue=ue.sibling}if(!W){for(ue=B.child;ue;){if(ue===v){W=!0,v=B,M=P;break}if(ue===M){W=!0,M=B,v=P;break}ue=ue.sibling}if(!W)throw Error(t(189))}}if(v.alternate!==M)throw Error(t(190))}if(v.tag!==3)throw Error(t(188));return v.stateNode.current===v?c:d}function ae(c){return c=$(c),c!==null?Te(c):null}function Te(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var d=Te(c);if(d!==null)return d;c=c.sibling}return null}var Ne=e.unstable_scheduleCallback,He=e.unstable_cancelCallback,Ge=e.unstable_shouldYield,Je=e.unstable_requestPaint,Pe=e.unstable_now,_t=e.unstable_getCurrentPriorityLevel,at=e.unstable_ImmediatePriority,ut=e.unstable_UserBlockingPriority,Lt=e.unstable_NormalPriority,Ht=e.unstable_LowPriority,Ot=e.unstable_IdlePriority,gt=null,kt=null;function Pt(c){if(kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(gt,c,void 0,(c.current.flags&128)===128)}catch{}}var jt=Math.clz32?Math.clz32:On,Fn=Math.log,Yt=Math.LN2;function On(c){return c>>>=0,c===0?32:31-(Fn(c)/Yt|0)|0}var yn=64,Ln=4194304;function Xn(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Xt(c,d){var v=c.pendingLanes;if(v===0)return 0;var M=0,P=c.suspendedLanes,B=c.pingedLanes,W=v&268435455;if(W!==0){var ue=W&~P;ue!==0?M=Xn(ue):(B&=W,B!==0&&(M=Xn(B)))}else W=v&~P,W!==0?M=Xn(W):B!==0&&(M=Xn(B));if(M===0)return 0;if(d!==0&&d!==M&&(d&P)===0&&(P=M&-M,B=d&-d,P>=B||P===16&&(B&4194240)!==0))return d;if((M&4)!==0&&(M|=v&16),d=c.entangledLanes,d!==0)for(c=c.entanglements,d&=M;0<d;)v=31-jt(d),P=1<<v,M|=c[v],d&=~P;return M}function nr(c,d){switch(c){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nn(c,d){for(var v=c.suspendedLanes,M=c.pingedLanes,P=c.expirationTimes,B=c.pendingLanes;0<B;){var W=31-jt(B),ue=1<<W,me=P[W];me===-1?((ue&v)===0||(ue&M)!==0)&&(P[W]=nr(ue,d)):me<=d&&(c.expiredLanes|=ue),B&=~ue}}function mn(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function Kn(){var c=yn;return yn<<=1,(yn&4194240)===0&&(yn=64),c}function Ls(c){for(var d=[],v=0;31>v;v++)d.push(c);return d}function Mr(c,d,v){c.pendingLanes|=d,d!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,d=31-jt(d),c[d]=v}function Zs(c,d){var v=c.pendingLanes&~d;c.pendingLanes=d,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=d,c.mutableReadLanes&=d,c.entangledLanes&=d,d=c.entanglements;var M=c.eventTimes;for(c=c.expirationTimes;0<v;){var P=31-jt(v),B=1<<P;d[P]=0,M[P]=-1,c[P]=-1,v&=~B}}function Ul(c,d){var v=c.entangledLanes|=d;for(c=c.entanglements;v;){var M=31-jt(v),P=1<<M;P&d|c[M]&d&&(c[M]|=d),v&=~P}}var Tn=0;function jl(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var cu,xp,jg,Qd,Zd,Ua=!1,$d=[],$s=null,ln=null,Ao=null,ja=new Map,zl=new Map,sa=[],mx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cr(c,d){switch(c){case"focusin":case"focusout":$s=null;break;case"dragenter":case"dragleave":ln=null;break;case"mouseover":case"mouseout":Ao=null;break;case"pointerover":case"pointerout":ja.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":zl.delete(d.pointerId)}}function za(c,d,v,M,P,B){return c===null||c.nativeEvent!==B?(c={blockedOn:d,domEventName:v,eventSystemFlags:M,nativeEvent:B,targetContainers:[P]},d!==null&&(d=Io(d),d!==null&&xp(d)),c):(c.eventSystemFlags|=M,d=c.targetContainers,P!==null&&d.indexOf(P)===-1&&d.push(P),c)}function gx(c,d,v,M,P){switch(d){case"focusin":return $s=za($s,c,d,v,M,P),!0;case"dragenter":return ln=za(ln,c,d,v,M,P),!0;case"mouseover":return Ao=za(Ao,c,d,v,M,P),!0;case"pointerover":var B=P.pointerId;return ja.set(B,za(ja.get(B)||null,c,d,v,M,P)),!0;case"gotpointercapture":return B=P.pointerId,zl.set(B,za(zl.get(B)||null,c,d,v,M,P)),!0}return!1}function eh(c){var d=ha(c.target);if(d!==null){var v=k(d);if(v!==null){if(d=v.tag,d===13){if(d=K(v),d!==null){c.blockedOn=d,Zd(c.priority,function(){jg(v)});return}}else if(d===3&&v.stateNode.current.memoizedState.isDehydrated){c.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}c.blockedOn=null}function th(c){if(c.blockedOn!==null)return!1;for(var d=c.targetContainers;0<d.length;){var v=cs(c.domEventName,c.eventSystemFlags,d[0],c.nativeEvent);if(v===null){v=c.nativeEvent;var M=new v.constructor(v.type,v);nt=M,v.target.dispatchEvent(M),nt=null}else return d=Io(v),d!==null&&xp(d),c.blockedOn=v,!1;d.shift()}return!0}function uu(c,d,v){th(c)&&v.delete(d)}function eo(){Ua=!1,$s!==null&&th($s)&&($s=null),ln!==null&&th(ln)&&(ln=null),Ao!==null&&th(Ao)&&(Ao=null),ja.forEach(uu),zl.forEach(uu)}function du(c,d){c.blockedOn===d&&(c.blockedOn=null,Ua||(Ua=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,eo)))}function hu(c){function d(P){return du(P,c)}if(0<$d.length){du($d[0],c);for(var v=1;v<$d.length;v++){var M=$d[v];M.blockedOn===c&&(M.blockedOn=null)}}for($s!==null&&du($s,c),ln!==null&&du(ln,c),Ao!==null&&du(Ao,c),ja.forEach(d),zl.forEach(d),v=0;v<sa.length;v++)M=sa[v],M.blockedOn===c&&(M.blockedOn=null);for(;0<sa.length&&(v=sa[0],v.blockedOn===null);)eh(v),v.blockedOn===null&&sa.shift()}var di=R.ReactCurrentBatchConfig,ls=!0;function nh(c,d,v,M){var P=Tn,B=di.transition;di.transition=null;try{Tn=1,rh(c,d,v,M)}finally{Tn=P,di.transition=B}}function _p(c,d,v,M){var P=Tn,B=di.transition;di.transition=null;try{Tn=4,rh(c,d,v,M)}finally{Tn=P,di.transition=B}}function rh(c,d,v,M){if(ls){var P=cs(c,d,v,M);if(P===null)Ah(c,d,M,ih,v),Cr(c,M);else if(gx(P,c,d,v,M))M.stopPropagation();else if(Cr(c,M),d&4&&-1<mx.indexOf(c)){for(;P!==null;){var B=Io(P);if(B!==null&&cu(B),B=cs(c,d,v,M),B===null&&Ah(c,d,M,ih,v),B===P)break;P=B}P!==null&&M.stopPropagation()}else Ah(c,d,M,null,v)}}var ih=null;function cs(c,d,v,M){if(ih=null,c=fe(M),c=ha(c),c!==null)if(d=k(c),d===null)c=null;else if(v=d.tag,v===13){if(c=K(d),c!==null)return c;c=null}else if(v===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;c=null}else d!==c&&(c=null);return ih=c,null}function zg(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_t()){case at:return 1;case ut:return 4;case Lt:case Ht:return 16;case Ot:return 536870912;default:return 16}default:return 16}}var Ns=null,wp=null,Ri=null;function fu(){if(Ri)return Ri;var c,d=wp,v=d.length,M,P="value"in Ns?Ns.value:Ns.textContent,B=P.length;for(c=0;c<v&&d[c]===P[c];c++);var W=v-c;for(M=1;M<=W&&d[v-M]===P[B-M];M++);return Ri=P.slice(c,1<M?1-M:void 0)}function Ha(c){var d=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&d===13&&(c=13)):c=d,c===10&&(c=13),32<=c||c===13?c:0}function So(){return!0}function sh(){return!1}function hi(c){function d(v,M,P,B,W){this._reactName=v,this._targetInst=P,this.type=M,this.nativeEvent=B,this.target=W,this.currentTarget=null;for(var ue in c)c.hasOwnProperty(ue)&&(v=c[ue],this[ue]=v?v(B):B[ue]);return this.isDefaultPrevented=(B.defaultPrevented!=null?B.defaultPrevented:B.returnValue===!1)?So:sh,this.isPropagationStopped=sh,this}return H(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=So)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=So)},persist:function(){},isPersistent:So}),d}var Ga={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pu=hi(Ga),Va=H({},Ga,{view:0,detail:0}),Hl=hi(Va),Pi,us,ds,Gl=H({},Va,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:aa,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==ds&&(ds&&c.type==="mousemove"?(Pi=c.screenX-ds.screenX,us=c.screenY-ds.screenY):us=Pi=0,ds=c),Pi)},movementY:function(c){return"movementY"in c?c.movementY:us}}),bp=hi(Gl),Eo=H({},Gl,{dataTransfer:0}),oa=hi(Eo),oh=H({},Va,{relatedTarget:0}),ah=hi(oh),lh=H({},Ga,{animationName:0,elapsedTime:0,pseudoElement:0}),Hg=hi(lh),Gg=H({},Ga,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),Ap=hi(Gg),ch=H({},Ga,{data:0}),Sp=hi(ch),Vg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ep={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vl(c){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(c):(c=Ep[c])?!!d[c]:!1}function aa(){return Vl}var uh=H({},Va,{key:function(c){if(c.key){var d=Vg[c.key]||c.key;if(d!=="Unidentified")return d}return c.type==="keypress"?(c=Ha(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?Wg[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:aa,charCode:function(c){return c.type==="keypress"?Ha(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Ha(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),dh=hi(uh),hs=H({},Gl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vi=hi(hs),Wa=H({},Va,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:aa}),Mo=hi(Wa),Co=H({},Ga,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ja=hi(Co),Jg=H({},Gl,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),Mp=hi(Jg),Cp=[9,13,27,32],fi=a&&"CompositionEvent"in window,Xr=null;a&&"documentMode"in document&&(Xr=document.documentMode);var Qn=a&&"TextEvent"in window&&!Xr,Wl=a&&(!fi||Xr&&8<Xr&&11>=Xr),fs=" ",Tp=!1;function Rp(c,d){switch(c){case"keyup":return Cp.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hh(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var la=!1;function Xg(c,d){switch(c){case"compositionend":return hh(d);case"keypress":return d.which!==32?null:(Tp=!0,fs);case"textInput":return c=d.data,c===fs&&Tp?null:c;default:return null}}function mu(c,d){if(la)return c==="compositionend"||!fi&&Rp(c,d)?(c=fu(),Ri=wp=Ns=null,la=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Wl&&d.locale!=="ko"?null:d.data;default:return null}}var Jl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fh(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d==="input"?!!Jl[c.type]:d==="textarea"}function Xl(c,d,v,M){en(M),d=Sh(d,"onChange"),0<d.length&&(v=new pu("onChange","change",null,v,M),c.push({event:v,listeners:d}))}var ca=null,Kl=null;function Kg(c){Zl(c,0)}function To(c){var d=fr(c);if(ce(d))return c}function Yg(c,d){if(c==="change")return d}var Yl=!1;if(a){var Ii;if(a){var Xa="oninput"in document;if(!Xa){var Ka=document.createElement("div");Ka.setAttribute("oninput","return;"),Xa=typeof Ka.oninput=="function"}Ii=Xa}else Ii=!1;Yl=Ii&&(!document.documentMode||9<document.documentMode)}function Bs(){ca&&(ca.detachEvent("onpropertychange",ph),Kl=ca=null)}function ph(c){if(c.propertyName==="value"&&To(Kl)){var d=[];Xl(d,Kl,c,fe(c)),cr(Kg,d)}}function ql(c,d,v){c==="focusin"?(Bs(),ca=d,Kl=v,ca.attachEvent("onpropertychange",ph)):c==="focusout"&&Bs()}function qg(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return To(Kl)}function Pp(c,d){if(c==="click")return To(d)}function rr(c,d){if(c==="input"||c==="change")return To(d)}function mh(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var Wi=typeof Object.is=="function"?Object.is:mh;function Ya(c,d){if(Wi(c,d))return!0;if(typeof c!="object"||c===null||typeof d!="object"||d===null)return!1;var v=Object.keys(c),M=Object.keys(d);if(v.length!==M.length)return!1;for(M=0;M<v.length;M++){var P=v[M];if(!l.call(d,P)||!Wi(c[P],d[P]))return!1}return!0}function gu(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Ji(c,d){var v=gu(c);c=0;for(var M;v;){if(v.nodeType===3){if(M=c+v.textContent.length,c<=d&&M>=d)return{node:v,offset:d-c};c=M}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=gu(v)}}function qa(c,d){return c&&d?c===d?!0:c&&c.nodeType===3?!1:d&&d.nodeType===3?qa(c,d.parentNode):"contains"in c?c.contains(d):c.compareDocumentPosition?!!(c.compareDocumentPosition(d)&16):!1:!1}function ir(){for(var c=window,d=ge();d instanceof c.HTMLIFrameElement;){try{var v=typeof d.contentWindow.location.href=="string"}catch{v=!1}if(v)c=d.contentWindow;else break;d=ge(c.document)}return d}function Br(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d&&(d==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||d==="textarea"||c.contentEditable==="true")}function kr(c){var d=ir(),v=c.focusedElem,M=c.selectionRange;if(d!==v&&v&&v.ownerDocument&&qa(v.ownerDocument.documentElement,v)){if(M!==null&&Br(v)){if(d=M.start,c=M.end,c===void 0&&(c=d),"selectionStart"in v)v.selectionStart=d,v.selectionEnd=Math.min(c,v.value.length);else if(c=(d=v.ownerDocument||document)&&d.defaultView||window,c.getSelection){c=c.getSelection();var P=v.textContent.length,B=Math.min(M.start,P);M=M.end===void 0?B:Math.min(M.end,P),!c.extend&&B>M&&(P=M,M=B,B=P),P=Ji(v,B);var W=Ji(v,M);P&&W&&(c.rangeCount!==1||c.anchorNode!==P.node||c.anchorOffset!==P.offset||c.focusNode!==W.node||c.focusOffset!==W.offset)&&(d=d.createRange(),d.setStart(P.node,P.offset),c.removeAllRanges(),B>M?(c.addRange(d),c.extend(W.node,W.offset)):(d.setEnd(W.node,W.offset),c.addRange(d)))}}for(d=[],c=v;c=c.parentNode;)c.nodeType===1&&d.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<d.length;v++)c=d[v],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var gh=a&&"documentMode"in document&&11>=document.documentMode,to=null,Qa=null,vu=null,Dr=!1;function vh(c,d,v){var M=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;Dr||to==null||to!==ge(M)||(M=to,"selectionStart"in M&&Br(M)?M={start:M.selectionStart,end:M.selectionEnd}:(M=(M.ownerDocument&&M.ownerDocument.defaultView||window).getSelection(),M={anchorNode:M.anchorNode,anchorOffset:M.anchorOffset,focusNode:M.focusNode,focusOffset:M.focusOffset}),vu&&Ya(vu,M)||(vu=M,M=Sh(Qa,"onSelect"),0<M.length&&(d=new pu("onSelect","select",null,d,v),c.push({event:d,listeners:M}),d.target=to)))}function Ql(c,d){var v={};return v[c.toLowerCase()]=d.toLowerCase(),v["Webkit"+c]="webkit"+d,v["Moz"+c]="moz"+d,v}var ua={animationend:Ql("Animation","AnimationEnd"),animationiteration:Ql("Animation","AnimationIteration"),animationstart:Ql("Animation","AnimationStart"),transitionend:Ql("Transition","TransitionEnd")},ks={},Ds={};a&&(Ds=document.createElement("div").style,"AnimationEvent"in window||(delete ua.animationend.animation,delete ua.animationiteration.animation,delete ua.animationstart.animation),"TransitionEvent"in window||delete ua.transitionend.transition);function no(c){if(ks[c])return ks[c];if(!ua[c])return c;var d=ua[c],v;for(v in d)if(d.hasOwnProperty(v)&&v in Ds)return ks[c]=d[v];return c}var yu=no("animationend"),xu=no("animationiteration"),Ip=no("animationstart"),Lp=no("transitionend"),Np=new Map,Bp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ro(c,d){Np.set(c,d),s(d,[c])}for(var yh=0;yh<Bp.length;yh++){var _u=Bp[yh],wu=_u.toLowerCase(),Qg=_u[0].toUpperCase()+_u.slice(1);Ro(wu,"on"+Qg)}Ro(yu,"onAnimationEnd"),Ro(xu,"onAnimationIteration"),Ro(Ip,"onAnimationStart"),Ro("dblclick","onDoubleClick"),Ro("focusin","onFocus"),Ro("focusout","onBlur"),Ro(Lp,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var da="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xh=new Set("cancel close invalid load scroll toggle".split(" ").concat(da));function _h(c,d,v){var M=c.type||"unknown-event";c.currentTarget=v,G(M,d,void 0,c),c.currentTarget=null}function Zl(c,d){d=(d&4)!==0;for(var v=0;v<c.length;v++){var M=c[v],P=M.event;M=M.listeners;e:{var B=void 0;if(d)for(var W=M.length-1;0<=W;W--){var ue=M[W],me=ue.instance,ke=ue.currentTarget;if(ue=ue.listener,me!==B&&P.isPropagationStopped())break e;_h(P,ue,ke),B=me}else for(W=0;W<M.length;W++){if(ue=M[W],me=ue.instance,ke=ue.currentTarget,ue=ue.listener,me!==B&&P.isPropagationStopped())break e;_h(P,ue,ke),B=me}}}if(Er)throw c=$t,Er=!1,$t=null,c}function Vn(c,d){var v=d[el];v===void 0&&(v=d[el]=new Set);var M=c+"__bubble";v.has(M)||(bh(d,c,2,!1),v.add(M))}function wh(c,d,v){var M=0;d&&(M|=4),bh(v,c,M,d)}var bu="_reactListening"+Math.random().toString(36).slice(2);function $l(c){if(!c[bu]){c[bu]=!0,n.forEach(function(v){v!=="selectionchange"&&(xh.has(v)||wh(v,!1,c),wh(v,!0,c))});var d=c.nodeType===9?c:c.ownerDocument;d===null||d[bu]||(d[bu]=!0,wh("selectionchange",!1,d))}}function bh(c,d,v,M){switch(zg(d)){case 1:var P=nh;break;case 4:P=_p;break;default:P=rh}v=P.bind(null,d,v,c),P=void 0,!ia||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(P=!0),M?P!==void 0?c.addEventListener(d,v,{capture:!0,passive:P}):c.addEventListener(d,v,!0):P!==void 0?c.addEventListener(d,v,{passive:P}):c.addEventListener(d,v,!1)}function Ah(c,d,v,M,P){var B=M;if((d&1)===0&&(d&2)===0&&M!==null)e:for(;;){if(M===null)return;var W=M.tag;if(W===3||W===4){var ue=M.stateNode.containerInfo;if(ue===P||ue.nodeType===8&&ue.parentNode===P)break;if(W===4)for(W=M.return;W!==null;){var me=W.tag;if((me===3||me===4)&&(me=W.stateNode.containerInfo,me===P||me.nodeType===8&&me.parentNode===P))return;W=W.return}for(;ue!==null;){if(W=ha(ue),W===null)return;if(me=W.tag,me===5||me===6){M=B=W;continue e}ue=ue.parentNode}}M=M.return}cr(function(){var ke=B,$e=fe(v),rt=[];e:{var Ye=Np.get(c);if(Ye!==void 0){var At=pu,It=c;switch(c){case"keypress":if(Ha(v)===0)break e;case"keydown":case"keyup":At=dh;break;case"focusin":It="focus",At=ah;break;case"focusout":It="blur",At=ah;break;case"beforeblur":case"afterblur":At=ah;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":At=bp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":At=oa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":At=Mo;break;case yu:case xu:case Ip:At=Hg;break;case Lp:At=Ja;break;case"scroll":At=Hl;break;case"wheel":At=Mp;break;case"copy":case"cut":case"paste":At=Ap;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":At=Vi}var Bt=(d&4)!==0,Pr=!Bt&&c==="scroll",Ee=Bt?Ye!==null?Ye+"Capture":null:Ye;Bt=[];for(var ve=ke,Re;ve!==null;){Re=ve;var ot=Re.stateNode;if(Re.tag===5&&ot!==null&&(Re=ot,Ee!==null&&(ot=zn(ve,Ee),ot!=null&&Bt.push(ec(ve,ot,Re)))),Pr)break;ve=ve.return}0<Bt.length&&(Ye=new At(Ye,It,null,v,$e),rt.push({event:Ye,listeners:Bt}))}}if((d&7)===0){e:{if(Ye=c==="mouseover"||c==="pointerover",At=c==="mouseout"||c==="pointerout",Ye&&v!==nt&&(It=v.relatedTarget||v.fromElement)&&(ha(It)||It[Xi]))break e;if((At||Ye)&&(Ye=$e.window===$e?$e:(Ye=$e.ownerDocument)?Ye.defaultView||Ye.parentWindow:window,At?(It=v.relatedTarget||v.toElement,At=ke,It=It?ha(It):null,It!==null&&(Pr=k(It),It!==Pr||It.tag!==5&&It.tag!==6)&&(It=null)):(At=null,It=ke),At!==It)){if(Bt=bp,ot="onMouseLeave",Ee="onMouseEnter",ve="mouse",(c==="pointerout"||c==="pointerover")&&(Bt=Vi,ot="onPointerLeave",Ee="onPointerEnter",ve="pointer"),Pr=At==null?Ye:fr(At),Re=It==null?Ye:fr(It),Ye=new Bt(ot,ve+"leave",At,v,$e),Ye.target=Pr,Ye.relatedTarget=Re,ot=null,ha($e)===ke&&(Bt=new Bt(Ee,ve+"enter",It,v,$e),Bt.target=Re,Bt.relatedTarget=Pr,ot=Bt),Pr=ot,At&&It)t:{for(Bt=At,Ee=It,ve=0,Re=Bt;Re;Re=Za(Re))ve++;for(Re=0,ot=Ee;ot;ot=Za(ot))Re++;for(;0<ve-Re;)Bt=Za(Bt),ve--;for(;0<Re-ve;)Ee=Za(Ee),Re--;for(;ve--;){if(Bt===Ee||Ee!==null&&Bt===Ee.alternate)break t;Bt=Za(Bt),Ee=Za(Ee)}Bt=null}else Bt=null;At!==null&&Zg(rt,Ye,At,Bt,!1),It!==null&&Pr!==null&&Zg(rt,Pr,It,Bt,!0)}}e:{if(Ye=ke?fr(ke):window,At=Ye.nodeName&&Ye.nodeName.toLowerCase(),At==="select"||At==="input"&&Ye.type==="file")var Dt=Yg;else if(fh(Ye))if(Yl)Dt=rr;else{Dt=qg;var Gt=ql}else(At=Ye.nodeName)&&At.toLowerCase()==="input"&&(Ye.type==="checkbox"||Ye.type==="radio")&&(Dt=Pp);if(Dt&&(Dt=Dt(c,ke))){Xl(rt,Dt,v,$e);break e}Gt&&Gt(c,Ye,ke),c==="focusout"&&(Gt=Ye._wrapperState)&&Gt.controlled&&Ye.type==="number"&&lt(Ye,"number",Ye.value)}switch(Gt=ke?fr(ke):window,c){case"focusin":(fh(Gt)||Gt.contentEditable==="true")&&(to=Gt,Qa=ke,vu=null);break;case"focusout":vu=Qa=to=null;break;case"mousedown":Dr=!0;break;case"contextmenu":case"mouseup":case"dragend":Dr=!1,vh(rt,v,$e);break;case"selectionchange":if(gh)break;case"keydown":case"keyup":vh(rt,v,$e)}var Vt;if(fi)e:{switch(c){case"compositionstart":var Qt="onCompositionStart";break e;case"compositionend":Qt="onCompositionEnd";break e;case"compositionupdate":Qt="onCompositionUpdate";break e}Qt=void 0}else la?Rp(c,v)&&(Qt="onCompositionEnd"):c==="keydown"&&v.keyCode===229&&(Qt="onCompositionStart");Qt&&(Wl&&v.locale!=="ko"&&(la||Qt!=="onCompositionStart"?Qt==="onCompositionEnd"&&la&&(Vt=fu()):(Ns=$e,wp="value"in Ns?Ns.value:Ns.textContent,la=!0)),Gt=Sh(ke,Qt),0<Gt.length&&(Qt=new Sp(Qt,c,null,v,$e),rt.push({event:Qt,listeners:Gt}),Vt?Qt.data=Vt:(Vt=hh(v),Vt!==null&&(Qt.data=Vt)))),(Vt=Qn?Xg(c,v):mu(c,v))&&(ke=Sh(ke,"onBeforeInput"),0<ke.length&&($e=new Sp("onBeforeInput","beforeinput",null,v,$e),rt.push({event:$e,listeners:ke}),$e.data=Vt))}Zl(rt,d)})}function ec(c,d,v){return{instance:c,listener:d,currentTarget:v}}function Sh(c,d){for(var v=d+"Capture",M=[];c!==null;){var P=c,B=P.stateNode;P.tag===5&&B!==null&&(P=B,B=zn(c,v),B!=null&&M.unshift(ec(c,B,P)),B=zn(c,d),B!=null&&M.push(ec(c,B,P))),c=c.return}return M}function Za(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function Zg(c,d,v,M,P){for(var B=d._reactName,W=[];v!==null&&v!==M;){var ue=v,me=ue.alternate,ke=ue.stateNode;if(me!==null&&me===M)break;ue.tag===5&&ke!==null&&(ue=ke,P?(me=zn(v,B),me!=null&&W.unshift(ec(v,me,ue))):P||(me=zn(v,B),me!=null&&W.push(ec(v,me,ue)))),v=v.return}W.length!==0&&c.push({event:d,listeners:W})}var vx=/\r\n?/g,$g=/\u0000|\uFFFD/g;function kp(c){return(typeof c=="string"?c:""+c).replace(vx,`
`).replace($g,"")}function Au(c,d,v){if(d=kp(d),kp(c)!==d&&v)throw Error(t(425))}function Su(){}var tc=null,Dp=null;function Fp(c,d){return c==="textarea"||c==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Op=typeof setTimeout=="function"?setTimeout:void 0,Up=typeof clearTimeout=="function"?clearTimeout:void 0,Eh=typeof Promise=="function"?Promise:void 0,yx=typeof queueMicrotask=="function"?queueMicrotask:typeof Eh<"u"?function(c){return Eh.resolve(null).then(c).catch(e0)}:Op;function e0(c){setTimeout(function(){throw c})}function Mh(c,d){var v=d,M=0;do{var P=v.nextSibling;if(c.removeChild(v),P&&P.nodeType===8)if(v=P.data,v==="/$"){if(M===0){c.removeChild(P),hu(d);return}M--}else v!=="$"&&v!=="$?"&&v!=="$!"||M++;v=P}while(v);hu(d)}function Po(c){for(;c!=null;c=c.nextSibling){var d=c.nodeType;if(d===1||d===3)break;if(d===8){if(d=c.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return c}function jp(c){c=c.previousSibling;for(var d=0;c;){if(c.nodeType===8){var v=c.data;if(v==="$"||v==="$!"||v==="$?"){if(d===0)return c;d--}else v==="/$"&&d++}c=c.previousSibling}return null}var $a=Math.random().toString(36).slice(2),Tr="__reactFiber$"+$a,nc="__reactProps$"+$a,Xi="__reactContainer$"+$a,el="__reactEvents$"+$a,Ch="__reactListeners$"+$a,Th="__reactHandles$"+$a;function ha(c){var d=c[Tr];if(d)return d;for(var v=c.parentNode;v;){if(d=v[Xi]||v[Tr]){if(v=d.alternate,d.child!==null||v!==null&&v.child!==null)for(c=jp(c);c!==null;){if(v=c[Tr])return v;c=jp(c)}return d}c=v,v=c.parentNode}return null}function Io(c){return c=c[Tr]||c[Xi],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function fr(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(t(33))}function Rh(c){return c[nc]||null}var zp=[],Fr=-1;function ur(c){return{current:c}}function Wn(c){0>Fr||(c.current=zp[Fr],zp[Fr]=null,Fr--)}function Hn(c,d){Fr++,zp[Fr]=c.current,c.current=d}var Lo={},Kr=ur(Lo),pi=ur(!1),No=Lo;function tl(c,d){var v=c.type.contextTypes;if(!v)return Lo;var M=c.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===d)return M.__reactInternalMemoizedMaskedChildContext;var P={},B;for(B in v)P[B]=d[B];return M&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=d,c.__reactInternalMemoizedMaskedChildContext=P),P}function ri(c){return c=c.childContextTypes,c!=null}function Eu(){Wn(pi),Wn(Kr)}function Hp(c,d,v){if(Kr.current!==Lo)throw Error(t(168));Hn(Kr,d),Hn(pi,v)}function Mu(c,d,v){var M=c.stateNode;if(d=d.childContextTypes,typeof M.getChildContext!="function")return v;M=M.getChildContext();for(var P in M)if(!(P in d))throw Error(t(108,Ae(c)||"Unknown",P));return H({},v,M)}function nl(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Lo,No=Kr.current,Hn(Kr,c),Hn(pi,pi.current),!0}function Gp(c,d,v){var M=c.stateNode;if(!M)throw Error(t(169));v?(c=Mu(c,d,No),M.__reactInternalMemoizedMergedChildContext=c,Wn(pi),Wn(Kr),Hn(Kr,c)):Wn(pi),Hn(pi,v)}var Fs=null,Cu=!1,Ph=!1;function Tu(c){Fs===null?Fs=[c]:Fs.push(c)}function t0(c){Cu=!0,Tu(c)}function ro(){if(!Ph&&Fs!==null){Ph=!0;var c=0,d=Tn;try{var v=Fs;for(Tn=1;c<v.length;c++){var M=v[c];do M=M(!0);while(M!==null)}Fs=null,Cu=!1}catch(P){throw Fs!==null&&(Fs=Fs.slice(c+1)),Ne(at,ro),P}finally{Tn=d,Ph=!1}}return null}var rl=[],Li=0,Ih=null,Lh=0,mi=[],Or=0,il=null,ct=1,ps="";function Bo(c,d){rl[Li++]=Lh,rl[Li++]=Ih,Ih=c,Lh=d}function Vp(c,d,v){mi[Or++]=ct,mi[Or++]=ps,mi[Or++]=il,il=c;var M=ct;c=ps;var P=32-jt(M)-1;M&=~(1<<P),v+=1;var B=32-jt(d)+P;if(30<B){var W=P-P%5;B=(M&(1<<W)-1).toString(32),M>>=W,P-=W,ct=1<<32-jt(d)+P|v<<P|M,ps=B+c}else ct=1<<B|v<<P|M,ps=c}function Wp(c){c.return!==null&&(Bo(c,1),Vp(c,1,0))}function ko(c){for(;c===Ih;)Ih=rl[--Li],rl[Li]=null,Lh=rl[--Li],rl[Li]=null;for(;c===il;)il=mi[--Or],mi[Or]=null,ps=mi[--Or],mi[Or]=null,ct=mi[--Or],mi[Or]=null}var Yr=null,gi=null,Yn=!1,ms=null;function Jp(c,d){var v=co(5,null,null,0);v.elementType="DELETED",v.stateNode=d,v.return=c,d=c.deletions,d===null?(c.deletions=[v],c.flags|=16):d.push(v)}function Xp(c,d){switch(c.tag){case 5:var v=c.type;return d=d.nodeType!==1||v.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(c.stateNode=d,Yr=c,gi=Po(d.firstChild),!0):!1;case 6:return d=c.pendingProps===""||d.nodeType!==3?null:d,d!==null?(c.stateNode=d,Yr=c,gi=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(v=il!==null?{id:ct,overflow:ps}:null,c.memoizedState={dehydrated:d,treeContext:v,retryLane:1073741824},v=co(18,null,null,0),v.stateNode=d,v.return=c,c.child=v,Yr=c,gi=null,!0):!1;default:return!1}}function Nh(c){return(c.mode&1)!==0&&(c.flags&128)===0}function Bh(c){if(Yn){var d=gi;if(d){var v=d;if(!Xp(c,d)){if(Nh(c))throw Error(t(418));d=Po(v.nextSibling);var M=Yr;d&&Xp(c,d)?Jp(M,v):(c.flags=c.flags&-4097|2,Yn=!1,Yr=c)}}else{if(Nh(c))throw Error(t(418));c.flags=c.flags&-4097|2,Yn=!1,Yr=c}}}function kh(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;Yr=c}function rc(c){if(c!==Yr)return!1;if(!Yn)return kh(c),Yn=!0,!1;var d;if((d=c.tag!==3)&&!(d=c.tag!==5)&&(d=c.type,d=d!=="head"&&d!=="body"&&!Fp(c.type,c.memoizedProps)),d&&(d=gi)){if(Nh(c))throw Kp(),Error(t(418));for(;d;)Jp(c,d),d=Po(d.nextSibling)}if(kh(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(t(317));e:{for(c=c.nextSibling,d=0;c;){if(c.nodeType===8){var v=c.data;if(v==="/$"){if(d===0){gi=Po(c.nextSibling);break e}d--}else v!=="$"&&v!=="$!"&&v!=="$?"||d++}c=c.nextSibling}gi=null}}else gi=Yr?Po(c.stateNode.nextSibling):null;return!0}function Kp(){for(var c=gi;c;)c=Po(c.nextSibling)}function fa(){gi=Yr=null,Yn=!1}function ic(c){ms===null?ms=[c]:ms.push(c)}var xx=R.ReactCurrentBatchConfig;function Os(c,d){if(c&&c.defaultProps){d=H({},d),c=c.defaultProps;for(var v in c)d[v]===void 0&&(d[v]=c[v]);return d}return d}var Ru=ur(null),Pu=null,sl=null,Dh=null;function sc(){Dh=sl=Pu=null}function oc(c){var d=Ru.current;Wn(Ru),c._currentValue=d}function ac(c,d,v){for(;c!==null;){var M=c.alternate;if((c.childLanes&d)!==d?(c.childLanes|=d,M!==null&&(M.childLanes|=d)):M!==null&&(M.childLanes&d)!==d&&(M.childLanes|=d),c===v)break;c=c.return}}function Do(c,d){Pu=c,Dh=sl=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&d)!==0&&(wt=!0),c.firstContext=null)}function vi(c){var d=c._currentValue;if(Dh!==c)if(c={context:c,memoizedValue:d,next:null},sl===null){if(Pu===null)throw Error(t(308));sl=c,Pu.dependencies={lanes:0,firstContext:c}}else sl=sl.next=c;return d}var Us=null;function Iu(c){Us===null?Us=[c]:Us.push(c)}function Fh(c,d,v,M){var P=d.interleaved;return P===null?(v.next=v,Iu(d)):(v.next=P.next,P.next=v),d.interleaved=v,js(c,M)}function js(c,d){c.lanes|=d;var v=c.alternate;for(v!==null&&(v.lanes|=d),v=c,c=c.return;c!==null;)c.childLanes|=d,v=c.alternate,v!==null&&(v.childLanes|=d),v=c,c=c.return;return v.tag===3?v.stateNode:null}var Fo=!1;function Lu(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function n0(c,d){c=c.updateQueue,d.updateQueue===c&&(d.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function gs(c,d){return{eventTime:c,lane:d,tag:0,payload:null,callback:null,next:null}}function io(c,d,v){var M=c.updateQueue;if(M===null)return null;if(M=M.shared,(Bn&2)!==0){var P=M.pending;return P===null?d.next=d:(d.next=P.next,P.next=d),M.pending=d,js(c,v)}return P=M.interleaved,P===null?(d.next=d,Iu(M)):(d.next=P.next,P.next=d),M.interleaved=d,js(c,v)}function Zn(c,d,v){if(d=d.updateQueue,d!==null&&(d=d.shared,(v&4194240)!==0)){var M=d.lanes;M&=c.pendingLanes,v|=M,d.lanes=v,Ul(c,v)}}function sn(c,d){var v=c.updateQueue,M=c.alternate;if(M!==null&&(M=M.updateQueue,v===M)){var P=null,B=null;if(v=v.firstBaseUpdate,v!==null){do{var W={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};B===null?P=B=W:B=B.next=W,v=v.next}while(v!==null);B===null?P=B=d:B=B.next=d}else P=B=d;v={baseState:M.baseState,firstBaseUpdate:P,lastBaseUpdate:B,shared:M.shared,effects:M.effects},c.updateQueue=v;return}c=v.lastBaseUpdate,c===null?v.firstBaseUpdate=d:c.next=d,v.lastBaseUpdate=d}function sr(c,d,v,M){var P=c.updateQueue;Fo=!1;var B=P.firstBaseUpdate,W=P.lastBaseUpdate,ue=P.shared.pending;if(ue!==null){P.shared.pending=null;var me=ue,ke=me.next;me.next=null,W===null?B=ke:W.next=ke,W=me;var $e=c.alternate;$e!==null&&($e=$e.updateQueue,ue=$e.lastBaseUpdate,ue!==W&&(ue===null?$e.firstBaseUpdate=ke:ue.next=ke,$e.lastBaseUpdate=me))}if(B!==null){var rt=P.baseState;W=0,$e=ke=me=null,ue=B;do{var Ye=ue.lane,At=ue.eventTime;if((M&Ye)===Ye){$e!==null&&($e=$e.next={eventTime:At,lane:0,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null});e:{var It=c,Bt=ue;switch(Ye=d,At=v,Bt.tag){case 1:if(It=Bt.payload,typeof It=="function"){rt=It.call(At,rt,Ye);break e}rt=It;break e;case 3:It.flags=It.flags&-65537|128;case 0:if(It=Bt.payload,Ye=typeof It=="function"?It.call(At,rt,Ye):It,Ye==null)break e;rt=H({},rt,Ye);break e;case 2:Fo=!0}}ue.callback!==null&&ue.lane!==0&&(c.flags|=64,Ye=P.effects,Ye===null?P.effects=[ue]:Ye.push(ue))}else At={eventTime:At,lane:Ye,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},$e===null?(ke=$e=At,me=rt):$e=$e.next=At,W|=Ye;if(ue=ue.next,ue===null){if(ue=P.shared.pending,ue===null)break;Ye=ue,ue=Ye.next,Ye.next=null,P.lastBaseUpdate=Ye,P.shared.pending=null}}while(!0);if($e===null&&(me=rt),P.baseState=me,P.firstBaseUpdate=ke,P.lastBaseUpdate=$e,d=P.shared.interleaved,d!==null){P=d;do W|=P.lane,P=P.next;while(P!==d)}else B===null&&(P.shared.lanes=0);Uu|=W,c.lanes=W,c.memoizedState=rt}}function pr(c,d,v){if(c=d.effects,d.effects=null,c!==null)for(d=0;d<c.length;d++){var M=c[d],P=M.callback;if(P!==null){if(M.callback=null,M=v,typeof P!="function")throw Error(t(191,P));P.call(M)}}}var Ur=new r.Component().refs;function yi(c,d,v,M){d=c.memoizedState,v=v(M,d),v=v==null?d:H({},d,v),c.memoizedState=v,c.lanes===0&&(c.updateQueue.baseState=v)}var Oo={isMounted:function(c){return(c=c._reactInternals)?k(c)===c:!1},enqueueSetState:function(c,d,v){c=c._reactInternals;var M=Qi(),P=yc(c),B=gs(M,P);B.payload=d,v!=null&&(B.callback=v),d=io(c,B,P),d!==null&&(Ho(d,c,P,M),Zn(d,c,P))},enqueueReplaceState:function(c,d,v){c=c._reactInternals;var M=Qi(),P=yc(c),B=gs(M,P);B.tag=1,B.payload=d,v!=null&&(B.callback=v),d=io(c,B,P),d!==null&&(Ho(d,c,P,M),Zn(d,c,P))},enqueueForceUpdate:function(c,d){c=c._reactInternals;var v=Qi(),M=yc(c),P=gs(v,M);P.tag=2,d!=null&&(P.callback=d),d=io(c,P,M),d!==null&&(Ho(d,c,M,v),Zn(d,c,M))}};function wr(c,d,v,M,P,B,W){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(M,B,W):d.prototype&&d.prototype.isPureReactComponent?!Ya(v,M)||!Ya(P,B):!0}function lc(c,d,v){var M=!1,P=Lo,B=d.contextType;return typeof B=="object"&&B!==null?B=vi(B):(P=ri(d)?No:Kr.current,M=d.contextTypes,B=(M=M!=null)?tl(c,P):Lo),d=new d(v,B),c.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Oo,c.stateNode=d,d._reactInternals=c,M&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=P,c.__reactInternalMemoizedMaskedChildContext=B),d}function ol(c,d,v,M){c=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(v,M),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(v,M),d.state!==c&&Oo.enqueueReplaceState(d,d.state,null)}function cc(c,d,v,M){var P=c.stateNode;P.props=v,P.state=c.memoizedState,P.refs=Ur,Lu(c);var B=d.contextType;typeof B=="object"&&B!==null?P.context=vi(B):(B=ri(d)?No:Kr.current,P.context=tl(c,B)),P.state=c.memoizedState,B=d.getDerivedStateFromProps,typeof B=="function"&&(yi(c,d,B,v),P.state=c.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(d=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),d!==P.state&&Oo.enqueueReplaceState(P,P.state,null),sr(c,v,P,M),P.state=c.memoizedState),typeof P.componentDidMount=="function"&&(c.flags|=4194308)}function al(c,d,v){if(c=v.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(t(309));var M=v.stateNode}if(!M)throw Error(t(147,c));var P=M,B=""+c;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===B?d.ref:(d=function(W){var ue=P.refs;ue===Ur&&(ue=P.refs={}),W===null?delete ue[B]:ue[B]=W},d._stringRef=B,d)}if(typeof c!="string")throw Error(t(284));if(!v._owner)throw Error(t(290,c))}return c}function pa(c,d){throw c=Object.prototype.toString.call(d),Error(t(31,c==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":c))}function xi(c){var d=c._init;return d(c._payload)}function Oh(c){function d(Ee,ve){if(c){var Re=Ee.deletions;Re===null?(Ee.deletions=[ve],Ee.flags|=16):Re.push(ve)}}function v(Ee,ve){if(!c)return null;for(;ve!==null;)d(Ee,ve),ve=ve.sibling;return null}function M(Ee,ve){for(Ee=new Map;ve!==null;)ve.key!==null?Ee.set(ve.key,ve):Ee.set(ve.index,ve),ve=ve.sibling;return Ee}function P(Ee,ve){return Ee=_c(Ee,ve),Ee.index=0,Ee.sibling=null,Ee}function B(Ee,ve,Re){return Ee.index=Re,c?(Re=Ee.alternate,Re!==null?(Re=Re.index,Re<ve?(Ee.flags|=2,ve):Re):(Ee.flags|=2,ve)):(Ee.flags|=1048576,ve)}function W(Ee){return c&&Ee.alternate===null&&(Ee.flags|=2),Ee}function ue(Ee,ve,Re,ot){return ve===null||ve.tag!==6?(ve=Ox(Re,Ee.mode,ot),ve.return=Ee,ve):(ve=P(ve,Re),ve.return=Ee,ve)}function me(Ee,ve,Re,ot){var Dt=Re.type;return Dt===j?$e(Ee,ve,Re.props.children,ot,Re.key):ve!==null&&(ve.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===de&&xi(Dt)===ve.type)?(ot=P(ve,Re.props),ot.ref=al(Ee,ve,Re),ot.return=Ee,ot):(ot=M0(Re.type,Re.key,Re.props,null,Ee.mode,ot),ot.ref=al(Ee,ve,Re),ot.return=Ee,ot)}function ke(Ee,ve,Re,ot){return ve===null||ve.tag!==4||ve.stateNode.containerInfo!==Re.containerInfo||ve.stateNode.implementation!==Re.implementation?(ve=Ux(Re,Ee.mode,ot),ve.return=Ee,ve):(ve=P(ve,Re.children||[]),ve.return=Ee,ve)}function $e(Ee,ve,Re,ot,Dt){return ve===null||ve.tag!==7?(ve=Gu(Re,Ee.mode,ot,Dt),ve.return=Ee,ve):(ve=P(ve,Re),ve.return=Ee,ve)}function rt(Ee,ve,Re){if(typeof ve=="string"&&ve!==""||typeof ve=="number")return ve=Ox(""+ve,Ee.mode,Re),ve.return=Ee,ve;if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case L:return Re=M0(ve.type,ve.key,ve.props,null,Ee.mode,Re),Re.ref=al(Ee,null,ve),Re.return=Ee,Re;case D:return ve=Ux(ve,Ee.mode,Re),ve.return=Ee,ve;case de:var ot=ve._init;return rt(Ee,ot(ve._payload),Re)}if(Et(ve)||Q(ve))return ve=Gu(ve,Ee.mode,Re,null),ve.return=Ee,ve;pa(Ee,ve)}return null}function Ye(Ee,ve,Re,ot){var Dt=ve!==null?ve.key:null;if(typeof Re=="string"&&Re!==""||typeof Re=="number")return Dt!==null?null:ue(Ee,ve,""+Re,ot);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case L:return Re.key===Dt?me(Ee,ve,Re,ot):null;case D:return Re.key===Dt?ke(Ee,ve,Re,ot):null;case de:return Dt=Re._init,Ye(Ee,ve,Dt(Re._payload),ot)}if(Et(Re)||Q(Re))return Dt!==null?null:$e(Ee,ve,Re,ot,null);pa(Ee,Re)}return null}function At(Ee,ve,Re,ot,Dt){if(typeof ot=="string"&&ot!==""||typeof ot=="number")return Ee=Ee.get(Re)||null,ue(ve,Ee,""+ot,Dt);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case L:return Ee=Ee.get(ot.key===null?Re:ot.key)||null,me(ve,Ee,ot,Dt);case D:return Ee=Ee.get(ot.key===null?Re:ot.key)||null,ke(ve,Ee,ot,Dt);case de:var Gt=ot._init;return At(Ee,ve,Re,Gt(ot._payload),Dt)}if(Et(ot)||Q(ot))return Ee=Ee.get(Re)||null,$e(ve,Ee,ot,Dt,null);pa(ve,ot)}return null}function It(Ee,ve,Re,ot){for(var Dt=null,Gt=null,Vt=ve,Qt=ve=0,oi=null;Vt!==null&&Qt<Re.length;Qt++){Vt.index>Qt?(oi=Vt,Vt=null):oi=Vt.sibling;var jn=Ye(Ee,Vt,Re[Qt],ot);if(jn===null){Vt===null&&(Vt=oi);break}c&&Vt&&jn.alternate===null&&d(Ee,Vt),ve=B(jn,ve,Qt),Gt===null?Dt=jn:Gt.sibling=jn,Gt=jn,Vt=oi}if(Qt===Re.length)return v(Ee,Vt),Yn&&Bo(Ee,Qt),Dt;if(Vt===null){for(;Qt<Re.length;Qt++)Vt=rt(Ee,Re[Qt],ot),Vt!==null&&(ve=B(Vt,ve,Qt),Gt===null?Dt=Vt:Gt.sibling=Vt,Gt=Vt);return Yn&&Bo(Ee,Qt),Dt}for(Vt=M(Ee,Vt);Qt<Re.length;Qt++)oi=At(Vt,Ee,Qt,Re[Qt],ot),oi!==null&&(c&&oi.alternate!==null&&Vt.delete(oi.key===null?Qt:oi.key),ve=B(oi,ve,Qt),Gt===null?Dt=oi:Gt.sibling=oi,Gt=oi);return c&&Vt.forEach(function(wc){return d(Ee,wc)}),Yn&&Bo(Ee,Qt),Dt}function Bt(Ee,ve,Re,ot){var Dt=Q(Re);if(typeof Dt!="function")throw Error(t(150));if(Re=Dt.call(Re),Re==null)throw Error(t(151));for(var Gt=Dt=null,Vt=ve,Qt=ve=0,oi=null,jn=Re.next();Vt!==null&&!jn.done;Qt++,jn=Re.next()){Vt.index>Qt?(oi=Vt,Vt=null):oi=Vt.sibling;var wc=Ye(Ee,Vt,jn.value,ot);if(wc===null){Vt===null&&(Vt=oi);break}c&&Vt&&wc.alternate===null&&d(Ee,Vt),ve=B(wc,ve,Qt),Gt===null?Dt=wc:Gt.sibling=wc,Gt=wc,Vt=oi}if(jn.done)return v(Ee,Vt),Yn&&Bo(Ee,Qt),Dt;if(Vt===null){for(;!jn.done;Qt++,jn=Re.next())jn=rt(Ee,jn.value,ot),jn!==null&&(ve=B(jn,ve,Qt),Gt===null?Dt=jn:Gt.sibling=jn,Gt=jn);return Yn&&Bo(Ee,Qt),Dt}for(Vt=M(Ee,Vt);!jn.done;Qt++,jn=Re.next())jn=At(Vt,Ee,Qt,jn.value,ot),jn!==null&&(c&&jn.alternate!==null&&Vt.delete(jn.key===null?Qt:jn.key),ve=B(jn,ve,Qt),Gt===null?Dt=jn:Gt.sibling=jn,Gt=jn);return c&&Vt.forEach(function(vB){return d(Ee,vB)}),Yn&&Bo(Ee,Qt),Dt}function Pr(Ee,ve,Re,ot){if(typeof Re=="object"&&Re!==null&&Re.type===j&&Re.key===null&&(Re=Re.props.children),typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case L:e:{for(var Dt=Re.key,Gt=ve;Gt!==null;){if(Gt.key===Dt){if(Dt=Re.type,Dt===j){if(Gt.tag===7){v(Ee,Gt.sibling),ve=P(Gt,Re.props.children),ve.return=Ee,Ee=ve;break e}}else if(Gt.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===de&&xi(Dt)===Gt.type){v(Ee,Gt.sibling),ve=P(Gt,Re.props),ve.ref=al(Ee,Gt,Re),ve.return=Ee,Ee=ve;break e}v(Ee,Gt);break}else d(Ee,Gt);Gt=Gt.sibling}Re.type===j?(ve=Gu(Re.props.children,Ee.mode,ot,Re.key),ve.return=Ee,Ee=ve):(ot=M0(Re.type,Re.key,Re.props,null,Ee.mode,ot),ot.ref=al(Ee,ve,Re),ot.return=Ee,Ee=ot)}return W(Ee);case D:e:{for(Gt=Re.key;ve!==null;){if(ve.key===Gt)if(ve.tag===4&&ve.stateNode.containerInfo===Re.containerInfo&&ve.stateNode.implementation===Re.implementation){v(Ee,ve.sibling),ve=P(ve,Re.children||[]),ve.return=Ee,Ee=ve;break e}else{v(Ee,ve);break}else d(Ee,ve);ve=ve.sibling}ve=Ux(Re,Ee.mode,ot),ve.return=Ee,Ee=ve}return W(Ee);case de:return Gt=Re._init,Pr(Ee,ve,Gt(Re._payload),ot)}if(Et(Re))return It(Ee,ve,Re,ot);if(Q(Re))return Bt(Ee,ve,Re,ot);pa(Ee,Re)}return typeof Re=="string"&&Re!==""||typeof Re=="number"?(Re=""+Re,ve!==null&&ve.tag===6?(v(Ee,ve.sibling),ve=P(ve,Re),ve.return=Ee,Ee=ve):(v(Ee,ve),ve=Ox(Re,Ee.mode,ot),ve.return=Ee,Ee=ve),W(Ee)):v(Ee,ve)}return Pr}var ma=Oh(!0),ll=Oh(!1),ga={},vs=ur(ga),ys=ur(ga),va=ur(ga);function Ni(c){if(c===ga)throw Error(t(174));return c}function uc(c,d){switch(Hn(va,d),Hn(ys,c),Hn(vs,ga),c=d.nodeType,c){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:Ke(null,"");break;default:c=c===8?d.parentNode:d,d=c.namespaceURI||null,c=c.tagName,d=Ke(d,c)}Wn(vs),Hn(vs,d)}function so(){Wn(vs),Wn(ys),Wn(va)}function Uh(c){Ni(va.current);var d=Ni(vs.current),v=Ke(d,c.type);d!==v&&(Hn(ys,c),Hn(vs,v))}function dc(c){ys.current===c&&(Wn(vs),Wn(ys))}var Jn=ur(0);function jr(c){for(var d=c;d!==null;){if(d.tag===13){var v=d.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||v.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var oo=[];function Bi(){for(var c=0;c<oo.length;c++)oo[c]._workInProgressVersionPrimary=null;oo.length=0}var cl=R.ReactCurrentDispatcher,ii=R.ReactCurrentBatchConfig,ya=0,qn=null,mr=null,zr=null,zs=!1,hc=!1,fc=0,Yp=0;function dr(){throw Error(t(321))}function jh(c,d){if(d===null)return!1;for(var v=0;v<d.length&&v<c.length;v++)if(!Wi(c[v],d[v]))return!1;return!0}function zh(c,d,v,M,P,B){if(ya=B,qn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,cl.current=c===null||c.memoizedState===null?m:S,c=v(M,P),hc){B=0;do{if(hc=!1,fc=0,25<=B)throw Error(t(301));B+=1,zr=mr=null,d.updateQueue=null,cl.current=T,c=v(M,P)}while(hc)}if(cl.current=f,d=mr!==null&&mr.next!==null,ya=0,zr=mr=qn=null,zs=!1,d)throw Error(t(300));return c}function Nu(){var c=fc!==0;return fc=0,c}function Ki(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zr===null?qn.memoizedState=zr=c:zr=zr.next=c,zr}function xs(){if(mr===null){var c=qn.alternate;c=c!==null?c.memoizedState:null}else c=mr.next;var d=zr===null?qn.memoizedState:zr.next;if(d!==null)zr=d,mr=c;else{if(c===null)throw Error(t(310));mr=c,c={memoizedState:mr.memoizedState,baseState:mr.baseState,baseQueue:mr.baseQueue,queue:mr.queue,next:null},zr===null?qn.memoizedState=zr=c:zr=zr.next=c}return zr}function Bu(c,d){return typeof d=="function"?d(c):d}function Hh(c){var d=xs(),v=d.queue;if(v===null)throw Error(t(311));v.lastRenderedReducer=c;var M=mr,P=M.baseQueue,B=v.pending;if(B!==null){if(P!==null){var W=P.next;P.next=B.next,B.next=W}M.baseQueue=P=B,v.pending=null}if(P!==null){B=P.next,M=M.baseState;var ue=W=null,me=null,ke=B;do{var $e=ke.lane;if((ya&$e)===$e)me!==null&&(me=me.next={lane:0,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null}),M=ke.hasEagerState?ke.eagerState:c(M,ke.action);else{var rt={lane:$e,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null};me===null?(ue=me=rt,W=M):me=me.next=rt,qn.lanes|=$e,Uu|=$e}ke=ke.next}while(ke!==null&&ke!==B);me===null?W=M:me.next=ue,Wi(M,d.memoizedState)||(wt=!0),d.memoizedState=M,d.baseState=W,d.baseQueue=me,v.lastRenderedState=M}if(c=v.interleaved,c!==null){P=c;do B=P.lane,qn.lanes|=B,Uu|=B,P=P.next;while(P!==c)}else P===null&&(v.lanes=0);return[d.memoizedState,v.dispatch]}function Gh(c){var d=xs(),v=d.queue;if(v===null)throw Error(t(311));v.lastRenderedReducer=c;var M=v.dispatch,P=v.pending,B=d.memoizedState;if(P!==null){v.pending=null;var W=P=P.next;do B=c(B,W.action),W=W.next;while(W!==P);Wi(B,d.memoizedState)||(wt=!0),d.memoizedState=B,d.baseQueue===null&&(d.baseState=B),v.lastRenderedState=B}return[B,M]}function xa(){}function r0(c,d){var v=qn,M=xs(),P=d(),B=!Wi(M.memoizedState,P);if(B&&(M.memoizedState=P,wt=!0),M=M.queue,Fu(_i.bind(null,v,M,c),[c]),M.getSnapshot!==d||B||zr!==null&&zr.memoizedState.tag&1){if(v.flags|=2048,ku(9,qp.bind(null,v,M,P,d),void 0,null),si===null)throw Error(t(349));(ya&30)!==0||_a(v,d,P)}return P}function _a(c,d,v){c.flags|=16384,c={getSnapshot:d,value:v},d=qn.updateQueue,d===null?(d={lastEffect:null,stores:null},qn.updateQueue=d,d.stores=[c]):(v=d.stores,v===null?d.stores=[c]:v.push(c))}function qp(c,d,v,M){d.value=v,d.getSnapshot=M,i0(d)&&Qp(c)}function _i(c,d,v){return v(function(){i0(d)&&Qp(c)})}function i0(c){var d=c.getSnapshot;c=c.value;try{var v=d();return!Wi(c,v)}catch{return!0}}function Qp(c){var d=js(c,1);d!==null&&Ho(d,c,1,-1)}function s0(c){var d=Ki();return typeof c=="function"&&(c=c()),d.memoizedState=d.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bu,lastRenderedState:c},d.queue=c,c=c.dispatch=u0.bind(null,qn,c),[d.memoizedState,c]}function ku(c,d,v,M){return c={tag:c,create:d,destroy:v,deps:M,next:null},d=qn.updateQueue,d===null?(d={lastEffect:null,stores:null},qn.updateQueue=d,d.lastEffect=c.next=c):(v=d.lastEffect,v===null?d.lastEffect=c.next=c:(M=v.next,v.next=c,c.next=M,d.lastEffect=c)),c}function Zp(){return xs().memoizedState}function Du(c,d,v,M){var P=Ki();qn.flags|=c,P.memoizedState=ku(1|d,v,void 0,M===void 0?null:M)}function Vh(c,d,v,M){var P=xs();M=M===void 0?null:M;var B=void 0;if(mr!==null){var W=mr.memoizedState;if(B=W.destroy,M!==null&&jh(M,W.deps)){P.memoizedState=ku(d,v,B,M);return}}qn.flags|=c,P.memoizedState=ku(1|d,v,B,M)}function Yi(c,d){return Du(8390656,8,c,d)}function Fu(c,d){return Vh(2048,8,c,d)}function o0(c,d){return Vh(4,2,c,d)}function Uo(c,d){return Vh(4,4,c,d)}function Ou(c,d){if(typeof d=="function")return c=c(),d(c),function(){d(null)};if(d!=null)return c=c(),d.current=c,function(){d.current=null}}function wa(c,d,v){return v=v!=null?v.concat([c]):null,Vh(4,4,Ou.bind(null,d,c),v)}function pc(){}function Wh(c,d){var v=xs();d=d===void 0?null:d;var M=v.memoizedState;return M!==null&&d!==null&&jh(d,M[1])?M[0]:(v.memoizedState=[c,d],c)}function Jh(c,d){var v=xs();d=d===void 0?null:d;var M=v.memoizedState;return M!==null&&d!==null&&jh(d,M[1])?M[0]:(c=c(),v.memoizedState=[c,d],c)}function a0(c,d,v){return(ya&21)===0?(c.baseState&&(c.baseState=!1,wt=!0),c.memoizedState=v):(Wi(v,d)||(v=Kn(),qn.lanes|=v,Uu|=v,c.baseState=!0),d)}function l0(c,d){var v=Tn;Tn=v!==0&&4>v?v:4,c(!0);var M=ii.transition;ii.transition={};try{c(!1),d()}finally{Tn=v,ii.transition=M}}function $p(){return xs().memoizedState}function c0(c,d,v){var M=yc(c);if(v={lane:M,action:v,hasEagerState:!1,eagerState:null,next:null},Xh(c))d0(d,v);else if(v=Fh(c,d,v,M),v!==null){var P=Qi();Ho(v,c,M,P),h0(v,d,M)}}function u0(c,d,v){var M=yc(c),P={lane:M,action:v,hasEagerState:!1,eagerState:null,next:null};if(Xh(c))d0(d,P);else{var B=c.alternate;if(c.lanes===0&&(B===null||B.lanes===0)&&(B=d.lastRenderedReducer,B!==null))try{var W=d.lastRenderedState,ue=B(W,v);if(P.hasEagerState=!0,P.eagerState=ue,Wi(ue,W)){var me=d.interleaved;me===null?(P.next=P,Iu(d)):(P.next=me.next,me.next=P),d.interleaved=P;return}}catch{}finally{}v=Fh(c,d,P,M),v!==null&&(P=Qi(),Ho(v,c,M,P),h0(v,d,M))}}function Xh(c){var d=c.alternate;return c===qn||d!==null&&d===qn}function d0(c,d){hc=zs=!0;var v=c.pending;v===null?d.next=d:(d.next=v.next,v.next=d),c.pending=d}function h0(c,d,v){if((v&4194240)!==0){var M=d.lanes;M&=c.pendingLanes,v|=M,d.lanes=v,Ul(c,v)}}var f={readContext:vi,useCallback:dr,useContext:dr,useEffect:dr,useImperativeHandle:dr,useInsertionEffect:dr,useLayoutEffect:dr,useMemo:dr,useReducer:dr,useRef:dr,useState:dr,useDebugValue:dr,useDeferredValue:dr,useTransition:dr,useMutableSource:dr,useSyncExternalStore:dr,useId:dr,unstable_isNewReconciler:!1},m={readContext:vi,useCallback:function(c,d){return Ki().memoizedState=[c,d===void 0?null:d],c},useContext:vi,useEffect:Yi,useImperativeHandle:function(c,d,v){return v=v!=null?v.concat([c]):null,Du(4194308,4,Ou.bind(null,d,c),v)},useLayoutEffect:function(c,d){return Du(4194308,4,c,d)},useInsertionEffect:function(c,d){return Du(4,2,c,d)},useMemo:function(c,d){var v=Ki();return d=d===void 0?null:d,c=c(),v.memoizedState=[c,d],c},useReducer:function(c,d,v){var M=Ki();return d=v!==void 0?v(d):d,M.memoizedState=M.baseState=d,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:d},M.queue=c,c=c.dispatch=c0.bind(null,qn,c),[M.memoizedState,c]},useRef:function(c){var d=Ki();return c={current:c},d.memoizedState=c},useState:s0,useDebugValue:pc,useDeferredValue:function(c){return Ki().memoizedState=c},useTransition:function(){var c=s0(!1),d=c[0];return c=l0.bind(null,c[1]),Ki().memoizedState=c,[d,c]},useMutableSource:function(){},useSyncExternalStore:function(c,d,v){var M=qn,P=Ki();if(Yn){if(v===void 0)throw Error(t(407));v=v()}else{if(v=d(),si===null)throw Error(t(349));(ya&30)!==0||_a(M,d,v)}P.memoizedState=v;var B={value:v,getSnapshot:d};return P.queue=B,Yi(_i.bind(null,M,B,c),[c]),M.flags|=2048,ku(9,qp.bind(null,M,B,v,d),void 0,null),v},useId:function(){var c=Ki(),d=si.identifierPrefix;if(Yn){var v=ps,M=ct;v=(M&~(1<<32-jt(M)-1)).toString(32)+v,d=":"+d+"R"+v,v=fc++,0<v&&(d+="H"+v.toString(32)),d+=":"}else v=Yp++,d=":"+d+"r"+v.toString(32)+":";return c.memoizedState=d},unstable_isNewReconciler:!1},S={readContext:vi,useCallback:Wh,useContext:vi,useEffect:Fu,useImperativeHandle:wa,useInsertionEffect:o0,useLayoutEffect:Uo,useMemo:Jh,useReducer:Hh,useRef:Zp,useState:function(){return Hh(Bu)},useDebugValue:pc,useDeferredValue:function(c){var d=xs();return a0(d,mr.memoizedState,c)},useTransition:function(){var c=Hh(Bu)[0],d=xs().memoizedState;return[c,d]},useMutableSource:xa,useSyncExternalStore:r0,useId:$p,unstable_isNewReconciler:!1},T={readContext:vi,useCallback:Wh,useContext:vi,useEffect:Fu,useImperativeHandle:wa,useInsertionEffect:o0,useLayoutEffect:Uo,useMemo:Jh,useReducer:Gh,useRef:Zp,useState:function(){return Gh(Bu)},useDebugValue:pc,useDeferredValue:function(c){var d=xs();return mr===null?d.memoizedState=c:a0(d,mr.memoizedState,c)},useTransition:function(){var c=Gh(Bu)[0],d=xs().memoizedState;return[c,d]},useMutableSource:xa,useSyncExternalStore:r0,useId:$p,unstable_isNewReconciler:!1};function N(c,d){try{var v="",M=d;do v+=Le(M),M=M.return;while(M);var P=v}catch(B){P=`
Error generating stack: `+B.message+`
`+B.stack}return{value:c,source:d,stack:P,digest:null}}function z(c,d,v){return{value:c,source:null,stack:v??null,digest:d??null}}function oe(c,d){try{console.error(d.value)}catch(v){setTimeout(function(){throw v})}}var xe=typeof WeakMap=="function"?WeakMap:Map;function ze(c,d,v){v=gs(-1,v),v.tag=3,v.payload={element:null};var M=d.value;return v.callback=function(){_0||(_0=!0,Px=M),oe(c,d)},v}function it(c,d,v){v=gs(-1,v),v.tag=3;var M=c.type.getDerivedStateFromError;if(typeof M=="function"){var P=d.value;v.payload=function(){return M(P)},v.callback=function(){oe(c,d)}}var B=c.stateNode;return B!==null&&typeof B.componentDidCatch=="function"&&(v.callback=function(){oe(c,d),typeof M!="function"&&(gc===null?gc=new Set([this]):gc.add(this));var W=d.stack;this.componentDidCatch(d.value,{componentStack:W!==null?W:""})}),v}function Mt(c,d,v){var M=c.pingCache;if(M===null){M=c.pingCache=new xe;var P=new Set;M.set(d,P)}else P=M.get(d),P===void 0&&(P=new Set,M.set(d,P));P.has(v)||(P.add(v),c=oB.bind(null,c,d,v),d.then(c,c))}function Zt(c){do{var d;if((d=c.tag===13)&&(d=c.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return c;c=c.return}while(c!==null);return null}function zt(c,d,v,M,P){return(c.mode&1)===0?(c===d?c.flags|=65536:(c.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(d=gs(-1,1),d.tag=2,io(v,d,1))),v.lanes|=1),c):(c.flags|=65536,c.lanes=P,c)}var Gn=R.ReactCurrentOwner,wt=!1;function Un(c,d,v,M){d.child=c===null?ll(d,null,v,M):ma(d,c.child,v,M)}function qi(c,d,v,M,P){v=v.render;var B=d.ref;return Do(d,P),M=zh(c,d,v,M,B,P),v=Nu(),c!==null&&!wt?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~P,ul(c,d,P)):(Yn&&v&&Wp(d),d.flags|=1,Un(c,d,M,P),d.child)}function Ie(c,d,v,M,P){if(c===null){var B=v.type;return typeof B=="function"&&!Fx(B)&&B.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(d.tag=15,d.type=B,_e(c,d,B,M,P)):(c=M0(v.type,null,M,d,d.mode,P),c.ref=d.ref,c.return=d,d.child=c)}if(B=c.child,(c.lanes&P)===0){var W=B.memoizedProps;if(v=v.compare,v=v!==null?v:Ya,v(W,M)&&c.ref===d.ref)return ul(c,d,P)}return d.flags|=1,c=_c(B,M),c.ref=d.ref,c.return=d,d.child=c}function _e(c,d,v,M,P){if(c!==null){var B=c.memoizedProps;if(Ya(B,M)&&c.ref===d.ref)if(wt=!1,d.pendingProps=M=B,(c.lanes&P)!==0)(c.flags&131072)!==0&&(wt=!0);else return d.lanes=c.lanes,ul(c,d,P)}return Nt(c,d,v,M,P)}function Oe(c,d,v){var M=d.pendingProps,P=M.children,B=c!==null?c.memoizedState:null;if(M.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},Hn(Yh,Hs),Hs|=v;else{if((v&1073741824)===0)return c=B!==null?B.baseLanes|v:v,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:c,cachePool:null,transitions:null},d.updateQueue=null,Hn(Yh,Hs),Hs|=c,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},M=B!==null?B.baseLanes:v,Hn(Yh,Hs),Hs|=M}else B!==null?(M=B.baseLanes|v,d.memoizedState=null):M=v,Hn(Yh,Hs),Hs|=M;return Un(c,d,P,v),d.child}function yt(c,d){var v=d.ref;(c===null&&v!==null||c!==null&&c.ref!==v)&&(d.flags|=512,d.flags|=2097152)}function Nt(c,d,v,M,P){var B=ri(v)?No:Kr.current;return B=tl(d,B),Do(d,P),v=zh(c,d,v,M,B,P),M=Nu(),c!==null&&!wt?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~P,ul(c,d,P)):(Yn&&M&&Wp(d),d.flags|=1,Un(c,d,v,P),d.child)}function tn(c,d,v,M,P){if(ri(v)){var B=!0;nl(d)}else B=!1;if(Do(d,P),d.stateNode===null)m0(c,d),lc(d,v,M),cc(d,v,M,P),M=!0;else if(c===null){var W=d.stateNode,ue=d.memoizedProps;W.props=ue;var me=W.context,ke=v.contextType;typeof ke=="object"&&ke!==null?ke=vi(ke):(ke=ri(v)?No:Kr.current,ke=tl(d,ke));var $e=v.getDerivedStateFromProps,rt=typeof $e=="function"||typeof W.getSnapshotBeforeUpdate=="function";rt||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(ue!==M||me!==ke)&&ol(d,W,M,ke),Fo=!1;var Ye=d.memoizedState;W.state=Ye,sr(d,M,W,P),me=d.memoizedState,ue!==M||Ye!==me||pi.current||Fo?(typeof $e=="function"&&(yi(d,v,$e,M),me=d.memoizedState),(ue=Fo||wr(d,v,ue,M,Ye,me,ke))?(rt||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(d.flags|=4194308)):(typeof W.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=M,d.memoizedState=me),W.props=M,W.state=me,W.context=ke,M=ue):(typeof W.componentDidMount=="function"&&(d.flags|=4194308),M=!1)}else{W=d.stateNode,n0(c,d),ue=d.memoizedProps,ke=d.type===d.elementType?ue:Os(d.type,ue),W.props=ke,rt=d.pendingProps,Ye=W.context,me=v.contextType,typeof me=="object"&&me!==null?me=vi(me):(me=ri(v)?No:Kr.current,me=tl(d,me));var At=v.getDerivedStateFromProps;($e=typeof At=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(ue!==rt||Ye!==me)&&ol(d,W,M,me),Fo=!1,Ye=d.memoizedState,W.state=Ye,sr(d,M,W,P);var It=d.memoizedState;ue!==rt||Ye!==It||pi.current||Fo?(typeof At=="function"&&(yi(d,v,At,M),It=d.memoizedState),(ke=Fo||wr(d,v,ke,M,Ye,It,me)||!1)?($e||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(M,It,me),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(M,It,me)),typeof W.componentDidUpdate=="function"&&(d.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof W.componentDidUpdate!="function"||ue===c.memoizedProps&&Ye===c.memoizedState||(d.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||ue===c.memoizedProps&&Ye===c.memoizedState||(d.flags|=1024),d.memoizedProps=M,d.memoizedState=It),W.props=M,W.state=It,W.context=me,M=ke):(typeof W.componentDidUpdate!="function"||ue===c.memoizedProps&&Ye===c.memoizedState||(d.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||ue===c.memoizedProps&&Ye===c.memoizedState||(d.flags|=1024),M=!1)}return qt(c,d,v,M,B,P)}function qt(c,d,v,M,P,B){yt(c,d);var W=(d.flags&128)!==0;if(!M&&!W)return P&&Gp(d,v,!1),ul(c,d,B);M=d.stateNode,Gn.current=d;var ue=W&&typeof v.getDerivedStateFromError!="function"?null:M.render();return d.flags|=1,c!==null&&W?(d.child=ma(d,c.child,null,B),d.child=ma(d,null,ue,B)):Un(c,d,ue,B),d.memoizedState=M.state,P&&Gp(d,v,!0),d.child}function En(c){var d=c.stateNode;d.pendingContext?Hp(c,d.pendingContext,d.pendingContext!==d.context):d.context&&Hp(c,d.context,!1),uc(c,d.containerInfo)}function Rr(c,d,v,M,P){return fa(),ic(P),d.flags|=256,Un(c,d,v,M),d.child}var An={dehydrated:null,treeContext:null,retryLane:0};function ao(c){return{baseLanes:c,cachePool:null,transitions:null}}function f0(c,d,v){var M=d.pendingProps,P=Jn.current,B=!1,W=(d.flags&128)!==0,ue;if((ue=W)||(ue=c!==null&&c.memoizedState===null?!1:(P&2)!==0),ue?(B=!0,d.flags&=-129):(c===null||c.memoizedState!==null)&&(P|=1),Hn(Jn,P&1),c===null)return Bh(d),c=d.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((d.mode&1)===0?d.lanes=1:c.data==="$!"?d.lanes=8:d.lanes=1073741824,null):(W=M.children,c=M.fallback,B?(M=d.mode,B=d.child,W={mode:"hidden",children:W},(M&1)===0&&B!==null?(B.childLanes=0,B.pendingProps=W):B=C0(W,M,0,null),c=Gu(c,M,v,null),B.return=d,c.return=d,B.sibling=c,d.child=B,d.child.memoizedState=ao(v),d.memoizedState=An,c):_x(d,W));if(P=c.memoizedState,P!==null&&(ue=P.dehydrated,ue!==null))return KN(c,d,W,M,ue,P,v);if(B){B=M.fallback,W=d.mode,P=c.child,ue=P.sibling;var me={mode:"hidden",children:M.children};return(W&1)===0&&d.child!==P?(M=d.child,M.childLanes=0,M.pendingProps=me,d.deletions=null):(M=_c(P,me),M.subtreeFlags=P.subtreeFlags&14680064),ue!==null?B=_c(ue,B):(B=Gu(B,W,v,null),B.flags|=2),B.return=d,M.return=d,M.sibling=B,d.child=M,M=B,B=d.child,W=c.child.memoizedState,W=W===null?ao(v):{baseLanes:W.baseLanes|v,cachePool:null,transitions:W.transitions},B.memoizedState=W,B.childLanes=c.childLanes&~v,d.memoizedState=An,M}return B=c.child,c=B.sibling,M=_c(B,{mode:"visible",children:M.children}),(d.mode&1)===0&&(M.lanes=v),M.return=d,M.sibling=null,c!==null&&(v=d.deletions,v===null?(d.deletions=[c],d.flags|=16):v.push(c)),d.child=M,d.memoizedState=null,M}function _x(c,d){return d=C0({mode:"visible",children:d},c.mode,0,null),d.return=c,c.child=d}function p0(c,d,v,M){return M!==null&&ic(M),ma(d,c.child,null,v),c=_x(d,d.pendingProps.children),c.flags|=2,d.memoizedState=null,c}function KN(c,d,v,M,P,B,W){if(v)return d.flags&256?(d.flags&=-257,M=z(Error(t(422))),p0(c,d,W,M)):d.memoizedState!==null?(d.child=c.child,d.flags|=128,null):(B=M.fallback,P=d.mode,M=C0({mode:"visible",children:M.children},P,0,null),B=Gu(B,P,W,null),B.flags|=2,M.return=d,B.return=d,M.sibling=B,d.child=M,(d.mode&1)!==0&&ma(d,c.child,null,W),d.child.memoizedState=ao(W),d.memoizedState=An,B);if((d.mode&1)===0)return p0(c,d,W,null);if(P.data==="$!"){if(M=P.nextSibling&&P.nextSibling.dataset,M)var ue=M.dgst;return M=ue,B=Error(t(419)),M=z(B,M,void 0),p0(c,d,W,M)}if(ue=(W&c.childLanes)!==0,wt||ue){if(M=si,M!==null){switch(W&-W){case 4:P=2;break;case 16:P=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:P=32;break;case 536870912:P=268435456;break;default:P=0}P=(P&(M.suspendedLanes|W))!==0?0:P,P!==0&&P!==B.retryLane&&(B.retryLane=P,js(c,P),Ho(M,c,P,-1))}return Dx(),M=z(Error(t(421))),p0(c,d,W,M)}return P.data==="$?"?(d.flags|=128,d.child=c.child,d=aB.bind(null,c),P._reactRetry=d,null):(c=B.treeContext,gi=Po(P.nextSibling),Yr=d,Yn=!0,ms=null,c!==null&&(mi[Or++]=ct,mi[Or++]=ps,mi[Or++]=il,ct=c.id,ps=c.overflow,il=d),d=_x(d,M.children),d.flags|=4096,d)}function aS(c,d,v){c.lanes|=d;var M=c.alternate;M!==null&&(M.lanes|=d),ac(c.return,d,v)}function wx(c,d,v,M,P){var B=c.memoizedState;B===null?c.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:M,tail:v,tailMode:P}:(B.isBackwards=d,B.rendering=null,B.renderingStartTime=0,B.last=M,B.tail=v,B.tailMode=P)}function lS(c,d,v){var M=d.pendingProps,P=M.revealOrder,B=M.tail;if(Un(c,d,M.children,v),M=Jn.current,(M&2)!==0)M=M&1|2,d.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=d.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&aS(c,v,d);else if(c.tag===19)aS(c,v,d);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===d)break e;for(;c.sibling===null;){if(c.return===null||c.return===d)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}M&=1}if(Hn(Jn,M),(d.mode&1)===0)d.memoizedState=null;else switch(P){case"forwards":for(v=d.child,P=null;v!==null;)c=v.alternate,c!==null&&jr(c)===null&&(P=v),v=v.sibling;v=P,v===null?(P=d.child,d.child=null):(P=v.sibling,v.sibling=null),wx(d,!1,P,v,B);break;case"backwards":for(v=null,P=d.child,d.child=null;P!==null;){if(c=P.alternate,c!==null&&jr(c)===null){d.child=P;break}c=P.sibling,P.sibling=v,v=P,P=c}wx(d,!0,v,null,B);break;case"together":wx(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function m0(c,d){(d.mode&1)===0&&c!==null&&(c.alternate=null,d.alternate=null,d.flags|=2)}function ul(c,d,v){if(c!==null&&(d.dependencies=c.dependencies),Uu|=d.lanes,(v&d.childLanes)===0)return null;if(c!==null&&d.child!==c.child)throw Error(t(153));if(d.child!==null){for(c=d.child,v=_c(c,c.pendingProps),d.child=v,v.return=d;c.sibling!==null;)c=c.sibling,v=v.sibling=_c(c,c.pendingProps),v.return=d;v.sibling=null}return d.child}function YN(c,d,v){switch(d.tag){case 3:En(d),fa();break;case 5:Uh(d);break;case 1:ri(d.type)&&nl(d);break;case 4:uc(d,d.stateNode.containerInfo);break;case 10:var M=d.type._context,P=d.memoizedProps.value;Hn(Ru,M._currentValue),M._currentValue=P;break;case 13:if(M=d.memoizedState,M!==null)return M.dehydrated!==null?(Hn(Jn,Jn.current&1),d.flags|=128,null):(v&d.child.childLanes)!==0?f0(c,d,v):(Hn(Jn,Jn.current&1),c=ul(c,d,v),c!==null?c.sibling:null);Hn(Jn,Jn.current&1);break;case 19:if(M=(v&d.childLanes)!==0,(c.flags&128)!==0){if(M)return lS(c,d,v);d.flags|=128}if(P=d.memoizedState,P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),Hn(Jn,Jn.current),M)break;return null;case 22:case 23:return d.lanes=0,Oe(c,d,v)}return ul(c,d,v)}var cS,bx,uS,dS;cS=function(c,d){for(var v=d.child;v!==null;){if(v.tag===5||v.tag===6)c.appendChild(v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===d)break;for(;v.sibling===null;){if(v.return===null||v.return===d)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},bx=function(){},uS=function(c,d,v,M){var P=c.memoizedProps;if(P!==M){c=d.stateNode,Ni(vs.current);var B=null;switch(v){case"input":P=we(c,P),M=we(c,M),B=[];break;case"select":P=H({},P,{value:void 0}),M=H({},M,{value:void 0}),B=[];break;case"textarea":P=dn(c,P),M=dn(c,M),B=[];break;default:typeof P.onClick!="function"&&typeof M.onClick=="function"&&(c.onclick=Su)}he(v,M);var W;v=null;for(ke in P)if(!M.hasOwnProperty(ke)&&P.hasOwnProperty(ke)&&P[ke]!=null)if(ke==="style"){var ue=P[ke];for(W in ue)ue.hasOwnProperty(W)&&(v||(v={}),v[W]="")}else ke!=="dangerouslySetInnerHTML"&&ke!=="children"&&ke!=="suppressContentEditableWarning"&&ke!=="suppressHydrationWarning"&&ke!=="autoFocus"&&(i.hasOwnProperty(ke)?B||(B=[]):(B=B||[]).push(ke,null));for(ke in M){var me=M[ke];if(ue=P?.[ke],M.hasOwnProperty(ke)&&me!==ue&&(me!=null||ue!=null))if(ke==="style")if(ue){for(W in ue)!ue.hasOwnProperty(W)||me&&me.hasOwnProperty(W)||(v||(v={}),v[W]="");for(W in me)me.hasOwnProperty(W)&&ue[W]!==me[W]&&(v||(v={}),v[W]=me[W])}else v||(B||(B=[]),B.push(ke,v)),v=me;else ke==="dangerouslySetInnerHTML"?(me=me?me.__html:void 0,ue=ue?ue.__html:void 0,me!=null&&ue!==me&&(B=B||[]).push(ke,me)):ke==="children"?typeof me!="string"&&typeof me!="number"||(B=B||[]).push(ke,""+me):ke!=="suppressContentEditableWarning"&&ke!=="suppressHydrationWarning"&&(i.hasOwnProperty(ke)?(me!=null&&ke==="onScroll"&&Vn("scroll",c),B||ue===me||(B=[])):(B=B||[]).push(ke,me))}v&&(B=B||[]).push("style",v);var ke=B;(d.updateQueue=ke)&&(d.flags|=4)}},dS=function(c,d,v,M){v!==M&&(d.flags|=4)};function em(c,d){if(!Yn)switch(c.tailMode){case"hidden":d=c.tail;for(var v=null;d!==null;)d.alternate!==null&&(v=d),d=d.sibling;v===null?c.tail=null:v.sibling=null;break;case"collapsed":v=c.tail;for(var M=null;v!==null;)v.alternate!==null&&(M=v),v=v.sibling;M===null?d||c.tail===null?c.tail=null:c.tail.sibling=null:M.sibling=null}}function ki(c){var d=c.alternate!==null&&c.alternate.child===c.child,v=0,M=0;if(d)for(var P=c.child;P!==null;)v|=P.lanes|P.childLanes,M|=P.subtreeFlags&14680064,M|=P.flags&14680064,P.return=c,P=P.sibling;else for(P=c.child;P!==null;)v|=P.lanes|P.childLanes,M|=P.subtreeFlags,M|=P.flags,P.return=c,P=P.sibling;return c.subtreeFlags|=M,c.childLanes=v,d}function qN(c,d,v){var M=d.pendingProps;switch(ko(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ki(d),null;case 1:return ri(d.type)&&Eu(),ki(d),null;case 3:return M=d.stateNode,so(),Wn(pi),Wn(Kr),Bi(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(c===null||c.child===null)&&(rc(d)?d.flags|=4:c===null||c.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,ms!==null&&(Nx(ms),ms=null))),bx(c,d),ki(d),null;case 5:dc(d);var P=Ni(va.current);if(v=d.type,c!==null&&d.stateNode!=null)uS(c,d,v,M,P),c.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!M){if(d.stateNode===null)throw Error(t(166));return ki(d),null}if(c=Ni(vs.current),rc(d)){M=d.stateNode,v=d.type;var B=d.memoizedProps;switch(M[Tr]=d,M[nc]=B,c=(d.mode&1)!==0,v){case"dialog":Vn("cancel",M),Vn("close",M);break;case"iframe":case"object":case"embed":Vn("load",M);break;case"video":case"audio":for(P=0;P<da.length;P++)Vn(da[P],M);break;case"source":Vn("error",M);break;case"img":case"image":case"link":Vn("error",M),Vn("load",M);break;case"details":Vn("toggle",M);break;case"input":De(M,B),Vn("invalid",M);break;case"select":M._wrapperState={wasMultiple:!!B.multiple},Vn("invalid",M);break;case"textarea":se(M,B),Vn("invalid",M)}he(v,B),P=null;for(var W in B)if(B.hasOwnProperty(W)){var ue=B[W];W==="children"?typeof ue=="string"?M.textContent!==ue&&(B.suppressHydrationWarning!==!0&&Au(M.textContent,ue,c),P=["children",ue]):typeof ue=="number"&&M.textContent!==""+ue&&(B.suppressHydrationWarning!==!0&&Au(M.textContent,ue,c),P=["children",""+ue]):i.hasOwnProperty(W)&&ue!=null&&W==="onScroll"&&Vn("scroll",M)}switch(v){case"input":Xe(M),st(M,B,!0);break;case"textarea":Xe(M),Ce(M);break;case"select":case"option":break;default:typeof B.onClick=="function"&&(M.onclick=Su)}M=P,d.updateQueue=M,M!==null&&(d.flags|=4)}else{W=P.nodeType===9?P:P.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=et(v)),c==="http://www.w3.org/1999/xhtml"?v==="script"?(c=W.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof M.is=="string"?c=W.createElement(v,{is:M.is}):(c=W.createElement(v),v==="select"&&(W=c,M.multiple?W.multiple=!0:M.size&&(W.size=M.size))):c=W.createElementNS(c,v),c[Tr]=d,c[nc]=M,cS(c,d,!1,!1),d.stateNode=c;e:{switch(W=Ue(v,M),v){case"dialog":Vn("cancel",c),Vn("close",c),P=M;break;case"iframe":case"object":case"embed":Vn("load",c),P=M;break;case"video":case"audio":for(P=0;P<da.length;P++)Vn(da[P],c);P=M;break;case"source":Vn("error",c),P=M;break;case"img":case"image":case"link":Vn("error",c),Vn("load",c),P=M;break;case"details":Vn("toggle",c),P=M;break;case"input":De(c,M),P=we(c,M),Vn("invalid",c);break;case"option":P=M;break;case"select":c._wrapperState={wasMultiple:!!M.multiple},P=H({},M,{value:void 0}),Vn("invalid",c);break;case"textarea":se(c,M),P=dn(c,M),Vn("invalid",c);break;default:P=M}he(v,P),ue=P;for(B in ue)if(ue.hasOwnProperty(B)){var me=ue[B];B==="style"?vt(c,me):B==="dangerouslySetInnerHTML"?(me=me?me.__html:void 0,me!=null&&xt(c,me)):B==="children"?typeof me=="string"?(v!=="textarea"||me!=="")&&tt(c,me):typeof me=="number"&&tt(c,""+me):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(i.hasOwnProperty(B)?me!=null&&B==="onScroll"&&Vn("scroll",c):me!=null&&E(c,B,me,W))}switch(v){case"input":Xe(c),st(c,M,!1);break;case"textarea":Xe(c),Ce(c);break;case"option":M.value!=null&&c.setAttribute("value",""+je(M.value));break;case"select":c.multiple=!!M.multiple,B=M.value,B!=null?Ut(c,!!M.multiple,B,!1):M.defaultValue!=null&&Ut(c,!!M.multiple,M.defaultValue,!0);break;default:typeof P.onClick=="function"&&(c.onclick=Su)}switch(v){case"button":case"input":case"select":case"textarea":M=!!M.autoFocus;break e;case"img":M=!0;break e;default:M=!1}}M&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return ki(d),null;case 6:if(c&&d.stateNode!=null)dS(c,d,c.memoizedProps,M);else{if(typeof M!="string"&&d.stateNode===null)throw Error(t(166));if(v=Ni(va.current),Ni(vs.current),rc(d)){if(M=d.stateNode,v=d.memoizedProps,M[Tr]=d,(B=M.nodeValue!==v)&&(c=Yr,c!==null))switch(c.tag){case 3:Au(M.nodeValue,v,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&Au(M.nodeValue,v,(c.mode&1)!==0)}B&&(d.flags|=4)}else M=(v.nodeType===9?v:v.ownerDocument).createTextNode(M),M[Tr]=d,d.stateNode=M}return ki(d),null;case 13:if(Wn(Jn),M=d.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(Yn&&gi!==null&&(d.mode&1)!==0&&(d.flags&128)===0)Kp(),fa(),d.flags|=98560,B=!1;else if(B=rc(d),M!==null&&M.dehydrated!==null){if(c===null){if(!B)throw Error(t(318));if(B=d.memoizedState,B=B!==null?B.dehydrated:null,!B)throw Error(t(317));B[Tr]=d}else fa(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;ki(d),B=!1}else ms!==null&&(Nx(ms),ms=null),B=!0;if(!B)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=v,d):(M=M!==null,M!==(c!==null&&c.memoizedState!==null)&&M&&(d.child.flags|=8192,(d.mode&1)!==0&&(c===null||(Jn.current&1)!==0?qr===0&&(qr=3):Dx())),d.updateQueue!==null&&(d.flags|=4),ki(d),null);case 4:return so(),bx(c,d),c===null&&$l(d.stateNode.containerInfo),ki(d),null;case 10:return oc(d.type._context),ki(d),null;case 17:return ri(d.type)&&Eu(),ki(d),null;case 19:if(Wn(Jn),B=d.memoizedState,B===null)return ki(d),null;if(M=(d.flags&128)!==0,W=B.rendering,W===null)if(M)em(B,!1);else{if(qr!==0||c!==null&&(c.flags&128)!==0)for(c=d.child;c!==null;){if(W=jr(c),W!==null){for(d.flags|=128,em(B,!1),M=W.updateQueue,M!==null&&(d.updateQueue=M,d.flags|=4),d.subtreeFlags=0,M=v,v=d.child;v!==null;)B=v,c=M,B.flags&=14680066,W=B.alternate,W===null?(B.childLanes=0,B.lanes=c,B.child=null,B.subtreeFlags=0,B.memoizedProps=null,B.memoizedState=null,B.updateQueue=null,B.dependencies=null,B.stateNode=null):(B.childLanes=W.childLanes,B.lanes=W.lanes,B.child=W.child,B.subtreeFlags=0,B.deletions=null,B.memoizedProps=W.memoizedProps,B.memoizedState=W.memoizedState,B.updateQueue=W.updateQueue,B.type=W.type,c=W.dependencies,B.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),v=v.sibling;return Hn(Jn,Jn.current&1|2),d.child}c=c.sibling}B.tail!==null&&Pe()>qh&&(d.flags|=128,M=!0,em(B,!1),d.lanes=4194304)}else{if(!M)if(c=jr(W),c!==null){if(d.flags|=128,M=!0,v=c.updateQueue,v!==null&&(d.updateQueue=v,d.flags|=4),em(B,!0),B.tail===null&&B.tailMode==="hidden"&&!W.alternate&&!Yn)return ki(d),null}else 2*Pe()-B.renderingStartTime>qh&&v!==1073741824&&(d.flags|=128,M=!0,em(B,!1),d.lanes=4194304);B.isBackwards?(W.sibling=d.child,d.child=W):(v=B.last,v!==null?v.sibling=W:d.child=W,B.last=W)}return B.tail!==null?(d=B.tail,B.rendering=d,B.tail=d.sibling,B.renderingStartTime=Pe(),d.sibling=null,v=Jn.current,Hn(Jn,M?v&1|2:v&1),d):(ki(d),null);case 22:case 23:return kx(),M=d.memoizedState!==null,c!==null&&c.memoizedState!==null!==M&&(d.flags|=8192),M&&(d.mode&1)!==0?(Hs&1073741824)!==0&&(ki(d),d.subtreeFlags&6&&(d.flags|=8192)):ki(d),null;case 24:return null;case 25:return null}throw Error(t(156,d.tag))}function QN(c,d){switch(ko(d),d.tag){case 1:return ri(d.type)&&Eu(),c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 3:return so(),Wn(pi),Wn(Kr),Bi(),c=d.flags,(c&65536)!==0&&(c&128)===0?(d.flags=c&-65537|128,d):null;case 5:return dc(d),null;case 13:if(Wn(Jn),c=d.memoizedState,c!==null&&c.dehydrated!==null){if(d.alternate===null)throw Error(t(340));fa()}return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 19:return Wn(Jn),null;case 4:return so(),null;case 10:return oc(d.type._context),null;case 22:case 23:return kx(),null;case 24:return null;default:return null}}var g0=!1,Di=!1,ZN=typeof WeakSet=="function"?WeakSet:Set,Tt=null;function Kh(c,d){var v=c.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(M){br(c,d,M)}else v.current=null}function Ax(c,d,v){try{v()}catch(M){br(c,d,M)}}var hS=!1;function $N(c,d){if(tc=ls,c=ir(),Br(c)){if("selectionStart"in c)var v={start:c.selectionStart,end:c.selectionEnd};else e:{v=(v=c.ownerDocument)&&v.defaultView||window;var M=v.getSelection&&v.getSelection();if(M&&M.rangeCount!==0){v=M.anchorNode;var P=M.anchorOffset,B=M.focusNode;M=M.focusOffset;try{v.nodeType,B.nodeType}catch{v=null;break e}var W=0,ue=-1,me=-1,ke=0,$e=0,rt=c,Ye=null;t:for(;;){for(var At;rt!==v||P!==0&&rt.nodeType!==3||(ue=W+P),rt!==B||M!==0&&rt.nodeType!==3||(me=W+M),rt.nodeType===3&&(W+=rt.nodeValue.length),(At=rt.firstChild)!==null;)Ye=rt,rt=At;for(;;){if(rt===c)break t;if(Ye===v&&++ke===P&&(ue=W),Ye===B&&++$e===M&&(me=W),(At=rt.nextSibling)!==null)break;rt=Ye,Ye=rt.parentNode}rt=At}v=ue===-1||me===-1?null:{start:ue,end:me}}else v=null}v=v||{start:0,end:0}}else v=null;for(Dp={focusedElem:c,selectionRange:v},ls=!1,Tt=d;Tt!==null;)if(d=Tt,c=d.child,(d.subtreeFlags&1028)!==0&&c!==null)c.return=d,Tt=c;else for(;Tt!==null;){d=Tt;try{var It=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(It!==null){var Bt=It.memoizedProps,Pr=It.memoizedState,Ee=d.stateNode,ve=Ee.getSnapshotBeforeUpdate(d.elementType===d.type?Bt:Os(d.type,Bt),Pr);Ee.__reactInternalSnapshotBeforeUpdate=ve}break;case 3:var Re=d.stateNode.containerInfo;Re.nodeType===1?Re.textContent="":Re.nodeType===9&&Re.documentElement&&Re.removeChild(Re.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ot){br(d,d.return,ot)}if(c=d.sibling,c!==null){c.return=d.return,Tt=c;break}Tt=d.return}return It=hS,hS=!1,It}function tm(c,d,v){var M=d.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var P=M=M.next;do{if((P.tag&c)===c){var B=P.destroy;P.destroy=void 0,B!==void 0&&Ax(d,v,B)}P=P.next}while(P!==M)}}function v0(c,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var v=d=d.next;do{if((v.tag&c)===c){var M=v.create;v.destroy=M()}v=v.next}while(v!==d)}}function Sx(c){var d=c.ref;if(d!==null){var v=c.stateNode;switch(c.tag){case 5:c=v;break;default:c=v}typeof d=="function"?d(c):d.current=c}}function fS(c){var d=c.alternate;d!==null&&(c.alternate=null,fS(d)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(d=c.stateNode,d!==null&&(delete d[Tr],delete d[nc],delete d[el],delete d[Ch],delete d[Th])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function pS(c){return c.tag===5||c.tag===3||c.tag===4}function mS(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||pS(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Ex(c,d,v){var M=c.tag;if(M===5||M===6)c=c.stateNode,d?v.nodeType===8?v.parentNode.insertBefore(c,d):v.insertBefore(c,d):(v.nodeType===8?(d=v.parentNode,d.insertBefore(c,v)):(d=v,d.appendChild(c)),v=v._reactRootContainer,v!=null||d.onclick!==null||(d.onclick=Su));else if(M!==4&&(c=c.child,c!==null))for(Ex(c,d,v),c=c.sibling;c!==null;)Ex(c,d,v),c=c.sibling}function Mx(c,d,v){var M=c.tag;if(M===5||M===6)c=c.stateNode,d?v.insertBefore(c,d):v.appendChild(c);else if(M!==4&&(c=c.child,c!==null))for(Mx(c,d,v),c=c.sibling;c!==null;)Mx(c,d,v),c=c.sibling}var wi=null,jo=!1;function mc(c,d,v){for(v=v.child;v!==null;)gS(c,d,v),v=v.sibling}function gS(c,d,v){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(gt,v)}catch{}switch(v.tag){case 5:Di||Kh(v,d);case 6:var M=wi,P=jo;wi=null,mc(c,d,v),wi=M,jo=P,wi!==null&&(jo?(c=wi,v=v.stateNode,c.nodeType===8?c.parentNode.removeChild(v):c.removeChild(v)):wi.removeChild(v.stateNode));break;case 18:wi!==null&&(jo?(c=wi,v=v.stateNode,c.nodeType===8?Mh(c.parentNode,v):c.nodeType===1&&Mh(c,v),hu(c)):Mh(wi,v.stateNode));break;case 4:M=wi,P=jo,wi=v.stateNode.containerInfo,jo=!0,mc(c,d,v),wi=M,jo=P;break;case 0:case 11:case 14:case 15:if(!Di&&(M=v.updateQueue,M!==null&&(M=M.lastEffect,M!==null))){P=M=M.next;do{var B=P,W=B.destroy;B=B.tag,W!==void 0&&((B&2)!==0||(B&4)!==0)&&Ax(v,d,W),P=P.next}while(P!==M)}mc(c,d,v);break;case 1:if(!Di&&(Kh(v,d),M=v.stateNode,typeof M.componentWillUnmount=="function"))try{M.props=v.memoizedProps,M.state=v.memoizedState,M.componentWillUnmount()}catch(ue){br(v,d,ue)}mc(c,d,v);break;case 21:mc(c,d,v);break;case 22:v.mode&1?(Di=(M=Di)||v.memoizedState!==null,mc(c,d,v),Di=M):mc(c,d,v);break;default:mc(c,d,v)}}function vS(c){var d=c.updateQueue;if(d!==null){c.updateQueue=null;var v=c.stateNode;v===null&&(v=c.stateNode=new ZN),d.forEach(function(M){var P=lB.bind(null,c,M);v.has(M)||(v.add(M),M.then(P,P))})}}function zo(c,d){var v=d.deletions;if(v!==null)for(var M=0;M<v.length;M++){var P=v[M];try{var B=c,W=d,ue=W;e:for(;ue!==null;){switch(ue.tag){case 5:wi=ue.stateNode,jo=!1;break e;case 3:wi=ue.stateNode.containerInfo,jo=!0;break e;case 4:wi=ue.stateNode.containerInfo,jo=!0;break e}ue=ue.return}if(wi===null)throw Error(t(160));gS(B,W,P),wi=null,jo=!1;var me=P.alternate;me!==null&&(me.return=null),P.return=null}catch(ke){br(P,d,ke)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)yS(d,c),d=d.sibling}function yS(c,d){var v=c.alternate,M=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(zo(d,c),ba(c),M&4){try{tm(3,c,c.return),v0(3,c)}catch(Bt){br(c,c.return,Bt)}try{tm(5,c,c.return)}catch(Bt){br(c,c.return,Bt)}}break;case 1:zo(d,c),ba(c),M&512&&v!==null&&Kh(v,v.return);break;case 5:if(zo(d,c),ba(c),M&512&&v!==null&&Kh(v,v.return),c.flags&32){var P=c.stateNode;try{tt(P,"")}catch(Bt){br(c,c.return,Bt)}}if(M&4&&(P=c.stateNode,P!=null)){var B=c.memoizedProps,W=v!==null?v.memoizedProps:B,ue=c.type,me=c.updateQueue;if(c.updateQueue=null,me!==null)try{ue==="input"&&B.type==="radio"&&B.name!=null&&Fe(P,B),Ue(ue,W);var ke=Ue(ue,B);for(W=0;W<me.length;W+=2){var $e=me[W],rt=me[W+1];$e==="style"?vt(P,rt):$e==="dangerouslySetInnerHTML"?xt(P,rt):$e==="children"?tt(P,rt):E(P,$e,rt,ke)}switch(ue){case"input":Qe(P,B);break;case"textarea":Y(P,B);break;case"select":var Ye=P._wrapperState.wasMultiple;P._wrapperState.wasMultiple=!!B.multiple;var At=B.value;At!=null?Ut(P,!!B.multiple,At,!1):Ye!==!!B.multiple&&(B.defaultValue!=null?Ut(P,!!B.multiple,B.defaultValue,!0):Ut(P,!!B.multiple,B.multiple?[]:"",!1))}P[nc]=B}catch(Bt){br(c,c.return,Bt)}}break;case 6:if(zo(d,c),ba(c),M&4){if(c.stateNode===null)throw Error(t(162));P=c.stateNode,B=c.memoizedProps;try{P.nodeValue=B}catch(Bt){br(c,c.return,Bt)}}break;case 3:if(zo(d,c),ba(c),M&4&&v!==null&&v.memoizedState.isDehydrated)try{hu(d.containerInfo)}catch(Bt){br(c,c.return,Bt)}break;case 4:zo(d,c),ba(c);break;case 13:zo(d,c),ba(c),P=c.child,P.flags&8192&&(B=P.memoizedState!==null,P.stateNode.isHidden=B,!B||P.alternate!==null&&P.alternate.memoizedState!==null||(Rx=Pe())),M&4&&vS(c);break;case 22:if($e=v!==null&&v.memoizedState!==null,c.mode&1?(Di=(ke=Di)||$e,zo(d,c),Di=ke):zo(d,c),ba(c),M&8192){if(ke=c.memoizedState!==null,(c.stateNode.isHidden=ke)&&!$e&&(c.mode&1)!==0)for(Tt=c,$e=c.child;$e!==null;){for(rt=Tt=$e;Tt!==null;){switch(Ye=Tt,At=Ye.child,Ye.tag){case 0:case 11:case 14:case 15:tm(4,Ye,Ye.return);break;case 1:Kh(Ye,Ye.return);var It=Ye.stateNode;if(typeof It.componentWillUnmount=="function"){M=Ye,v=Ye.return;try{d=M,It.props=d.memoizedProps,It.state=d.memoizedState,It.componentWillUnmount()}catch(Bt){br(M,v,Bt)}}break;case 5:Kh(Ye,Ye.return);break;case 22:if(Ye.memoizedState!==null){wS(rt);continue}}At!==null?(At.return=Ye,Tt=At):wS(rt)}$e=$e.sibling}e:for($e=null,rt=c;;){if(rt.tag===5){if($e===null){$e=rt;try{P=rt.stateNode,ke?(B=P.style,typeof B.setProperty=="function"?B.setProperty("display","none","important"):B.display="none"):(ue=rt.stateNode,me=rt.memoizedProps.style,W=me!=null&&me.hasOwnProperty("display")?me.display:null,ue.style.display=Ct("display",W))}catch(Bt){br(c,c.return,Bt)}}}else if(rt.tag===6){if($e===null)try{rt.stateNode.nodeValue=ke?"":rt.memoizedProps}catch(Bt){br(c,c.return,Bt)}}else if((rt.tag!==22&&rt.tag!==23||rt.memoizedState===null||rt===c)&&rt.child!==null){rt.child.return=rt,rt=rt.child;continue}if(rt===c)break e;for(;rt.sibling===null;){if(rt.return===null||rt.return===c)break e;$e===rt&&($e=null),rt=rt.return}$e===rt&&($e=null),rt.sibling.return=rt.return,rt=rt.sibling}}break;case 19:zo(d,c),ba(c),M&4&&vS(c);break;case 21:break;default:zo(d,c),ba(c)}}function ba(c){var d=c.flags;if(d&2){try{e:{for(var v=c.return;v!==null;){if(pS(v)){var M=v;break e}v=v.return}throw Error(t(160))}switch(M.tag){case 5:var P=M.stateNode;M.flags&32&&(tt(P,""),M.flags&=-33);var B=mS(c);Mx(c,B,P);break;case 3:case 4:var W=M.stateNode.containerInfo,ue=mS(c);Ex(c,ue,W);break;default:throw Error(t(161))}}catch(me){br(c,c.return,me)}c.flags&=-3}d&4096&&(c.flags&=-4097)}function eB(c,d,v){Tt=c,xS(c)}function xS(c,d,v){for(var M=(c.mode&1)!==0;Tt!==null;){var P=Tt,B=P.child;if(P.tag===22&&M){var W=P.memoizedState!==null||g0;if(!W){var ue=P.alternate,me=ue!==null&&ue.memoizedState!==null||Di;ue=g0;var ke=Di;if(g0=W,(Di=me)&&!ke)for(Tt=P;Tt!==null;)W=Tt,me=W.child,W.tag===22&&W.memoizedState!==null?bS(P):me!==null?(me.return=W,Tt=me):bS(P);for(;B!==null;)Tt=B,xS(B),B=B.sibling;Tt=P,g0=ue,Di=ke}_S(c)}else(P.subtreeFlags&8772)!==0&&B!==null?(B.return=P,Tt=B):_S(c)}}function _S(c){for(;Tt!==null;){var d=Tt;if((d.flags&8772)!==0){var v=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:Di||v0(5,d);break;case 1:var M=d.stateNode;if(d.flags&4&&!Di)if(v===null)M.componentDidMount();else{var P=d.elementType===d.type?v.memoizedProps:Os(d.type,v.memoizedProps);M.componentDidUpdate(P,v.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var B=d.updateQueue;B!==null&&pr(d,B,M);break;case 3:var W=d.updateQueue;if(W!==null){if(v=null,d.child!==null)switch(d.child.tag){case 5:v=d.child.stateNode;break;case 1:v=d.child.stateNode}pr(d,W,v)}break;case 5:var ue=d.stateNode;if(v===null&&d.flags&4){v=ue;var me=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":me.autoFocus&&v.focus();break;case"img":me.src&&(v.src=me.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var ke=d.alternate;if(ke!==null){var $e=ke.memoizedState;if($e!==null){var rt=$e.dehydrated;rt!==null&&hu(rt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Di||d.flags&512&&Sx(d)}catch(Ye){br(d,d.return,Ye)}}if(d===c){Tt=null;break}if(v=d.sibling,v!==null){v.return=d.return,Tt=v;break}Tt=d.return}}function wS(c){for(;Tt!==null;){var d=Tt;if(d===c){Tt=null;break}var v=d.sibling;if(v!==null){v.return=d.return,Tt=v;break}Tt=d.return}}function bS(c){for(;Tt!==null;){var d=Tt;try{switch(d.tag){case 0:case 11:case 15:var v=d.return;try{v0(4,d)}catch(me){br(d,v,me)}break;case 1:var M=d.stateNode;if(typeof M.componentDidMount=="function"){var P=d.return;try{M.componentDidMount()}catch(me){br(d,P,me)}}var B=d.return;try{Sx(d)}catch(me){br(d,B,me)}break;case 5:var W=d.return;try{Sx(d)}catch(me){br(d,W,me)}}}catch(me){br(d,d.return,me)}if(d===c){Tt=null;break}var ue=d.sibling;if(ue!==null){ue.return=d.return,Tt=ue;break}Tt=d.return}}var tB=Math.ceil,y0=R.ReactCurrentDispatcher,Cx=R.ReactCurrentOwner,lo=R.ReactCurrentBatchConfig,Bn=0,si=null,Hr=null,bi=0,Hs=0,Yh=ur(0),qr=0,nm=null,Uu=0,x0=0,Tx=0,rm=null,_s=null,Rx=0,qh=1/0,dl=null,_0=!1,Px=null,gc=null,w0=!1,vc=null,b0=0,im=0,Ix=null,A0=-1,S0=0;function Qi(){return(Bn&6)!==0?Pe():A0!==-1?A0:A0=Pe()}function yc(c){return(c.mode&1)===0?1:(Bn&2)!==0&&bi!==0?bi&-bi:xx.transition!==null?(S0===0&&(S0=Kn()),S0):(c=Tn,c!==0||(c=window.event,c=c===void 0?16:zg(c.type)),c)}function Ho(c,d,v,M){if(50<im)throw im=0,Ix=null,Error(t(185));Mr(c,v,M),((Bn&2)===0||c!==si)&&(c===si&&((Bn&2)===0&&(x0|=v),qr===4&&xc(c,bi)),ws(c,M),v===1&&Bn===0&&(d.mode&1)===0&&(qh=Pe()+500,Cu&&ro()))}function ws(c,d){var v=c.callbackNode;Nn(c,d);var M=Xt(c,c===si?bi:0);if(M===0)v!==null&&He(v),c.callbackNode=null,c.callbackPriority=0;else if(d=M&-M,c.callbackPriority!==d){if(v!=null&&He(v),d===1)c.tag===0?t0(SS.bind(null,c)):Tu(SS.bind(null,c)),yx(function(){(Bn&6)===0&&ro()}),v=null;else{switch(jl(M)){case 1:v=at;break;case 4:v=ut;break;case 16:v=Lt;break;case 536870912:v=Ot;break;default:v=Lt}v=LS(v,AS.bind(null,c))}c.callbackPriority=d,c.callbackNode=v}}function AS(c,d){if(A0=-1,S0=0,(Bn&6)!==0)throw Error(t(327));var v=c.callbackNode;if(Qh()&&c.callbackNode!==v)return null;var M=Xt(c,c===si?bi:0);if(M===0)return null;if((M&30)!==0||(M&c.expiredLanes)!==0||d)d=E0(c,M);else{d=M;var P=Bn;Bn|=2;var B=MS();(si!==c||bi!==d)&&(dl=null,qh=Pe()+500,zu(c,d));do try{iB();break}catch(ue){ES(c,ue)}while(!0);sc(),y0.current=B,Bn=P,Hr!==null?d=0:(si=null,bi=0,d=qr)}if(d!==0){if(d===2&&(P=mn(c),P!==0&&(M=P,d=Lx(c,P))),d===1)throw v=nm,zu(c,0),xc(c,M),ws(c,Pe()),v;if(d===6)xc(c,M);else{if(P=c.current.alternate,(M&30)===0&&!nB(P)&&(d=E0(c,M),d===2&&(B=mn(c),B!==0&&(M=B,d=Lx(c,B))),d===1))throw v=nm,zu(c,0),xc(c,M),ws(c,Pe()),v;switch(c.finishedWork=P,c.finishedLanes=M,d){case 0:case 1:throw Error(t(345));case 2:Hu(c,_s,dl);break;case 3:if(xc(c,M),(M&130023424)===M&&(d=Rx+500-Pe(),10<d)){if(Xt(c,0)!==0)break;if(P=c.suspendedLanes,(P&M)!==M){Qi(),c.pingedLanes|=c.suspendedLanes&P;break}c.timeoutHandle=Op(Hu.bind(null,c,_s,dl),d);break}Hu(c,_s,dl);break;case 4:if(xc(c,M),(M&4194240)===M)break;for(d=c.eventTimes,P=-1;0<M;){var W=31-jt(M);B=1<<W,W=d[W],W>P&&(P=W),M&=~B}if(M=P,M=Pe()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*tB(M/1960))-M,10<M){c.timeoutHandle=Op(Hu.bind(null,c,_s,dl),M);break}Hu(c,_s,dl);break;case 5:Hu(c,_s,dl);break;default:throw Error(t(329))}}}return ws(c,Pe()),c.callbackNode===v?AS.bind(null,c):null}function Lx(c,d){var v=rm;return c.current.memoizedState.isDehydrated&&(zu(c,d).flags|=256),c=E0(c,d),c!==2&&(d=_s,_s=v,d!==null&&Nx(d)),c}function Nx(c){_s===null?_s=c:_s.push.apply(_s,c)}function nB(c){for(var d=c;;){if(d.flags&16384){var v=d.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var M=0;M<v.length;M++){var P=v[M],B=P.getSnapshot;P=P.value;try{if(!Wi(B(),P))return!1}catch{return!1}}}if(v=d.child,d.subtreeFlags&16384&&v!==null)v.return=d,d=v;else{if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function xc(c,d){for(d&=~Tx,d&=~x0,c.suspendedLanes|=d,c.pingedLanes&=~d,c=c.expirationTimes;0<d;){var v=31-jt(d),M=1<<v;c[v]=-1,d&=~M}}function SS(c){if((Bn&6)!==0)throw Error(t(327));Qh();var d=Xt(c,0);if((d&1)===0)return ws(c,Pe()),null;var v=E0(c,d);if(c.tag!==0&&v===2){var M=mn(c);M!==0&&(d=M,v=Lx(c,M))}if(v===1)throw v=nm,zu(c,0),xc(c,d),ws(c,Pe()),v;if(v===6)throw Error(t(345));return c.finishedWork=c.current.alternate,c.finishedLanes=d,Hu(c,_s,dl),ws(c,Pe()),null}function Bx(c,d){var v=Bn;Bn|=1;try{return c(d)}finally{Bn=v,Bn===0&&(qh=Pe()+500,Cu&&ro())}}function ju(c){vc!==null&&vc.tag===0&&(Bn&6)===0&&Qh();var d=Bn;Bn|=1;var v=lo.transition,M=Tn;try{if(lo.transition=null,Tn=1,c)return c()}finally{Tn=M,lo.transition=v,Bn=d,(Bn&6)===0&&ro()}}function kx(){Hs=Yh.current,Wn(Yh)}function zu(c,d){c.finishedWork=null,c.finishedLanes=0;var v=c.timeoutHandle;if(v!==-1&&(c.timeoutHandle=-1,Up(v)),Hr!==null)for(v=Hr.return;v!==null;){var M=v;switch(ko(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&Eu();break;case 3:so(),Wn(pi),Wn(Kr),Bi();break;case 5:dc(M);break;case 4:so();break;case 13:Wn(Jn);break;case 19:Wn(Jn);break;case 10:oc(M.type._context);break;case 22:case 23:kx()}v=v.return}if(si=c,Hr=c=_c(c.current,null),bi=Hs=d,qr=0,nm=null,Tx=x0=Uu=0,_s=rm=null,Us!==null){for(d=0;d<Us.length;d++)if(v=Us[d],M=v.interleaved,M!==null){v.interleaved=null;var P=M.next,B=v.pending;if(B!==null){var W=B.next;B.next=P,M.next=W}v.pending=M}Us=null}return c}function ES(c,d){do{var v=Hr;try{if(sc(),cl.current=f,zs){for(var M=qn.memoizedState;M!==null;){var P=M.queue;P!==null&&(P.pending=null),M=M.next}zs=!1}if(ya=0,zr=mr=qn=null,hc=!1,fc=0,Cx.current=null,v===null||v.return===null){qr=1,nm=d,Hr=null;break}e:{var B=c,W=v.return,ue=v,me=d;if(d=bi,ue.flags|=32768,me!==null&&typeof me=="object"&&typeof me.then=="function"){var ke=me,$e=ue,rt=$e.tag;if(($e.mode&1)===0&&(rt===0||rt===11||rt===15)){var Ye=$e.alternate;Ye?($e.updateQueue=Ye.updateQueue,$e.memoizedState=Ye.memoizedState,$e.lanes=Ye.lanes):($e.updateQueue=null,$e.memoizedState=null)}var At=Zt(W);if(At!==null){At.flags&=-257,zt(At,W,ue,B,d),At.mode&1&&Mt(B,ke,d),d=At,me=ke;var It=d.updateQueue;if(It===null){var Bt=new Set;Bt.add(me),d.updateQueue=Bt}else It.add(me);break e}else{if((d&1)===0){Mt(B,ke,d),Dx();break e}me=Error(t(426))}}else if(Yn&&ue.mode&1){var Pr=Zt(W);if(Pr!==null){(Pr.flags&65536)===0&&(Pr.flags|=256),zt(Pr,W,ue,B,d),ic(N(me,ue));break e}}B=me=N(me,ue),qr!==4&&(qr=2),rm===null?rm=[B]:rm.push(B),B=W;do{switch(B.tag){case 3:B.flags|=65536,d&=-d,B.lanes|=d;var Ee=ze(B,me,d);sn(B,Ee);break e;case 1:ue=me;var ve=B.type,Re=B.stateNode;if((B.flags&128)===0&&(typeof ve.getDerivedStateFromError=="function"||Re!==null&&typeof Re.componentDidCatch=="function"&&(gc===null||!gc.has(Re)))){B.flags|=65536,d&=-d,B.lanes|=d;var ot=it(B,ue,d);sn(B,ot);break e}}B=B.return}while(B!==null)}TS(v)}catch(Dt){d=Dt,Hr===v&&v!==null&&(Hr=v=v.return);continue}break}while(!0)}function MS(){var c=y0.current;return y0.current=f,c===null?f:c}function Dx(){(qr===0||qr===3||qr===2)&&(qr=4),si===null||(Uu&268435455)===0&&(x0&268435455)===0||xc(si,bi)}function E0(c,d){var v=Bn;Bn|=2;var M=MS();(si!==c||bi!==d)&&(dl=null,zu(c,d));do try{rB();break}catch(P){ES(c,P)}while(!0);if(sc(),Bn=v,y0.current=M,Hr!==null)throw Error(t(261));return si=null,bi=0,qr}function rB(){for(;Hr!==null;)CS(Hr)}function iB(){for(;Hr!==null&&!Ge();)CS(Hr)}function CS(c){var d=IS(c.alternate,c,Hs);c.memoizedProps=c.pendingProps,d===null?TS(c):Hr=d,Cx.current=null}function TS(c){var d=c;do{var v=d.alternate;if(c=d.return,(d.flags&32768)===0){if(v=qN(v,d,Hs),v!==null){Hr=v;return}}else{if(v=QN(v,d),v!==null){v.flags&=32767,Hr=v;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{qr=6,Hr=null;return}}if(d=d.sibling,d!==null){Hr=d;return}Hr=d=c}while(d!==null);qr===0&&(qr=5)}function Hu(c,d,v){var M=Tn,P=lo.transition;try{lo.transition=null,Tn=1,sB(c,d,v,M)}finally{lo.transition=P,Tn=M}return null}function sB(c,d,v,M){do Qh();while(vc!==null);if((Bn&6)!==0)throw Error(t(327));v=c.finishedWork;var P=c.finishedLanes;if(v===null)return null;if(c.finishedWork=null,c.finishedLanes=0,v===c.current)throw Error(t(177));c.callbackNode=null,c.callbackPriority=0;var B=v.lanes|v.childLanes;if(Zs(c,B),c===si&&(Hr=si=null,bi=0),(v.subtreeFlags&2064)===0&&(v.flags&2064)===0||w0||(w0=!0,LS(Lt,function(){return Qh(),null})),B=(v.flags&15990)!==0,(v.subtreeFlags&15990)!==0||B){B=lo.transition,lo.transition=null;var W=Tn;Tn=1;var ue=Bn;Bn|=4,Cx.current=null,$N(c,v),yS(v,c),kr(Dp),ls=!!tc,Dp=tc=null,c.current=v,eB(v),Je(),Bn=ue,Tn=W,lo.transition=B}else c.current=v;if(w0&&(w0=!1,vc=c,b0=P),B=c.pendingLanes,B===0&&(gc=null),Pt(v.stateNode),ws(c,Pe()),d!==null)for(M=c.onRecoverableError,v=0;v<d.length;v++)P=d[v],M(P.value,{componentStack:P.stack,digest:P.digest});if(_0)throw _0=!1,c=Px,Px=null,c;return(b0&1)!==0&&c.tag!==0&&Qh(),B=c.pendingLanes,(B&1)!==0?c===Ix?im++:(im=0,Ix=c):im=0,ro(),null}function Qh(){if(vc!==null){var c=jl(b0),d=lo.transition,v=Tn;try{if(lo.transition=null,Tn=16>c?16:c,vc===null)var M=!1;else{if(c=vc,vc=null,b0=0,(Bn&6)!==0)throw Error(t(331));var P=Bn;for(Bn|=4,Tt=c.current;Tt!==null;){var B=Tt,W=B.child;if((Tt.flags&16)!==0){var ue=B.deletions;if(ue!==null){for(var me=0;me<ue.length;me++){var ke=ue[me];for(Tt=ke;Tt!==null;){var $e=Tt;switch($e.tag){case 0:case 11:case 15:tm(8,$e,B)}var rt=$e.child;if(rt!==null)rt.return=$e,Tt=rt;else for(;Tt!==null;){$e=Tt;var Ye=$e.sibling,At=$e.return;if(fS($e),$e===ke){Tt=null;break}if(Ye!==null){Ye.return=At,Tt=Ye;break}Tt=At}}}var It=B.alternate;if(It!==null){var Bt=It.child;if(Bt!==null){It.child=null;do{var Pr=Bt.sibling;Bt.sibling=null,Bt=Pr}while(Bt!==null)}}Tt=B}}if((B.subtreeFlags&2064)!==0&&W!==null)W.return=B,Tt=W;else e:for(;Tt!==null;){if(B=Tt,(B.flags&2048)!==0)switch(B.tag){case 0:case 11:case 15:tm(9,B,B.return)}var Ee=B.sibling;if(Ee!==null){Ee.return=B.return,Tt=Ee;break e}Tt=B.return}}var ve=c.current;for(Tt=ve;Tt!==null;){W=Tt;var Re=W.child;if((W.subtreeFlags&2064)!==0&&Re!==null)Re.return=W,Tt=Re;else e:for(W=ve;Tt!==null;){if(ue=Tt,(ue.flags&2048)!==0)try{switch(ue.tag){case 0:case 11:case 15:v0(9,ue)}}catch(Dt){br(ue,ue.return,Dt)}if(ue===W){Tt=null;break e}var ot=ue.sibling;if(ot!==null){ot.return=ue.return,Tt=ot;break e}Tt=ue.return}}if(Bn=P,ro(),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(gt,c)}catch{}M=!0}return M}finally{Tn=v,lo.transition=d}}return!1}function RS(c,d,v){d=N(v,d),d=ze(c,d,1),c=io(c,d,1),d=Qi(),c!==null&&(Mr(c,1,d),ws(c,d))}function br(c,d,v){if(c.tag===3)RS(c,c,v);else for(;d!==null;){if(d.tag===3){RS(d,c,v);break}else if(d.tag===1){var M=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(gc===null||!gc.has(M))){c=N(v,c),c=it(d,c,1),d=io(d,c,1),c=Qi(),d!==null&&(Mr(d,1,c),ws(d,c));break}}d=d.return}}function oB(c,d,v){var M=c.pingCache;M!==null&&M.delete(d),d=Qi(),c.pingedLanes|=c.suspendedLanes&v,si===c&&(bi&v)===v&&(qr===4||qr===3&&(bi&130023424)===bi&&500>Pe()-Rx?zu(c,0):Tx|=v),ws(c,d)}function PS(c,d){d===0&&((c.mode&1)===0?d=1:(d=Ln,Ln<<=1,(Ln&130023424)===0&&(Ln=4194304)));var v=Qi();c=js(c,d),c!==null&&(Mr(c,d,v),ws(c,v))}function aB(c){var d=c.memoizedState,v=0;d!==null&&(v=d.retryLane),PS(c,v)}function lB(c,d){var v=0;switch(c.tag){case 13:var M=c.stateNode,P=c.memoizedState;P!==null&&(v=P.retryLane);break;case 19:M=c.stateNode;break;default:throw Error(t(314))}M!==null&&M.delete(d),PS(c,v)}var IS;IS=function(c,d,v){if(c!==null)if(c.memoizedProps!==d.pendingProps||pi.current)wt=!0;else{if((c.lanes&v)===0&&(d.flags&128)===0)return wt=!1,YN(c,d,v);wt=(c.flags&131072)!==0}else wt=!1,Yn&&(d.flags&1048576)!==0&&Vp(d,Lh,d.index);switch(d.lanes=0,d.tag){case 2:var M=d.type;m0(c,d),c=d.pendingProps;var P=tl(d,Kr.current);Do(d,v),P=zh(null,d,M,c,P,v);var B=Nu();return d.flags|=1,typeof P=="object"&&P!==null&&typeof P.render=="function"&&P.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,ri(M)?(B=!0,nl(d)):B=!1,d.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,Lu(d),P.updater=Oo,d.stateNode=P,P._reactInternals=d,cc(d,M,c,v),d=qt(null,d,M,!0,B,v)):(d.tag=0,Yn&&B&&Wp(d),Un(null,d,P,v),d=d.child),d;case 16:M=d.elementType;e:{switch(m0(c,d),c=d.pendingProps,P=M._init,M=P(M._payload),d.type=M,P=d.tag=uB(M),c=Os(M,c),P){case 0:d=Nt(null,d,M,c,v);break e;case 1:d=tn(null,d,M,c,v);break e;case 11:d=qi(null,d,M,c,v);break e;case 14:d=Ie(null,d,M,Os(M.type,c),v);break e}throw Error(t(306,M,""))}return d;case 0:return M=d.type,P=d.pendingProps,P=d.elementType===M?P:Os(M,P),Nt(c,d,M,P,v);case 1:return M=d.type,P=d.pendingProps,P=d.elementType===M?P:Os(M,P),tn(c,d,M,P,v);case 3:e:{if(En(d),c===null)throw Error(t(387));M=d.pendingProps,B=d.memoizedState,P=B.element,n0(c,d),sr(d,M,null,v);var W=d.memoizedState;if(M=W.element,B.isDehydrated)if(B={element:M,isDehydrated:!1,cache:W.cache,pendingSuspenseBoundaries:W.pendingSuspenseBoundaries,transitions:W.transitions},d.updateQueue.baseState=B,d.memoizedState=B,d.flags&256){P=N(Error(t(423)),d),d=Rr(c,d,M,v,P);break e}else if(M!==P){P=N(Error(t(424)),d),d=Rr(c,d,M,v,P);break e}else for(gi=Po(d.stateNode.containerInfo.firstChild),Yr=d,Yn=!0,ms=null,v=ll(d,null,M,v),d.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(fa(),M===P){d=ul(c,d,v);break e}Un(c,d,M,v)}d=d.child}return d;case 5:return Uh(d),c===null&&Bh(d),M=d.type,P=d.pendingProps,B=c!==null?c.memoizedProps:null,W=P.children,Fp(M,P)?W=null:B!==null&&Fp(M,B)&&(d.flags|=32),yt(c,d),Un(c,d,W,v),d.child;case 6:return c===null&&Bh(d),null;case 13:return f0(c,d,v);case 4:return uc(d,d.stateNode.containerInfo),M=d.pendingProps,c===null?d.child=ma(d,null,M,v):Un(c,d,M,v),d.child;case 11:return M=d.type,P=d.pendingProps,P=d.elementType===M?P:Os(M,P),qi(c,d,M,P,v);case 7:return Un(c,d,d.pendingProps,v),d.child;case 8:return Un(c,d,d.pendingProps.children,v),d.child;case 12:return Un(c,d,d.pendingProps.children,v),d.child;case 10:e:{if(M=d.type._context,P=d.pendingProps,B=d.memoizedProps,W=P.value,Hn(Ru,M._currentValue),M._currentValue=W,B!==null)if(Wi(B.value,W)){if(B.children===P.children&&!pi.current){d=ul(c,d,v);break e}}else for(B=d.child,B!==null&&(B.return=d);B!==null;){var ue=B.dependencies;if(ue!==null){W=B.child;for(var me=ue.firstContext;me!==null;){if(me.context===M){if(B.tag===1){me=gs(-1,v&-v),me.tag=2;var ke=B.updateQueue;if(ke!==null){ke=ke.shared;var $e=ke.pending;$e===null?me.next=me:(me.next=$e.next,$e.next=me),ke.pending=me}}B.lanes|=v,me=B.alternate,me!==null&&(me.lanes|=v),ac(B.return,v,d),ue.lanes|=v;break}me=me.next}}else if(B.tag===10)W=B.type===d.type?null:B.child;else if(B.tag===18){if(W=B.return,W===null)throw Error(t(341));W.lanes|=v,ue=W.alternate,ue!==null&&(ue.lanes|=v),ac(W,v,d),W=B.sibling}else W=B.child;if(W!==null)W.return=B;else for(W=B;W!==null;){if(W===d){W=null;break}if(B=W.sibling,B!==null){B.return=W.return,W=B;break}W=W.return}B=W}Un(c,d,P.children,v),d=d.child}return d;case 9:return P=d.type,M=d.pendingProps.children,Do(d,v),P=vi(P),M=M(P),d.flags|=1,Un(c,d,M,v),d.child;case 14:return M=d.type,P=Os(M,d.pendingProps),P=Os(M.type,P),Ie(c,d,M,P,v);case 15:return _e(c,d,d.type,d.pendingProps,v);case 17:return M=d.type,P=d.pendingProps,P=d.elementType===M?P:Os(M,P),m0(c,d),d.tag=1,ri(M)?(c=!0,nl(d)):c=!1,Do(d,v),lc(d,M,P),cc(d,M,P,v),qt(null,d,M,!0,c,v);case 19:return lS(c,d,v);case 22:return Oe(c,d,v)}throw Error(t(156,d.tag))};function LS(c,d){return Ne(c,d)}function cB(c,d,v,M){this.tag=c,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function co(c,d,v,M){return new cB(c,d,v,M)}function Fx(c){return c=c.prototype,!(!c||!c.isReactComponent)}function uB(c){if(typeof c=="function")return Fx(c)?1:0;if(c!=null){if(c=c.$$typeof,c===ee)return 11;if(c===le)return 14}return 2}function _c(c,d){var v=c.alternate;return v===null?(v=co(c.tag,d,c.key,c.mode),v.elementType=c.elementType,v.type=c.type,v.stateNode=c.stateNode,v.alternate=c,c.alternate=v):(v.pendingProps=d,v.type=c.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=c.flags&14680064,v.childLanes=c.childLanes,v.lanes=c.lanes,v.child=c.child,v.memoizedProps=c.memoizedProps,v.memoizedState=c.memoizedState,v.updateQueue=c.updateQueue,d=c.dependencies,v.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},v.sibling=c.sibling,v.index=c.index,v.ref=c.ref,v}function M0(c,d,v,M,P,B){var W=2;if(M=c,typeof c=="function")Fx(c)&&(W=1);else if(typeof c=="string")W=5;else e:switch(c){case j:return Gu(v.children,P,B,d);case O:W=8,P|=8;break;case I:return c=co(12,v,d,P|2),c.elementType=I,c.lanes=B,c;case te:return c=co(13,v,d,P),c.elementType=te,c.lanes=B,c;case ne:return c=co(19,v,d,P),c.elementType=ne,c.lanes=B,c;case ie:return C0(v,P,B,d);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case U:W=10;break e;case V:W=9;break e;case ee:W=11;break e;case le:W=14;break e;case de:W=16,M=null;break e}throw Error(t(130,c==null?c:typeof c,""))}return d=co(W,v,d,P),d.elementType=c,d.type=M,d.lanes=B,d}function Gu(c,d,v,M){return c=co(7,c,M,d),c.lanes=v,c}function C0(c,d,v,M){return c=co(22,c,M,d),c.elementType=ie,c.lanes=v,c.stateNode={isHidden:!1},c}function Ox(c,d,v){return c=co(6,c,null,d),c.lanes=v,c}function Ux(c,d,v){return d=co(4,c.children!==null?c.children:[],c.key,d),d.lanes=v,d.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},d}function dB(c,d,v,M,P){this.tag=d,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ls(0),this.expirationTimes=Ls(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ls(0),this.identifierPrefix=M,this.onRecoverableError=P,this.mutableSourceEagerHydrationData=null}function jx(c,d,v,M,P,B,W,ue,me){return c=new dB(c,d,v,ue,me),d===1?(d=1,B===!0&&(d|=8)):d=0,B=co(3,null,null,d),c.current=B,B.stateNode=c,B.memoizedState={element:M,isDehydrated:v,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lu(B),c}function hB(c,d,v){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:M==null?null:""+M,children:c,containerInfo:d,implementation:v}}function NS(c){if(!c)return Lo;c=c._reactInternals;e:{if(k(c)!==c||c.tag!==1)throw Error(t(170));var d=c;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(ri(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(t(171))}if(c.tag===1){var v=c.type;if(ri(v))return Mu(c,v,d)}return d}function BS(c,d,v,M,P,B,W,ue,me){return c=jx(v,M,!0,c,P,B,W,ue,me),c.context=NS(null),v=c.current,M=Qi(),P=yc(v),B=gs(M,P),B.callback=d??null,io(v,B,P),c.current.lanes=P,Mr(c,P,M),ws(c,M),c}function T0(c,d,v,M){var P=d.current,B=Qi(),W=yc(P);return v=NS(v),d.context===null?d.context=v:d.pendingContext=v,d=gs(B,W),d.payload={element:c},M=M===void 0?null:M,M!==null&&(d.callback=M),c=io(P,d,W),c!==null&&(Ho(c,P,W,B),Zn(c,P,W)),W}function R0(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function kS(c,d){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var v=c.retryLane;c.retryLane=v!==0&&v<d?v:d}}function zx(c,d){kS(c,d),(c=c.alternate)&&kS(c,d)}function fB(){return null}var DS=typeof reportError=="function"?reportError:function(c){console.error(c)};function Hx(c){this._internalRoot=c}P0.prototype.render=Hx.prototype.render=function(c){var d=this._internalRoot;if(d===null)throw Error(t(409));T0(c,d,null,null)},P0.prototype.unmount=Hx.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var d=c.containerInfo;ju(function(){T0(null,c,null,null)}),d[Xi]=null}};function P0(c){this._internalRoot=c}P0.prototype.unstable_scheduleHydration=function(c){if(c){var d=Qd();c={blockedOn:null,target:c,priority:d};for(var v=0;v<sa.length&&d!==0&&d<sa[v].priority;v++);sa.splice(v,0,c),v===0&&eh(c)}};function Gx(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function I0(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function FS(){}function pB(c,d,v,M,P){if(P){if(typeof M=="function"){var B=M;M=function(){var ke=R0(W);B.call(ke)}}var W=BS(d,M,c,0,null,!1,!1,"",FS);return c._reactRootContainer=W,c[Xi]=W.current,$l(c.nodeType===8?c.parentNode:c),ju(),W}for(;P=c.lastChild;)c.removeChild(P);if(typeof M=="function"){var ue=M;M=function(){var ke=R0(me);ue.call(ke)}}var me=jx(c,0,!1,null,null,!1,!1,"",FS);return c._reactRootContainer=me,c[Xi]=me.current,$l(c.nodeType===8?c.parentNode:c),ju(function(){T0(d,me,v,M)}),me}function L0(c,d,v,M,P){var B=v._reactRootContainer;if(B){var W=B;if(typeof P=="function"){var ue=P;P=function(){var me=R0(W);ue.call(me)}}T0(d,W,c,P)}else W=pB(v,d,c,P,M);return R0(W)}cu=function(c){switch(c.tag){case 3:var d=c.stateNode;if(d.current.memoizedState.isDehydrated){var v=Xn(d.pendingLanes);v!==0&&(Ul(d,v|1),ws(d,Pe()),(Bn&6)===0&&(qh=Pe()+500,ro()))}break;case 13:ju(function(){var M=js(c,1);if(M!==null){var P=Qi();Ho(M,c,1,P)}}),zx(c,1)}},xp=function(c){if(c.tag===13){var d=js(c,134217728);if(d!==null){var v=Qi();Ho(d,c,134217728,v)}zx(c,134217728)}},jg=function(c){if(c.tag===13){var d=yc(c),v=js(c,d);if(v!==null){var M=Qi();Ho(v,c,d,M)}zx(c,d)}},Qd=function(){return Tn},Zd=function(c,d){var v=Tn;try{return Tn=c,d()}finally{Tn=v}},Se=function(c,d,v){switch(d){case"input":if(Qe(c,v),d=v.name,v.type==="radio"&&d!=null){for(v=c;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<v.length;d++){var M=v[d];if(M!==c&&M.form===c.form){var P=Rh(M);if(!P)throw Error(t(90));ce(M),Qe(M,P)}}}break;case"textarea":Y(c,v);break;case"select":d=v.value,d!=null&&Ut(c,!!v.multiple,d,!1)}},vn=Bx,_r=ju;var mB={usingClientEntryPoint:!1,Events:[Io,fr,Rh,en,an,Bx]},sm={findFiberByHostInstance:ha,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},gB={bundleType:sm.bundleType,version:sm.version,rendererPackageName:sm.rendererPackageName,rendererConfig:sm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=ae(c),c===null?null:c.stateNode},findFiberByHostInstance:sm.findFiberByHostInstance||fB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var N0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!N0.isDisabled&&N0.supportsFiber)try{gt=N0.inject(gB),kt=N0}catch{}}return bs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mB,bs.createPortal=function(c,d){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gx(d))throw Error(t(200));return hB(c,d,null,v)},bs.createRoot=function(c,d){if(!Gx(c))throw Error(t(299));var v=!1,M="",P=DS;return d!=null&&(d.unstable_strictMode===!0&&(v=!0),d.identifierPrefix!==void 0&&(M=d.identifierPrefix),d.onRecoverableError!==void 0&&(P=d.onRecoverableError)),d=jx(c,1,!1,null,null,v,!1,M,P),c[Xi]=d.current,$l(c.nodeType===8?c.parentNode:c),new Hx(d)},bs.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var d=c._reactInternals;if(d===void 0)throw typeof c.render=="function"?Error(t(188)):(c=Object.keys(c).join(","),Error(t(268,c)));return c=ae(d),c=c===null?null:c.stateNode,c},bs.flushSync=function(c){return ju(c)},bs.hydrate=function(c,d,v){if(!I0(d))throw Error(t(200));return L0(null,c,d,!0,v)},bs.hydrateRoot=function(c,d,v){if(!Gx(c))throw Error(t(405));var M=v!=null&&v.hydratedSources||null,P=!1,B="",W=DS;if(v!=null&&(v.unstable_strictMode===!0&&(P=!0),v.identifierPrefix!==void 0&&(B=v.identifierPrefix),v.onRecoverableError!==void 0&&(W=v.onRecoverableError)),d=BS(d,null,c,1,v??null,P,!1,B,W),c[Xi]=d.current,$l(c),M)for(c=0;c<M.length;c++)v=M[c],P=v._getVersion,P=P(v._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[v,P]:d.mutableSourceEagerHydrationData.push(v,P);return new P0(d)},bs.render=function(c,d,v){if(!I0(d))throw Error(t(200));return L0(null,c,d,!1,v)},bs.unmountComponentAtNode=function(c){if(!I0(c))throw Error(t(40));return c._reactRootContainer?(ju(function(){L0(null,null,c,!1,function(){c._reactRootContainer=null,c[Xi]=null})}),!0):!1},bs.unstable_batchedUpdates=Bx,bs.unstable_renderSubtreeIntoContainer=function(c,d,v,M){if(!I0(v))throw Error(t(200));if(c==null||c._reactInternals===void 0)throw Error(t(38));return L0(c,d,v,!1,M)},bs.version="18.2.0-next-9e3b772b8-20220608",bs}var PC;function NG(){if(PC)return ew.exports;PC=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),ew.exports=LG(),ew.exports}var IC;function BG(){if(IC)return Rv;IC=1;var r=NG();return Rv.createRoot=r.createRoot,Rv.hydrateRoot=r.hydrateRoot,Rv}var UI=BG();const kG=lp(UI),Ng=new q,S1=new q,DG=new q,LC=new We;function FG(r,e,t){const n=Ng.setFromMatrixPosition(r.matrixWorld);n.project(e);const i=t.width/2,s=t.height/2;return[n.x*i+i,-(n.y*s)+s]}function OG(r,e){const t=Ng.setFromMatrixPosition(r.matrixWorld),n=S1.setFromMatrixPosition(e.matrixWorld),i=t.sub(n),s=e.getWorldDirection(DG);return i.angleTo(s)>Math.PI/2}function UG(r,e,t,n){const i=Ng.setFromMatrixPosition(r.matrixWorld),s=i.clone();s.project(e),LC.set(s.x,s.y),t.setFromCamera(LC,e);const o=t.intersectObjects(n,!0);if(o.length){const a=o[0].distance;return i.distanceTo(t.ray.origin)<a}return!0}function jG(r,e){if(e instanceof xo)return e.zoom;if(e instanceof ar){const t=Ng.setFromMatrixPosition(r.matrixWorld),n=S1.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,s=t.distanceTo(n);return 1/(2*Math.tan(i/2)*s)}else return 1}function zG(r,e,t){if(e instanceof ar||e instanceof xo){const n=Ng.setFromMatrixPosition(r.matrixWorld),i=S1.setFromMatrixPosition(e.matrixWorld),s=n.distanceTo(i),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const Ub=r=>Math.abs(r)<1e-10?0:r;function jI(r,e,t=""){let n="matrix3d(";for(let i=0;i!==16;i++)n+=Ub(e[i]*r.elements[i])+(i!==15?",":")");return t+n}const HG=(r=>e=>jI(e,r))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),GG=(r=>(e,t)=>jI(e,r(t),"translate(-50%,-50%)"))(r=>[1/r,1/r,1/r,1,-1/r,-1/r,-1/r,-1,1/r,1/r,1/r,1,1,1,1,1]);function VG(r){return r&&typeof r=="object"&&"current"in r}const WG=F.forwardRef(({children:r,eps:e=.001,style:t,className:n,prepend:i,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:u=!1,transform:h=!1,occlude:p,onOcclude:g,castShadow:y,receiveShadow:_,material:A,geometry:b,zIndexRange:w=[16777271,0],calculatePosition:C=FG,as:E="div",wrapperClass:R,pointerEvents:L="auto",...D},j)=>{const{gl:O,camera:I,scene:U,size:V,raycaster:ee,events:te,viewport:ne}=$r(),[le]=F.useState(()=>document.createElement(E)),de=F.useRef(),ie=F.useRef(null),J=F.useRef(0),Q=F.useRef([0,0]),H=F.useRef(null),X=F.useRef(null),Z=a?.current||te.connected||O.domElement.parentNode,ye=F.useRef(null),be=F.useRef(!1),Le=F.useMemo(()=>p&&p!=="blending"||Array.isArray(p)&&p.length&&VG(p[0]),[p]);F.useLayoutEffect(()=>{const St=O.domElement;p&&p==="blending"?(St.style.zIndex=`${Math.floor(w[0]/2)}`,St.style.position="absolute",St.style.pointerEvents="none"):(St.style.zIndex=null,St.style.position=null,St.style.pointerEvents=null)},[p]),F.useLayoutEffect(()=>{if(ie.current){const St=de.current=UI.createRoot(le);if(U.updateMatrixWorld(),h)le.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Xe=C(ie.current,I,V);le.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Xe[0]}px,${Xe[1]}px,0);transform-origin:0 0;`}return Z&&(i?Z.prepend(le):Z.appendChild(le)),()=>{Z&&Z.removeChild(le),St.unmount()}}},[Z,h]),F.useLayoutEffect(()=>{R&&(le.className=R)},[R]);const pe=F.useMemo(()=>h?{position:"absolute",top:0,left:0,width:V.width,height:V.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-V.height/2,left:-V.width/2,width:V.width,height:V.height},...t},[t,s,o,V,h]),Ae=F.useMemo(()=>({position:"absolute",pointerEvents:L}),[L]);F.useLayoutEffect(()=>{if(be.current=!1,h){var St;(St=de.current)==null||St.render(F.createElement("div",{ref:H,style:pe},F.createElement("div",{ref:X,style:Ae},F.createElement("div",{ref:j,className:n,style:t,children:r}))))}else{var Xe;(Xe=de.current)==null||Xe.render(F.createElement("div",{ref:j,style:pe,className:n,children:r}))}});const je=F.useRef(!0);ou(St=>{if(ie.current){I.updateMatrixWorld(),ie.current.updateWorldMatrix(!0,!1);const Xe=h?Q.current:C(ie.current,I,V);if(h||Math.abs(J.current-I.zoom)>e||Math.abs(Q.current[0]-Xe[0])>e||Math.abs(Q.current[1]-Xe[1])>e){const ce=OG(ie.current,I);let ge=!1;Le&&(Array.isArray(p)?ge=p.map(Qe=>Qe.current):p!=="blending"&&(ge=[U]));const we=je.current;if(ge){const Qe=UG(ie.current,I,ee,ge);je.current=Qe&&!ce}else je.current=!ce;we!==je.current&&(g?g(!je.current):le.style.display=je.current?"block":"none");const De=Math.floor(w[0]/2),Fe=p?Le?[w[0],De]:[De-1,0]:w;if(le.style.zIndex=`${zG(ie.current,I,Fe)}`,h){const[Qe,st]=[V.width/2,V.height/2],lt=I.projectionMatrix.elements[5]*st,{isOrthographicCamera:Et,top:Ut,left:dn,bottom:se,right:Y}=I,Ce=HG(I.matrixWorldInverse),et=Et?`scale(${lt})translate(${Ub(-(Y+dn)/2)}px,${Ub((Ut+se)/2)}px)`:`translateZ(${lt}px)`;let Ke=ie.current.matrixWorld;u&&(Ke=I.matrixWorldInverse.clone().transpose().copyPosition(Ke).scale(ie.current.scale),Ke.elements[3]=Ke.elements[7]=Ke.elements[11]=0,Ke.elements[15]=1),le.style.width=V.width+"px",le.style.height=V.height+"px",le.style.perspective=Et?"":`${lt}px`,H.current&&X.current&&(H.current.style.transform=`${et}${Ce}translate(${Qe}px,${st}px)`,X.current.style.transform=GG(Ke,1/((l||10)/400)))}else{const Qe=l===void 0?1:jG(ie.current,I)*l;le.style.transform=`translate3d(${Xe[0]}px,${Xe[1]}px,0) scale(${Qe})`}Q.current=Xe,J.current=I.zoom}}if(!Le&&ye.current&&!be.current)if(h){if(H.current){const Xe=H.current.children[0];if(Xe!=null&&Xe.clientWidth&&Xe!=null&&Xe.clientHeight){const{isOrthographicCamera:ce}=I;if(ce||b)D.scale&&(Array.isArray(D.scale)?D.scale instanceof q?ye.current.scale.copy(D.scale.clone().divideScalar(1)):ye.current.scale.set(1/D.scale[0],1/D.scale[1],1/D.scale[2]):ye.current.scale.setScalar(1/D.scale));else{const ge=(l||10)/400,we=Xe.clientWidth*ge,De=Xe.clientHeight*ge;ye.current.scale.set(we,De,1)}be.current=!0}}}else{const Xe=le.children[0];if(Xe!=null&&Xe.clientWidth&&Xe!=null&&Xe.clientHeight){const ce=1/ne.factor,ge=Xe.clientWidth*ce,we=Xe.clientHeight*ce;ye.current.scale.set(ge,we,1),be.current=!0}ye.current.lookAt(St.camera.position)}});const ft=F.useMemo(()=>({vertexShader:h?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[h]);return F.createElement("group",os({},D,{ref:ie}),p&&!Le&&F.createElement("mesh",{castShadow:y,receiveShadow:_,ref:ye},b||F.createElement("planeGeometry",null),A||F.createElement("shaderMaterial",{side:Es,vertexShader:ft.vertexShader,fragmentShader:ft.fragmentShader})))}),NC=r=>{let e;const t=new Set,n=(u,h)=>{const p=typeof u=="function"?u(e):u;if(!Object.is(p,e)){const g=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),t.forEach(y=>y(e,g))}},i=()=>e,a={setState:n,getState:i,getInitialState:()=>l,subscribe:u=>(t.add(u),()=>t.delete(u))},l=e=r(n,i,a);return a},JG=(r=>r?NC(r):NC),XG=r=>r;function KG(r,e=XG){const t=ns.useSyncExternalStore(r.subscribe,ns.useCallback(()=>e(r.getState()),[r,e]),ns.useCallback(()=>e(r.getInitialState()),[r,e]));return ns.useDebugValue(t),t}const BC=r=>{const e=JG(r),t=n=>KG(e,n);return Object.assign(t,e),t},YG=(r=>r?BC(r):BC);let wm=0;const qG=YG(r=>(Hf.onStart=(e,t,n)=>{r({active:!0,item:e,loaded:t,total:n,progress:(t-wm)/(n-wm)*100})},Hf.onLoad=()=>{r({active:!1})},Hf.onError=e=>r(t=>({errors:[...t.errors,e]})),Hf.onProgress=(e,t,n)=>{t===n&&(wm=n),r({active:!0,item:e,loaded:t,total:n,progress:(t-wm)/(n-wm)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function Yf(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function kC(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function DC(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kC(Object(t),!0).forEach(function(n){Yf(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):kC(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}new We;new We;function zI(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}var ho=function r(e,t,n){var i=this;zI(this,r),Yf(this,"dot2",function(s,o){return i.x*s+i.y*o}),Yf(this,"dot3",function(s,o,a){return i.x*s+i.y*o+i.z*a}),this.x=e,this.y=t,this.z=n},QG=[new ho(1,1,0),new ho(-1,1,0),new ho(1,-1,0),new ho(-1,-1,0),new ho(1,0,1),new ho(-1,0,1),new ho(1,0,-1),new ho(-1,0,-1),new ho(0,1,1),new ho(0,-1,1),new ho(0,1,-1),new ho(0,-1,-1)],FC=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],OC=new Array(512),UC=new Array(512),ZG=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var n;t&1?n=FC[t]^e&255:n=FC[t]^e>>8&255,OC[t]=OC[t+256]=n,UC[t]=UC[t+256]=QG[n%12]}};ZG(0);function $G(r){if(typeof r=="number")r=Math.abs(r);else if(typeof r=="string"){var e=r;r=0;for(var t=0;t<e.length;t++)r=(r+(t+1)*(e.charCodeAt(t)%96))%2147483647}return r===0&&(r=311),r}function jC(r){var e=$G(r);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var e8=function r(e){var t=this;zI(this,r),Yf(this,"seed",0),Yf(this,"init",function(n){t.seed=n,t.value=jC(n)}),Yf(this,"value",jC(this.seed)),this.init(e)},t8=new e8(Math.random()),n8={radius:1,center:[0,0,0]};function r8(r,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t8,n=DC(DC({},n8),e),i=n.radius,s=n.center,o=0;o<r.length;o+=3){var a=Math.pow(t.value(),.3333333333333333),l=t.value()*2-1,u=t.value()*2-1,h=t.value()*2-1,p=Math.sqrt(l*l+u*u+h*h);l=a*l/p,u=a*u/p,h=a*h/p,r[o]=l*i+s[0],r[o+1]=u*i+s[1],r[o+2]=h*i+s[2]}return r}const yp=parseInt(hp.replace(/\D+/g,"")),HI=yp>=125?"uv1":"uv2";function zC(r,e){if(e===uP)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),r;if(e===cy||e===kA){let t=r.getIndex();if(t===null){const o=[],a=r.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);r.setIndex(o),t=r.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),r}const n=t.count-2,i=[];if(t)if(e===cy)for(let o=1;o<=n;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<n;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=r.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),r}var i8=Object.defineProperty,s8=(r,e,t)=>e in r?i8(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,o8=(r,e,t)=>(s8(r,e+"",t),t);async function HC(r){const e=await r.arrayBuffer(),t=btoa(String.fromCharCode(...new Uint8Array(e)));return`data:${r.type||""};base64,${t}`}let Pv,rw,Nf,Iv;function iw(r,e=1/0,t=null){rw||(rw=new ru(2,2,1,1)),Nf||(Nf=new ss({uniforms:{blitTexture:new rx(r)},vertexShader:`
        varying vec2 vUv;
        void main(){
            vUv = uv;
            gl_Position = vec4(position.xy * 1.0,0.,.999999);
        }
      `,fragmentShader:`
          uniform sampler2D blitTexture; 
          varying vec2 vUv;

          void main(){ 
              gl_FragColor = vec4(vUv.xy, 0, 1);
              
              #ifdef IS_SRGB
              gl_FragColor = LinearTosRGB( texture2D( blitTexture, vUv) );
              #else
              gl_FragColor = texture2D( blitTexture, vUv);
              #endif
          }
      `})),Nf.uniforms.blitTexture.value=r,Nf.defines.IS_SRGB="colorSpace"in r?r.colorSpace==="srgb":r.encoding===3001,Nf.needsUpdate=!0,Iv||(Iv=new hr(rw,Nf),Iv.frustrumCulled=!1);const n=new ar,i=new Il;i.add(Iv),t||(t=Pv=new bg({antialias:!1})),t.setSize(Math.min(r.image.width,e),Math.min(r.image.height,e)),t.clear(),t.render(i,n);const s=new In(t.domElement);return s.minFilter=r.minFilter,s.magFilter=r.magFilter,s.wrapS=r.wrapS,s.wrapT=r.wrapT,s.name=r.name,Pv&&(Pv.dispose(),Pv=null),s}const GC={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]},GI=(()=>{class r{constructor(){this.pluginCallbacks=[],this.register(function(t){return new g8(t)}),this.register(function(t){return new v8(t)}),this.register(function(t){return new _8(t)}),this.register(function(t){return new w8(t)}),this.register(function(t){return new b8(t)}),this.register(function(t){return new A8(t)}),this.register(function(t){return new y8(t)}),this.register(function(t){return new x8(t)}),this.register(function(t){return new S8(t)}),this.register(function(t){return new E8(t)}),this.register(function(t){return new M8(t)})}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,n,i,s){const o=new m8,a=[];for(let l=0,u=this.pluginCallbacks.length;l<u;l++)a.push(this.pluginCallbacks[l](o));o.setPlugins(a),o.write(t,n,s).catch(i)}parseAsync(t,n){const i=this;return new Promise(function(s,o){i.parse(t,s,o,n)})}}return o8(r,"Utils",{insertKeyframe:function(e,t){const i=e.getValueSize(),s=new e.TimeBufferType(e.times.length+1),o=new e.ValueBufferType(e.values.length+i),a=e.createInterpolant(new e.ValueBufferType(i));let l;if(e.times.length===0){s[0]=t;for(let u=0;u<i;u++)o[u]=0;l=0}else if(t<e.times[0]){if(Math.abs(e.times[0]-t)<.001)return 0;s[0]=t,s.set(e.times,1),o.set(a.evaluate(t),0),o.set(e.values,i),l=0}else if(t>e.times[e.times.length-1]){if(Math.abs(e.times[e.times.length-1]-t)<.001)return e.times.length-1;s[s.length-1]=t,s.set(e.times,0),o.set(e.values,0),o.set(a.evaluate(t),e.values.length),l=s.length-1}else for(let u=0;u<e.times.length;u++){if(Math.abs(e.times[u]-t)<.001)return u;if(e.times[u]<t&&e.times[u+1]>t){s.set(e.times.slice(0,u+1),0),s[u+1]=t,s.set(e.times.slice(u+1),u+2),o.set(e.values.slice(0,(u+1)*i),0),o.set(a.evaluate(t),(u+1)*i),o.set(e.values.slice((u+1)*i),(u+2)*i),l=u+1;break}}return e.times=s,e.values=o,l},mergeMorphTargetTracks:function(e,t){const n=[],i={},s=e.tracks;for(let o=0;o<s.length;++o){let a=s[o];const l=gn.parseTrackName(a.name),u=gn.findNode(t,l.nodeName);if(l.propertyName!=="morphTargetInfluences"||l.propertyIndex===void 0){n.push(a);continue}if(a.createInterpolant!==a.InterpolantFactoryMethodDiscrete&&a.createInterpolant!==a.InterpolantFactoryMethodLinear){if(a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),a=a.clone(),a.setInterpolation(Xc)}const h=u.morphTargetInfluences.length,p=u.morphTargetDictionary[l.propertyIndex];if(p===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+l.propertyIndex);let g;if(i[u.uuid]===void 0){g=a.clone();const _=new g.ValueBufferType(h*g.times.length);for(let A=0;A<g.times.length;A++)_[A*h+p]=g.values[A];g.name=(l.nodeName||"")+".morphTargetInfluences",g.values=_,i[u.uuid]=g,n.push(g);continue}const y=a.createInterpolant(new a.ValueBufferType(1));g=i[u.uuid];for(let _=0;_<g.times.length;_++)g.values[_*h+p]=y.evaluate(g.times[_]);for(let _=0;_<a.times.length;_++){const A=this.insertKeyframe(g,a.times[_]);g.values[A*h+p]=a.values[_]}}return e.tracks=n,e}}),r})(),_n={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},sw="KHR_mesh_quantization",Ws={};Ws[gr]=_n.NEAREST;Ws[tp]=_n.NEAREST_MIPMAP_NEAREST;Ws[Sd]=_n.NEAREST_MIPMAP_LINEAR;Ws[Pn]=_n.LINEAR;Ws[xg]=_n.LINEAR_MIPMAP_NEAREST;Ws[ea]=_n.LINEAR_MIPMAP_LINEAR;Ws[er]=_n.CLAMP_TO_EDGE;Ws[Pl]=_n.REPEAT;Ws[Nd]=_n.MIRRORED_REPEAT;const VC={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},a8=new mt,WC=12,l8=1179937895,c8=2,JC=8,u8=1313821514,d8=5130562;function Dm(r,e){return r.length===e.length&&r.every(function(t,n){return t===e[n]})}function h8(r){return new TextEncoder().encode(r).buffer}function f8(r){return Dm(r.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function p8(r,e,t){const n={min:new Array(r.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(r.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let i=e;i<e+t;i++)for(let s=0;s<r.itemSize;s++){let o;r.itemSize>4?o=r.array[i*r.itemSize+s]:(s===0?o=r.getX(i):s===1?o=r.getY(i):s===2?o=r.getZ(i):s===3&&(o=r.getW(i)),r.normalized===!0&&(o=Ba.normalize(o,r.array))),n.min[s]=Math.min(n.min[s],o),n.max[s]=Math.max(n.max[s],o)}return n}function VI(r){return Math.ceil(r/4)*4}function ow(r,e=0){const t=VI(r.byteLength);if(t!==r.byteLength){const n=new Uint8Array(t);if(n.set(new Uint8Array(r)),e!==0)for(let i=r.byteLength;i<t;i++)n[i]=e;return n.buffer}return r}function XC(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function KC(r,e){if(r.toBlob!==void 0)return new Promise(n=>r.toBlob(n,e));let t;return e==="image/jpeg"?t=.92:e==="image/webp"&&(t=.8),r.convertToBlob({type:e,quality:t})}class m8{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}async write(e,t,n={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},n),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e),await Promise.all(this.pending);const i=this,s=i.buffers,o=i.json;n=i.options;const a=i.extensionsUsed,l=i.extensionsRequired,u=new Blob(s,{type:"application/octet-stream"}),h=Object.keys(a),p=Object.keys(l);h.length>0&&(o.extensionsUsed=h),p.length>0&&(o.extensionsRequired=p),o.buffers&&o.buffers.length>0&&(o.buffers[0].byteLength=u.size),n.binary===!0?u.arrayBuffer().then(g=>{const y=ow(g),_=new DataView(new ArrayBuffer(JC));_.setUint32(0,y.byteLength,!0),_.setUint32(4,d8,!0);const A=ow(h8(JSON.stringify(o)),32),b=new DataView(new ArrayBuffer(JC));b.setUint32(0,A.byteLength,!0),b.setUint32(4,u8,!0);const w=new ArrayBuffer(WC),C=new DataView(w);C.setUint32(0,l8,!0),C.setUint32(4,c8,!0);const E=WC+b.byteLength+A.byteLength+_.byteLength+y.byteLength;C.setUint32(8,E,!0),new Blob([w,b,A,_,y],{type:"application/octet-stream"}).arrayBuffer().then(t)}):o.buffers&&o.buffers.length>0?HC(u).then(g=>{o.buffers[0].uri=g,t(o)}):t(o)}serializeUserData(e,t){if(Object.keys(e.userData).length===0)return;const n=this.options,i=this.extensionsUsed;try{const s=JSON.parse(JSON.stringify(e.userData));if(n.includeCustomExtensions&&s.gltfExtensions){t.extensions===void 0&&(t.extensions={});for(const o in s.gltfExtensions)t.extensions[o]=s.gltfExtensions[o],i[o]=!0;delete s.gltfExtensions}Object.keys(s).length>0&&(t.extras=s)}catch(s){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+s.message)}}getUID(e,t=!1){if(this.uids.has(e)===!1){const i=new Map;i.set(!0,this.uid++),i.set(!1,this.uid++),this.uids.set(e,i)}return this.uids.get(e).get(t)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const n=new q;for(let i=0,s=e.count;i<s;i++)if(Math.abs(n.fromBufferAttribute(e,i).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);const n=e.clone(),i=new q;for(let s=0,o=n.count;s<o;s++)i.fromBufferAttribute(n,s),i.x===0&&i.y===0&&i.z===0?i.setX(1):i.normalize(),n.setXYZ(s,i.x,i.y,i.z);return t.attributesNormalized.set(e,n),n}applyTextureTransform(e,t){let n=!1;const i={};(t.offset.x!==0||t.offset.y!==0)&&(i.offset=t.offset.toArray(),n=!0),t.rotation!==0&&(i.rotation=t.rotation,n=!0),(t.repeat.x!==1||t.repeat.y!==1)&&(i.scale=t.repeat.toArray(),n=!0),n&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=i,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,t){if(e===t)return e;function n(y){return("colorSpace"in y?y.colorSpace==="srgb":y.encoding===3001)?function(A){return A<.04045?A*.0773993808:Math.pow(A*.9478672986+.0521327014,2.4)}:function(A){return A}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),e instanceof Rd&&(e=iw(e)),t instanceof Rd&&(t=iw(t));const i=e?e.image:null,s=t?t.image:null,o=Math.max(i?i.width:0,s?s.width:0),a=Math.max(i?i.height:0,s?s.height:0),l=XC();l.width=o,l.height=a;const u=l.getContext("2d");u.fillStyle="#00ffff",u.fillRect(0,0,o,a);const h=u.getImageData(0,0,o,a);if(i){u.drawImage(i,0,0,o,a);const y=n(e),_=u.getImageData(0,0,o,a).data;for(let A=2;A<_.length;A+=4)h.data[A]=y(_[A]/256)*256}if(s){u.drawImage(s,0,0,o,a);const y=n(t),_=u.getImageData(0,0,o,a).data;for(let A=1;A<_.length;A+=4)h.data[A]=y(_[A]/256)*256}u.putImageData(h,0,0);const g=(e||t).clone();return g.source=new In(l).source,"colorSpace"in g?g.colorSpace="":g.encoding=3e3,g.channel=(e||t).channel,e&&t&&e.channel!==t.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),g}processBuffer(e){const t=this.json,n=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),n.push(e),0}processBufferView(e,t,n,i,s){const o=this.json;o.bufferViews||(o.bufferViews=[]);let a;switch(t){case _n.BYTE:case _n.UNSIGNED_BYTE:a=1;break;case _n.SHORT:case _n.UNSIGNED_SHORT:a=2;break;default:a=4}let l=e.itemSize*a;s===_n.ARRAY_BUFFER&&(l=Math.ceil(l/4)*4);const u=VI(i*l),h=new DataView(new ArrayBuffer(u));let p=0;for(let _=n;_<n+i;_++){for(let A=0;A<e.itemSize;A++){let b;e.itemSize>4?b=e.array[_*e.itemSize+A]:(A===0?b=e.getX(_):A===1?b=e.getY(_):A===2?b=e.getZ(_):A===3&&(b=e.getW(_)),e.normalized===!0&&(b=Ba.normalize(b,e.array))),t===_n.FLOAT?h.setFloat32(p,b,!0):t===_n.INT?h.setInt32(p,b,!0):t===_n.UNSIGNED_INT?h.setUint32(p,b,!0):t===_n.SHORT?h.setInt16(p,b,!0):t===_n.UNSIGNED_SHORT?h.setUint16(p,b,!0):t===_n.BYTE?h.setInt8(p,b):t===_n.UNSIGNED_BYTE&&h.setUint8(p,b),p+=a}p%l!==0&&(p+=l-p%l)}const g={buffer:this.processBuffer(h.buffer),byteOffset:this.byteOffset,byteLength:u};return s!==void 0&&(g.target=s),s===_n.ARRAY_BUFFER&&(g.byteStride=l),this.byteOffset+=u,o.bufferViews.push(g),{id:o.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const t=this,n=t.json;return n.bufferViews||(n.bufferViews=[]),e.arrayBuffer().then(i=>{const s=ow(i),o={buffer:t.processBuffer(s),byteOffset:t.byteOffset,byteLength:s.byteLength};return t.byteOffset+=s.byteLength,n.bufferViews.push(o)-1})}processAccessor(e,t,n,i){const s=this.json,o={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"};let a;if(e.array.constructor===Float32Array)a=_n.FLOAT;else if(e.array.constructor===Int32Array)a=_n.INT;else if(e.array.constructor===Uint32Array)a=_n.UNSIGNED_INT;else if(e.array.constructor===Int16Array)a=_n.SHORT;else if(e.array.constructor===Uint16Array)a=_n.UNSIGNED_SHORT;else if(e.array.constructor===Int8Array)a=_n.BYTE;else if(e.array.constructor===Uint8Array)a=_n.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+e.array.constructor.name);if(n===void 0&&(n=0),i===void 0&&(i=e.count),i===0)return null;const l=p8(e,n,i);let u;t!==void 0&&(u=e===t.index?_n.ELEMENT_ARRAY_BUFFER:_n.ARRAY_BUFFER);const h=this.processBufferView(e,a,n,i,u),p={bufferView:h.id,byteOffset:h.byteOffset,componentType:a,count:i,max:l.max,min:l.min,type:o[e.itemSize]};return e.normalized===!0&&(p.normalized=!0),s.accessors||(s.accessors=[]),s.accessors.push(p)-1}processImage(e,t,n,i="image/png"){if(e!==null){const s=this,o=s.cache,a=s.json,l=s.options,u=s.pending;o.images.has(e)||o.images.set(e,{});const h=o.images.get(e),p=i+":flipY/"+n.toString();if(h[p]!==void 0)return h[p];a.images||(a.images=[]);const g={mimeType:i},y=XC();y.width=Math.min(e.width,l.maxTextureSize),y.height=Math.min(e.height,l.maxTextureSize);const _=y.getContext("2d");if(n===!0&&(_.translate(0,y.height),_.scale(1,-1)),e.data!==void 0){t!==Wr&&console.error("GLTFExporter: Only RGBAFormat is supported.",t),(e.width>l.maxTextureSize||e.height>l.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const b=new Uint8ClampedArray(e.height*e.width*4);for(let w=0;w<b.length;w+=4)b[w+0]=e.data[w+0],b[w+1]=e.data[w+1],b[w+2]=e.data[w+2],b[w+3]=e.data[w+3];_.putImageData(new ImageData(b,e.width,e.height),0,0)}else _.drawImage(e,0,0,y.width,y.height);l.binary===!0?u.push(KC(y,i).then(b=>s.processBufferViewImage(b)).then(b=>{g.bufferView=b})):y.toDataURL!==void 0?g.uri=y.toDataURL(i):u.push(KC(y,i).then(HC).then(b=>{g.uri=b}));const A=a.images.push(g)-1;return h[p]=A,A}else throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(e){const t=this.json;t.samplers||(t.samplers=[]);const n={magFilter:Ws[e.magFilter],minFilter:Ws[e.minFilter],wrapS:Ws[e.wrapS],wrapT:Ws[e.wrapT]};return t.samplers.push(n)-1}processTexture(e){const n=this.options,i=this.cache,s=this.json;if(i.textures.has(e))return i.textures.get(e);s.textures||(s.textures=[]),e instanceof Rd&&(e=iw(e,n.maxTextureSize));let o=e.userData.mimeType;o==="image/webp"&&(o="image/png");const a={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,o)};e.name&&(a.name=e.name),this._invokeAll(function(u){u.writeTexture&&u.writeTexture(e,a)});const l=s.textures.push(a)-1;return i.textures.set(e,l),l}processMaterial(e){const t=this.cache,n=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;n.materials||(n.materials=[]);const i={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const s=e.color.toArray().concat([e.opacity]);if(Dm(s,[1,1,1,1])||(i.pbrMetallicRoughness.baseColorFactor=s),e.isMeshStandardMaterial?(i.pbrMetallicRoughness.metallicFactor=e.metalness,i.pbrMetallicRoughness.roughnessFactor=e.roughness):(i.pbrMetallicRoughness.metallicFactor=.5,i.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){const a=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),l={index:this.processTexture(a),channel:a.channel};this.applyTextureTransform(l,a),i.pbrMetallicRoughness.metallicRoughnessTexture=l}if(e.map){const a={index:this.processTexture(e.map),texCoord:e.map.channel};this.applyTextureTransform(a,e.map),i.pbrMetallicRoughness.baseColorTexture=a}if(e.emissive){const a=e.emissive;if(Math.max(a.r,a.g,a.b)>0&&(i.emissiveFactor=e.emissive.toArray()),e.emissiveMap){const u={index:this.processTexture(e.emissiveMap),texCoord:e.emissiveMap.channel};this.applyTextureTransform(u,e.emissiveMap),i.emissiveTexture=u}}if(e.normalMap){const a={index:this.processTexture(e.normalMap),texCoord:e.normalMap.channel};e.normalScale&&e.normalScale.x!==1&&(a.scale=e.normalScale.x),this.applyTextureTransform(a,e.normalMap),i.normalTexture=a}if(e.aoMap){const a={index:this.processTexture(e.aoMap),texCoord:e.aoMap.channel};e.aoMapIntensity!==1&&(a.strength=e.aoMapIntensity),this.applyTextureTransform(a,e.aoMap),i.occlusionTexture=a}e.transparent?i.alphaMode="BLEND":e.alphaTest>0&&(i.alphaMode="MASK",i.alphaCutoff=e.alphaTest),e.side===Es&&(i.doubleSided=!0),e.name!==""&&(i.name=e.name),this.serializeUserData(e,i),this._invokeAll(function(a){a.writeMaterial&&a.writeMaterial(e,i)});const o=n.materials.push(i)-1;return t.materials.set(e,o),o}processMesh(e){const t=this.cache,n=this.json,i=[e.geometry.uuid];if(Array.isArray(e.material))for(let E=0,R=e.material.length;E<R;E++)i.push(e.material[E].uuid);else i.push(e.material.uuid);const s=i.join(":");if(t.meshes.has(s))return t.meshes.get(s);const o=e.geometry;let a;e.isLineSegments?a=_n.LINES:e.isLineLoop?a=_n.LINE_LOOP:e.isLine?a=_n.LINE_STRIP:e.isPoints?a=_n.POINTS:a=e.material.wireframe?_n.LINES:_n.TRIANGLES;const l={},u={},h=[],p=[],g={...yp>=152?{uv:"TEXCOORD_0",uv1:"TEXCOORD_1",uv2:"TEXCOORD_2",uv3:"TEXCOORD_3"}:{uv:"TEXCOORD_0",uv2:"TEXCOORD_1"},color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},y=o.getAttribute("normal");y!==void 0&&!this.isNormalizedNormalAttribute(y)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),o.setAttribute("normal",this.createNormalizedNormalAttribute(y)));let _=null;for(let E in o.attributes){if(E.slice(0,5)==="morph")continue;const R=o.attributes[E];if(E=g[E]||E.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(E)||(E="_"+E),t.attributes.has(this.getUID(R))){u[E]=t.attributes.get(this.getUID(R));continue}_=null;const D=R.array;E==="JOINTS_0"&&!(D instanceof Uint16Array)&&!(D instanceof Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),_=new Sn(new Uint16Array(D),R.itemSize,R.normalized));const j=this.processAccessor(_||R,o);j!==null&&(E.startsWith("_")||this.detectMeshQuantization(E,R),u[E]=j,t.attributes.set(this.getUID(R),j))}if(y!==void 0&&o.setAttribute("normal",y),Object.keys(u).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){const E=[],R=[],L={};if(e.morphTargetDictionary!==void 0)for(const D in e.morphTargetDictionary)L[e.morphTargetDictionary[D]]=D;for(let D=0;D<e.morphTargetInfluences.length;++D){const j={};let O=!1;for(const I in o.morphAttributes){if(I!=="position"&&I!=="normal"){O||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),O=!0);continue}const U=o.morphAttributes[I][D],V=I.toUpperCase(),ee=o.attributes[I];if(t.attributes.has(this.getUID(U,!0))){j[V]=t.attributes.get(this.getUID(U,!0));continue}const te=U.clone();if(!o.morphTargetsRelative)for(let ne=0,le=U.count;ne<le;ne++)for(let de=0;de<U.itemSize;de++)de===0&&te.setX(ne,U.getX(ne)-ee.getX(ne)),de===1&&te.setY(ne,U.getY(ne)-ee.getY(ne)),de===2&&te.setZ(ne,U.getZ(ne)-ee.getZ(ne)),de===3&&te.setW(ne,U.getW(ne)-ee.getW(ne));j[V]=this.processAccessor(te,o),t.attributes.set(this.getUID(ee,!0),j[V])}p.push(j),E.push(e.morphTargetInfluences[D]),e.morphTargetDictionary!==void 0&&R.push(L[D])}l.weights=E,R.length>0&&(l.extras={},l.extras.targetNames=R)}const A=Array.isArray(e.material);if(A&&o.groups.length===0)return null;const b=A?e.material:[e.material],w=A?o.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let E=0,R=w.length;E<R;E++){const L={mode:a,attributes:u};if(this.serializeUserData(o,L),p.length>0&&(L.targets=p),o.index!==null){let j=this.getUID(o.index);(w[E].start!==void 0||w[E].count!==void 0)&&(j+=":"+w[E].start+":"+w[E].count),t.attributes.has(j)?L.indices=t.attributes.get(j):(L.indices=this.processAccessor(o.index,o,w[E].start,w[E].count),t.attributes.set(j,L.indices)),L.indices===null&&delete L.indices}const D=this.processMaterial(b[w[E].materialIndex]);D!==null&&(L.material=D),h.push(L)}l.primitives=h,n.meshes||(n.meshes=[]),this._invokeAll(function(E){E.writeMesh&&E.writeMesh(e,l)});const C=n.meshes.push(l)-1;return t.meshes.set(s,C),C}detectMeshQuantization(e,t){if(this.extensionsUsed[sw])return;let n;switch(t.array.constructor){case Int8Array:n="byte";break;case Uint8Array:n="unsigned byte";break;case Int16Array:n="short";break;case Uint16Array:n="unsigned short";break;default:return}t.normalized&&(n+=" normalized");const i=e.split("_",1)[0];GC[i]&&GC[i].includes(n)&&(this.extensionsUsed[sw]=!0,this.extensionsRequired[sw]=!0)}processCamera(e){const t=this.json;t.cameras||(t.cameras=[]);const n=e.isOrthographicCamera,i={type:n?"orthographic":"perspective"};return n?i.orthographic={xmag:e.right*2,ymag:e.top*2,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:i.perspective={aspectRatio:e.aspect,yfov:Ba.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(i.name=e.type),t.cameras.push(i)-1}processAnimation(e,t){const n=this.json,i=this.nodeMap;n.animations||(n.animations=[]),e=GI.Utils.mergeMorphTargetTracks(e.clone(),t);const s=e.tracks,o=[],a=[];for(let l=0;l<s.length;++l){const u=s[l],h=gn.parseTrackName(u.name);let p=gn.findNode(t,h.nodeName);const g=VC[h.propertyName];if(h.objectName==="bones"&&(p.isSkinnedMesh===!0?p=p.skeleton.getBoneByName(h.objectIndex):p=void 0),!p||!g)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',u.name),null;const y=1;let _=u.values.length/u.times.length;g===VC.morphTargetInfluences&&(_/=p.morphTargetInfluences.length);let A;u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(A="CUBICSPLINE",_/=3):u.getInterpolation()===kd?A="STEP":A="LINEAR",a.push({input:this.processAccessor(new Sn(u.times,y)),output:this.processAccessor(new Sn(u.values,_)),interpolation:A}),o.push({sampler:a.length-1,target:{node:i.get(p),path:g}})}return n.animations.push({name:e.name||"clip_"+n.animations.length,samplers:a,channels:o}),n.animations.length-1}processSkin(e){const t=this.json,n=this.nodeMap,i=t.nodes[n.get(e)],s=e.skeleton;if(s===void 0)return null;const o=e.skeleton.bones[0];if(o===void 0)return null;const a=[],l=new Float32Array(s.bones.length*16),u=new Jt;for(let p=0;p<s.bones.length;++p)a.push(n.get(s.bones[p])),u.copy(s.boneInverses[p]),u.multiply(e.bindMatrix).toArray(l,p*16);return t.skins===void 0&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new Sn(l,16)),joints:a,skeleton:n.get(o)}),i.skin=t.skins.length-1}processNode(e){const t=this.json,n=this.options,i=this.nodeMap;t.nodes||(t.nodes=[]);const s={};if(n.trs){const a=e.quaternion.toArray(),l=e.position.toArray(),u=e.scale.toArray();Dm(a,[0,0,0,1])||(s.rotation=a),Dm(l,[0,0,0])||(s.translation=l),Dm(u,[1,1,1])||(s.scale=u)}else e.matrixAutoUpdate&&e.updateMatrix(),f8(e.matrix)===!1&&(s.matrix=e.matrix.elements);if(e.name!==""&&(s.name=String(e.name)),this.serializeUserData(e,s),e.isMesh||e.isLine||e.isPoints){const a=this.processMesh(e);a!==null&&(s.mesh=a)}else e.isCamera&&(s.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const a=[];for(let l=0,u=e.children.length;l<u;l++){const h=e.children[l];if(h.visible||n.onlyVisible===!1){const p=this.processNode(h);p!==null&&a.push(p)}}a.length>0&&(s.children=a)}this._invokeAll(function(a){a.writeNode&&a.writeNode(e,s)});const o=t.nodes.push(s)-1;return i.set(e,o),o}processScene(e){const t=this.json,n=this.options;t.scenes||(t.scenes=[],t.scene=0);const i={};e.name!==""&&(i.name=e.name),t.scenes.push(i);const s=[];for(let o=0,a=e.children.length;o<a;o++){const l=e.children[o];if(l.visible||n.onlyVisible===!1){const u=this.processNode(l);u!==null&&s.push(u)}}s.length>0&&(i.nodes=s),this.serializeUserData(e,i)}processObjects(e){const t=new Il;t.name="AuxScene";for(let n=0;n<e.length;n++)t.children.push(e[n]);this.processScene(t)}processInput(e){const t=this.options;e=e instanceof Array?e:[e],this._invokeAll(function(i){i.beforeParse&&i.beforeParse(e)});const n=[];for(let i=0;i<e.length;i++)e[i]instanceof Il?this.processScene(e[i]):n.push(e[i]);n.length>0&&this.processObjects(n);for(let i=0;i<this.skins.length;++i)this.processSkin(this.skins[i]);for(let i=0;i<t.animations.length;++i)this.processAnimation(t.animations[i],e[0]);this._invokeAll(function(i){i.afterParse&&i.afterParse(e)})}_invokeAll(e){for(let t=0,n=this.plugins.length;t<n;t++)e(this.plugins[t])}}class g8{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}const n=this.writer,i=n.json,s=n.extensionsUsed,o={};e.name&&(o.name=e.name),o.color=e.color.toArray(),o.intensity=e.intensity,e.isDirectionalLight?o.type="directional":e.isPointLight?(o.type="point",e.distance>0&&(o.range=e.distance)):e.isSpotLight&&(o.type="spot",e.distance>0&&(o.range=e.distance),o.spot={},o.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,o.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||e.target.position.x!==0||e.target.position.y!==0||e.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),s[this.name]||(i.extensions=i.extensions||{},i.extensions[this.name]={lights:[]},s[this.name]=!0);const a=i.extensions[this.name].lights;a.push(o),t.extensions=t.extensions||{},t.extensions[this.name]={light:a.length-1}}}let v8=class{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}writeMaterial(e,t){if(!e.isMeshBasicMaterial)return;const i=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},i[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}},y8=class{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.clearcoat===0)return;const n=this.writer,i=n.extensionsUsed,s={};if(s.clearcoatFactor=e.clearcoat,e.clearcoatMap){const o={index:n.processTexture(e.clearcoatMap),texCoord:e.clearcoatMap.channel};n.applyTextureTransform(o,e.clearcoatMap),s.clearcoatTexture=o}if(s.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){const o={index:n.processTexture(e.clearcoatRoughnessMap),texCoord:e.clearcoatRoughnessMap.channel};n.applyTextureTransform(o,e.clearcoatRoughnessMap),s.clearcoatRoughnessTexture=o}if(e.clearcoatNormalMap){const o={index:n.processTexture(e.clearcoatNormalMap),texCoord:e.clearcoatNormalMap.channel};n.applyTextureTransform(o,e.clearcoatNormalMap),s.clearcoatNormalTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}},x8=class{constructor(e){this.writer=e,this.name="KHR_materials_iridescence"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.iridescence===0)return;const n=this.writer,i=n.extensionsUsed,s={};if(s.iridescenceFactor=e.iridescence,e.iridescenceMap){const o={index:n.processTexture(e.iridescenceMap),texCoord:e.iridescenceMap.channel};n.applyTextureTransform(o,e.iridescenceMap),s.iridescenceTexture=o}if(s.iridescenceIor=e.iridescenceIOR,s.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],s.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){const o={index:n.processTexture(e.iridescenceThicknessMap),texCoord:e.iridescenceThicknessMap.channel};n.applyTextureTransform(o,e.iridescenceThicknessMap),s.iridescenceThicknessTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}},_8=class{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const n=this.writer,i=n.extensionsUsed,s={};if(s.transmissionFactor=e.transmission,e.transmissionMap){const o={index:n.processTexture(e.transmissionMap),texCoord:e.transmissionMap.channel};n.applyTextureTransform(o,e.transmissionMap),s.transmissionTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}},w8=class{constructor(e){this.writer=e,this.name="KHR_materials_volume"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const n=this.writer,i=n.extensionsUsed,s={};if(s.thicknessFactor=e.thickness,e.thicknessMap){const o={index:n.processTexture(e.thicknessMap),texCoord:e.thicknessMap.channel};n.applyTextureTransform(o,e.thicknessMap),s.thicknessTexture=o}s.attenuationDistance=e.attenuationDistance,s.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}},b8=class{constructor(e){this.writer=e,this.name="KHR_materials_ior"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.ior===1.5)return;const i=this.writer.extensionsUsed,s={};s.ior=e.ior,t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}},A8=class{constructor(e){this.writer=e,this.name="KHR_materials_specular"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.specularIntensity===1&&e.specularColor.equals(a8)&&!e.specularIntensityMap&&!e.specularColorTexture)return;const n=this.writer,i=n.extensionsUsed,s={};if(e.specularIntensityMap){const o={index:n.processTexture(e.specularIntensityMap),texCoord:e.specularIntensityMap.channel};n.applyTextureTransform(o,e.specularIntensityMap),s.specularTexture=o}if(e.specularColorMap){const o={index:n.processTexture(e.specularColorMap),texCoord:e.specularColorMap.channel};n.applyTextureTransform(o,e.specularColorMap),s.specularColorTexture=o}s.specularFactor=e.specularIntensity,s.specularColorFactor=e.specularColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}},S8=class{constructor(e){this.writer=e,this.name="KHR_materials_sheen"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.sheen==0)return;const n=this.writer,i=n.extensionsUsed,s={};if(e.sheenRoughnessMap){const o={index:n.processTexture(e.sheenRoughnessMap),texCoord:e.sheenRoughnessMap.channel};n.applyTextureTransform(o,e.sheenRoughnessMap),s.sheenRoughnessTexture=o}if(e.sheenColorMap){const o={index:n.processTexture(e.sheenColorMap),texCoord:e.sheenColorMap.channel};n.applyTextureTransform(o,e.sheenColorMap),s.sheenColorTexture=o}s.sheenRoughnessFactor=e.sheenRoughness,s.sheenColorFactor=e.sheenColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}},E8=class{constructor(e){this.writer=e,this.name="KHR_materials_anisotropy"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.anisotropy==0)return;const n=this.writer,i=n.extensionsUsed,s={};if(e.anisotropyMap){const o={index:n.processTexture(e.anisotropyMap)};n.applyTextureTransform(o,e.anisotropyMap),s.anisotropyTexture=o}s.anisotropyStrength=e.anisotropy,s.anisotropyRotation=e.anisotropyRotation,t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}},M8=class{constructor(e){this.writer=e,this.name="KHR_materials_emissive_strength"}writeMaterial(e,t){if(!e.isMeshStandardMaterial||e.emissiveIntensity===1)return;const i=this.writer.extensionsUsed,s={};s.emissiveStrength=e.emissiveIntensity,t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}};var yo=Uint8Array,Fc=Uint16Array,jb=Uint32Array,WI=new yo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),JI=new yo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),C8=new yo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),XI=function(r,e){for(var t=new Fc(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var i=new jb(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)i[s]=s-t[n]<<5|n;return[t,i]},KI=XI(WI,2),YI=KI[0],T8=KI[1];YI[28]=258,T8[258]=28;var R8=XI(JI,0),P8=R8[0],zb=new Fc(32768);for(var lr=0;lr<32768;++lr){var Rc=(lr&43690)>>>1|(lr&21845)<<1;Rc=(Rc&52428)>>>2|(Rc&13107)<<2,Rc=(Rc&61680)>>>4|(Rc&3855)<<4,zb[lr]=((Rc&65280)>>>8|(Rc&255)<<8)>>>1}var Jm=(function(r,e,t){for(var n=r.length,i=0,s=new Fc(e);i<n;++i)++s[r[i]-1];var o=new Fc(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new Fc(1<<e);var l=15-e;for(i=0;i<n;++i)if(r[i])for(var u=i<<4|r[i],h=e-r[i],p=o[r[i]-1]++<<h,g=p|(1<<h)-1;p<=g;++p)a[zb[p]>>>l]=u}else for(a=new Fc(n),i=0;i<n;++i)r[i]&&(a[i]=zb[o[r[i]-1]++]>>>15-r[i]);return a}),Bg=new yo(288);for(var lr=0;lr<144;++lr)Bg[lr]=8;for(var lr=144;lr<256;++lr)Bg[lr]=9;for(var lr=256;lr<280;++lr)Bg[lr]=7;for(var lr=280;lr<288;++lr)Bg[lr]=8;var qI=new yo(32);for(var lr=0;lr<32;++lr)qI[lr]=5;var I8=Jm(Bg,9,1),L8=Jm(qI,5,1),aw=function(r){for(var e=r[0],t=1;t<r.length;++t)r[t]>e&&(e=r[t]);return e},Xo=function(r,e,t){var n=e/8|0;return(r[n]|r[n+1]<<8)>>(e&7)&t},lw=function(r,e){var t=e/8|0;return(r[t]|r[t+1]<<8|r[t+2]<<16)>>(e&7)},N8=function(r){return(r/8|0)+(r&7&&1)},B8=function(r,e,t){(t==null||t>r.length)&&(t=r.length);var n=new(r instanceof Fc?Fc:r instanceof jb?jb:yo)(t-e);return n.set(r.subarray(e,t)),n},k8=function(r,e,t){var n=r.length;if(!n||t&&!t.l&&n<5)return e||new yo(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new yo(n*3));var o=function(pe){var Ae=e.length;if(pe>Ae){var je=new yo(Math.max(Ae*2,pe));je.set(e),e=je}},a=t.f||0,l=t.p||0,u=t.b||0,h=t.l,p=t.d,g=t.m,y=t.n,_=n*8;do{if(!h){t.f=a=Xo(r,l,1);var A=Xo(r,l+1,3);if(l+=3,A)if(A==1)h=I8,p=L8,g=9,y=5;else if(A==2){var E=Xo(r,l,31)+257,R=Xo(r,l+10,15)+4,L=E+Xo(r,l+5,31)+1;l+=14;for(var D=new yo(L),j=new yo(19),O=0;O<R;++O)j[C8[O]]=Xo(r,l+O*3,7);l+=R*3;for(var I=aw(j),U=(1<<I)-1,V=Jm(j,I,1),O=0;O<L;){var ee=V[Xo(r,l,U)];l+=ee&15;var b=ee>>>4;if(b<16)D[O++]=b;else{var te=0,ne=0;for(b==16?(ne=3+Xo(r,l,3),l+=2,te=D[O-1]):b==17?(ne=3+Xo(r,l,7),l+=3):b==18&&(ne=11+Xo(r,l,127),l+=7);ne--;)D[O++]=te}}var le=D.subarray(0,E),de=D.subarray(E);g=aw(le),y=aw(de),h=Jm(le,g,1),p=Jm(de,y,1)}else throw"invalid block type";else{var b=N8(l)+4,w=r[b-4]|r[b-3]<<8,C=b+w;if(C>n){if(s)throw"unexpected EOF";break}i&&o(u+w),e.set(r.subarray(b,C),u),t.b=u+=w,t.p=l=C*8;continue}if(l>_){if(s)throw"unexpected EOF";break}}i&&o(u+131072);for(var ie=(1<<g)-1,J=(1<<y)-1,Q=l;;Q=l){var te=h[lw(r,l)&ie],H=te>>>4;if(l+=te&15,l>_){if(s)throw"unexpected EOF";break}if(!te)throw"invalid length/literal";if(H<256)e[u++]=H;else if(H==256){Q=l,h=null;break}else{var X=H-254;if(H>264){var O=H-257,Z=WI[O];X=Xo(r,l,(1<<Z)-1)+YI[O],l+=Z}var ye=p[lw(r,l)&J],be=ye>>>4;if(!ye)throw"invalid distance";l+=ye&15;var de=P8[be];if(be>3){var Z=JI[be];de+=lw(r,l)&(1<<Z)-1,l+=Z}if(l>_){if(s)throw"unexpected EOF";break}i&&o(u+131072);for(var Le=u+X;u<Le;u+=4)e[u]=e[u-de],e[u+1]=e[u+1-de],e[u+2]=e[u+2-de],e[u+3]=e[u+3-de];u=Le}}t.l=h,t.p=Q,t.b=u,h&&(a=1,t.m=g,t.d=p,t.n=y)}while(!a);return u==e.length?e:B8(e,0,u)},D8=new yo(0),F8=function(r){if((r[0]&15)!=8||r[0]>>>4>7||(r[0]<<8|r[1])%31)throw"invalid zlib data";if(r[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Lv(r,e){return k8((F8(r),r.subarray(2,-4)),e)}var O8=typeof TextDecoder<"u"&&new TextDecoder,U8=0;try{O8.decode(D8,{stream:!0}),U8=1}catch{}const j8=r=>r&&r.isCubeTexture;class z8 extends hr{constructor(e,t){var n,i;const s=j8(e),a=((i=s?(n=e.image[0])==null?void 0:n.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(a)),u=Math.pow(2,l),h=3*Math.max(u,112),p=4*u,g=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/h}`,`#define CUBEUV_TEXEL_HEIGHT ${1/p}`,`#define CUBEUV_MAX_MIP ${l}.0`],y=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,_=g.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${yp>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,A={map:{value:e},height:{value:t?.height||15},radius:{value:t?.radius||100}},b=new Cg(1,16),w=new ss({uniforms:A,fragmentShader:_,vertexShader:y,side:Es});super(b,w)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var H8=Object.defineProperty,G8=(r,e,t)=>e in r?H8(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,V8=(r,e,t)=>(G8(r,e+"",t),t);class W8{constructor(){V8(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}var J8=Object.defineProperty,X8=(r,e,t)=>e in r?J8(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Wt=(r,e,t)=>(X8(r,typeof e!="symbol"?e+"":e,t),t);const Nv=new Vd,YC=new bl,K8=Math.cos(70*(Math.PI/180)),qC=(r,e)=>(r%e+e)%e;let Y8=class extends W8{constructor(e,t){super(),Wt(this,"object"),Wt(this,"domElement"),Wt(this,"enabled",!0),Wt(this,"target",new q),Wt(this,"minDistance",0),Wt(this,"maxDistance",1/0),Wt(this,"minZoom",0),Wt(this,"maxZoom",1/0),Wt(this,"minPolarAngle",0),Wt(this,"maxPolarAngle",Math.PI),Wt(this,"minAzimuthAngle",-1/0),Wt(this,"maxAzimuthAngle",1/0),Wt(this,"enableDamping",!1),Wt(this,"dampingFactor",.05),Wt(this,"enableZoom",!0),Wt(this,"zoomSpeed",1),Wt(this,"enableRotate",!0),Wt(this,"rotateSpeed",1),Wt(this,"enablePan",!0),Wt(this,"panSpeed",1),Wt(this,"screenSpacePanning",!0),Wt(this,"keyPanSpeed",7),Wt(this,"zoomToCursor",!1),Wt(this,"autoRotate",!1),Wt(this,"autoRotateSpeed",2),Wt(this,"reverseOrbit",!1),Wt(this,"reverseHorizontalOrbit",!1),Wt(this,"reverseVerticalOrbit",!1),Wt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Wt(this,"mouseButtons",{LEFT:sd.ROTATE,MIDDLE:sd.DOLLY,RIGHT:sd.PAN}),Wt(this,"touches",{ONE:od.ROTATE,TWO:od.DOLLY_PAN}),Wt(this,"target0"),Wt(this,"position0"),Wt(this,"zoom0"),Wt(this,"_domElementKeyEvents",null),Wt(this,"getPolarAngle"),Wt(this,"getAzimuthalAngle"),Wt(this,"setPolarAngle"),Wt(this,"setAzimuthalAngle"),Wt(this,"getDistance"),Wt(this,"getZoomScale"),Wt(this,"listenToKeyEvents"),Wt(this,"stopListenToKeyEvents"),Wt(this,"saveState"),Wt(this,"reset"),Wt(this,"update"),Wt(this,"connect"),Wt(this,"dispose"),Wt(this,"dollyIn"),Wt(this,"dollyOut"),Wt(this,"getScale"),Wt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>h.phi,this.getAzimuthalAngle=()=>h.theta,this.setPolarAngle=he=>{let Ue=qC(he,2*Math.PI),nt=h.phi;nt<0&&(nt+=2*Math.PI),Ue<0&&(Ue+=2*Math.PI);let fe=Math.abs(Ue-nt);2*Math.PI-fe<fe&&(Ue<nt?Ue+=2*Math.PI:nt+=2*Math.PI),p.phi=Ue-nt,n.update()},this.setAzimuthalAngle=he=>{let Ue=qC(he,2*Math.PI),nt=h.theta;nt<0&&(nt+=2*Math.PI),Ue<0&&(Ue+=2*Math.PI);let fe=Math.abs(Ue-nt);2*Math.PI-fe<fe&&(Ue<nt?Ue+=2*Math.PI:nt+=2*Math.PI),p.theta=Ue-nt,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=he=>{he.addEventListener("keydown",qe),this._domElementKeyEvents=he},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",qe),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),l=a.NONE},this.update=(()=>{const he=new q,Ue=new q(0,1,0),nt=new ui().setFromUnitVectors(e.up,Ue),fe=nt.clone().invert(),Se=new q,Me=new ui,Ze=2*Math.PI;return function(){const en=n.object.position;nt.setFromUnitVectors(e.up,Ue),fe.copy(nt).invert(),he.copy(en).sub(n.target),he.applyQuaternion(nt),h.setFromVector3(he),n.autoRotate&&l===a.NONE&&ne(ee()),n.enableDamping?(h.theta+=p.theta*n.dampingFactor,h.phi+=p.phi*n.dampingFactor):(h.theta+=p.theta,h.phi+=p.phi);let an=n.minAzimuthAngle,vn=n.maxAzimuthAngle;isFinite(an)&&isFinite(vn)&&(an<-Math.PI?an+=Ze:an>Math.PI&&(an-=Ze),vn<-Math.PI?vn+=Ze:vn>Math.PI&&(vn-=Ze),an<=vn?h.theta=Math.max(an,Math.min(vn,h.theta)):h.theta=h.theta>(an+vn)/2?Math.max(an,h.theta):Math.min(vn,h.theta)),h.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,h.phi)),h.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(y,n.dampingFactor):n.target.add(y),n.zoomToCursor&&I||n.object.isOrthographicCamera?h.radius=ye(h.radius):h.radius=ye(h.radius*g),he.setFromSpherical(h),he.applyQuaternion(fe),en.copy(n.target).add(he),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(p.theta*=1-n.dampingFactor,p.phi*=1-n.dampingFactor,y.multiplyScalar(1-n.dampingFactor)):(p.set(0,0,0),y.set(0,0,0));let _r=!1;if(n.zoomToCursor&&I){let hn=null;if(n.object instanceof ar&&n.object.isPerspectiveCamera){const cr=he.length();hn=ye(cr*g);const zn=cr-hn;n.object.position.addScaledVector(j,zn),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const cr=new q(O.x,O.y,0);cr.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/g)),n.object.updateProjectionMatrix(),_r=!0;const zn=new q(O.x,O.y,0);zn.unproject(n.object),n.object.position.sub(zn).add(cr),n.object.updateMatrixWorld(),hn=he.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;hn!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(hn).add(n.object.position):(Nv.origin.copy(n.object.position),Nv.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Nv.direction))<K8?e.lookAt(n.target):(YC.setFromNormalAndCoplanarPoint(n.object.up,n.target),Nv.intersectPlane(YC,n.target))))}else n.object instanceof xo&&n.object.isOrthographicCamera&&(_r=g!==1,_r&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/g)),n.object.updateProjectionMatrix()));return g=1,I=!1,_r||Se.distanceToSquared(n.object.position)>u||8*(1-Me.dot(n.object.quaternion))>u?(n.dispatchEvent(i),Se.copy(n.object.position),Me.copy(n.object.quaternion),_r=!1,!0):!1}})(),this.connect=he=>{n.domElement=he,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",Be),n.domElement.addEventListener("pointerdown",dn),n.domElement.addEventListener("pointercancel",Y),n.domElement.addEventListener("wheel",Ke)},this.dispose=()=>{var he,Ue,nt,fe,Se,Me;n.domElement&&(n.domElement.style.touchAction="auto"),(he=n.domElement)==null||he.removeEventListener("contextmenu",Be),(Ue=n.domElement)==null||Ue.removeEventListener("pointerdown",dn),(nt=n.domElement)==null||nt.removeEventListener("pointercancel",Y),(fe=n.domElement)==null||fe.removeEventListener("wheel",Ke),(Se=n.domElement)==null||Se.ownerDocument.removeEventListener("pointermove",se),(Me=n.domElement)==null||Me.ownerDocument.removeEventListener("pointerup",Y),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",qe)};const n=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const u=1e-6,h=new Db,p=new Db;let g=1;const y=new q,_=new We,A=new We,b=new We,w=new We,C=new We,E=new We,R=new We,L=new We,D=new We,j=new q,O=new We;let I=!1;const U=[],V={};function ee(){return 2*Math.PI/60/60*n.autoRotateSpeed}function te(){return Math.pow(.95,n.zoomSpeed)}function ne(he){n.reverseOrbit||n.reverseHorizontalOrbit?p.theta+=he:p.theta-=he}function le(he){n.reverseOrbit||n.reverseVerticalOrbit?p.phi+=he:p.phi-=he}const de=(()=>{const he=new q;return function(nt,fe){he.setFromMatrixColumn(fe,0),he.multiplyScalar(-nt),y.add(he)}})(),ie=(()=>{const he=new q;return function(nt,fe){n.screenSpacePanning===!0?he.setFromMatrixColumn(fe,1):(he.setFromMatrixColumn(fe,0),he.crossVectors(n.object.up,he)),he.multiplyScalar(nt),y.add(he)}})(),J=(()=>{const he=new q;return function(nt,fe){const Se=n.domElement;if(Se&&n.object instanceof ar&&n.object.isPerspectiveCamera){const Me=n.object.position;he.copy(Me).sub(n.target);let Ze=he.length();Ze*=Math.tan(n.object.fov/2*Math.PI/180),de(2*nt*Ze/Se.clientHeight,n.object.matrix),ie(2*fe*Ze/Se.clientHeight,n.object.matrix)}else Se&&n.object instanceof xo&&n.object.isOrthographicCamera?(de(nt*(n.object.right-n.object.left)/n.object.zoom/Se.clientWidth,n.object.matrix),ie(fe*(n.object.top-n.object.bottom)/n.object.zoom/Se.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function Q(he){n.object instanceof ar&&n.object.isPerspectiveCamera||n.object instanceof xo&&n.object.isOrthographicCamera?g=he:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function H(he){Q(g/he)}function X(he){Q(g*he)}function Z(he){if(!n.zoomToCursor||!n.domElement)return;I=!0;const Ue=n.domElement.getBoundingClientRect(),nt=he.clientX-Ue.left,fe=he.clientY-Ue.top,Se=Ue.width,Me=Ue.height;O.x=nt/Se*2-1,O.y=-(fe/Me)*2+1,j.set(O.x,O.y,1).unproject(n.object).sub(n.object.position).normalize()}function ye(he){return Math.max(n.minDistance,Math.min(n.maxDistance,he))}function be(he){_.set(he.clientX,he.clientY)}function Le(he){Z(he),R.set(he.clientX,he.clientY)}function pe(he){w.set(he.clientX,he.clientY)}function Ae(he){A.set(he.clientX,he.clientY),b.subVectors(A,_).multiplyScalar(n.rotateSpeed);const Ue=n.domElement;Ue&&(ne(2*Math.PI*b.x/Ue.clientHeight),le(2*Math.PI*b.y/Ue.clientHeight)),_.copy(A),n.update()}function je(he){L.set(he.clientX,he.clientY),D.subVectors(L,R),D.y>0?H(te()):D.y<0&&X(te()),R.copy(L),n.update()}function ft(he){C.set(he.clientX,he.clientY),E.subVectors(C,w).multiplyScalar(n.panSpeed),J(E.x,E.y),w.copy(C),n.update()}function St(he){Z(he),he.deltaY<0?X(te()):he.deltaY>0&&H(te()),n.update()}function Xe(he){let Ue=!1;switch(he.code){case n.keys.UP:J(0,n.keyPanSpeed),Ue=!0;break;case n.keys.BOTTOM:J(0,-n.keyPanSpeed),Ue=!0;break;case n.keys.LEFT:J(n.keyPanSpeed,0),Ue=!0;break;case n.keys.RIGHT:J(-n.keyPanSpeed,0),Ue=!0;break}Ue&&(he.preventDefault(),n.update())}function ce(){if(U.length==1)_.set(U[0].pageX,U[0].pageY);else{const he=.5*(U[0].pageX+U[1].pageX),Ue=.5*(U[0].pageY+U[1].pageY);_.set(he,Ue)}}function ge(){if(U.length==1)w.set(U[0].pageX,U[0].pageY);else{const he=.5*(U[0].pageX+U[1].pageX),Ue=.5*(U[0].pageY+U[1].pageY);w.set(he,Ue)}}function we(){const he=U[0].pageX-U[1].pageX,Ue=U[0].pageY-U[1].pageY,nt=Math.sqrt(he*he+Ue*Ue);R.set(0,nt)}function De(){n.enableZoom&&we(),n.enablePan&&ge()}function Fe(){n.enableZoom&&we(),n.enableRotate&&ce()}function Qe(he){if(U.length==1)A.set(he.pageX,he.pageY);else{const nt=bt(he),fe=.5*(he.pageX+nt.x),Se=.5*(he.pageY+nt.y);A.set(fe,Se)}b.subVectors(A,_).multiplyScalar(n.rotateSpeed);const Ue=n.domElement;Ue&&(ne(2*Math.PI*b.x/Ue.clientHeight),le(2*Math.PI*b.y/Ue.clientHeight)),_.copy(A)}function st(he){if(U.length==1)C.set(he.pageX,he.pageY);else{const Ue=bt(he),nt=.5*(he.pageX+Ue.x),fe=.5*(he.pageY+Ue.y);C.set(nt,fe)}E.subVectors(C,w).multiplyScalar(n.panSpeed),J(E.x,E.y),w.copy(C)}function lt(he){const Ue=bt(he),nt=he.pageX-Ue.x,fe=he.pageY-Ue.y,Se=Math.sqrt(nt*nt+fe*fe);L.set(0,Se),D.set(0,Math.pow(L.y/R.y,n.zoomSpeed)),H(D.y),R.copy(L)}function Et(he){n.enableZoom&&lt(he),n.enablePan&&st(he)}function Ut(he){n.enableZoom&&lt(he),n.enableRotate&&Qe(he)}function dn(he){var Ue,nt;n.enabled!==!1&&(U.length===0&&((Ue=n.domElement)==null||Ue.ownerDocument.addEventListener("pointermove",se),(nt=n.domElement)==null||nt.ownerDocument.addEventListener("pointerup",Y)),Ft(he),he.pointerType==="touch"?xt(he):Ce(he))}function se(he){n.enabled!==!1&&(he.pointerType==="touch"?tt(he):et(he))}function Y(he){var Ue,nt,fe;Ct(he),U.length===0&&((Ue=n.domElement)==null||Ue.releasePointerCapture(he.pointerId),(nt=n.domElement)==null||nt.ownerDocument.removeEventListener("pointermove",se),(fe=n.domElement)==null||fe.ownerDocument.removeEventListener("pointerup",Y)),n.dispatchEvent(o),l=a.NONE}function Ce(he){let Ue;switch(he.button){case 0:Ue=n.mouseButtons.LEFT;break;case 1:Ue=n.mouseButtons.MIDDLE;break;case 2:Ue=n.mouseButtons.RIGHT;break;default:Ue=-1}switch(Ue){case sd.DOLLY:if(n.enableZoom===!1)return;Le(he),l=a.DOLLY;break;case sd.ROTATE:if(he.ctrlKey||he.metaKey||he.shiftKey){if(n.enablePan===!1)return;pe(he),l=a.PAN}else{if(n.enableRotate===!1)return;be(he),l=a.ROTATE}break;case sd.PAN:if(he.ctrlKey||he.metaKey||he.shiftKey){if(n.enableRotate===!1)return;be(he),l=a.ROTATE}else{if(n.enablePan===!1)return;pe(he),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&n.dispatchEvent(s)}function et(he){if(n.enabled!==!1)switch(l){case a.ROTATE:if(n.enableRotate===!1)return;Ae(he);break;case a.DOLLY:if(n.enableZoom===!1)return;je(he);break;case a.PAN:if(n.enablePan===!1)return;ft(he);break}}function Ke(he){n.enabled===!1||n.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(he.preventDefault(),n.dispatchEvent(s),St(he),n.dispatchEvent(o))}function qe(he){n.enabled===!1||n.enablePan===!1||Xe(he)}function xt(he){switch(vt(he),U.length){case 1:switch(n.touches.ONE){case od.ROTATE:if(n.enableRotate===!1)return;ce(),l=a.TOUCH_ROTATE;break;case od.PAN:if(n.enablePan===!1)return;ge(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(n.touches.TWO){case od.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;De(),l=a.TOUCH_DOLLY_PAN;break;case od.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Fe(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&n.dispatchEvent(s)}function tt(he){switch(vt(he),l){case a.TOUCH_ROTATE:if(n.enableRotate===!1)return;Qe(he),n.update();break;case a.TOUCH_PAN:if(n.enablePan===!1)return;st(he),n.update();break;case a.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Et(he),n.update();break;case a.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Ut(he),n.update();break;default:l=a.NONE}}function Be(he){n.enabled!==!1&&he.preventDefault()}function Ft(he){U.push(he)}function Ct(he){delete V[he.pointerId];for(let Ue=0;Ue<U.length;Ue++)if(U[Ue].pointerId==he.pointerId){U.splice(Ue,1);return}}function vt(he){let Ue=V[he.pointerId];Ue===void 0&&(Ue=new We,V[he.pointerId]=Ue),Ue.set(he.pageX,he.pageY)}function bt(he){const Ue=he.pointerId===U[0].pointerId?U[1]:U[0];return V[Ue.pointerId]}this.dollyIn=(he=te())=>{X(he),n.update()},this.dollyOut=(he=te())=>{H(he),n.update()},this.getScale=()=>g,this.setScale=he=>{Q(he),n.update()},this.getZoomScale=()=>te(),t!==void 0&&this.connect(t),this.update()}};function py(r){if(typeof TextDecoder<"u")return new TextDecoder().decode(r);let e="";for(let t=0,n=r.length;t<n;t++)e+=String.fromCharCode(r[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const _d="srgb",Cl="srgb-linear",QC=3001,q8=3e3;class E1 extends Ci{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new t6(t)}),this.register(function(t){return new n6(t)}),this.register(function(t){return new d6(t)}),this.register(function(t){return new h6(t)}),this.register(function(t){return new f6(t)}),this.register(function(t){return new i6(t)}),this.register(function(t){return new s6(t)}),this.register(function(t){return new o6(t)}),this.register(function(t){return new a6(t)}),this.register(function(t){return new e6(t)}),this.register(function(t){return new l6(t)}),this.register(function(t){return new r6(t)}),this.register(function(t){return new u6(t)}),this.register(function(t){return new c6(t)}),this.register(function(t){return new Z8(t)}),this.register(function(t){return new p6(t)}),this.register(function(t){return new m6(t)})}load(e,t,n,i){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const u=Hc.extractUrlBase(e);o=Hc.resolveURL(u,this.path)}else o=Hc.extractUrlBase(e);this.manager.itemStart(e);const a=function(u){i?i(u):console.error(u),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Mi(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{s.parse(u,o,function(h){t(h),s.manager.itemEnd(e)},a)}catch(h){a(h)}},n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(py(new Uint8Array(e.slice(0,4)))===QI){try{o[bn.KHR_BINARY_GLTF]=new g6(e)}catch(h){i&&i(h);return}s=JSON.parse(o[bn.KHR_BINARY_GLTF].content)}else s=JSON.parse(py(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new R6(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const h=this.pluginCallbacks[u](l);h.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[h.name]=h,o[h.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const h=s.extensionsUsed[u],p=s.extensionsRequired||[];switch(h){case bn.KHR_MATERIALS_UNLIT:o[h]=new $8;break;case bn.KHR_DRACO_MESH_COMPRESSION:o[h]=new v6(s,this.dracoLoader);break;case bn.KHR_TEXTURE_TRANSFORM:o[h]=new y6;break;case bn.KHR_MESH_QUANTIZATION:o[h]=new x6;break;default:p.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(n,i)}parseAsync(e,t){const n=this;return new Promise(function(i,s){n.parse(e,t,i,s)})}}function Q8(){let r={};return{get:function(e){return r[e]},add:function(e,t){r[e]=t},remove:function(e){delete r[e]},removeAll:function(){r={}}}}const bn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Z8{constructor(e){this.parser=e,this.name=bn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,i=t.length;n<i;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let i=t.cache.get(n);if(i)return i;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let u;const h=new mt(16777215);l.color!==void 0&&h.setRGB(l.color[0],l.color[1],l.color[2],Cl);const p=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new f1(h),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new h1(h),u.distance=p;break;case"spot":u=new d1(h),u.distance=p,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,wl(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(u),t.cache.add(n,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return n._getNodeRef(t.cache,a,l)})}}class $8{constructor(){this.name=bn.KHR_MATERIALS_UNLIT}getMaterialType(){return Cs}extendParams(e,t,n){const i=[];e.color=new mt(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],Cl),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(n.assignTexture(e,"map",s.baseColorTexture,_d))}return Promise.all(i)}}class e6{constructor(e){this.parser=e,this.name=bn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class t6{constructor(e){this.parser=e,this.name=bn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:wo}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new We(a,a)}return Promise.all(s)}}class n6{constructor(e){this.parser=e,this.name=bn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:wo}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class r6{constructor(e){this.parser=e,this.name=bn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:wo}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class i6{constructor(e){this.parser=e,this.name=bn.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:wo}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new mt(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],Cl)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,_d)),o.sheenRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class s6{constructor(e){this.parser=e,this.name=bn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:wo}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class o6{constructor(e){this.parser=e,this.name=bn.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:wo}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new mt().setRGB(a[0],a[1],a[2],Cl),Promise.all(s)}}class a6{constructor(e){this.parser=e,this.name=bn.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:wo}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class l6{constructor(e){this.parser=e,this.name=bn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:wo}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new mt().setRGB(a[0],a[1],a[2],Cl),o.specularColorTexture!==void 0&&s.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,_d)),Promise.all(s)}}class c6{constructor(e){this.parser=e,this.name=bn.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:wo}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(n.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class u6{constructor(e){this.parser=e,this.name=bn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:wo}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(n.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class d6{constructor(e){this.parser=e,this.name=bn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class h6{constructor(e){this.parser=e,this.name=bn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=n.textureLoader;if(a.uri){const u=n.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return n.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class f6{constructor(e){this.parser=e,this.name=bn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=n.textureLoader;if(a.uri){const u=n.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return n.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class p6{constructor(e){this.name=bn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const i=n.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,u=i.byteLength||0,h=i.count,p=i.byteStride,g=new Uint8Array(a,l,u);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(h,p,g,i.mode,i.filter).then(function(y){return y.buffer}):o.ready.then(function(){const y=new ArrayBuffer(h*p);return o.decodeGltfBuffer(new Uint8Array(y),h,p,g,i.mode,i.filter),y})})}else return null}}class m6{constructor(e){this.name=bn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const i=t.meshes[n.mesh];for(const u of i.primitives)if(u.mode!==mo.TRIANGLES&&u.mode!==mo.TRIANGLE_STRIP&&u.mode!==mo.TRIANGLE_FAN&&u.mode!==void 0)return null;const o=n.extensions[this.name].attributes,a=[],l={};for(const u in o)a.push(this.parser.getDependency("accessor",o[u]).then(h=>(l[u]=h,l[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(u=>{const h=u.pop(),p=h.isGroup?h.children:[h],g=u[0].count,y=[];for(const _ of p){const A=new Jt,b=new q,w=new ui,C=new q(1,1,1),E=new YA(_.geometry,_.material,g);for(let R=0;R<g;R++)l.TRANSLATION&&b.fromBufferAttribute(l.TRANSLATION,R),l.ROTATION&&w.fromBufferAttribute(l.ROTATION,R),l.SCALE&&C.fromBufferAttribute(l.SCALE,R),E.setMatrixAt(R,A.compose(b,w,C));for(const R in l)if(R==="_COLOR_0"){const L=l[R];E.instanceColor=new Dd(L.array,L.itemSize,L.normalized)}else R!=="TRANSLATION"&&R!=="ROTATION"&&R!=="SCALE"&&_.geometry.setAttribute(R,l[R]);Cn.prototype.copy.call(E,_),this.parser.assignFinalMaterial(E),y.push(E)}return h.isGroup?(h.clear(),h.add(...y),h):y[0]}))}}const QI="glTF",bm=12,ZC={JSON:1313821514,BIN:5130562};class g6{constructor(e){this.name=bn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,bm);if(this.header={magic:py(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==QI)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-bm,i=new DataView(e,bm);let s=0;for(;s<n;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===ZC.JSON){const l=new Uint8Array(e,bm+s,o);this.content=py(l)}else if(a===ZC.BIN){const l=bm+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class v6{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=bn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},u={};for(const h in o){const p=Hb[h]||h.toLowerCase();a[p]=o[h]}for(const h in e.attributes){const p=Hb[h]||h.toLowerCase();if(o[h]!==void 0){const g=n.accessors[e.attributes[h]],y=qf[g.componentType];u[p]=y.name,l[p]=g.normalized===!0}}return t.getDependency("bufferView",s).then(function(h){return new Promise(function(p,g){i.decodeDracoFile(h,function(y){for(const _ in y.attributes){const A=y.attributes[_],b=l[_];b!==void 0&&(A.normalized=b)}p(y)},a,u,Cl,g)})})}}class y6{constructor(){this.name=bn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class x6{constructor(){this.name=bn.KHR_MESH_QUANTIZATION}}class ZI extends vp{constructor(e,t,n,i){super(e,t,n,i)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=n[s+o];return t}interpolate_(e,t,n,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,u=a*3,h=i-t,p=(n-t)/h,g=p*p,y=g*p,_=e*u,A=_-u,b=-2*y+3*g,w=y-g,C=1-b,E=w-g+p;for(let R=0;R!==a;R++){const L=o[A+R+a],D=o[A+R+l]*h,j=o[_+R+a],O=o[_+R]*h;s[R]=C*L+E*D+b*j+w*O}return s}}const _6=new ui;class w6 extends ZI{interpolate_(e,t,n,i){const s=super.interpolate_(e,t,n,i);return _6.fromArray(s).normalize().toArray(s),s}}const mo={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},qf={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},$C={9728:gr,9729:Pn,9984:tp,9985:xg,9986:Sd,9987:ea},eT={33071:er,33648:Nd,10497:Pl},cw={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Hb={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...yp>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Pc={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},b6={CUBICSPLINE:void 0,LINEAR:Xc,STEP:kd},uw={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function A6(r){return r.DefaultMaterial===void 0&&(r.DefaultMaterial=new gp({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Fa})),r.DefaultMaterial}function td(r,e,t){for(const n in t.extensions)r[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function wl(r,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(r.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function S6(r,e,t){let n=!1,i=!1,s=!1;for(let u=0,h=e.length;u<h;u++){const p=e[u];if(p.POSITION!==void 0&&(n=!0),p.NORMAL!==void 0&&(i=!0),p.COLOR_0!==void 0&&(s=!0),n&&i&&s)break}if(!n&&!i&&!s)return Promise.resolve(r);const o=[],a=[],l=[];for(let u=0,h=e.length;u<h;u++){const p=e[u];if(n){const g=p.POSITION!==void 0?t.getDependency("accessor",p.POSITION):r.attributes.position;o.push(g)}if(i){const g=p.NORMAL!==void 0?t.getDependency("accessor",p.NORMAL):r.attributes.normal;a.push(g)}if(s){const g=p.COLOR_0!==void 0?t.getDependency("accessor",p.COLOR_0):r.attributes.color;l.push(g)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(u){const h=u[0],p=u[1],g=u[2];return n&&(r.morphAttributes.position=h),i&&(r.morphAttributes.normal=p),s&&(r.morphAttributes.color=g),r.morphTargetsRelative=!0,r})}function E6(r,e){if(r.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)r.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(r.morphTargetInfluences.length===t.length){r.morphTargetDictionary={};for(let n=0,i=t.length;n<i;n++)r.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function M6(r){let e;const t=r.extensions&&r.extensions[bn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+dw(t.attributes):e=r.indices+":"+dw(r.attributes)+":"+r.mode,r.targets!==void 0)for(let n=0,i=r.targets.length;n<i;n++)e+=":"+dw(r.targets[n]);return e}function dw(r){let e="";const t=Object.keys(r).sort();for(let n=0,i=t.length;n<i;n++)e+=t[n]+":"+r[t[n]]+";";return e}function Gb(r){switch(r){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function C6(r){return r.search(/\.jpe?g($|\?)/i)>0||r.search(/^data\:image\/jpeg/)===0?"image/jpeg":r.search(/\.webp($|\?)/i)>0||r.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const T6=new Jt;class R6{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Q8,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||i&&s<98?this.textureLoader=new Pg(this.options.manager):this.textureLoader=new fI(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Mi(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:n,userData:{}};return td(s,a,i),wl(a,i),Promise.all(n._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(n[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const i=n.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[u,h]of o.children.entries())s(h,a.children[u])};return s(n,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const i=e(t[n]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(n,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return n.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[bn.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){n.load(Hc.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const i=t.byteLength||0,s=t.byteOffset||0;return n.slice(s,s+i)})}loadAccessor(e){const t=this,n=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=cw[i.type],a=qf[i.componentType],l=i.normalized===!0,u=new a(i.count*o);return Promise.resolve(new Sn(u,o,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=cw[i.type],u=qf[i.componentType],h=u.BYTES_PER_ELEMENT,p=h*l,g=i.byteOffset||0,y=i.bufferView!==void 0?n.bufferViews[i.bufferView].byteStride:void 0,_=i.normalized===!0;let A,b;if(y&&y!==p){const w=Math.floor(g/y),C="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+w+":"+i.count;let E=t.cache.get(C);E||(A=new u(a,w*y,i.count*y/h),E=new Ag(A,y/h),t.cache.add(C,E)),b=new Ts(E,l,g%y/h,_)}else a===null?A=new u(i.count*l):A=new u(a,g,i.count*l),b=new Sn(A,l,_);if(i.sparse!==void 0){const w=cw.SCALAR,C=qf[i.sparse.indices.componentType],E=i.sparse.indices.byteOffset||0,R=i.sparse.values.byteOffset||0,L=new C(o[1],E,i.sparse.count*w),D=new u(o[2],R,i.sparse.count*l);a!==null&&(b=new Sn(b.array.slice(),b.itemSize,b.normalized));for(let j=0,O=L.length;j<O;j++){const I=L[j];if(b.setX(I,D[j*l]),l>=2&&b.setY(I,D[j*l+1]),l>=3&&b.setZ(I,D[j*l+2]),l>=4&&b.setW(I,D[j*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return b})}loadTexture(e){const t=this.json,n=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=n.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,n){const i=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(t,n).then(function(h){h.flipY=!1,h.name=o.name||a.name||"",h.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(h.name=a.uri);const g=(s.samplers||{})[o.sampler]||{};return h.magFilter=$C[g.magFilter]||Pn,h.minFilter=$C[g.minFilter]||ea,h.wrapS=eT[g.wrapS]||Pl,h.wrapT=eT[g.wrapT]||Pl,i.associations.set(h,{textures:e}),h}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,t){const n=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(p=>p.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",u=!1;if(o.bufferView!==void 0)l=n.getDependency("bufferView",o.bufferView).then(function(p){u=!0;const g=new Blob([p],{type:o.mimeType});return l=a.createObjectURL(g),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(l).then(function(p){return new Promise(function(g,y){let _=g;t.isImageBitmapLoader===!0&&(_=function(A){const b=new In(A);b.needsUpdate=!0,g(b)}),t.load(Hc.resolveURL(p,s.path),_,void 0,y)})}).then(function(p){return u===!0&&a.revokeObjectURL(l),wl(p,o),p.userData.mimeType=o.mimeType||C6(o.uri),p}).catch(function(p){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),p});return this.sourceCache[e]=h,h}assignTexture(e,t,n,i){const s=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(o=o.clone(),o.channel=n.texCoord),s.extensions[bn.KHR_TEXTURE_TRANSFORM]){const a=n.extensions!==void 0?n.extensions[bn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[bn.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&(typeof i=="number"&&(i=i===QC?_d:Cl),"colorSpace"in o?o.colorSpace=i:o.encoding=i===_d?QC:q8),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new Eg,Jr.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,l.sizeAttenuation=!1,this.cache.add(a,l)),n=l}else if(e.isLine){const a="LineBasicMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new Hi,Jr.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,this.cache.add(a,l)),n=l}if(i||s||o){let a="ClonedMaterial:"+n.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=n.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(n))),n=l}e.material=n}getMaterialType(){return gp}loadMaterial(e){const t=this,n=this.json,i=this.extensions,s=n.materials[e];let o;const a={},l=s.extensions||{},u=[];if(l[bn.KHR_MATERIALS_UNLIT]){const p=i[bn.KHR_MATERIALS_UNLIT];o=p.getMaterialType(),u.push(p.extendParams(a,s,t))}else{const p=s.pbrMetallicRoughness||{};if(a.color=new mt(1,1,1),a.opacity=1,Array.isArray(p.baseColorFactor)){const g=p.baseColorFactor;a.color.setRGB(g[0],g[1],g[2],Cl),a.opacity=g[3]}p.baseColorTexture!==void 0&&u.push(t.assignTexture(a,"map",p.baseColorTexture,_d)),a.metalness=p.metallicFactor!==void 0?p.metallicFactor:1,a.roughness=p.roughnessFactor!==void 0?p.roughnessFactor:1,p.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(a,"metalnessMap",p.metallicRoughnessTexture)),u.push(t.assignTexture(a,"roughnessMap",p.metallicRoughnessTexture))),o=this._invokeOne(function(g){return g.getMaterialType&&g.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(g){return g.extendMaterialParams&&g.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Es);const h=s.alphaMode||uw.OPAQUE;if(h===uw.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,h===uw.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Cs&&(u.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new We(1,1),s.normalTexture.scale!==void 0)){const p=s.normalTexture.scale;a.normalScale.set(p,p)}if(s.occlusionTexture!==void 0&&o!==Cs&&(u.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Cs){const p=s.emissiveFactor;a.emissive=new mt().setRGB(p[0],p[1],p[2],Cl)}return s.emissiveTexture!==void 0&&o!==Cs&&u.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,_d)),Promise.all(u).then(function(){const p=new o(a);return s.name&&(p.name=s.name),wl(p,s),t.associations.set(p,{materials:e}),s.extensions&&td(i,p,s),p})}createUniqueName(e){const t=gn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,i=this.primitiveCache;function s(a){return n[bn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return tT(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const u=e[a],h=M6(u),p=i[h];if(p)o.push(p.promise);else{let g;u.extensions&&u.extensions[bn.KHR_DRACO_MESH_COMPRESSION]?g=s(u):g=tT(new rn,u,t),i[h]={primitive:u,promise:g},o.push(g)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,i=this.extensions,s=n.meshes[e],o=s.primitives,a=[];for(let l=0,u=o.length;l<u;l++){const h=o[l].material===void 0?A6(this.cache):this.getDependency("material",o[l].material);a.push(h)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const u=l.slice(0,l.length-1),h=l[l.length-1],p=[];for(let y=0,_=h.length;y<_;y++){const A=h[y],b=o[y];let w;const C=u[y];if(b.mode===mo.TRIANGLES||b.mode===mo.TRIANGLE_STRIP||b.mode===mo.TRIANGLE_FAN||b.mode===void 0)w=s.isSkinnedMesh===!0?new KA(A,C):new hr(A,C),w.isSkinnedMesh===!0&&w.normalizeSkinWeights(),b.mode===mo.TRIANGLE_STRIP?w.geometry=zC(w.geometry,kA):b.mode===mo.TRIANGLE_FAN&&(w.geometry=zC(w.geometry,cy));else if(b.mode===mo.LINES)w=new ta(A,C);else if(b.mode===mo.LINE_STRIP)w=new Ll(A,C);else if(b.mode===mo.LINE_LOOP)w=new qA(A,C);else if(b.mode===mo.POINTS)w=new QA(A,C);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+b.mode);Object.keys(w.geometry.morphAttributes).length>0&&E6(w,s),w.name=t.createUniqueName(s.name||"mesh_"+e),wl(w,s),b.extensions&&td(i,w,b),t.assignFinalMaterial(w),p.push(w)}for(let y=0,_=p.length;y<_;y++)t.associations.set(p[y],{meshes:e,primitives:y});if(p.length===1)return s.extensions&&td(i,p[0],s),p[0];const g=new Sl;s.extensions&&td(i,g,s),t.associations.set(g,{meshes:e});for(let y=0,_=p.length;y<_;y++)g.add(p[y]);return g})}loadCamera(e){let t;const n=this.json.cameras[e],i=n[n.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new ar(Ba.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):n.type==="orthographic"&&(t=new xo(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),wl(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let i=0,s=t.joints.length;i<s;i++)n.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(i){const s=i.pop(),o=i,a=[],l=[];for(let u=0,h=o.length;u<h;u++){const p=o[u];if(p){a.push(p);const g=new Jt;s!==null&&g.fromArray(s.array,u*16),l.push(g)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new Sg(a,l)})}loadAnimation(e){const t=this.json,n=this,i=t.animations[e],s=i.name?i.name:"animation_"+e,o=[],a=[],l=[],u=[],h=[];for(let p=0,g=i.channels.length;p<g;p++){const y=i.channels[p],_=i.samplers[y.sampler],A=y.target,b=A.node,w=i.parameters!==void 0?i.parameters[_.input]:_.input,C=i.parameters!==void 0?i.parameters[_.output]:_.output;A.node!==void 0&&(o.push(this.getDependency("node",b)),a.push(this.getDependency("accessor",w)),l.push(this.getDependency("accessor",C)),u.push(_),h.push(A))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(u),Promise.all(h)]).then(function(p){const g=p[0],y=p[1],_=p[2],A=p[3],b=p[4],w=[];for(let C=0,E=g.length;C<E;C++){const R=g[C],L=y[C],D=_[C],j=A[C],O=b[C];if(R===void 0)continue;R.updateMatrix&&R.updateMatrix();const I=n._createAnimationTracks(R,L,D,j,O);if(I)for(let U=0;U<I.length;U++)w.push(I[U])}return new ip(s,void 0,w)})}createNodeMesh(e){const t=this.json,n=this,i=t.nodes[e];return i.mesh===void 0?null:n.getDependency("mesh",i.mesh).then(function(s){const o=n._getNodeRef(n.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,u=i.weights.length;l<u;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const t=this.json,n=this,i=t.nodes[e],s=n._loadNodeShallow(e),o=[],a=i.children||[];for(let u=0,h=a.length;u<h;u++)o.push(n.getDependency("node",a[u]));const l=i.skin===void 0?Promise.resolve(null):n.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),l]).then(function(u){const h=u[0],p=u[1],g=u[2];g!==null&&h.traverse(function(y){y.isSkinnedMesh&&y.bind(g,T6)});for(let y=0,_=p.length;y<_;y++)h.add(p[y]);return h})}_loadNodeShallow(e){const t=this.json,n=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"",a=[],l=i._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(u){return i._getNodeRef(i.cameraCache,s.camera,u)})),i._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){a.push(u)}),this.nodeCache[e]=Promise.all(a).then(function(u){let h;if(s.isBone===!0?h=new Uy:u.length>1?h=new Sl:u.length===1?h=u[0]:h=new Cn,h!==u[0])for(let p=0,g=u.length;p<g;p++)h.add(u[p]);if(s.name&&(h.userData.name=s.name,h.name=o),wl(h,s),s.extensions&&td(n,h,s),s.matrix!==void 0){const p=new Jt;p.fromArray(s.matrix),h.applyMatrix4(p)}else s.translation!==void 0&&h.position.fromArray(s.translation),s.rotation!==void 0&&h.quaternion.fromArray(s.rotation),s.scale!==void 0&&h.scale.fromArray(s.scale);return i.associations.has(h)||i.associations.set(h,{}),i.associations.get(h).nodes=e,h}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],i=this,s=new Sl;n.name&&(s.name=i.createUniqueName(n.name)),wl(s,n),n.extensions&&td(t,s,n);const o=n.nodes||[],a=[];for(let l=0,u=o.length;l<u;l++)a.push(i.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let h=0,p=l.length;h<p;h++)s.add(l[h]);const u=h=>{const p=new Map;for(const[g,y]of i.associations)(g instanceof Jr||g instanceof In)&&p.set(g,y);return h.traverse(g=>{const y=i.associations.get(g);y!=null&&p.set(g,y)}),p};return i.associations=u(s),s})}_createAnimationTracks(e,t,n,i,s){const o=[],a=e.name?e.name:e.uuid,l=[];Pc[s.path]===Pc.weights?e.traverse(function(g){g.morphTargetInfluences&&l.push(g.name?g.name:g.uuid)}):l.push(a);let u;switch(Pc[s.path]){case Pc.weights:u=Od;break;case Pc.rotation:u=Kc;break;case Pc.position:case Pc.scale:u=Ud;break;default:switch(n.itemSize){case 1:u=Od;break;case 2:case 3:default:u=Ud;break}break}const h=i.interpolation!==void 0?b6[i.interpolation]:Xc,p=this._getArrayFromAccessor(n);for(let g=0,y=l.length;g<y;g++){const _=new u(l[g]+"."+Pc[s.path],t.array,p,h);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(_),o.push(_)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=Gb(t.constructor),i=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)i[s]=t[s]*n;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const i=this instanceof Kc?w6:ZI;return new i(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function P6(r,e,t){const n=e.attributes,i=new as;if(n.POSITION!==void 0){const a=t.json.accessors[n.POSITION],l=a.min,u=a.max;if(l!==void 0&&u!==void 0){if(i.set(new q(l[0],l[1],l[2]),new q(u[0],u[1],u[2])),a.normalized){const h=Gb(qf[a.componentType]);i.min.multiplyScalar(h),i.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new q,l=new q;for(let u=0,h=s.length;u<h;u++){const p=s[u];if(p.POSITION!==void 0){const g=t.json.accessors[p.POSITION],y=g.min,_=g.max;if(y!==void 0&&_!==void 0){if(l.setX(Math.max(Math.abs(y[0]),Math.abs(_[0]))),l.setY(Math.max(Math.abs(y[1]),Math.abs(_[1]))),l.setZ(Math.max(Math.abs(y[2]),Math.abs(_[2]))),g.normalized){const A=Gb(qf[g.componentType]);l.multiplyScalar(A)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}r.boundingBox=i;const o=new Is;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,r.boundingSphere=o}function tT(r,e,t){const n=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){r.setAttribute(a,l)})}for(const o in n){const a=Hb[o]||o.toLowerCase();a in r.attributes||i.push(s(n[o],a))}if(e.indices!==void 0&&!r.index){const o=t.getDependency("accessor",e.indices).then(function(a){r.setIndex(a)});i.push(o)}return wl(r,e),P6(r,e,t),Promise.all(i).then(function(){return e.targets!==void 0?S6(r,e.targets,t):r})}class I6 extends rn{constructor(e,t,n,i){super();const s=[],o=[],a=[],l=new q,u=new Jt;u.makeRotationFromEuler(n),u.setPosition(t);const h=new Jt;h.copy(u).invert(),p(),this.setAttribute("position",new Rt(s,3)),this.setAttribute("normal",new Rt(o,3)),this.setAttribute("uv",new Rt(a,2));function p(){let A,b=[];const w=new q,C=new q;if(e.geometry.isGeometry===!0){console.error("THREE.DecalGeometry no longer supports THREE.Geometry. Use BufferGeometry instead.");return}const E=e.geometry,R=E.attributes.position,L=E.attributes.normal;if(E.index!==null){const D=E.index;for(A=0;A<D.count;A++)w.fromBufferAttribute(R,D.getX(A)),C.fromBufferAttribute(L,D.getX(A)),g(b,w,C)}else for(A=0;A<R.count;A++)w.fromBufferAttribute(R,A),C.fromBufferAttribute(L,A),g(b,w,C);for(b=y(b,l.set(1,0,0)),b=y(b,l.set(-1,0,0)),b=y(b,l.set(0,1,0)),b=y(b,l.set(0,-1,0)),b=y(b,l.set(0,0,1)),b=y(b,l.set(0,0,-1)),A=0;A<b.length;A++){const D=b[A];a.push(.5+D.position.x/i.x,.5+D.position.y/i.y),D.position.applyMatrix4(u),s.push(D.position.x,D.position.y,D.position.z),o.push(D.normal.x,D.normal.y,D.normal.z)}}function g(A,b,w){b.applyMatrix4(e.matrixWorld),b.applyMatrix4(h),w.transformDirection(e.matrixWorld),A.push(new nT(b.clone(),w.clone()))}function y(A,b){const w=[],C=.5*Math.abs(i.dot(b));for(let E=0;E<A.length;E+=3){let R,L,D,j=0,O,I,U,V;const ee=A[E+0].position.dot(b)-C,te=A[E+1].position.dot(b)-C,ne=A[E+2].position.dot(b)-C;switch(R=ee>0,L=te>0,D=ne>0,j=(R?1:0)+(L?1:0)+(D?1:0),j){case 0:{w.push(A[E]),w.push(A[E+1]),w.push(A[E+2]);break}case 1:{if(R&&(O=A[E+1],I=A[E+2],U=_(A[E],O,b,C),V=_(A[E],I,b,C)),L){O=A[E],I=A[E+2],U=_(A[E+1],O,b,C),V=_(A[E+1],I,b,C),w.push(U),w.push(I.clone()),w.push(O.clone()),w.push(I.clone()),w.push(U.clone()),w.push(V);break}D&&(O=A[E],I=A[E+1],U=_(A[E+2],O,b,C),V=_(A[E+2],I,b,C)),w.push(O.clone()),w.push(I.clone()),w.push(U),w.push(V),w.push(U.clone()),w.push(I.clone());break}case 2:{R||(O=A[E].clone(),I=_(O,A[E+1],b,C),U=_(O,A[E+2],b,C),w.push(O),w.push(I),w.push(U)),L||(O=A[E+1].clone(),I=_(O,A[E+2],b,C),U=_(O,A[E],b,C),w.push(O),w.push(I),w.push(U)),D||(O=A[E+2].clone(),I=_(O,A[E],b,C),U=_(O,A[E+1],b,C),w.push(O),w.push(I),w.push(U));break}}}return w}function _(A,b,w,C){const E=A.position.dot(w)-C,R=b.position.dot(w)-C,L=E/(E-R);return new nT(new q(A.position.x+L*(b.position.x-A.position.x),A.position.y+L*(b.position.y-A.position.y),A.position.z+L*(b.position.z-A.position.z)),new q(A.normal.x+L*(b.normal.x-A.normal.x),A.normal.y+L*(b.normal.y-A.normal.y),A.normal.z+L*(b.normal.z-A.normal.z)))}}}class nT{constructor(e,t){this.position=e,this.normal=t}clone(){return new this.constructor(this.position.clone(),this.normal.clone())}}class L6 extends c1{constructor(e){super(e),this.type=ci}parse(e){const o=function(O,I){switch(O){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(I||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(I||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(I||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(I||""))}},p=function(O,I,U){I=I||1024;let ee=O.pos,te=-1,ne=0,le="",de=String.fromCharCode.apply(null,new Uint16Array(O.subarray(ee,ee+128)));for(;0>(te=de.indexOf(`
`))&&ne<I&&ee<O.byteLength;)le+=de,ne+=de.length,ee+=128,de+=String.fromCharCode.apply(null,new Uint16Array(O.subarray(ee,ee+128)));return-1<te?(O.pos+=ne+te+1,le+de.slice(0,te)):!1},g=function(O){const I=/^#\?(\S+)/,U=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,V=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,ee=/^\s*FORMAT=(\S+)\s*$/,te=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,ne={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let le,de;for((O.pos>=O.byteLength||!(le=p(O)))&&o(1,"no header found"),(de=le.match(I))||o(3,"bad initial token"),ne.valid|=1,ne.programtype=de[1],ne.string+=le+`
`;le=p(O),le!==!1;){if(ne.string+=le+`
`,le.charAt(0)==="#"){ne.comments+=le+`
`;continue}if((de=le.match(U))&&(ne.gamma=parseFloat(de[1])),(de=le.match(V))&&(ne.exposure=parseFloat(de[1])),(de=le.match(ee))&&(ne.valid|=2,ne.format=de[1]),(de=le.match(te))&&(ne.valid|=4,ne.height=parseInt(de[1],10),ne.width=parseInt(de[2],10)),ne.valid&2&&ne.valid&4)break}return ne.valid&2||o(3,"missing format specifier"),ne.valid&4||o(3,"missing image size specifier"),ne},y=function(O,I,U){const V=I;if(V<8||V>32767||O[0]!==2||O[1]!==2||O[2]&128)return new Uint8Array(O);V!==(O[2]<<8|O[3])&&o(3,"wrong scanline width");const ee=new Uint8Array(4*I*U);ee.length||o(4,"unable to allocate buffer space");let te=0,ne=0;const le=4*V,de=new Uint8Array(4),ie=new Uint8Array(le);let J=U;for(;J>0&&ne<O.byteLength;){ne+4>O.byteLength&&o(1),de[0]=O[ne++],de[1]=O[ne++],de[2]=O[ne++],de[3]=O[ne++],(de[0]!=2||de[1]!=2||(de[2]<<8|de[3])!=V)&&o(3,"bad rgbe scanline format");let Q=0,H;for(;Q<le&&ne<O.byteLength;){H=O[ne++];const Z=H>128;if(Z&&(H-=128),(H===0||Q+H>le)&&o(3,"bad scanline data"),Z){const ye=O[ne++];for(let be=0;be<H;be++)ie[Q++]=ye}else ie.set(O.subarray(ne,ne+H),Q),Q+=H,ne+=H}const X=V;for(let Z=0;Z<X;Z++){let ye=0;ee[te]=ie[Z+ye],ye+=V,ee[te+1]=ie[Z+ye],ye+=V,ee[te+2]=ie[Z+ye],ye+=V,ee[te+3]=ie[Z+ye],te+=4}J--}return ee},_=function(O,I,U,V){const ee=O[I+3],te=Math.pow(2,ee-128)/255;U[V+0]=O[I+0]*te,U[V+1]=O[I+1]*te,U[V+2]=O[I+2]*te,U[V+3]=1},A=function(O,I,U,V){const ee=O[I+3],te=Math.pow(2,ee-128)/255;U[V+0]=vd.toHalfFloat(Math.min(O[I+0]*te,65504)),U[V+1]=vd.toHalfFloat(Math.min(O[I+1]*te,65504)),U[V+2]=vd.toHalfFloat(Math.min(O[I+2]*te,65504)),U[V+3]=vd.toHalfFloat(1)},b=new Uint8Array(e);b.pos=0;const w=g(b),C=w.width,E=w.height,R=y(b.subarray(b.pos),C,E);let L,D,j;switch(this.type){case ei:j=R.length/4;const O=new Float32Array(j*4);for(let U=0;U<j;U++)_(R,U*4,O,U*4);L=O,D=ei;break;case ci:j=R.length/4;const I=new Uint16Array(j*4);for(let U=0;U<j;U++)A(R,U*4,I,U*4);L=I,D=ci;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:C,height:E,data:L,header:w.string,gamma:w.gamma,exposure:w.exposure,type:D}}setDataType(e){return this.type=e,this}load(e,t,n,i){function s(o,a){switch(o.type){case ei:case ci:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=Pn,o.magFilter=Pn,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,n,i)}}const Am=yp>=152;class N6 extends c1{constructor(e){super(e),this.type=ci}parse(e){const I=Math.pow(2.7182818,2.2);function U(G,k){for(var K=0,re=0;re<65536;++re)(re==0||G[re>>3]&1<<(re&7))&&(k[K++]=re);for(var $=K-1;K<65536;)k[K++]=0;return $}function V(G){for(var k=0;k<16384;k++)G[k]={},G[k].len=0,G[k].lit=0,G[k].p=null}const ee={l:0,c:0,lc:0};function te(G,k,K,re,$){for(;K<G;)k=k<<8|bt(re,$),K+=8;K-=G,ee.l=k>>K&(1<<G)-1,ee.c=k,ee.lc=K}const ne=new Array(59);function le(G){for(var k=0;k<=58;++k)ne[k]=0;for(var k=0;k<65537;++k)ne[G[k]]+=1;for(var K=0,k=58;k>0;--k){var re=K+ne[k]>>1;ne[k]=K,K=re}for(var k=0;k<65537;++k){var $=G[k];$>0&&(G[k]=$|ne[$]++<<6)}}function de(G,k,K,re,$,ae,Te){for(var Ne=K,He=0,Ge=0;$<=ae;$++){if(Ne.value-K.value>re)return!1;te(6,He,Ge,G,Ne);var Je=ee.l;if(He=ee.c,Ge=ee.lc,Te[$]=Je,Je==63){if(Ne.value-K.value>re)throw"Something wrong with hufUnpackEncTable";te(8,He,Ge,G,Ne);var Pe=ee.l+6;if(He=ee.c,Ge=ee.lc,$+Pe>ae+1)throw"Something wrong with hufUnpackEncTable";for(;Pe--;)Te[$++]=0;$--}else if(Je>=59){var Pe=Je-59+2;if($+Pe>ae+1)throw"Something wrong with hufUnpackEncTable";for(;Pe--;)Te[$++]=0;$--}}le(Te)}function ie(G){return G&63}function J(G){return G>>6}function Q(G,k,K,re){for(;k<=K;k++){var $=J(G[k]),ae=ie(G[k]);if($>>ae)throw"Invalid table entry";if(ae>14){var Te=re[$>>ae-14];if(Te.len)throw"Invalid table entry";if(Te.lit++,Te.p){var Ne=Te.p;Te.p=new Array(Te.lit);for(var He=0;He<Te.lit-1;++He)Te.p[He]=Ne[He]}else Te.p=new Array(1);Te.p[Te.lit-1]=k}else if(ae)for(var Ge=0,He=1<<14-ae;He>0;He--){var Te=re[($<<14-ae)+Ge];if(Te.len||Te.p)throw"Invalid table entry";Te.len=ae,Te.lit=k,Ge++}}return!0}const H={c:0,lc:0};function X(G,k,K,re){G=G<<8|bt(K,re),k+=8,H.c=G,H.lc=k}const Z={c:0,lc:0};function ye(G,k,K,re,$,ae,Te,Ne,He,Ge){if(G==k){re<8&&(X(K,re,$,Te),K=H.c,re=H.lc),re-=8;var Je=K>>re,Je=new Uint8Array([Je])[0];if(He.value+Je>Ge)return!1;for(var Pe=Ne[He.value-1];Je-- >0;)Ne[He.value++]=Pe}else if(He.value<Ge)Ne[He.value++]=G;else return!1;Z.c=K,Z.lc=re}function be(G){return G&65535}function Le(G){var k=be(G);return k>32767?k-65536:k}const pe={a:0,b:0};function Ae(G,k){var K=Le(G),re=Le(k),$=re,ae=K+($&1)+($>>1),Te=ae,Ne=ae-$;pe.a=Te,pe.b=Ne}function je(G,k){var K=be(G),re=be(k),$=K-(re>>1)&65535,ae=re+$-32768&65535;pe.a=ae,pe.b=$}function ft(G,k,K,re,$,ae,Te){for(var Ne=Te<16384,He=K>$?$:K,Ge=1,Je;Ge<=He;)Ge<<=1;for(Ge>>=1,Je=Ge,Ge>>=1;Ge>=1;){for(var Pe=0,_t=Pe+ae*($-Je),at=ae*Ge,ut=ae*Je,Lt=re*Ge,Ht=re*Je,Ot,gt,kt,Pt;Pe<=_t;Pe+=ut){for(var jt=Pe,Fn=Pe+re*(K-Je);jt<=Fn;jt+=Ht){var Yt=jt+Lt,On=jt+at,yn=On+Lt;Ne?(Ae(G[jt+k],G[On+k]),Ot=pe.a,kt=pe.b,Ae(G[Yt+k],G[yn+k]),gt=pe.a,Pt=pe.b,Ae(Ot,gt),G[jt+k]=pe.a,G[Yt+k]=pe.b,Ae(kt,Pt),G[On+k]=pe.a,G[yn+k]=pe.b):(je(G[jt+k],G[On+k]),Ot=pe.a,kt=pe.b,je(G[Yt+k],G[yn+k]),gt=pe.a,Pt=pe.b,je(Ot,gt),G[jt+k]=pe.a,G[Yt+k]=pe.b,je(kt,Pt),G[On+k]=pe.a,G[yn+k]=pe.b)}if(K&Ge){var On=jt+at;Ne?Ae(G[jt+k],G[On+k]):je(G[jt+k],G[On+k]),Ot=pe.a,G[On+k]=pe.b,G[jt+k]=Ot}}if($&Ge)for(var jt=Pe,Fn=Pe+re*(K-Je);jt<=Fn;jt+=Ht){var Yt=jt+Lt;Ne?Ae(G[jt+k],G[Yt+k]):je(G[jt+k],G[Yt+k]),Ot=pe.a,G[Yt+k]=pe.b,G[jt+k]=Ot}Je=Ge,Ge>>=1}return Pe}function St(G,k,K,re,$,ae,Te,Ne,He,Ge){for(var Je=0,Pe=0,_t=Ne,at=Math.trunc($.value+(ae+7)/8);$.value<at;)for(X(Je,Pe,K,$),Je=H.c,Pe=H.lc;Pe>=14;){var ut=Je>>Pe-14&16383,Lt=k[ut];if(Lt.len)Pe-=Lt.len,ye(Lt.lit,Te,Je,Pe,K,re,$,He,Ge,_t),Je=Z.c,Pe=Z.lc;else{if(!Lt.p)throw"hufDecode issues";var Ht;for(Ht=0;Ht<Lt.lit;Ht++){for(var Ot=ie(G[Lt.p[Ht]]);Pe<Ot&&$.value<at;)X(Je,Pe,K,$),Je=H.c,Pe=H.lc;if(Pe>=Ot&&J(G[Lt.p[Ht]])==(Je>>Pe-Ot&(1<<Ot)-1)){Pe-=Ot,ye(Lt.p[Ht],Te,Je,Pe,K,re,$,He,Ge,_t),Je=Z.c,Pe=Z.lc;break}}if(Ht==Lt.lit)throw"hufDecode issues"}}var gt=8-ae&7;for(Je>>=gt,Pe-=gt;Pe>0;){var Lt=k[Je<<14-Pe&16383];if(Lt.len)Pe-=Lt.len,ye(Lt.lit,Te,Je,Pe,K,re,$,He,Ge,_t),Je=Z.c,Pe=Z.lc;else throw"hufDecode issues"}return!0}function Xe(G,k,K,re,$,ae){var Te={value:0},Ne=K.value,He=vt(k,K),Ge=vt(k,K);K.value+=4;var Je=vt(k,K);if(K.value+=4,He<0||He>=65537||Ge<0||Ge>=65537)throw"Something wrong with HUF_ENCSIZE";var Pe=new Array(65537),_t=new Array(16384);V(_t);var at=re-(K.value-Ne);if(de(G,k,K,at,He,Ge,Pe),Je>8*(re-(K.value-Ne)))throw"Something wrong with hufUncompress";Q(Pe,He,Ge,_t),St(Pe,_t,G,k,K,Je,Ge,ae,$,Te)}function ce(G,k,K){for(var re=0;re<K;++re)k[re]=G[k[re]]}function ge(G){for(var k=1;k<G.length;k++){var K=G[k-1]+G[k]-128;G[k]=K}}function we(G,k){for(var K=0,re=Math.floor((G.length+1)/2),$=0,ae=G.length-1;!($>ae||(k[$++]=G[K++],$>ae));)k[$++]=G[re++]}function De(G){for(var k=G.byteLength,K=new Array,re=0,$=new DataView(G);k>0;){var ae=$.getInt8(re++);if(ae<0){var Te=-ae;k-=Te+1;for(var Ne=0;Ne<Te;Ne++)K.push($.getUint8(re++))}else{var Te=ae;k-=2;for(var He=$.getUint8(re++),Ne=0;Ne<Te+1;Ne++)K.push(He)}}return K}function Fe(G,k,K,re,$,ae){var Yt=new DataView(ae.buffer),Te=K[G.idx[0]].width,Ne=K[G.idx[0]].height,He=3,Ge=Math.floor(Te/8),Je=Math.ceil(Te/8),Pe=Math.ceil(Ne/8),_t=Te-(Je-1)*8,at=Ne-(Pe-1)*8,ut={value:0},Lt=new Array(He),Ht=new Array(He),Ot=new Array(He),gt=new Array(He),kt=new Array(He);for(let Xt=0;Xt<He;++Xt)kt[Xt]=k[G.idx[Xt]],Lt[Xt]=Xt<1?0:Lt[Xt-1]+Je*Pe,Ht[Xt]=new Float32Array(64),Ot[Xt]=new Uint16Array(64),gt[Xt]=new Uint16Array(Je*64);for(let Xt=0;Xt<Pe;++Xt){var Pt=8;Xt==Pe-1&&(Pt=at);var jt=8;for(let Nn=0;Nn<Je;++Nn){Nn==Je-1&&(jt=_t);for(let mn=0;mn<He;++mn)Ot[mn].fill(0),Ot[mn][0]=$[Lt[mn]++],Qe(ut,re,Ot[mn]),st(Ot[mn],Ht[mn]),lt(Ht[mn]);Et(Ht);for(let mn=0;mn<He;++mn)Ut(Ht[mn],gt[mn],Nn*64)}let nr=0;for(let Nn=0;Nn<He;++Nn){const mn=K[G.idx[Nn]].type;for(let Kn=8*Xt;Kn<8*Xt+Pt;++Kn){nr=kt[Nn][Kn];for(let Ls=0;Ls<Ge;++Ls){const Mr=Ls*64+(Kn&7)*8;Yt.setUint16(nr+0*mn,gt[Nn][Mr+0],!0),Yt.setUint16(nr+2*mn,gt[Nn][Mr+1],!0),Yt.setUint16(nr+4*mn,gt[Nn][Mr+2],!0),Yt.setUint16(nr+6*mn,gt[Nn][Mr+3],!0),Yt.setUint16(nr+8*mn,gt[Nn][Mr+4],!0),Yt.setUint16(nr+10*mn,gt[Nn][Mr+5],!0),Yt.setUint16(nr+12*mn,gt[Nn][Mr+6],!0),Yt.setUint16(nr+14*mn,gt[Nn][Mr+7],!0),nr+=16*mn}}if(Ge!=Je)for(let Kn=8*Xt;Kn<8*Xt+Pt;++Kn){const Ls=kt[Nn][Kn]+8*Ge*2*mn,Mr=Ge*64+(Kn&7)*8;for(let Zs=0;Zs<jt;++Zs)Yt.setUint16(Ls+Zs*2*mn,gt[Nn][Mr+Zs],!0)}}}for(var Fn=new Uint16Array(Te),Yt=new DataView(ae.buffer),On=0;On<He;++On){K[G.idx[On]].decoded=!0;var yn=K[G.idx[On]].type;if(K[On].type==2)for(var Ln=0;Ln<Ne;++Ln){const Xt=kt[On][Ln];for(var Xn=0;Xn<Te;++Xn)Fn[Xn]=Yt.getUint16(Xt+Xn*2*yn,!0);for(var Xn=0;Xn<Te;++Xn)Yt.setFloat32(Xt+Xn*2*yn,Se(Fn[Xn]),!0)}}}function Qe(G,k,K){for(var re,$=1;$<64;)re=k[G.value],re==65280?$=64:re>>8==255?$+=re&255:(K[$]=re,$++),G.value++}function st(G,k){k[0]=Se(G[0]),k[1]=Se(G[1]),k[2]=Se(G[5]),k[3]=Se(G[6]),k[4]=Se(G[14]),k[5]=Se(G[15]),k[6]=Se(G[27]),k[7]=Se(G[28]),k[8]=Se(G[2]),k[9]=Se(G[4]),k[10]=Se(G[7]),k[11]=Se(G[13]),k[12]=Se(G[16]),k[13]=Se(G[26]),k[14]=Se(G[29]),k[15]=Se(G[42]),k[16]=Se(G[3]),k[17]=Se(G[8]),k[18]=Se(G[12]),k[19]=Se(G[17]),k[20]=Se(G[25]),k[21]=Se(G[30]),k[22]=Se(G[41]),k[23]=Se(G[43]),k[24]=Se(G[9]),k[25]=Se(G[11]),k[26]=Se(G[18]),k[27]=Se(G[24]),k[28]=Se(G[31]),k[29]=Se(G[40]),k[30]=Se(G[44]),k[31]=Se(G[53]),k[32]=Se(G[10]),k[33]=Se(G[19]),k[34]=Se(G[23]),k[35]=Se(G[32]),k[36]=Se(G[39]),k[37]=Se(G[45]),k[38]=Se(G[52]),k[39]=Se(G[54]),k[40]=Se(G[20]),k[41]=Se(G[22]),k[42]=Se(G[33]),k[43]=Se(G[38]),k[44]=Se(G[46]),k[45]=Se(G[51]),k[46]=Se(G[55]),k[47]=Se(G[60]),k[48]=Se(G[21]),k[49]=Se(G[34]),k[50]=Se(G[37]),k[51]=Se(G[47]),k[52]=Se(G[50]),k[53]=Se(G[56]),k[54]=Se(G[59]),k[55]=Se(G[61]),k[56]=Se(G[35]),k[57]=Se(G[36]),k[58]=Se(G[48]),k[59]=Se(G[49]),k[60]=Se(G[57]),k[61]=Se(G[58]),k[62]=Se(G[62]),k[63]=Se(G[63])}function lt(G){const k=.5*Math.cos(.7853975),K=.5*Math.cos(3.14159/16),re=.5*Math.cos(3.14159/8),$=.5*Math.cos(3*3.14159/16),ae=.5*Math.cos(5*3.14159/16),Te=.5*Math.cos(3*3.14159/8),Ne=.5*Math.cos(7*3.14159/16);for(var He=new Array(4),Ge=new Array(4),Je=new Array(4),Pe=new Array(4),_t=0;_t<8;++_t){var at=_t*8;He[0]=re*G[at+2],He[1]=Te*G[at+2],He[2]=re*G[at+6],He[3]=Te*G[at+6],Ge[0]=K*G[at+1]+$*G[at+3]+ae*G[at+5]+Ne*G[at+7],Ge[1]=$*G[at+1]-Ne*G[at+3]-K*G[at+5]-ae*G[at+7],Ge[2]=ae*G[at+1]-K*G[at+3]+Ne*G[at+5]+$*G[at+7],Ge[3]=Ne*G[at+1]-ae*G[at+3]+$*G[at+5]-K*G[at+7],Je[0]=k*(G[at+0]+G[at+4]),Je[3]=k*(G[at+0]-G[at+4]),Je[1]=He[0]+He[3],Je[2]=He[1]-He[2],Pe[0]=Je[0]+Je[1],Pe[1]=Je[3]+Je[2],Pe[2]=Je[3]-Je[2],Pe[3]=Je[0]-Je[1],G[at+0]=Pe[0]+Ge[0],G[at+1]=Pe[1]+Ge[1],G[at+2]=Pe[2]+Ge[2],G[at+3]=Pe[3]+Ge[3],G[at+4]=Pe[3]-Ge[3],G[at+5]=Pe[2]-Ge[2],G[at+6]=Pe[1]-Ge[1],G[at+7]=Pe[0]-Ge[0]}for(var ut=0;ut<8;++ut)He[0]=re*G[16+ut],He[1]=Te*G[16+ut],He[2]=re*G[48+ut],He[3]=Te*G[48+ut],Ge[0]=K*G[8+ut]+$*G[24+ut]+ae*G[40+ut]+Ne*G[56+ut],Ge[1]=$*G[8+ut]-Ne*G[24+ut]-K*G[40+ut]-ae*G[56+ut],Ge[2]=ae*G[8+ut]-K*G[24+ut]+Ne*G[40+ut]+$*G[56+ut],Ge[3]=Ne*G[8+ut]-ae*G[24+ut]+$*G[40+ut]-K*G[56+ut],Je[0]=k*(G[ut]+G[32+ut]),Je[3]=k*(G[ut]-G[32+ut]),Je[1]=He[0]+He[3],Je[2]=He[1]-He[2],Pe[0]=Je[0]+Je[1],Pe[1]=Je[3]+Je[2],Pe[2]=Je[3]-Je[2],Pe[3]=Je[0]-Je[1],G[0+ut]=Pe[0]+Ge[0],G[8+ut]=Pe[1]+Ge[1],G[16+ut]=Pe[2]+Ge[2],G[24+ut]=Pe[3]+Ge[3],G[32+ut]=Pe[3]-Ge[3],G[40+ut]=Pe[2]-Ge[2],G[48+ut]=Pe[1]-Ge[1],G[56+ut]=Pe[0]-Ge[0]}function Et(G){for(var k=0;k<64;++k){var K=G[0][k],re=G[1][k],$=G[2][k];G[0][k]=K+1.5747*$,G[1][k]=K-.1873*re-.4682*$,G[2][k]=K+1.8556*re}}function Ut(G,k,K){for(var re=0;re<64;++re)k[K+re]=vd.toHalfFloat(dn(G[re]))}function dn(G){return G<=1?Math.sign(G)*Math.pow(Math.abs(G),2.2):Math.sign(G)*Math.pow(I,Math.abs(G)-1)}function se(G){return new DataView(G.array.buffer,G.offset.value,G.size)}function Y(G){var k=G.viewer.buffer.slice(G.offset.value,G.offset.value+G.size),K=new Uint8Array(De(k)),re=new Uint8Array(K.length);return ge(K),we(K,re),new DataView(re.buffer)}function Ce(G){var k=G.array.slice(G.offset.value,G.offset.value+G.size),K=Lv(k),re=new Uint8Array(K.length);return ge(K),we(K,re),new DataView(re.buffer)}function et(G){for(var k=G.viewer,K={value:G.offset.value},re=new Uint16Array(G.width*G.scanlineBlockSize*(G.channels*G.type)),$=new Uint8Array(8192),ae=0,Te=new Array(G.channels),Ne=0;Ne<G.channels;Ne++)Te[Ne]={},Te[Ne].start=ae,Te[Ne].end=Te[Ne].start,Te[Ne].nx=G.width,Te[Ne].ny=G.lines,Te[Ne].size=G.type,ae+=Te[Ne].nx*Te[Ne].ny*Te[Ne].size;var He=Me(k,K),Ge=Me(k,K);if(Ge>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(He<=Ge)for(var Ne=0;Ne<Ge-He+1;Ne++)$[Ne+He]=he(k,K);var Je=new Uint16Array(65536),Pe=U($,Je),_t=vt(k,K);Xe(G.array,k,K,_t,re,ae);for(var Ne=0;Ne<G.channels;++Ne)for(var at=Te[Ne],ut=0;ut<Te[Ne].size;++ut)ft(re,at.start+ut,at.nx,at.size,at.ny,at.nx*at.size,Pe);ce(Je,re,ae);for(var Lt=0,Ht=new Uint8Array(re.buffer.byteLength),Ot=0;Ot<G.lines;Ot++)for(var gt=0;gt<G.channels;gt++){var at=Te[gt],kt=at.nx*at.size,Pt=new Uint8Array(re.buffer,at.end*2,kt*2);Ht.set(Pt,Lt),Lt+=kt*2,at.end+=kt}return new DataView(Ht.buffer)}function Ke(G){var k=G.array.slice(G.offset.value,G.offset.value+G.size),K=Lv(k);const re=G.lines*G.channels*G.width,$=G.type==1?new Uint16Array(re):new Uint32Array(re);let ae=0,Te=0;const Ne=new Array(4);for(let He=0;He<G.lines;He++)for(let Ge=0;Ge<G.channels;Ge++){let Je=0;switch(G.type){case 1:Ne[0]=ae,Ne[1]=Ne[0]+G.width,ae=Ne[1]+G.width;for(let Pe=0;Pe<G.width;++Pe){const _t=K[Ne[0]++]<<8|K[Ne[1]++];Je+=_t,$[Te]=Je,Te++}break;case 2:Ne[0]=ae,Ne[1]=Ne[0]+G.width,Ne[2]=Ne[1]+G.width,ae=Ne[2]+G.width;for(let Pe=0;Pe<G.width;++Pe){const _t=K[Ne[0]++]<<24|K[Ne[1]++]<<16|K[Ne[2]++]<<8;Je+=_t,$[Te]=Je,Te++}break}}return new DataView($.buffer)}function qe(G){var k=G.viewer,K={value:G.offset.value},re=new Uint8Array(G.width*G.lines*(G.channels*G.type*2)),$={version:Ue(k,K),unknownUncompressedSize:Ue(k,K),unknownCompressedSize:Ue(k,K),acCompressedSize:Ue(k,K),dcCompressedSize:Ue(k,K),rleCompressedSize:Ue(k,K),rleUncompressedSize:Ue(k,K),rleRawSize:Ue(k,K),totalAcUncompressedCount:Ue(k,K),totalDcUncompressedCount:Ue(k,K),acCompression:Ue(k,K)};if($.version<2)throw"EXRLoader.parse: "+Er.compression+" version "+$.version+" is unsupported";for(var ae=new Array,Te=Me(k,K)-2;Te>0;){var Ne=xt(k.buffer,K),He=he(k,K),Ge=He>>2&3,Je=(He>>4)-1,Pe=new Int8Array([Je])[0],_t=he(k,K);ae.push({name:Ne,index:Pe,type:_t,compression:Ge}),Te-=Ne.length+3}for(var at=Er.channels,ut=new Array(G.channels),Lt=0;Lt<G.channels;++Lt){var Ht=ut[Lt]={},Ot=at[Lt];Ht.name=Ot.name,Ht.compression=0,Ht.decoded=!1,Ht.type=Ot.pixelType,Ht.pLinear=Ot.pLinear,Ht.width=G.width,Ht.height=G.lines}for(var gt={idx:new Array(3)},kt=0;kt<G.channels;++kt)for(var Ht=ut[kt],Lt=0;Lt<ae.length;++Lt){var Pt=ae[Lt];Ht.name==Pt.name&&(Ht.compression=Pt.compression,Pt.index>=0&&(gt.idx[Pt.index]=kt),Ht.offset=kt)}if($.acCompressedSize>0)switch($.acCompression){case 0:var Yt=new Uint16Array($.totalAcUncompressedCount);Xe(G.array,k,K,$.acCompressedSize,Yt,$.totalAcUncompressedCount);break;case 1:var jt=G.array.slice(K.value,K.value+$.totalAcUncompressedCount),Fn=Lv(jt),Yt=new Uint16Array(Fn.buffer);K.value+=$.totalAcUncompressedCount;break}if($.dcCompressedSize>0){var On={array:G.array,offset:K,size:$.dcCompressedSize},yn=new Uint16Array(Ce(On).buffer);K.value+=$.dcCompressedSize}if($.rleRawSize>0){var jt=G.array.slice(K.value,K.value+$.rleCompressedSize),Fn=Lv(jt),Ln=De(Fn.buffer);K.value+=$.rleCompressedSize}for(var Xn=0,Xt=new Array(ut.length),Lt=0;Lt<Xt.length;++Lt)Xt[Lt]=new Array;for(var nr=0;nr<G.lines;++nr)for(var Nn=0;Nn<ut.length;++Nn)Xt[Nn].push(Xn),Xn+=ut[Nn].width*G.type*2;Fe(gt,Xt,ut,Yt,yn,re);for(var Lt=0;Lt<ut.length;++Lt){var Ht=ut[Lt];if(!Ht.decoded)switch(Ht.compression){case 2:for(var mn=0,Kn=0,nr=0;nr<G.lines;++nr){for(var Ls=Xt[Lt][mn],Mr=0;Mr<Ht.width;++Mr){for(var Zs=0;Zs<2*Ht.type;++Zs)re[Ls++]=Ln[Kn+Zs*Ht.width*Ht.height];Kn++}mn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(re.buffer)}function xt(G,k){for(var K=new Uint8Array(G),re=0;K[k.value+re]!=0;)re+=1;var $=new TextDecoder().decode(K.slice(k.value,k.value+re));return k.value=k.value+re+1,$}function tt(G,k,K){var re=new TextDecoder().decode(new Uint8Array(G).slice(k.value,k.value+K));return k.value=k.value+K,re}function Be(G,k){var K=Ct(G,k),re=vt(G,k);return[K,re]}function Ft(G,k){var K=vt(G,k),re=vt(G,k);return[K,re]}function Ct(G,k){var K=G.getInt32(k.value,!0);return k.value=k.value+4,K}function vt(G,k){var K=G.getUint32(k.value,!0);return k.value=k.value+4,K}function bt(G,k){var K=G[k.value];return k.value=k.value+1,K}function he(G,k){var K=G.getUint8(k.value);return k.value=k.value+1,K}const Ue=function(G,k){let K;return"getBigInt64"in DataView.prototype?K=Number(G.getBigInt64(k.value,!0)):K=G.getUint32(k.value+4,!0)+Number(G.getUint32(k.value,!0)<<32),k.value+=8,K};function nt(G,k){var K=G.getFloat32(k.value,!0);return k.value+=4,K}function fe(G,k){return vd.toHalfFloat(nt(G,k))}function Se(G){var k=(G&31744)>>10,K=G&1023;return(G>>15?-1:1)*(k?k===31?K?NaN:1/0:Math.pow(2,k-15)*(1+K/1024):6103515625e-14*(K/1024))}function Me(G,k){var K=G.getUint16(k.value,!0);return k.value+=2,K}function Ze(G,k){return Se(Me(G,k))}function pt(G,k,K,re){for(var $=K.value,ae=[];K.value<$+re-1;){var Te=xt(k,K),Ne=Ct(G,K),He=he(G,K);K.value+=3;var Ge=Ct(G,K),Je=Ct(G,K);ae.push({name:Te,pixelType:Ne,pLinear:He,xSampling:Ge,ySampling:Je})}return K.value+=1,ae}function en(G,k){var K=nt(G,k),re=nt(G,k),$=nt(G,k),ae=nt(G,k),Te=nt(G,k),Ne=nt(G,k),He=nt(G,k),Ge=nt(G,k);return{redX:K,redY:re,greenX:$,greenY:ae,blueX:Te,blueY:Ne,whiteX:He,whiteY:Ge}}function an(G,k){var K=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],re=he(G,k);return K[re]}function vn(G,k){var K=vt(G,k),re=vt(G,k),$=vt(G,k),ae=vt(G,k);return{xMin:K,yMin:re,xMax:$,yMax:ae}}function _r(G,k){var K=["INCREASING_Y"],re=he(G,k);return K[re]}function hn(G,k){var K=nt(G,k),re=nt(G,k);return[K,re]}function cr(G,k){var K=nt(G,k),re=nt(G,k),$=nt(G,k);return[K,re,$]}function zn(G,k,K,re,$){if(re==="string"||re==="stringvector"||re==="iccProfile")return tt(k,K,$);if(re==="chlist")return pt(G,k,K,$);if(re==="chromaticities")return en(G,K);if(re==="compression")return an(G,K);if(re==="box2i")return vn(G,K);if(re==="lineOrder")return _r(G,K);if(re==="float")return nt(G,K);if(re==="v2f")return hn(G,K);if(re==="v3f")return cr(G,K);if(re==="int")return Ct(G,K);if(re==="rational")return Be(G,K);if(re==="timecode")return Ft(G,K);if(re==="preview")return K.value+=$,"skipped";K.value+=$}function ia(G,k,K){const re={};if(G.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";re.version=G.getUint8(4);const $=G.getUint8(5);re.spec={singleTile:!!($&2),longName:!!($&4),deepFormat:!!($&8),multiPart:!!($&16)},K.value=8;for(var ae=!0;ae;){var Te=xt(k,K);if(Te==0)ae=!1;else{var Ne=xt(k,K),He=vt(G,K),Ge=zn(G,k,K,Ne,He);Ge===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${Ne}'.`):re[Te]=Ge}}if(($&-5)!=0)throw console.error("EXRHeader:",re),"THREE.EXRLoader: provided file is currently unsupported.";return re}function Qs(G,k,K,re,$){const ae={size:0,viewer:k,array:K,offset:re,width:G.dataWindow.xMax-G.dataWindow.xMin+1,height:G.dataWindow.yMax-G.dataWindow.yMin+1,channels:G.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:G.channels[0].pixelType,uncompress:null,getter:null,format:null,[Am?"colorSpace":"encoding"]:null};switch(G.compression){case"NO_COMPRESSION":ae.lines=1,ae.uncompress=se;break;case"RLE_COMPRESSION":ae.lines=1,ae.uncompress=Y;break;case"ZIPS_COMPRESSION":ae.lines=1,ae.uncompress=Ce;break;case"ZIP_COMPRESSION":ae.lines=16,ae.uncompress=Ce;break;case"PIZ_COMPRESSION":ae.lines=32,ae.uncompress=et;break;case"PXR24_COMPRESSION":ae.lines=16,ae.uncompress=Ke;break;case"DWAA_COMPRESSION":ae.lines=32,ae.uncompress=qe;break;case"DWAB_COMPRESSION":ae.lines=256,ae.uncompress=qe;break;default:throw"EXRLoader.parse: "+G.compression+" is unsupported"}if(ae.scanlineBlockSize=ae.lines,ae.type==1)switch($){case ei:ae.getter=Ze,ae.inputSize=2;break;case ci:ae.getter=Me,ae.inputSize=2;break}else if(ae.type==2)switch($){case ei:ae.getter=nt,ae.inputSize=4;break;case ci:ae.getter=fe,ae.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+ae.type+" for "+G.compression+".";ae.blockCount=(G.dataWindow.yMax+1)/ae.scanlineBlockSize;for(var Te=0;Te<ae.blockCount;Te++)Ue(k,re);ae.outputChannels=ae.channels==3?4:ae.channels;const Ne=ae.width*ae.height*ae.outputChannels;switch($){case ei:ae.byteArray=new Float32Array(Ne),ae.channels<ae.outputChannels&&ae.byteArray.fill(1,0,Ne);break;case ci:ae.byteArray=new Uint16Array(Ne),ae.channels<ae.outputChannels&&ae.byteArray.fill(15360,0,Ne);break;default:console.error("THREE.EXRLoader: unsupported type: ",$);break}return ae.bytesPerLine=ae.width*ae.inputSize*ae.channels,ae.outputChannels==4?ae.format=Wr:ae.format=PA,Am?ae.colorSpace="srgb-linear":ae.encoding=3e3,ae}const bo=new DataView(e),Ti=new Uint8Array(e),Gi={value:0},Er=ia(bo,e,Gi),$t=Qs(Er,bo,Ti,Gi,this.type),Ol={value:0},lu={R:0,G:1,B:2,A:3,Y:0};for(let G=0;G<$t.height/$t.scanlineBlockSize;G++){const k=vt(bo,Gi);$t.size=vt(bo,Gi),$t.lines=k+$t.scanlineBlockSize>$t.height?$t.height-k:$t.scanlineBlockSize;const re=$t.size<$t.lines*$t.bytesPerLine?$t.uncompress($t):se($t);Gi.value+=$t.size;for(let $=0;$<$t.scanlineBlockSize;$++){const ae=$+G*$t.scanlineBlockSize;if(ae>=$t.height)break;for(let Te=0;Te<$t.channels;Te++){const Ne=lu[Er.channels[Te].name];for(let He=0;He<$t.width;He++){Ol.value=($*($t.channels*$t.width)+Te*$t.width+He)*$t.inputSize;const Ge=($t.height-1-ae)*($t.width*$t.outputChannels)+He*$t.outputChannels+Ne;$t.byteArray[Ge]=$t.getter(re,Ol)}}}}return{header:Er,width:$t.width,height:$t.height,data:$t.byteArray,format:$t.format,[Am?"colorSpace":"encoding"]:$t[Am?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,i){function s(o,a){Am?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=Pn,o.magFilter=Pn,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)}return super.load(e,s,n,i)}}const hw=new WeakMap;class B6 extends Ci{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,i){const s=new Mi(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(i)},n,i)}decodeDracoFile(e,t,n,i){const s={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const u=t.attributeTypes[l];u.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=u.name)}const n=JSON.stringify(t);if(hw.has(e)){const l=hw.get(e);if(l.key===n)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(i=l,new Promise((u,h)=>{i._callbacks[s]={resolve:u,reject:h},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),hw.set(e,{key:n,promise:a}),a}_createGeometry(e){const t=new rn;e.index&&t.setIndex(new Sn(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const i=e.attributes[n],s=i.name,o=i.array,a=i.itemSize;t.setAttribute(s,new Sn(o,a))}return t}_loadLibrary(e,t){const n=new Mi(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((i,s)=>{n.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const i=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const s=k6.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function k6(){let r,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":r=a.decoderConfig,e=new Promise(function(h){r.onModuleLoaded=function(p){h({draco:p})},DracoDecoderModule(r)});break;case"decode":const l=a.buffer,u=a.taskConfig;e.then(h=>{const p=h.draco,g=new p.Decoder,y=new p.DecoderBuffer;y.Init(new Int8Array(l),l.byteLength);try{const _=t(p,g,y,u),A=_.attributes.map(b=>b.array.buffer);_.index&&A.push(_.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:_},A)}catch(_){console.error(_),self.postMessage({type:"error",id:a.id,error:_.message})}finally{p.destroy(y),p.destroy(g)}});break}};function t(o,a,l,u){const h=u.attributeIDs,p=u.attributeTypes;let g,y;const _=a.GetEncodedGeometryType(l);if(_===o.TRIANGULAR_MESH)g=new o.Mesh,y=a.DecodeBufferToMesh(l,g);else if(_===o.POINT_CLOUD)g=new o.PointCloud,y=a.DecodeBufferToPointCloud(l,g);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!y.ok()||g.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+y.error_msg());const A={index:null,attributes:[]};for(const b in h){const w=self[p[b]];let C,E;if(u.useUniqueIDs)E=h[b],C=a.GetAttributeByUniqueId(g,E);else{if(E=a.GetAttributeId(g,o[h[b]]),E===-1)continue;C=a.GetAttribute(g,E)}A.attributes.push(i(o,a,g,b,w,C))}return _===o.TRIANGULAR_MESH&&(A.index=n(o,a,g)),o.destroy(g),A}function n(o,a,l){const h=l.num_faces()*3,p=h*4,g=o._malloc(p);a.GetTrianglesUInt32Array(l,p,g);const y=new Uint32Array(o.HEAPF32.buffer,g,h).slice();return o._free(g),{array:y,itemSize:1}}function i(o,a,l,u,h,p){const g=p.num_components(),_=l.num_points()*g,A=_*h.BYTES_PER_ELEMENT,b=s(o,h),w=o._malloc(A);a.GetAttributeDataArrayForAllPoints(l,p,b,A,w);const C=new h(o.HEAPF32.buffer,w,_).slice();return o._free(w),{name:u,array:C,itemSize:g}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}const rT=new as,Bv=new q;class M1 extends p1{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],n=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(n),this.setAttribute("position",new Rt(e,3)),this.setAttribute("uv",new Rt(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,n=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),n.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new fy(t,6,1);return this.setAttribute("instanceStart",new Ts(n,3,0)),this.setAttribute("instanceEnd",new Ts(n,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e,t=3){let n;e instanceof Float32Array?n=e:Array.isArray(e)&&(n=new Float32Array(e));const i=new fy(n,t*2,1);return this.setAttribute("instanceColorStart",new Ts(i,t,0)),this.setAttribute("instanceColorEnd",new Ts(i,t,t)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new i1(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new as);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),rT.setFromBufferAttribute(t),this.boundingBox.union(rT))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Is),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const n=this.boundingSphere.center;this.boundingBox.getCenter(n);let i=0;for(let s=0,o=e.count;s<o;s++)Bv.fromBufferAttribute(e,s),i=Math.max(i,n.distanceToSquared(Bv)),Bv.fromBufferAttribute(t,s),i=Math.max(i,n.distanceToSquared(Bv));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class $I extends M1{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,n=new Float32Array(2*t);for(let i=0;i<t;i+=3)n[2*i]=e[i],n[2*i+1]=e[i+1],n[2*i+2]=e[i+2],n[2*i+3]=e[i+3],n[2*i+4]=e[i+4],n[2*i+5]=e[i+5];return super.setPositions(n),this}setColors(e,t=3){const n=e.length-t,i=new Float32Array(2*n);if(t===3)for(let s=0;s<n;s+=t)i[2*s]=e[s],i[2*s+1]=e[s+1],i[2*s+2]=e[s+2],i[2*s+3]=e[s+3],i[2*s+4]=e[s+4],i[2*s+5]=e[s+5];else for(let s=0;s<n;s+=t)i[2*s]=e[s],i[2*s+1]=e[s+1],i[2*s+2]=e[s+2],i[2*s+3]=e[s+3],i[2*s+4]=e[s+4],i[2*s+5]=e[s+5],i[2*s+6]=e[s+6],i[2*s+7]=e[s+7];return super.setColors(i,t),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class C1 extends ss{constructor(e){super({type:"LineMaterial",uniforms:hy.clone(hy.merge([ht.common,ht.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new We(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
						attribute vec4 instanceColorStart;
						attribute vec4 instanceColorEnd;
					#else
						varying vec3 vLineColor;
						attribute vec3 instanceColorStart;
						attribute vec3 instanceColorEnd;
					#endif
				#endif

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vLineColor = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
					#else
						varying vec3 vLineColor;
					#endif
				#endif

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );
					#ifdef USE_COLOR
						#ifdef USE_LINE_COLOR_ALPHA
							diffuseColor *= vLineColor;
						#else
							diffuseColor.rgb *= vLineColor;
						#endif
					#endif

					#include <logdepthbuf_fragment>

					gl_FragColor = diffuseColor;

					#include <tonemapping_fragment>
					#include <${yp>=154?"colorspace_fragment":"encodings_fragment"}>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,this.onBeforeCompile=function(){this.transparent?this.defines.USE_LINE_COLOR_ALPHA="1":delete this.defines.USE_LINE_COLOR_ALPHA},Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){t===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(t){!!t!="USE_DASH"in this.defines&&(this.needsUpdate=!0),t===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(t){!!t!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),t===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const fw=new Mn,iT=new q,sT=new q,Ai=new Mn,Si=new Mn,Aa=new Mn,pw=new q,mw=new Jt,Ei=new vI,oT=new q,kv=new as,Dv=new Is,Sa=new Mn;let Ca,Id;function aT(r,e,t){return Sa.set(0,0,-e,1).applyMatrix4(r.projectionMatrix),Sa.multiplyScalar(1/Sa.w),Sa.x=Id/t.width,Sa.y=Id/t.height,Sa.applyMatrix4(r.projectionMatrixInverse),Sa.multiplyScalar(1/Sa.w),Math.abs(Math.max(Sa.x,Sa.y))}function D6(r,e){const t=r.matrixWorld,n=r.geometry,i=n.attributes.instanceStart,s=n.attributes.instanceEnd,o=Math.min(n.instanceCount,i.count);for(let a=0,l=o;a<l;a++){Ei.start.fromBufferAttribute(i,a),Ei.end.fromBufferAttribute(s,a),Ei.applyMatrix4(t);const u=new q,h=new q;Ca.distanceSqToSegment(Ei.start,Ei.end,h,u),h.distanceTo(u)<Id*.5&&e.push({point:h,pointOnLine:u,distance:Ca.origin.distanceTo(h),object:r,face:null,faceIndex:a,uv:null,[HI]:null})}}function F6(r,e,t){const n=e.projectionMatrix,s=r.material.resolution,o=r.matrixWorld,a=r.geometry,l=a.attributes.instanceStart,u=a.attributes.instanceEnd,h=Math.min(a.instanceCount,l.count),p=-e.near;Ca.at(1,Aa),Aa.w=1,Aa.applyMatrix4(e.matrixWorldInverse),Aa.applyMatrix4(n),Aa.multiplyScalar(1/Aa.w),Aa.x*=s.x/2,Aa.y*=s.y/2,Aa.z=0,pw.copy(Aa),mw.multiplyMatrices(e.matrixWorldInverse,o);for(let g=0,y=h;g<y;g++){if(Ai.fromBufferAttribute(l,g),Si.fromBufferAttribute(u,g),Ai.w=1,Si.w=1,Ai.applyMatrix4(mw),Si.applyMatrix4(mw),Ai.z>p&&Si.z>p)continue;if(Ai.z>p){const E=Ai.z-Si.z,R=(Ai.z-p)/E;Ai.lerp(Si,R)}else if(Si.z>p){const E=Si.z-Ai.z,R=(Si.z-p)/E;Si.lerp(Ai,R)}Ai.applyMatrix4(n),Si.applyMatrix4(n),Ai.multiplyScalar(1/Ai.w),Si.multiplyScalar(1/Si.w),Ai.x*=s.x/2,Ai.y*=s.y/2,Si.x*=s.x/2,Si.y*=s.y/2,Ei.start.copy(Ai),Ei.start.z=0,Ei.end.copy(Si),Ei.end.z=0;const A=Ei.closestPointToPointParameter(pw,!0);Ei.at(A,oT);const b=Ba.lerp(Ai.z,Si.z,A),w=b>=-1&&b<=1,C=pw.distanceTo(oT)<Id*.5;if(w&&C){Ei.start.fromBufferAttribute(l,g),Ei.end.fromBufferAttribute(u,g),Ei.start.applyMatrix4(o),Ei.end.applyMatrix4(o);const E=new q,R=new q;Ca.distanceSqToSegment(Ei.start,Ei.end,R,E),t.push({point:R,pointOnLine:E,distance:Ca.origin.distanceTo(R),object:r,face:null,faceIndex:g,uv:null,[HI]:null})}}}class eL extends hr{constructor(e=new M1,t=new C1({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,n=e.attributes.instanceEnd,i=new Float32Array(2*t.count);for(let o=0,a=0,l=t.count;o<l;o++,a+=2)iT.fromBufferAttribute(t,o),sT.fromBufferAttribute(n,o),i[a]=a===0?0:i[a-1],i[a+1]=i[a]+iT.distanceTo(sT);const s=new fy(i,2,1);return e.setAttribute("instanceDistanceStart",new Ts(s,1,0)),e.setAttribute("instanceDistanceEnd",new Ts(s,1,1)),this}raycast(e,t){const n=this.material.worldUnits,i=e.camera;i===null&&!n&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const s=e.params.Line2!==void 0&&e.params.Line2.threshold||0;Ca=e.ray;const o=this.matrixWorld,a=this.geometry,l=this.material;Id=l.linewidth+s,a.boundingSphere===null&&a.computeBoundingSphere(),Dv.copy(a.boundingSphere).applyMatrix4(o);let u;if(n)u=Id*.5;else{const p=Math.max(i.near,Dv.distanceToPoint(Ca.origin));u=aT(i,p,l.resolution)}if(Dv.radius+=u,Ca.intersectsSphere(Dv)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),kv.copy(a.boundingBox).applyMatrix4(o);let h;if(n)h=Id*.5;else{const p=Math.max(i.near,kv.distanceToPoint(Ca.origin));h=aT(i,p,l.resolution)}kv.expandByScalar(h),Ca.intersectsBox(kv)!==!1&&(n?D6(this,t):F6(this,i,t))}onBeforeRender(e){const t=this.material.uniforms;t&&t.resolution&&(e.getViewport(fw),this.material.uniforms.resolution.value.set(fw.z,fw.w))}}class O6 extends eL{constructor(e=new $I,t=new C1({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}let Fv;const gw=()=>{if(Fv)return Fv;const r="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=r;WebAssembly.validate(t)&&(i=e);let s;const o=WebAssembly.instantiate(a(i),{}).then(p=>{s=p.instance,s.exports.__wasm_call_ctors()});function a(p){const g=new Uint8Array(p.length);for(let _=0;_<p.length;++_){const A=p.charCodeAt(_);g[_]=A>96?A-71:A>64?A-65:A>47?A+4:A>46?63:62}let y=0;for(let _=0;_<p.length;++_)g[y++]=g[_]<60?n[g[_]]:(g[_]-60)*64+g[++_];return g.buffer.slice(0,y)}function l(p,g,y,_,A,b){const w=s.exports.sbrk,C=y+3&-4,E=w(C*_),R=w(A.length),L=new Uint8Array(s.exports.memory.buffer);L.set(A,R);const D=p(E,y,_,R,A.length);if(D===0&&b&&b(E,C,_),g.set(L.subarray(E,E+y*_)),w(E-w(0)),D!==0)throw new Error(`Malformed buffer data: ${D}`)}const u={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},h={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Fv={ready:o,supported:!0,decodeVertexBuffer(p,g,y,_,A){l(s.exports.meshopt_decodeVertexBuffer,p,g,y,_,s.exports[u[A]])},decodeIndexBuffer(p,g,y,_){l(s.exports.meshopt_decodeIndexBuffer,p,g,y,_)},decodeIndexSequence(p,g,y,_){l(s.exports.meshopt_decodeIndexSequence,p,g,y,_)},decodeGltfBuffer(p,g,y,_,A,b){l(s.exports[h[A]],p,g,y,_,s.exports[u[b]])}},Fv},U6=F.forwardRef(function({points:e,color:t=16777215,vertexColors:n,linewidth:i,lineWidth:s,segments:o,dashed:a,...l},u){var h,p;const g=$r(w=>w.size),y=F.useMemo(()=>o?new eL:new O6,[o]),[_]=F.useState(()=>new C1),A=(n==null||(h=n[0])==null?void 0:h.length)===4?4:3,b=F.useMemo(()=>{const w=o?new M1:new $I,C=e.map(E=>{const R=Array.isArray(E);return E instanceof q||E instanceof Mn?[E.x,E.y,E.z]:E instanceof We?[E.x,E.y,0]:R&&E.length===3?[E[0],E[1],E[2]]:R&&E.length===2?[E[0],E[1],0]:E});if(w.setPositions(C.flat()),n){t=16777215;const E=n.map(R=>R instanceof mt?R.toArray():R);w.setColors(E.flat(),A)}return w},[e,o,n,A]);return F.useLayoutEffect(()=>{y.computeLineDistances()},[e,y]),F.useLayoutEffect(()=>{a?_.defines.USE_DASH="":delete _.defines.USE_DASH,_.needsUpdate=!0},[a,_]),F.useEffect(()=>()=>{b.dispose(),_.dispose()},[b]),F.createElement("primitive",os({object:y,ref:u},l),F.createElement("primitive",{object:b,attach:"geometry"}),F.createElement("primitive",os({object:_,attach:"material",color:t,vertexColors:!!n,resolution:[g.width,g.height],linewidth:(p=i??s)!==null&&p!==void 0?p:1,dashed:a,transparent:A===4},l)))}),vw=r=>r===Object(r)&&!Array.isArray(r)&&typeof r!="function";function T1(r,e){const t=$r(s=>s.gl),n=_o(Pg,vw(r)?Object.values(r):r);return F.useLayoutEffect(()=>{e?.(n)},[e]),F.useEffect(()=>{if("initTexture"in t){let s=[];Array.isArray(n)?s=n:n instanceof In?s=[n]:vw(n)&&(s=Object.values(n)),s.forEach(o=>{o instanceof In&&t.initTexture(o)})}},[t,n]),F.useMemo(()=>{if(vw(r)){const s={};let o=0;for(const a in r)s[a]=n[o++];return s}else return n},[r,n])}T1.preload=r=>_o.preload(Pg,r);T1.clear=r=>_o.clear(Pg,r);const j6=()=>parseInt(hp.replace(/\D+/g,"")),tL=j6();function z6(r){return Array.isArray(r)}function yw(r=[0,0,0]){return z6(r)?r:r instanceof q||r instanceof Wd?[r.x,r.y,r.z]:[r,r,r]}const H6=F.forwardRef(function({debug:e,depthTest:t=!1,polygonOffsetFactor:n=-10,map:i,mesh:s,children:o,position:a,rotation:l,scale:u,...h},p){const g=F.useRef(null);F.useImperativeHandle(p,()=>g.current);const y=F.useRef(null),_=F.useRef({position:new q,rotation:new Wd,scale:new q(1,1,1)});return F.useLayoutEffect(()=>{const A=s?.current||g.current.parent,b=g.current;if(!(A instanceof hr))throw new Error('Decal must have a Mesh as parent or specify its "mesh" prop');if(A){vo(_.current,{position:a,scale:u});const w=A.matrixWorld.clone();if(A.matrixWorld.identity(),!l||typeof l=="number"){const C=new Cn;C.position.copy(_.current.position);const E=A.geometry.attributes.position.array;A.geometry.attributes.normal===void 0&&A.geometry.computeVertexNormals();const R=A.geometry.attributes.normal.array;let L=1/0;new q;let D=new q;const j=C.position.x,O=C.position.y,I=C.position.z,U=E.length;let V=-1;for(let ee=0;ee<U;ee+=3){const te=E[ee],ne=E[ee+1],le=E[ee+2],de=te-j,ie=ne-O,J=le-I,Q=de*de+ie*ie+J*J;Q<L&&(L=Q,V=ee)}D.fromArray(R,V),C.lookAt(C.position.clone().add(D)),C.rotateZ(Math.PI),C.rotateY(Math.PI),typeof l=="number"&&C.rotateZ(l),vo(_.current,{rotation:C.rotation})}else vo(_.current,{rotation:l});return b.geometry=new I6(A,_.current.position,_.current.rotation,_.current.scale),A.matrixWorld=w,()=>{b.geometry.dispose()}}},[s,...yw(a),...yw(u),...yw(l)]),F.useLayoutEffect(()=>{y.current&&(vo(y.current,_.current),y.current.traverse(A=>A.raycast=()=>null))},[e]),F.createElement("mesh",os({ref:g,"material-transparent":!0,"material-polygonOffset":!0,"material-polygonOffsetFactor":n,"material-depthTest":t,"material-map":i},h),o,e&&F.createElement("mesh",{ref:y},F.createElement("boxGeometry",null),F.createElement("meshNormalMaterial",{wireframe:!0}),F.createElement("axesHelper",null)))});let Ov=null,nL="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function rL(r=!0,e=!0,t){return n=>{t&&t(n),r&&(Ov||(Ov=new B6),Ov.setDecoderPath(typeof r=="string"?r:nL),n.setDRACOLoader(Ov)),e&&n.setMeshoptDecoder(typeof gw=="function"?gw():gw)}}const Fl=(r,e,t,n)=>_o(E1,r,rL(e,t,n));Fl.preload=(r,e,t,n)=>_o.preload(E1,r,rL(e,t,n));Fl.clear=r=>_o.clear(E1,r);Fl.setDecoderPath=r=>{nL=r};const ix=F.forwardRef(({makeDefault:r,camera:e,regress:t,domElement:n,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...u},h)=>{const p=$r(D=>D.invalidate),g=$r(D=>D.camera),y=$r(D=>D.gl),_=$r(D=>D.events),A=$r(D=>D.setEvents),b=$r(D=>D.set),w=$r(D=>D.get),C=$r(D=>D.performance),E=e||g,R=n||_.connected||y.domElement,L=F.useMemo(()=>new Y8(E),[E]);return ou(()=>{L.enabled&&L.update()},-1),F.useEffect(()=>(s&&L.connect(s===!0?R:s),L.connect(R),()=>void L.dispose()),[s,R,t,L,p]),F.useEffect(()=>{const D=I=>{p(),t&&C.regress(),o&&o(I)},j=I=>{a&&a(I)},O=I=>{l&&l(I)};return L.addEventListener("change",D),L.addEventListener("start",j),L.addEventListener("end",O),()=>{L.removeEventListener("start",j),L.removeEventListener("end",O),L.removeEventListener("change",D)}},[o,a,l,L,p,A]),F.useEffect(()=>{if(r){const D=w().controls;return b({controls:L}),()=>b({controls:D})}},[r,L]),F.createElement("primitive",os({ref:h,object:L,enableDamping:i},u))}),G6=3e3,V6=3001,xw=tL>=154?"opaque_fragment":"output_fragment";class W6 extends Eg{constructor(e){super(e),this.onBeforeCompile=(t,n)=>{const{isWebGL2:i}=n.capabilities;t.fragmentShader=t.fragmentShader.replace(`#include <${xw}>`,`
        ${i?`#include <${xw}>`:`#extension GL_OES_standard_derivatives : enable
#include <${xw}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${tL>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}}const J6=F.forwardRef((r,e)=>{const[t]=F.useState(()=>new W6(null));return F.createElement("primitive",os({},r,{object:t,ref:e,attach:"material"}))}),X6=F.forwardRef(({children:r,enabled:e=!0,speed:t=1,rotationIntensity:n=1,floatIntensity:i=1,floatingRange:s=[-.1,.1],autoInvalidate:o=!1,...a},l)=>{const u=F.useRef(null);F.useImperativeHandle(l,()=>u.current,[]);const h=F.useRef(Math.random()*1e4);return ou(p=>{var g,y;if(!e||t===0)return;o&&p.invalidate();const _=h.current+p.clock.elapsedTime;u.current.rotation.x=Math.cos(_/4*t)/8*n,u.current.rotation.y=Math.sin(_/4*t)/8*n,u.current.rotation.z=Math.sin(_/4*t)/20*n;let A=Math.sin(_/4*t)/10;A=Ba.mapLinear(A,-.1,.1,(g=s?.[0])!==null&&g!==void 0?g:-.1,(y=s?.[1])!==null&&y!==void 0?y:.1),u.current.position.y=A*i,u.current.updateMatrix()}),F.createElement("group",a,F.createElement("group",{ref:u,matrixAutoUpdate:!1},r))}),iL=(r,e,t)=>{let n;switch(r){case Js:n=new Uint8ClampedArray(e*t*4);break;case ci:n=new Uint16Array(e*t*4);break;case Ta:n=new Uint32Array(e*t*4);break;case MA:n=new Int8Array(e*t*4);break;case CA:n=new Int16Array(e*t*4);break;case Iy:n=new Int32Array(e*t*4);break;case ei:n=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return n};let Uv;const K6=(r,e,t,n)=>{if(Uv!==void 0)return Uv;const i=new Ys(1,1,n);e.setRenderTarget(i);const s=new hr(new ru,new Cs({color:16777215}));e.render(s,t),e.setRenderTarget(null);const o=iL(r,i.width,i.height);return e.readRenderTargetPixels(i,0,0,i.width,i.height,o),i.dispose(),s.geometry.dispose(),s.material.dispose(),Uv=o[0]!==0,Uv};class R1{_renderer;_rendererIsDisposable=!1;_material;_scene;_camera;_quad;_renderTarget;_width;_height;_type;_colorSpace;_supportsReadPixels=!0;constructor(e){this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const t={format:Wr,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:e.renderTargetOptions?.anisotropy!==void 0?e.renderTargetOptions?.anisotropy:1,generateMipmaps:e.renderTargetOptions?.generateMipmaps!==void 0?e.renderTargetOptions?.generateMipmaps:!1,magFilter:e.renderTargetOptions?.magFilter!==void 0?e.renderTargetOptions?.magFilter:Pn,minFilter:e.renderTargetOptions?.minFilter!==void 0?e.renderTargetOptions?.minFilter:Pn,samples:e.renderTargetOptions?.samples!==void 0?e.renderTargetOptions?.samples:void 0,wrapS:e.renderTargetOptions?.wrapS!==void 0?e.renderTargetOptions?.wrapS:er,wrapT:e.renderTargetOptions?.wrapT!==void 0?e.renderTargetOptions?.wrapT:er};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=R1.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Il,this._camera=new xo,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!K6(this._type,this._renderer,this._camera,t)){let n;switch(this._type){case ci:n=this._renderer.extensions.has("EXT_color_buffer_float")?ei:void 0;break}n!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${ei}`),this._type=n):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new hr(new ru,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Ys(this.width,this.height,t),this._renderTarget.texture.mapping=e.renderTargetOptions?.mapping!==void 0?e.renderTargetOptions?.mapping:Wc}static instantiateRenderer(){const e=new bg;return e.setSize(128,128),e}render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(e){throw this._renderer.setRenderTarget(null),e}this._renderer.setRenderTarget(null)};toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=iL(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Td(this.toArray(),this.width,this.height,Wr,this._type,e?.mapping||Wc,e?.wrapS||er,e?.wrapT||er,e?.magFilter||Pn,e?.minFilter||Pn,e?.anisotropy||1,Rs);return t.generateMipmaps=e?.generateMipmaps!==void 0?e?.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof ss&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof In&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof In&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class sL extends Error{}class oL extends Error{}const Sm=(r,e,t)=>{const n=new RegExp(`${e}="([^"]*)"`,"i").exec(r);if(n)return n[1];const i=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(r);if(i){const s=i[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return s&&s.length===3?s.map(o=>o.replace(/<\/?rdf:li>/g,"")):i[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},Y6=r=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(r):e=r.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const n=e.indexOf("x:xmpmeta>",t),i=e.slice(t,n+10);try{const s=Sm(i,"hdrgm:GainMapMin","0"),o=Sm(i,"hdrgm:GainMapMax"),a=Sm(i,"hdrgm:Gamma","1"),l=Sm(i,"hdrgm:OffsetSDR","0.015625"),u=Sm(i,"hdrgm:OffsetHDR","0.015625"),h=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(i),p=h?h[1]:"0",g=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(i);if(!g)throw new Error("Incomplete gainmap metadata");const y=g[1];return{gainMapMin:Array.isArray(s)?s.map(_=>parseFloat(_)):[parseFloat(s),parseFloat(s),parseFloat(s)],gainMapMax:Array.isArray(o)?o.map(_=>parseFloat(_)):[parseFloat(o),parseFloat(o),parseFloat(o)],gamma:Array.isArray(a)?a.map(_=>parseFloat(_)):[parseFloat(a),parseFloat(a),parseFloat(a)],offsetSdr:Array.isArray(l)?l.map(_=>parseFloat(_)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetHdr:Array.isArray(u)?u.map(_=>parseFloat(_)):[parseFloat(u),parseFloat(u),parseFloat(u)],hdrCapacityMin:parseFloat(p),hdrCapacityMax:parseFloat(y)}}catch{}t=e.indexOf("<x:xmpmeta",n)}};class q6{options;constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,n)=>{const i=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){n(new Error("Not a valid jpeg"));return}const o=s.byteLength;let a=2,l=0,u;for(;a<o;){if(++l>250){n(new Error(`Found no marker after ${l} loops `));return}if(s.getUint8(a)!==255){n(new Error(`Not a valid marker at offset 0x${a.toString(16)}, found: 0x${s.getUint8(a).toString(16)}`));return}if(u=s.getUint8(a+1),i&&console.log(`Marker: ${u.toString(16)}`),u===226){i&&console.log("Found APP2 marker (0xffe2)");const h=a+4;if(s.getUint32(h)===1297106432){const p=h+4;let g;if(s.getUint16(p)===18761)g=!1;else if(s.getUint16(p)===19789)g=!0;else{n(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(p+2,!g)!==42){n(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const y=s.getUint32(p+4,!g);if(y<8){n(new Error("Not valid TIFF data! (First offset less than 8)"));return}const _=p+y,A=s.getUint16(_,!g),b=_+2;let w=0;for(let L=b;L<b+12*A;L+=12)s.getUint16(L,!g)===45057&&(w=s.getUint32(L+8,!g));const E=_+2+A*12+4,R=[];for(let L=E;L<E+w*16;L+=16){const D={MPType:s.getUint32(L,!g),size:s.getUint32(L+4,!g),dataOffset:s.getUint32(L+8,!g),dependantImages:s.getUint32(L+12,!g),start:-1,end:-1,isFII:!1};D.dataOffset?(D.start=p+D.dataOffset,D.isFII=!1):(D.start=0,D.isFII=!0),D.end=D.start+D.size,R.push(D)}if(this.options.extractNonFII&&R.length){const L=new Blob([s]),D=[];for(const j of R){if(j.isFII&&!this.options.extractFII)continue;const O=L.slice(j.start,j.end+1,"image/jpeg");D.push(O)}t(D)}}}a+=2+s.getUint16(a+2)}})}}const Q6=async r=>{const e=Y6(r);if(!e)throw new oL("Gain map XMP metadata not found");const n=await new q6({extractFII:!0,extractNonFII:!0}).extract(r);if(n.length!==2)throw new sL("Gain map recovery image not found");return{sdr:new Uint8Array(await n[0].arrayBuffer()),gainMap:new Uint8Array(await n[1].arrayBuffer()),metadata:e}},lT=r=>new Promise((e,t)=>{const n=document.createElement("img");n.onload=()=>{e(n)},n.onerror=i=>{t(i)},n.src=URL.createObjectURL(r)});class Z6 extends Ci{_renderer;_renderTargetOptions;_internalLoadingManager;_config;constructor(e,t){super(t),this._config=e,e.renderer&&(this._renderer=e.renderer),this._internalLoadingManager=new ex}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: A Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=this._config.createMaterial({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new In,sdr:new In});return this._config.createQuadRenderer({width:16,height:16,type:ci,colorSpace:Rs,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async processImages(e,t,n){const i=t?new Blob([t],{type:"image/jpeg"}):void 0,s=new Blob([e],{type:"image/jpeg"});let o,a,l=!1;if(typeof createImageBitmap>"u"){const u=await Promise.all([i?lT(i):Promise.resolve(void 0),lT(s)]);a=u[0],o=u[1],l=n==="flipY"}else{const u=await Promise.all([i?createImageBitmap(i,{imageOrientation:n||"flipY"}):Promise.resolve(void 0),createImageBitmap(s,{imageOrientation:n||"flipY"})]);a=u[0],o=u[1]}return{sdrImage:o,gainMapImage:a,needsFlip:l}}createTextures(e,t,n){const i=new In(t||new ImageData(2,2),Wc,er,er,Pn,rb,Wr,Js,1,Rs);i.flipY=n,i.needsUpdate=!0;const s=new In(e,Wc,er,er,Pn,rb,Wr,Js,1,nn);return s.flipY=n,s.needsUpdate=!0,{gainMap:i,sdr:s}}updateQuadRenderer(e,t,n,i,s){e.width=t.width,e.height=t.height,e.material.gainMap=n,e.material.sdr=i,e.material.gainMapMin=s.gainMapMin,e.material.gainMapMax=s.gainMapMax,e.material.offsetHdr=s.offsetHdr,e.material.offsetSdr=s.offsetSdr,e.material.gamma=s.gamma,e.material.hdrCapacityMin=s.hdrCapacityMin,e.material.hdrCapacityMax=s.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,s.hdrCapacityMax),e.material.needsUpdate=!0}}const $6=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,e9=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class t9 extends ss{_maxDisplayBoost;_hdrCapacityMin;_hdrCapacityMax;constructor({gamma:e,offsetHdr:t,offsetSdr:n,gainMapMin:i,gainMapMax:s,maxDisplayBoost:o,hdrCapacityMin:a,hdrCapacityMax:l,sdr:u,gainMap:h}){super({name:"GainMapDecoderMaterial",vertexShader:$6,fragmentShader:e9,uniforms:{sdr:{value:u},gainMap:{value:h},gamma:{value:new q(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new q().fromArray(t)},offsetSdr:{value:new q().fromArray(n)},gainMapMin:{value:new q().fromArray(i)},gainMapMax:{value:new q().fromArray(s)},weightFactor:{value:(Math.log2(o)-a)/(l-a)}},blending:La,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=a,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class aL extends Z6{constructor(e,t){super({renderer:e,createMaterial:n=>new t9(n),createQuadRenderer:n=>new R1(n)},t)}async render(e,t,n,i){const{sdrImage:s,gainMapImage:o,needsFlip:a}=await this.processImages(n,i,"flipY"),{gainMap:l,sdr:u}=this.createTextures(s,o,a);this.updateQuadRenderer(e,s,l,u,t),e.render()}}class n9 extends aL{load([e,t,n],i,s,o){const a=this.prepareQuadRenderer();let l,u,h;const p=async()=>{if(l&&u&&h){try{await this.render(a,h,l,u)}catch(I){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(n),typeof o=="function"&&o(I),a.disposeOnDemandRenderer();return}typeof i=="function"&&i(a),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(n),a.disposeOnDemandRenderer()}};let g=!0,y=0,_=0,A=!0,b=0,w=0,C=!0,E=0,R=0;const L=()=>{if(typeof s=="function"){const I=y+b+E,U=_+w+R,V=g&&A&&C;s(new ProgressEvent("progress",{lengthComputable:V,loaded:U,total:I}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(n);const D=new Mi(this._internalLoadingManager);D.setResponseType("arraybuffer"),D.setRequestHeader(this.requestHeader),D.setPath(this.path),D.setWithCredentials(this.withCredentials),D.load(e,async I=>{if(typeof I=="string")throw new Error("Invalid sdr buffer");l=I,await p()},I=>{g=I.lengthComputable,_=I.loaded,y=I.total,L()},I=>{this.manager.itemError(e),typeof o=="function"&&o(I)});const j=new Mi(this._internalLoadingManager);j.setResponseType("arraybuffer"),j.setRequestHeader(this.requestHeader),j.setPath(this.path),j.setWithCredentials(this.withCredentials),j.load(t,async I=>{if(typeof I=="string")throw new Error("Invalid gainmap buffer");u=I,await p()},I=>{A=I.lengthComputable,w=I.loaded,b=I.total,L()},I=>{this.manager.itemError(t),typeof o=="function"&&o(I)});const O=new Mi(this._internalLoadingManager);return O.setRequestHeader(this.requestHeader),O.setPath(this.path),O.setWithCredentials(this.withCredentials),O.load(n,async I=>{if(typeof I!="string")throw new Error("Invalid metadata string");h=JSON.parse(I),await p()},I=>{C=I.lengthComputable,R=I.loaded,E=I.total,L()},I=>{this.manager.itemError(n),typeof o=="function"&&o(I)}),a}}class r9 extends aL{load(e,t,n,i){const s=this.prepareQuadRenderer(),o=new Mi(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async a=>{if(typeof a=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(a);let u,h,p;try{const g=await Q6(l);u=g.sdr,h=g.gainMap,p=g.metadata}catch(g){if(g instanceof oL||g instanceof sL)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),p={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},u=l;else throw g}try{await this.render(s,p,u.buffer,h?.buffer)}catch(g){this.manager.itemError(e),typeof i=="function"&&i(g),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},n,a=>{this.manager.itemError(e),typeof i=="function"&&i(a)}),s}}const hg={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},lL="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Qf=r=>Array.isArray(r),P1=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function sx({files:r=P1,path:e="",preset:t=void 0,encoding:n=void 0,extensions:i}={}){let s=null,o=!1;t&&(I1(t),r=hg[t],e=lL),o=Qf(r);const{extension:a,isCubemap:l}=L1(r);if(s=N1(a),!s)throw new Error("useEnvironment: Unrecognized file extension: "+r);const u=$r(y=>y.gl);F.useLayoutEffect(()=>{if(a!=="webp"&&a!=="jpg"&&a!=="jpeg")return;function y(){_o.clear(s,o?[r]:r)}u.domElement.addEventListener("webglcontextlost",y,{once:!0})},[r,u.domElement]);const h=_o(s,o?[r]:r,y=>{(a==="webp"||a==="jpg"||a==="jpeg")&&y.setRenderer(u),y.setPath==null||y.setPath(e),i&&i(y)});let p=o?h[0]:h;if(a==="jpg"||a==="jpeg"||a==="webp"){var g;p=(g=p.renderTarget)==null?void 0:g.texture}return p.mapping=l?Oa:ep,"colorSpace"in p?p.colorSpace=n??l?"srgb":"srgb-linear":p.encoding=n??l?V6:G6,p}const i9={files:P1,path:"",preset:void 0,extensions:void 0};sx.preload=r=>{const e={...i9,...r};let{files:t,path:n=""}=e;const{preset:i,extensions:s}=e;i&&(I1(i),t=hg[i],n=lL);const{extension:o}=L1(t);if(o==="webp"||o==="jpg"||o==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const a=N1(o);if(!a)throw new Error("useEnvironment: Unrecognized file extension: "+t);_o.preload(a,Qf(t)?[t]:t,l=>{l.setPath==null||l.setPath(n),s&&s(l)})};const s9={files:P1,preset:void 0};sx.clear=r=>{const e={...s9,...r};let{files:t}=e;const{preset:n}=e;n&&(I1(n),t=hg[n]);const{extension:i}=L1(t),s=N1(i);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);_o.clear(s,Qf(t)?[t]:t)};function I1(r){if(!(r in hg))throw new Error("Preset must be one of: "+Object.keys(hg).join(", "))}function L1(r){var e;const t=Qf(r)&&r.length===6,n=Qf(r)&&r.length===3&&r.some(o=>o.endsWith("json")),i=Qf(r)?r[0]:r;return{extension:t?"cube":n?"webp":i.startsWith("data:application/exr")?"exr":i.startsWith("data:application/hdr")?"hdr":i.startsWith("data:image/jpeg")?"jpg":(e=i.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:n}}function N1(r){return r==="cube"?aI:r==="hdr"?L6:r==="exr"?N6:r==="jpg"||r==="jpeg"?r9:r==="webp"?n9:null}const o9=r=>r.current&&r.current.isScene,a9=r=>o9(r)?r.current:r;function B1(r,e,t,n,i={}){var s,o,a,l;i={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...i};const u=a9(e||t),h=u.background,p=u.environment,g={backgroundBlurriness:u.backgroundBlurriness,backgroundIntensity:u.backgroundIntensity,backgroundRotation:(s=(o=u.backgroundRotation)==null||o.clone==null?void 0:o.clone())!==null&&s!==void 0?s:[0,0,0],environmentIntensity:u.environmentIntensity,environmentRotation:(a=(l=u.environmentRotation)==null||l.clone==null?void 0:l.clone())!==null&&a!==void 0?a:[0,0,0]};return r!=="only"&&(u.environment=n),r&&(u.background=n),vo(u,i),()=>{r!=="only"&&(u.environment=p),r&&(u.background=h),vo(u,g)}}function k1({scene:r,background:e=!1,map:t,...n}){const i=$r(s=>s.scene);return F.useLayoutEffect(()=>{if(t)return B1(e,r,i,t,n)}),null}function cL({background:r=!1,scene:e,blur:t,backgroundBlurriness:n,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:o,environmentRotation:a,...l}){const u=sx(l),h=$r(p=>p.scene);return F.useLayoutEffect(()=>B1(r,e,h,u,{backgroundBlurriness:t??n,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:o,environmentRotation:a})),F.useEffect(()=>()=>{u.dispose()},[u]),null}function l9({children:r,near:e=.1,far:t=1e3,resolution:n=256,frames:i=1,map:s,background:o=!1,blur:a,backgroundBlurriness:l,backgroundIntensity:u,backgroundRotation:h,environmentIntensity:p,environmentRotation:g,scene:y,files:_,path:A,preset:b=void 0,extensions:w}){const C=$r(O=>O.gl),E=$r(O=>O.scene),R=F.useRef(null),[L]=F.useState(()=>new Il),D=F.useMemo(()=>{const O=new By(n);return O.texture.type=ci,O},[n]);F.useEffect(()=>()=>{D.dispose()},[D]),F.useLayoutEffect(()=>{if(i===1){const O=C.autoClear;C.autoClear=!0,R.current.update(C,L),C.autoClear=O}return B1(o,y,E,D.texture,{backgroundBlurriness:a??l,backgroundIntensity:u,backgroundRotation:h,environmentIntensity:p,environmentRotation:g})},[r,L,D.texture,y,E,o,i,C]);let j=1;return ou(()=>{if(i===1/0||j<i){const O=C.autoClear;C.autoClear=!0,R.current.update(C,L),C.autoClear=O,j++}}),F.createElement(F.Fragment,null,uG(F.createElement(F.Fragment,null,r,F.createElement("cubeCamera",{ref:R,args:[e,t,D]}),_||b?F.createElement(cL,{background:!0,files:_,preset:b,path:A,extensions:w}):s?F.createElement(k1,{background:!0,map:s,extensions:w}):null),L))}function c9(r){var e,t,n,i;const s=sx(r),o=r.map||s;F.useMemo(()=>bI({GroundProjectedEnvImpl:z8}),[]),F.useEffect(()=>()=>{s.dispose()},[s]);const a=F.useMemo(()=>[o],[o]),l=(e=r.ground)==null?void 0:e.height,u=(t=r.ground)==null?void 0:t.radius,h=(n=(i=r.ground)==null?void 0:i.scale)!==null&&n!==void 0?n:1e3;return F.createElement(F.Fragment,null,F.createElement(k1,os({},r,{map:o})),F.createElement("groundProjectedEnvImpl",{args:a,scale:h,height:l,radius:u}))}function uL(r){return r.ground?F.createElement(c9,r):r.map?F.createElement(k1,r):r.children?F.createElement(l9,r):F.createElement(cL,r)}let nd,Em;const u9=F.createContext(null),cT=new Jt,uT=new q,d9=F.forwardRef(({children:r,range:e,limit:t=1e3,...n},i)=>{const s=F.useRef(null);F.useImperativeHandle(i,()=>s.current,[]);const[o,a]=F.useState([]),[[l,u,h]]=F.useState(()=>[new Float32Array(t*3),Float32Array.from({length:t*3},()=>1),Float32Array.from({length:t},()=>1)]);F.useEffect(()=>{s.current.geometry.attributes.position.needsUpdate=!0}),ou(()=>{for(s.current.updateMatrix(),s.current.updateMatrixWorld(),cT.copy(s.current.matrixWorld).invert(),s.current.geometry.drawRange.count=Math.min(t,e!==void 0?e:t,o.length),nd=0;nd<o.length;nd++)Em=o[nd].current,Em.getWorldPosition(uT).applyMatrix4(cT),uT.toArray(l,nd*3),s.current.geometry.attributes.position.needsUpdate=!0,Em.matrixWorldNeedsUpdate=!0,Em.color.toArray(u,nd*3),s.current.geometry.attributes.color.needsUpdate=!0,h.set([Em.size],nd),s.current.geometry.attributes.size.needsUpdate=!0});const p=F.useMemo(()=>({getParent:()=>s,subscribe:g=>(a(y=>[...y,g]),()=>a(y=>y.filter(_=>_.current!==g.current)))}),[]);return F.createElement("points",os({userData:{instances:o},matrixAutoUpdate:!1,ref:s,raycast:()=>null},n),F.createElement("bufferGeometry",null,F.createElement("bufferAttribute",{attach:"attributes-position",count:l.length/3,array:l,itemSize:3,usage:Ed}),F.createElement("bufferAttribute",{attach:"attributes-color",count:u.length/3,array:u,itemSize:3,usage:Ed}),F.createElement("bufferAttribute",{attach:"attributes-size",count:h.length,array:h,itemSize:1,usage:Ed})),F.createElement(u9.Provider,{value:p},r))}),h9=F.forwardRef(({children:r,positions:e,colors:t,sizes:n,stride:i=3,...s},o)=>{const a=F.useRef(null);return F.useImperativeHandle(o,()=>a.current,[]),ou(()=>{const l=a.current.geometry.attributes;l.position.needsUpdate=!0,t&&(l.color.needsUpdate=!0),n&&(l.size.needsUpdate=!0)}),F.createElement("points",os({ref:a},s),F.createElement("bufferGeometry",null,F.createElement("bufferAttribute",{attach:"attributes-position",count:e.length/i,array:e,itemSize:i,usage:Ed}),t&&F.createElement("bufferAttribute",{attach:"attributes-color",count:t.length/i,array:t,itemSize:3,usage:Ed}),n&&F.createElement("bufferAttribute",{attach:"attributes-size",count:n.length/i,array:n,itemSize:1,usage:Ed})),r)}),f9=F.forwardRef((r,e)=>r.positions instanceof Float32Array?F.createElement(h9,os({},r,{ref:e})):F.createElement(d9,os({},r,{ref:e})));function ox({all:r,scene:e,camera:t}){const n=$r(({gl:o})=>o),i=$r(({camera:o})=>o),s=$r(({scene:o})=>o);return F.useLayoutEffect(()=>{const o=[];r&&(e||s).traverse(u=>{u.visible===!1&&(o.push(u),u.visible=!0)}),n.compile(e||s,t||i);const a=new By(128);new GA(.01,1e5,a).update(n,e||s),a.dispose(),o.forEach(u=>u.visible=!1)},[]),null}const D1=()=>{const{progress:r}=qG();return x.jsxs(WG,{as:"div",center:!0,style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",marginTop:100},children:[x.jsx("span",{className:"canvas-loader"}),x.jsxs("p",{style:{fontSize:14,color:"#F1F1F1",fontWeight:800,marginTop:40},children:[r.toFixed(2),"%"]})]})},p9=r=>{const e="/Edwin_portfolio/",t=e.endsWith("/")?e.slice(0,-1):e,n=r.startsWith("/")?r:`/${r}`;return`${t}${n}`},dL=p9("/planet/scene.gltf"),m9=()=>{const r=Fl(dL);return x.jsx("primitive",{object:r.scene,scale:1.5,"position-y":0,"rotation-y":0})},g9=()=>x.jsx(Lg,{shadows:!0,frameloop:"demand",dpr:[1,2],gl:{preserveDrawingBuffer:!0},camera:{fov:45,near:.1,far:200,position:[-4,3,6]},children:x.jsxs(F.Suspense,{fallback:x.jsx(D1,{}),children:[x.jsx(ix,{autoRotate:!0,enableZoom:!1,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/2}),x.jsx(m9,{}),x.jsx(ox,{all:!0})]})});Fl.preload(dL);const v9="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMB/ah3oXkAAAAASUVORK5CYII=",hL=({imgUrl:r})=>{const e=r||v9,[t]=T1([e]);return x.jsxs(X6,{speed:1.5,rotationIntensity:.9,floatIntensity:1.8,children:[x.jsx("hemisphereLight",{intensity:.8,groundColor:"#0b1220"}),x.jsx("directionalLight",{position:[2,3,2],intensity:1.6}),x.jsx("directionalLight",{position:[-2,-1,-2],intensity:.6,color:"#60a5fa"}),x.jsxs("mesh",{castShadow:!0,receiveShadow:!0,scale:1.75,children:[x.jsx("icosahedronGeometry",{args:[1,1]}),x.jsx("meshStandardMaterial",{color:"#334155",metalness:.25,roughness:.35,polygonOffset:!0,polygonOffsetFactor:-5,flatShading:!0}),r&&x.jsx(H6,{position:[0,0,1],rotation:[2*Math.PI,0,6.25],scale:1,map:t,flatShading:!0})]})]})},fL=({icon:r})=>x.jsxs(Lg,{frameloop:"demand",dpr:[1,2],gl:{alpha:!0,antialias:!0},style:{width:"100%",height:"100%"},children:[x.jsxs(F.Suspense,{fallback:x.jsx(D1,{}),children:[x.jsx(ix,{enableZoom:!1}),x.jsx(hL,{imgUrl:r})]}),x.jsx(ox,{all:!0})]});hL.propTypes={imgUrl:Ve.string};fL.propTypes={icon:Ve.string};const y9=r=>{const e="/Edwin_portfolio/",t=e.endsWith("/")?e.slice(0,-1):e,n=r.startsWith("/")?r:`/${r}`;return`${t}${n}`},x9=y9("/planet/scene.gltf");Fl.preload(x9);Ve.bool;const _9=r=>{const e=F.useRef(),[t]=F.useState(()=>r8(new Float32Array(5e3),{radius:1.2}));return ou((n,i)=>{e.current.rotation.x-=i/10,e.current.rotation.y-=i/15}),x.jsx("group",{rotation:[0,0,Math.PI/4],children:x.jsx(f9,{ref:e,positions:t,stride:3,frustumCulled:!0,...r,children:x.jsx(J6,{transparent:!0,color:"#f272c8",size:.004,sizeAttenuation:!0,depthWrite:!1})})})},pL=()=>x.jsx("div",{className:"w-full h-auto absolute inset-0 z-[-1]",children:x.jsxs(Lg,{camera:{position:[0,0,1]},children:[x.jsx(F.Suspense,{fallback:null,children:x.jsx(_9,{})}),x.jsx(ox,{all:!0})]})}),w9=r=>{const e="/Edwin_portfolio/",t=e.endsWith("/")?e.slice(0,-1):e,n=r.startsWith("/")?r:`/${r}`;return`${t}${n}`},mL=w9("/Desktop/desk portfolio2.glb"),dT=7,b9=Math.PI/-2,A9=["plane004_1","plane002_1","plane002_2","plane006_1","plane006_2"],S9=1.12,hT=r=>(r||"").toString().trim().replace(/[\s._-]+/g,"").replace(/\./g,"").toLowerCase(),E9=r=>r.replace(/[_-]/g," ").replace(/\s+/g," ").trim();function gL({getObject:r,fileName:e="model.glb",className:t=""}){const n=()=>{const i=r?.();if(!i)return;new GI().parse(i,o=>{const a=new Blob([o],{type:"model/gltf-binary"}),l=URL.createObjectURL(a),u=document.createElement("a");u.href=l,u.download=e,u.click(),URL.revokeObjectURL(l)},console.error,{binary:!0})};return x.jsx("button",{onClick:n,className:`px-4 py-2 rounded-2xl text-sm font-semibold border border-white/10 bg-black/60 text-white hover:bg-black/80 transition-colors ${t}`,children:"Export GLB"})}gL.propTypes={getObject:Ve.func,fileName:Ve.string,className:Ve.string};const M9=r=>r.normalize("NFKD").replace(/[\\/:*?"<>|]/g,"-").replace(/\s+/g,"_").toLowerCase();function vL({groupRef:r,onHoverChange:e,onDebugChange:t,scaleMultiplier:n=1,getMeshLabel:i,hasCustomLabels:s}){const{scene:o}=Fl(mL),[a,l]=F.useState(!1),u=F.useRef(0),h=F.useRef(new Map),p=F.useRef(null),g=F.useRef(new q),y=F.useRef(null),_=F.useRef({width:5,depth:2.5}),A=F.useRef([]),b=D=>{const j=D?.name?.replace(/\./g,"").toLowerCase()||"";return A9.some(O=>{const I=O.toLowerCase();return j===I||j.includes(I)})},w=F.useMemo(()=>{if(!o)return null;const D=o.clone(!0);h.current=new Map,A.current=[];const j=new as().setFromObject(D),O=j.getSize(new q),I=j.getCenter(new q),U=Number.isFinite(O.x)?O.x:5,V=Number.isFinite(O.y)?O.y:2,ee=Number.isFinite(O.z)?O.z:3,te=Number.isFinite(I.x)?I.x:0,ne=Number.isFinite(I.y)?I.y:0,le=Number.isFinite(I.z)?I.z:0;D.position.set(-te,-ne+V/2,-le);const de=Math.max(U,V,ee),ie=de>dT?dT/de:1;D.scale.setScalar(ie*n),_.current={width:U*1.18,depth:ee*1.2};const J=new q;let Q=0;const H=X=>{try{if(!X||!X.attributes||!X.attributes.position)return!0;const Z=X.attributes.position.array,ye=Z?.length||0;for(let be=0;be<ye;be++){const Le=Z[be];if(!Number.isFinite(Le))return!1}return X.computeBoundingSphere(),Number.isFinite(X.boundingSphere?.radius)}catch{return!1}};return D.traverse(X=>{if(X.isMesh){const Z=X.geometry;if(!H(Z)){const be=X.name||X.uuid;console.warn("[Desk GLTF] Replacing invalid mesh with placeholder:",be),A.current.push(be);const Le=.15;X.geometry=new nu(Le,Le,Le),X.material=new gp({color:"#ff6b6b",emissive:"#803333",roughness:.5,metalness:.1})}h.current.set(X.uuid,X.scale.clone()),X.castShadow=!0,X.receiveShadow=!0,(Array.isArray(X.material)?X.material:[X.material]).forEach(be=>{be?.map&&(be.map.encoding=Ml,be.map.anisotropy=8)})}if(b(X)){const Z=new q;X.getWorldPosition(Z),J.add(Z),Q+=1}}),Q>0?g.current.copy(J.divideScalar(Q)):g.current.set(0,.9,0),D},[o,n]);F.useEffect(()=>{t?.(A.current.slice())},[w,t]),ou(D=>{if(!r.current)return;u.current=Ba.lerp(u.current,a?1:0,.06);const j=Math.sin(D.clock.getElapsedTime()*1.8)*.04*u.current;if(r.current.position.y=-.35+u.current*.15,r.current.rotation.y=b9+j,p.current&&(p.current.intensity=Ba.lerp(p.current.intensity,a?1.8:0,.08)),y.current){y.current.material.opacity=Ba.lerp(y.current.material.opacity,a?.9:0,.08);const O=1+u.current*.04;y.current.scale.setScalar(O)}});const C=F.useMemo(()=>{const{width:D,depth:j}=_.current,O=Number.isFinite(D)?D:5,I=Number.isFinite(j)?j:2.5,U=O/2,V=I/2;return[[-U,-.02,-V],[-U,-.02,V],[U,-.02,V],[U,-.02,-V],[-U,-.02,-V]]},[]);if(!w)return null;const E=(D,j)=>{const O=h.current.get(D.uuid);O&&(j?D.scale.copy(O).multiplyScalar(S9):D.scale.copy(O))},R=D=>{const j=D.object?.name||"(sin nombre)";if(console.log("[Desk Hover] pointer over:",j),!b(D.object))return;E(D.object,!0),l(!0);const I=i?.(j)||(s?"":E9(j));e?.(I)},L=D=>{const j=D.object?.name||"(sin nombre)";console.log("[Desk Hover] pointer out:",j),b(D.object)&&(E(D.object,!1),l(!1),e?.(""))};return x.jsxs("group",{ref:r,position:[0,-.35,0],children:[x.jsx("pointLight",{ref:p,position:g.current,color:"#3bc9ff",distance:4.8,intensity:0,decay:2}),x.jsx(U6,{ref:y,points:C,color:"#38bdf8",lineWidth:2,transparent:!0,opacity:0,dashed:!1}),x.jsx("primitive",{object:w,dispose:null,onPointerOver:R,onPointerOut:L})]})}vL.propTypes={groupRef:Ve.shape({current:Ve.any}),onHoverChange:Ve.func,onDebugChange:Ve.func,scaleMultiplier:Ve.number,getMeshLabel:Ve.func,hasCustomLabels:Ve.bool};Fl.preload(mL);function yL({height:r="clamp(360px, 75vw, 540px)",width:e="100%",modelScale:t=1,deskLabels:n=[]}){const i=F.useRef(),[s,o]=F.useState(""),[a,l]=F.useState([]),u=()=>i.current,h=typeof e=="number"?`${e}px`:e,p=F.useMemo(()=>(Array.isArray(n)?n:[]).reduce((A,b)=>{const w=hT(b?.mesh),C=typeof b?.label=="string"?b.label.trim():"";return w&&C&&!A.has(w)&&A.set(w,C),A},new Map),[n]),g=F.useCallback(_=>{const A=hT(_);if(!A)return;const b=p.get(A);if(b)return b;for(const[w,C]of p.entries())if(w&&(A.includes(w)||w.includes(A)))return C},[p]),y=p.size>0;return x.jsxs("div",{className:"relative rounded-[32px] overflow-hidden",style:{height:r,width:h,maxWidth:"min(720px, 100%)"},children:[x.jsx("div",{className:"absolute top-4 right-4 z-10 pointer-events-auto",children:x.jsx(gL,{getObject:u,fileName:`${M9("blender desk")}.glb`})}),x.jsx("div",{className:`pointer-events-none absolute left-1/2 top-4 -translate-x-1/2 text-sm font-semibold text-white/90 bg-black/70 px-4 py-2 rounded-2xl shadow-lg leading-snug text-left max-w-[90%] sm:max-w-[70%] transition-opacity duration-200 ${s?"opacity-100":"opacity-0"}`,children:s}),a.length>0&&x.jsxs("div",{className:"absolute top-4 left-4 z-10 max-w-[280px] rounded-2xl border border-orange-300/50 bg-orange-50/90 px-3 py-2 text-xs text-orange-800 shadow",children:[x.jsx("div",{className:"font-semibold",children:"GLTF issues"}),x.jsx("div",{className:"mt-1",children:"Replaced invalid meshes:"}),x.jsx("ul",{className:"mt-1 list-disc pl-4",children:a.slice(0,6).map(_=>x.jsx("li",{className:"truncate",title:_,children:_},_))}),a.length>6&&x.jsxs("div",{className:"mt-1",children:["and ",a.length-6," more"]})]}),x.jsxs(Lg,{shadows:!0,camera:{position:[0,3.2,6.8],fov:35},dpr:[1,4],gl:{alpha:!0,preserveDrawingBuffer:!0},style:{background:"transparent",width:"100%",height:"100%"},children:[x.jsx("ambientLight",{intensity:.6}),x.jsx("directionalLight",{position:[5,7,3],intensity:1.1}),x.jsx("directionalLight",{position:[-5,2,-3],intensity:.4}),x.jsx(uL,{preset:"city"}),x.jsx(F.Suspense,{fallback:null,children:x.jsx(vL,{groupRef:i,onHoverChange:o,onDebugChange:l,scaleMultiplier:t,getMeshLabel:g,hasCustomLabels:y})}),x.jsx(ix,{makeDefault:!0,enableDamping:!0,dampingFactor:.2,rotateSpeed:.7,enablePan:!1,minAzimuthAngle:-Math.PI/8,maxAzimuthAngle:Math.PI/8,minDistance:4,maxDistance:8,minPolarAngle:Math.PI/3.5,maxPolarAngle:Math.PI/2.15,zoomSpeed:.45,target:[0,.2,0]})]})]})}yL.propTypes={height:Ve.oneOfType([Ve.number,Ve.string]),width:Ve.oneOfType([Ve.number,Ve.string]),modelScale:Ve.number,deskLabels:Ve.arrayOf(Ve.shape({mesh:Ve.string,label:Ve.string}))};Ve.string;Ve.arrayOf(Ve.shape({name:Ve.string,icon:Ve.string})),Ve.number,Ve.number,Ve.number;const xL=F.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"}),ax=F.createContext({}),F1=F.createContext(null),lx=typeof document<"u",fT=lx?F.useLayoutEffect:F.useEffect,_L=F.createContext({strict:!1});function C9(r,e,t,n){const{visualElement:i}=F.useContext(ax),s=F.useContext(_L),o=F.useContext(F1),a=F.useContext(xL).reducedMotion,l=F.useRef();n=n||s.renderer,!l.current&&n&&(l.current=n(r,{visualState:e,parent:i,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=l.current;return F.useInsertionEffect(()=>{u&&u.update(t,o)}),fT(()=>{u&&u.render()}),F.useEffect(()=>{u&&u.updateFeatures()}),(window.HandoffAppearAnimations?fT:F.useEffect)(()=>{u&&u.animationState&&u.animationState.animateChanges()}),u}function Vf(r){return typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function T9(r,e,t){return F.useCallback(n=>{n&&r.mount&&r.mount(n),e&&(n?e.mount(n):e.unmount()),t&&(typeof t=="function"?t(n):Vf(t)&&(t.current=n))},[e])}function fg(r){return typeof r=="string"||Array.isArray(r)}function cx(r){return typeof r=="object"&&typeof r.start=="function"}const O1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],U1=["initial",...O1];function ux(r){return cx(r.animate)||U1.some(e=>fg(r[e]))}function wL(r){return!!(ux(r)||r.variants)}function R9(r,e){if(ux(r)){const{initial:t,animate:n}=r;return{initial:t===!1||fg(t)?t:void 0,animate:fg(n)?n:void 0}}return r.inherit!==!1?e:{}}function P9(r){const{initial:e,animate:t}=R9(r,F.useContext(ax));return F.useMemo(()=>({initial:e,animate:t}),[pT(e),pT(t)])}function pT(r){return Array.isArray(r)?r.join(" "):r}const mT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},pg={};for(const r in mT)pg[r]={isEnabled:e=>mT[r].some(t=>!!e[t])};function I9(r){for(const e in r)pg[e]={...pg[e],...r[e]}}const bL=F.createContext({}),AL=F.createContext({}),L9=Symbol.for("motionComponentSymbol");function N9({preloadedFeatures:r,createVisualElement:e,useRender:t,useVisualState:n,Component:i}){r&&I9(r);function s(a,l){let u;const h={...F.useContext(xL),...a,layoutId:B9(a)},{isStatic:p}=h,g=P9(a),y=n(a,p);if(!p&&lx){g.visualElement=C9(i,y,h,e);const _=F.useContext(AL),A=F.useContext(_L).strict;g.visualElement&&(u=g.visualElement.loadFeatures(h,A,r,_))}return F.createElement(ax.Provider,{value:g},u&&g.visualElement?F.createElement(u,{visualElement:g.visualElement,...h}):null,t(i,a,T9(y,g.visualElement,l),y,p,g.visualElement))}const o=F.forwardRef(s);return o[L9]=i,o}function B9({layoutId:r}){const e=F.useContext(bL).id;return e&&r!==void 0?e+"-"+r:r}function k9(r){function e(n,i={}){return N9(r(n,i))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(n,i)=>(t.has(i)||t.set(i,e(i)),t.get(i))})}const D9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function j1(r){return typeof r!="string"||r.includes("-")?!1:!!(D9.indexOf(r)>-1||/[A-Z]/.test(r))}const my={};function F9(r){Object.assign(my,r)}const kg=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Kd=new Set(kg);function SL(r,{layout:e,layoutId:t}){return Kd.has(r)||r.startsWith("origin")||(e||t!==void 0)&&(!!my[r]||r==="opacity")}const Ps=r=>!!(r&&r.getVelocity),O9={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},U9=kg.length;function j9(r,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},n,i){let s="";for(let o=0;o<U9;o++){const a=kg[o];if(r[a]!==void 0){const l=O9[a]||a;s+=`${l}(${r[a]}) `}}return e&&!r.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(r,n?"":s):t&&n&&(s="none"),s}const EL=r=>e=>typeof e=="string"&&e.startsWith(r),ML=EL("--"),Vb=EL("var(--"),z9=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,H9=(r,e)=>e&&typeof r=="number"?e.transform(r):r,Yc=(r,e,t)=>Math.min(Math.max(t,r),e),Yd={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},Xm={...Yd,transform:r=>Yc(0,1,r)},jv={...Yd,default:1},Km=r=>Math.round(r*1e5)/1e5,dx=/(-)?([\d]*\.?[\d])+/g,CL=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,G9=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Dg(r){return typeof r=="string"}const Fg=r=>({test:e=>Dg(e)&&e.endsWith(r)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${r}`}),Nc=Fg("deg"),Da=Fg("%"),Kt=Fg("px"),V9=Fg("vh"),W9=Fg("vw"),gT={...Da,parse:r=>Da.parse(r)/100,transform:r=>Da.transform(r*100)},vT={...Yd,transform:Math.round},TL={borderWidth:Kt,borderTopWidth:Kt,borderRightWidth:Kt,borderBottomWidth:Kt,borderLeftWidth:Kt,borderRadius:Kt,radius:Kt,borderTopLeftRadius:Kt,borderTopRightRadius:Kt,borderBottomRightRadius:Kt,borderBottomLeftRadius:Kt,width:Kt,maxWidth:Kt,height:Kt,maxHeight:Kt,size:Kt,top:Kt,right:Kt,bottom:Kt,left:Kt,padding:Kt,paddingTop:Kt,paddingRight:Kt,paddingBottom:Kt,paddingLeft:Kt,margin:Kt,marginTop:Kt,marginRight:Kt,marginBottom:Kt,marginLeft:Kt,rotate:Nc,rotateX:Nc,rotateY:Nc,rotateZ:Nc,scale:jv,scaleX:jv,scaleY:jv,scaleZ:jv,skew:Nc,skewX:Nc,skewY:Nc,distance:Kt,translateX:Kt,translateY:Kt,translateZ:Kt,x:Kt,y:Kt,z:Kt,perspective:Kt,transformPerspective:Kt,opacity:Xm,originX:gT,originY:gT,originZ:Kt,zIndex:vT,fillOpacity:Xm,strokeOpacity:Xm,numOctaves:vT};function z1(r,e,t,n){const{style:i,vars:s,transform:o,transformOrigin:a}=r;let l=!1,u=!1,h=!0;for(const p in e){const g=e[p];if(ML(p)){s[p]=g;continue}const y=TL[p],_=H9(g,y);if(Kd.has(p)){if(l=!0,o[p]=_,!h)continue;g!==(y.default||0)&&(h=!1)}else p.startsWith("origin")?(u=!0,a[p]=_):i[p]=_}if(e.transform||(l||n?i.transform=j9(r.transform,t,h,n):i.transform&&(i.transform="none")),u){const{originX:p="50%",originY:g="50%",originZ:y=0}=a;i.transformOrigin=`${p} ${g} ${y}`}}const H1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function RL(r,e,t){for(const n in e)!Ps(e[n])&&!SL(n,t)&&(r[n]=e[n])}function J9({transformTemplate:r},e,t){return F.useMemo(()=>{const n=H1();return z1(n,e,{enableHardwareAcceleration:!t},r),Object.assign({},n.vars,n.style)},[e])}function X9(r,e,t){const n=r.style||{},i={};return RL(i,n,r),Object.assign(i,J9(r,e,t)),r.transformValues?r.transformValues(i):i}function K9(r,e,t){const n={},i=X9(r,e,t);return r.drag&&r.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(n.tabIndex=0),n.style=i,n}const Y9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function gy(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||Y9.has(r)}let PL=r=>!gy(r);function q9(r){r&&(PL=e=>e.startsWith("on")?!gy(e):r(e))}try{q9(require("@emotion/is-prop-valid").default)}catch{}function Q9(r,e,t){const n={};for(const i in r)i==="values"&&typeof r.values=="object"||(PL(i)||t===!0&&gy(i)||!e&&!gy(i)||r.draggable&&i.startsWith("onDrag"))&&(n[i]=r[i]);return n}function yT(r,e,t){return typeof r=="string"?r:Kt.transform(e+t*r)}function Z9(r,e,t){const n=yT(e,r.x,r.width),i=yT(t,r.y,r.height);return`${n} ${i}`}const $9={offset:"stroke-dashoffset",array:"stroke-dasharray"},eV={offset:"strokeDashoffset",array:"strokeDasharray"};function tV(r,e,t=1,n=0,i=!0){r.pathLength=1;const s=i?$9:eV;r[s.offset]=Kt.transform(-n);const o=Kt.transform(e),a=Kt.transform(t);r[s.array]=`${o} ${a}`}function G1(r,{attrX:e,attrY:t,attrScale:n,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},h,p,g){if(z1(r,u,h,g),p){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:y,style:_,dimensions:A}=r;y.transform&&(A&&(_.transform=y.transform),delete y.transform),A&&(i!==void 0||s!==void 0||_.transform)&&(_.transformOrigin=Z9(A,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(y.x=e),t!==void 0&&(y.y=t),n!==void 0&&(y.scale=n),o!==void 0&&tV(y,o,a,l,!1)}const IL=()=>({...H1(),attrs:{}}),V1=r=>typeof r=="string"&&r.toLowerCase()==="svg";function nV(r,e,t,n){const i=F.useMemo(()=>{const s=IL();return G1(s,e,{enableHardwareAcceleration:!1},V1(n),r.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(r.style){const s={};RL(s,r.style,r),i.style={...s,...i.style}}return i}function rV(r=!1){return(t,n,i,{latestValues:s},o)=>{const l=(j1(t)?nV:K9)(n,s,o,t),h={...Q9(n,typeof t=="string",r),...l,ref:i},{children:p}=n,g=F.useMemo(()=>Ps(p)?p.get():p,[p]);return F.createElement(t,{...h,children:g})}}const W1=r=>r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function LL(r,{style:e,vars:t},n,i){Object.assign(r.style,e,i&&i.getProjectionStyles(n));for(const s in t)r.style.setProperty(s,t[s])}const NL=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function BL(r,e,t,n){LL(r,e,void 0,n);for(const i in e.attrs)r.setAttribute(NL.has(i)?i:W1(i),e.attrs[i])}function J1(r,e){const{style:t}=r,n={};for(const i in t)(Ps(t[i])||e.style&&Ps(e.style[i])||SL(i,r))&&(n[i]=t[i]);return n}function kL(r,e){const t=J1(r,e);for(const n in r)if(Ps(r[n])||Ps(e[n])){const i=kg.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;t[i]=r[n]}return t}function X1(r,e,t,n={},i={}){return typeof e=="function"&&(e=e(t!==void 0?t:r.custom,n,i)),typeof e=="string"&&(e=r.variants&&r.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:r.custom,n,i)),e}function iV(r){const e=F.useRef(null);return e.current===null&&(e.current=r()),e.current}const vy=r=>Array.isArray(r),sV=r=>!!(r&&typeof r=="object"&&r.mix&&r.toValue),oV=r=>vy(r)?r[r.length-1]||0:r;function ey(r){const e=Ps(r)?r.get():r;return sV(e)?e.toValue():e}function aV({scrapeMotionValuesFromProps:r,createRenderState:e,onMount:t},n,i,s){const o={latestValues:lV(n,i,s,r),renderState:e()};return t&&(o.mount=a=>t(n,a,o)),o}const DL=r=>(e,t)=>{const n=F.useContext(ax),i=F.useContext(F1),s=()=>aV(r,e,n,i);return t?s():iV(s)};function lV(r,e,t,n){const i={},s=n(r,{});for(const g in s)i[g]=ey(s[g]);let{initial:o,animate:a}=r;const l=ux(r),u=wL(r);e&&u&&!l&&r.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=t?t.initial===!1:!1;h=h||o===!1;const p=h?a:o;return p&&typeof p!="boolean"&&!cx(p)&&(Array.isArray(p)?p:[p]).forEach(y=>{const _=X1(r,y);if(!_)return;const{transitionEnd:A,transition:b,...w}=_;for(const C in w){let E=w[C];if(Array.isArray(E)){const R=h?E.length-1:0;E=E[R]}E!==null&&(i[C]=E)}for(const C in A)i[C]=A[C]}),i}const cV={useVisualState:DL({scrapeMotionValuesFromProps:kL,createRenderState:IL,onMount:(r,e,{renderState:t,latestValues:n})=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}G1(t,n,{enableHardwareAcceleration:!1},V1(e.tagName),r.transformTemplate),BL(e,t)}})},uV={useVisualState:DL({scrapeMotionValuesFromProps:J1,createRenderState:H1})};function dV(r,{forwardMotionProps:e=!1},t,n){return{...j1(r)?cV:uV,preloadedFeatures:t,useRender:rV(e),createVisualElement:n,Component:r}}function El(r,e,t,n={passive:!0}){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t)}const FL=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1;function hx(r,e="page"){return{point:{x:r[e+"X"],y:r[e+"Y"]}}}const hV=r=>e=>FL(e)&&r(e,hx(e));function Tl(r,e,t,n){return El(r,e,hV(t),n)}const fV=(r,e)=>t=>e(r(t)),Gc=(...r)=>r.reduce(fV);function OL(r){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=r,t):!1}}const xT=OL("dragHorizontal"),_T=OL("dragVertical");function UL(r){let e=!1;if(r==="y")e=_T();else if(r==="x")e=xT();else{const t=xT(),n=_T();t&&n?e=()=>{t(),n()}:(t&&t(),n&&n())}return e}function jL(){const r=UL(!0);return r?(r(),!1):!0}class au{constructor(e){this.isMounted=!1,this.node=e}update(){}}const Lr=r=>r;function pV(r){let e=[],t=[],n=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(l,u=!1,h=!1)=>{const p=h&&i,g=p?e:t;return u&&o.add(l),g.indexOf(l)===-1&&(g.push(l),p&&i&&(n=e.length)),l},cancel:l=>{const u=t.indexOf(l);u!==-1&&t.splice(u,1),o.delete(l)},process:l=>{if(i){s=!0;return}if(i=!0,[e,t]=[t,e],t.length=0,n=e.length,n)for(let u=0;u<n;u++){const h=e[u];h(l),o.has(h)&&(a.schedule(h),r())}i=!1,s&&(s=!1,a.process(l))}};return a}const zv=["prepare","read","update","preRender","render","postRender"],mV=40;function gV(r,e){let t=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=zv.reduce((p,g)=>(p[g]=pV(()=>t=!0),p),{}),o=p=>s[p].process(i),a=p=>{t=!1,i.delta=n?1e3/60:Math.max(Math.min(p-i.timestamp,mV),1),i.timestamp=p,i.isProcessing=!0,zv.forEach(o),i.isProcessing=!1,t&&e&&(n=!1,r(a))},l=()=>{t=!0,n=!0,i.isProcessing||r(a)};return{schedule:zv.reduce((p,g)=>{const y=s[g];return p[g]=(_,A=!1,b=!1)=>(t||l(),y.schedule(_,A,b)),p},{}),cancel:p=>zv.forEach(g=>s[g].cancel(p)),state:i,steps:s}}const{schedule:xr,cancel:Nl,state:Ui,steps:_w}=gV(typeof requestAnimationFrame<"u"?requestAnimationFrame:Lr,!0);function wT(r,e){const t="pointer"+(e?"enter":"leave"),n="onHover"+(e?"Start":"End"),i=(s,o)=>{if(s.type==="touch"||jL())return;const a=r.getProps();r.animationState&&a.whileHover&&r.animationState.setActive("whileHover",e),a[n]&&xr.update(()=>a[n](s,o))};return Tl(r.current,t,i,{passive:!r.getProps()[n]})}class vV extends au{mount(){this.unmount=Gc(wT(this.node,!0),wT(this.node,!1))}unmount(){}}class yV extends au{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Gc(El(this.node.current,"focus",()=>this.onFocus()),El(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const zL=(r,e)=>e?r===e?!0:zL(r,e.parentElement):!1;function ww(r,e){if(!e)return;const t=new PointerEvent("pointer"+r);e(t,hx(t))}class xV extends au{constructor(){super(...arguments),this.removeStartListeners=Lr,this.removeEndListeners=Lr,this.removeAccessibleListeners=Lr,this.startPointerPress=(e,t)=>{if(this.removeEndListeners(),this.isPressing)return;const n=this.node.getProps(),s=Tl(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:h}=this.node.getProps();xr.update(()=>{zL(this.node.current,a.target)?u&&u(a,l):h&&h(a,l)})},{passive:!(n.onTap||n.onPointerUp)}),o=Tl(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Gc(s,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||ww("up",(l,u)=>{const{onTap:h}=this.node.getProps();h&&xr.update(()=>h(l,u))})};this.removeEndListeners(),this.removeEndListeners=El(this.node.current,"keyup",o),ww("down",(a,l)=>{this.startPress(a,l)})},t=El(this.node.current,"keydown",e),n=()=>{this.isPressing&&ww("cancel",(s,o)=>this.cancelPress(s,o))},i=El(this.node.current,"blur",n);this.removeAccessibleListeners=Gc(t,i)}}startPress(e,t){this.isPressing=!0;const{onTapStart:n,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&xr.update(()=>n(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!jL()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&xr.update(()=>n(e,t))}mount(){const e=this.node.getProps(),t=Tl(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=El(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Gc(t,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Wb=new WeakMap,bw=new WeakMap,_V=r=>{const e=Wb.get(r.target);e&&e(r)},wV=r=>{r.forEach(_V)};function bV({root:r,...e}){const t=r||document;bw.has(t)||bw.set(t,{});const n=bw.get(t),i=JSON.stringify(e);return n[i]||(n[i]=new IntersectionObserver(wV,{root:r,...e})),n[i]}function AV(r,e,t){const n=bV(e);return Wb.set(r,t),n.observe(r),()=>{Wb.delete(r),n.unobserve(r)}}const SV={some:0,all:1};class EV extends au{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:i="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:SV[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),g=u?h:p;g&&g(l)};return AV(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(MV(e,t))&&this.startObserver()}unmount(){}}function MV({viewport:r={}},{viewport:e={}}={}){return t=>r[t]!==e[t]}const CV={inView:{Feature:EV},tap:{Feature:xV},focus:{Feature:yV},hover:{Feature:vV}};function HL(r,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==r.length)return!1;for(let n=0;n<t;n++)if(e[n]!==r[n])return!1;return!0}function TV(r){const e={};return r.values.forEach((t,n)=>e[n]=t.get()),e}function RV(r){const e={};return r.values.forEach((t,n)=>e[n]=t.getVelocity()),e}function fx(r,e,t){const n=r.getProps();return X1(n,e,t!==void 0?t:n.custom,TV(r),RV(r))}const PV="framerAppearId",IV="data-"+W1(PV);let K1=Lr;const Ld=r=>r*1e3,Rl=r=>r/1e3,LV={current:!1},GL=r=>Array.isArray(r)&&typeof r[0]=="number";function VL(r){return!!(!r||typeof r=="string"&&WL[r]||GL(r)||Array.isArray(r)&&r.every(VL))}const Fm=([r,e,t,n])=>`cubic-bezier(${r}, ${e}, ${t}, ${n})`,WL={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Fm([0,.65,.55,1]),circOut:Fm([.55,0,1,.45]),backIn:Fm([.31,.01,.66,-.59]),backOut:Fm([.33,1.53,.69,.99])};function JL(r){if(r)return GL(r)?Fm(r):Array.isArray(r)?r.map(JL):WL[r]}function NV(r,e,t,{delay:n=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const u={[e]:t};l&&(u.offset=l);const h=JL(a);return Array.isArray(h)&&(u.easing=h),r.animate(u,{delay:n,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function BV(r,{repeat:e,repeatType:t="loop"}){const n=e&&t!=="loop"&&e%2===1?0:r.length-1;return r[n]}const XL=(r,e,t)=>(((1-3*t+3*e)*r+(3*t-6*e))*r+3*e)*r,kV=1e-7,DV=12;function FV(r,e,t,n,i){let s,o,a=0;do o=e+(t-e)/2,s=XL(o,n,i)-r,s>0?t=o:e=o;while(Math.abs(s)>kV&&++a<DV);return o}function Og(r,e,t,n){if(r===e&&t===n)return Lr;const i=s=>FV(s,0,1,r,t);return s=>s===0||s===1?s:XL(i(s),e,n)}const OV=Og(.42,0,1,1),UV=Og(0,0,.58,1),KL=Og(.42,0,.58,1),jV=r=>Array.isArray(r)&&typeof r[0]!="number",YL=r=>e=>e<=.5?r(2*e)/2:(2-r(2*(1-e)))/2,qL=r=>e=>1-r(1-e),QL=r=>1-Math.sin(Math.acos(r)),Y1=qL(QL),zV=YL(Y1),ZL=Og(.33,1.53,.69,.99),q1=qL(ZL),HV=YL(q1),GV=r=>(r*=2)<1?.5*q1(r):.5*(2-Math.pow(2,-10*(r-1))),VV={linear:Lr,easeIn:OV,easeInOut:KL,easeOut:UV,circIn:QL,circInOut:zV,circOut:Y1,backIn:q1,backInOut:HV,backOut:ZL,anticipate:GV},bT=r=>{if(Array.isArray(r)){K1(r.length===4);const[e,t,n,i]=r;return Og(e,t,n,i)}else if(typeof r=="string")return VV[r];return r},Q1=(r,e)=>t=>!!(Dg(t)&&G9.test(t)&&t.startsWith(r)||e&&Object.prototype.hasOwnProperty.call(t,e)),$L=(r,e,t)=>n=>{if(!Dg(n))return n;const[i,s,o,a]=n.match(dx);return{[r]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},WV=r=>Yc(0,255,r),Aw={...Yd,transform:r=>Math.round(WV(r))},wd={test:Q1("rgb","red"),parse:$L("red","green","blue"),transform:({red:r,green:e,blue:t,alpha:n=1})=>"rgba("+Aw.transform(r)+", "+Aw.transform(e)+", "+Aw.transform(t)+", "+Km(Xm.transform(n))+")"};function JV(r){let e="",t="",n="",i="";return r.length>5?(e=r.substring(1,3),t=r.substring(3,5),n=r.substring(5,7),i=r.substring(7,9)):(e=r.substring(1,2),t=r.substring(2,3),n=r.substring(3,4),i=r.substring(4,5),e+=e,t+=t,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const Jb={test:Q1("#"),parse:JV,transform:wd.transform},Wf={test:Q1("hsl","hue"),parse:$L("hue","saturation","lightness"),transform:({hue:r,saturation:e,lightness:t,alpha:n=1})=>"hsla("+Math.round(r)+", "+Da.transform(Km(e))+", "+Da.transform(Km(t))+", "+Km(Xm.transform(n))+")"},ts={test:r=>wd.test(r)||Jb.test(r)||Wf.test(r),parse:r=>wd.test(r)?wd.parse(r):Wf.test(r)?Wf.parse(r):Jb.parse(r),transform:r=>Dg(r)?r:r.hasOwnProperty("red")?wd.transform(r):Wf.transform(r)},yr=(r,e,t)=>-t*r+t*e+r;function Sw(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*(2/3-t)*6:r}function XV({hue:r,saturation:e,lightness:t,alpha:n}){r/=360,e/=100,t/=100;let i=0,s=0,o=0;if(!e)i=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;i=Sw(l,a,r+1/3),s=Sw(l,a,r),o=Sw(l,a,r-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:n}}const Ew=(r,e,t)=>{const n=r*r;return Math.sqrt(Math.max(0,t*(e*e-n)+n))},KV=[Jb,wd,Wf],YV=r=>KV.find(e=>e.test(r));function AT(r){const e=YV(r);let t=e.parse(r);return e===Wf&&(t=XV(t)),t}const eN=(r,e)=>{const t=AT(r),n=AT(e),i={...t};return s=>(i.red=Ew(t.red,n.red,s),i.green=Ew(t.green,n.green,s),i.blue=Ew(t.blue,n.blue,s),i.alpha=yr(t.alpha,n.alpha,s),wd.transform(i))};function qV(r){var e,t;return isNaN(r)&&Dg(r)&&(((e=r.match(dx))===null||e===void 0?void 0:e.length)||0)+(((t=r.match(CL))===null||t===void 0?void 0:t.length)||0)>0}const tN={regex:z9,countKey:"Vars",token:"${v}",parse:Lr},nN={regex:CL,countKey:"Colors",token:"${c}",parse:ts.parse},rN={regex:dx,countKey:"Numbers",token:"${n}",parse:Yd.parse};function Mw(r,{regex:e,countKey:t,token:n,parse:i}){const s=r.tokenised.match(e);s&&(r["num"+t]=s.length,r.tokenised=r.tokenised.replace(e,n),r.values.push(...s.map(i)))}function yy(r){const e=r.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&Mw(t,tN),Mw(t,nN),Mw(t,rN),t}function iN(r){return yy(r).values}function sN(r){const{values:e,numColors:t,numVars:n,tokenised:i}=yy(r),s=e.length;return o=>{let a=i;for(let l=0;l<s;l++)l<n?a=a.replace(tN.token,o[l]):l<n+t?a=a.replace(nN.token,ts.transform(o[l])):a=a.replace(rN.token,Km(o[l]));return a}}const QV=r=>typeof r=="number"?0:r;function ZV(r){const e=iN(r);return sN(r)(e.map(QV))}const qc={test:qV,parse:iN,createTransformer:sN,getAnimatableNone:ZV},oN=(r,e)=>t=>`${t>0?e:r}`;function aN(r,e){return typeof r=="number"?t=>yr(r,e,t):ts.test(r)?eN(r,e):r.startsWith("var(")?oN(r,e):cN(r,e)}const lN=(r,e)=>{const t=[...r],n=t.length,i=r.map((s,o)=>aN(s,e[o]));return s=>{for(let o=0;o<n;o++)t[o]=i[o](s);return t}},$V=(r,e)=>{const t={...r,...e},n={};for(const i in t)r[i]!==void 0&&e[i]!==void 0&&(n[i]=aN(r[i],e[i]));return i=>{for(const s in n)t[s]=n[s](i);return t}},cN=(r,e)=>{const t=qc.createTransformer(e),n=yy(r),i=yy(e);return n.numVars===i.numVars&&n.numColors===i.numColors&&n.numNumbers>=i.numNumbers?Gc(lN(n.values,i.values),t):oN(r,e)},mg=(r,e,t)=>{const n=e-r;return n===0?1:(t-r)/n},ST=(r,e)=>t=>yr(r,e,t);function eW(r){return typeof r=="number"?ST:typeof r=="string"?ts.test(r)?eN:cN:Array.isArray(r)?lN:typeof r=="object"?$V:ST}function tW(r,e,t){const n=[],i=t||eW(r[0]),s=r.length-1;for(let o=0;o<s;o++){let a=i(r[o],r[o+1]);if(e){const l=Array.isArray(e)?e[o]||Lr:e;a=Gc(l,a)}n.push(a)}return n}function uN(r,e,{clamp:t=!0,ease:n,mixer:i}={}){const s=r.length;if(K1(s===e.length),s===1)return()=>e[0];r[0]>r[s-1]&&(r=[...r].reverse(),e=[...e].reverse());const o=tW(e,n,i),a=o.length,l=u=>{let h=0;if(a>1)for(;h<r.length-2&&!(u<r[h+1]);h++);const p=mg(r[h],r[h+1],u);return o[h](p)};return t?u=>l(Yc(r[0],r[s-1],u)):l}function nW(r,e){const t=r[r.length-1];for(let n=1;n<=e;n++){const i=mg(0,e,n);r.push(yr(t,1,i))}}function rW(r){const e=[0];return nW(e,r.length-1),e}function iW(r,e){return r.map(t=>t*e)}function sW(r,e){return r.map(()=>e||KL).splice(0,r.length-1)}function xy({duration:r=300,keyframes:e,times:t,ease:n="easeInOut"}){const i=jV(n)?n.map(bT):bT(n),s={done:!1,value:e[0]},o=iW(t&&t.length===e.length?t:rW(e),r),a=uN(o,e,{ease:Array.isArray(i)?i:sW(e,i)});return{calculatedDuration:r,next:l=>(s.value=a(l),s.done=l>=r,s)}}function dN(r,e){return e?r*(1e3/e):0}const oW=5;function hN(r,e,t){const n=Math.max(e-oW,0);return dN(t-r(n),e-n)}const Cw=.001,aW=.01,lW=10,cW=.05,uW=1;function dW({duration:r=800,bounce:e=.25,velocity:t=0,mass:n=1}){let i,s,o=1-e;o=Yc(cW,uW,o),r=Yc(aW,lW,Rl(r)),o<1?(i=u=>{const h=u*o,p=h*r,g=h-t,y=Xb(u,o),_=Math.exp(-p);return Cw-g/y*_},s=u=>{const p=u*o*r,g=p*t+t,y=Math.pow(o,2)*Math.pow(u,2)*r,_=Math.exp(-p),A=Xb(Math.pow(u,2),o);return(-i(u)+Cw>0?-1:1)*((g-y)*_)/A}):(i=u=>{const h=Math.exp(-u*r),p=(u-t)*r+1;return-Cw+h*p},s=u=>{const h=Math.exp(-u*r),p=(t-u)*(r*r);return h*p});const a=5/r,l=fW(i,s,a);if(r=Ld(r),isNaN(l))return{stiffness:100,damping:10,duration:r};{const u=Math.pow(l,2)*n;return{stiffness:u,damping:o*2*Math.sqrt(n*u),duration:r}}}const hW=12;function fW(r,e,t){let n=t;for(let i=1;i<hW;i++)n=n-r(n)/e(n);return n}function Xb(r,e){return r*Math.sqrt(1-e*e)}const pW=["duration","bounce"],mW=["stiffness","damping","mass"];function ET(r,e){return e.some(t=>r[t]!==void 0)}function gW(r){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...r};if(!ET(r,mW)&&ET(r,pW)){const t=dW(r);e={...e,...t,velocity:0,mass:1},e.isResolvedFromDuration=!0}return e}function fN({keyframes:r,restDelta:e,restSpeed:t,...n}){const i=r[0],s=r[r.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:u,velocity:h,duration:p,isResolvedFromDuration:g}=gW(n),y=h?-Rl(h):0,_=l/(2*Math.sqrt(a*u)),A=s-i,b=Rl(Math.sqrt(a/u)),w=Math.abs(A)<5;t||(t=w?.01:2),e||(e=w?.005:.5);let C;if(_<1){const E=Xb(b,_);C=R=>{const L=Math.exp(-_*b*R);return s-L*((y+_*b*A)/E*Math.sin(E*R)+A*Math.cos(E*R))}}else if(_===1)C=E=>s-Math.exp(-b*E)*(A+(y+b*A)*E);else{const E=b*Math.sqrt(_*_-1);C=R=>{const L=Math.exp(-_*b*R),D=Math.min(E*R,300);return s-L*((y+_*b*A)*Math.sinh(D)+E*A*Math.cosh(D))/E}}return{calculatedDuration:g&&p||null,next:E=>{const R=C(E);if(g)o.done=E>=p;else{let L=y;E!==0&&(_<1?L=hN(C,E,R):L=0);const D=Math.abs(L)<=t,j=Math.abs(s-R)<=e;o.done=D&&j}return o.value=o.done?s:R,o}}}function MT({keyframes:r,velocity:e=0,power:t=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:h}){const p=r[0],g={done:!1,value:p},y=O=>a!==void 0&&O<a||l!==void 0&&O>l,_=O=>a===void 0?l:l===void 0||Math.abs(a-O)<Math.abs(l-O)?a:l;let A=t*e;const b=p+A,w=o===void 0?b:o(b);w!==b&&(A=w-p);const C=O=>-A*Math.exp(-O/n),E=O=>w+C(O),R=O=>{const I=C(O),U=E(O);g.done=Math.abs(I)<=u,g.value=g.done?w:U};let L,D;const j=O=>{y(g.value)&&(L=O,D=fN({keyframes:[g.value,_(g.value)],velocity:hN(E,O,g.value),damping:i,stiffness:s,restDelta:u,restSpeed:h}))};return j(0),{calculatedDuration:null,next:O=>{let I=!1;return!D&&L===void 0&&(I=!0,R(O),j(O)),L!==void 0&&O>L?D.next(O-L):(!I&&R(O),g)}}}const vW=r=>{const e=({timestamp:t})=>r(t);return{start:()=>xr.update(e,!0),stop:()=>Nl(e),now:()=>Ui.isProcessing?Ui.timestamp:performance.now()}},CT=2e4;function TT(r){let e=0;const t=50;let n=r.next(e);for(;!n.done&&e<CT;)e+=t,n=r.next(e);return e>=CT?1/0:e}const yW={decay:MT,inertia:MT,tween:xy,keyframes:xy,spring:fN};function _y({autoplay:r=!0,delay:e=0,driver:t=vW,keyframes:n,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:u,onComplete:h,onUpdate:p,...g}){let y=1,_=!1,A,b;const w=()=>{b=new Promise(X=>{A=X})};w();let C;const E=yW[i]||xy;let R;E!==xy&&typeof n[0]!="number"&&(R=uN([0,100],n,{clamp:!1}),n=[0,100]);const L=E({...g,keyframes:n});let D;a==="mirror"&&(D=E({...g,keyframes:[...n].reverse(),velocity:-(g.velocity||0)}));let j="idle",O=null,I=null,U=null;L.calculatedDuration===null&&s&&(L.calculatedDuration=TT(L));const{calculatedDuration:V}=L;let ee=1/0,te=1/0;V!==null&&(ee=V+o,te=ee*(s+1)-o);let ne=0;const le=X=>{if(I===null)return;y>0&&(I=Math.min(I,X)),y<0&&(I=Math.min(X-te/y,I)),O!==null?ne=O:ne=Math.round(X-I)*y;const Z=ne-e*(y>=0?1:-1),ye=y>=0?Z<0:Z>te;ne=Math.max(Z,0),j==="finished"&&O===null&&(ne=te);let be=ne,Le=L;if(s){const ft=ne/ee;let St=Math.floor(ft),Xe=ft%1;!Xe&&ft>=1&&(Xe=1),Xe===1&&St--,St=Math.min(St,s+1);const ce=!!(St%2);ce&&(a==="reverse"?(Xe=1-Xe,o&&(Xe-=o/ee)):a==="mirror"&&(Le=D));let ge=Yc(0,1,Xe);ne>te&&(ge=a==="reverse"&&ce?1:0),be=ge*ee}const pe=ye?{done:!1,value:n[0]}:Le.next(be);R&&(pe.value=R(pe.value));let{done:Ae}=pe;!ye&&V!==null&&(Ae=y>=0?ne>=te:ne<=0);const je=O===null&&(j==="finished"||j==="running"&&Ae);return p&&p(pe.value),je&&J(),pe},de=()=>{C&&C.stop(),C=void 0},ie=()=>{j="idle",de(),A(),w(),I=U=null},J=()=>{j="finished",h&&h(),de(),A()},Q=()=>{if(_)return;C||(C=t(le));const X=C.now();l&&l(),O!==null?I=X-O:(!I||j==="finished")&&(I=X),j==="finished"&&w(),U=I,O=null,j="running",C.start()};r&&Q();const H={then(X,Z){return b.then(X,Z)},get time(){return Rl(ne)},set time(X){X=Ld(X),ne=X,O!==null||!C||y===0?O=X:I=C.now()-X/y},get duration(){const X=L.calculatedDuration===null?TT(L):L.calculatedDuration;return Rl(X)},get speed(){return y},set speed(X){X===y||!C||(y=X,H.time=Rl(ne))},get state(){return j},play:Q,pause:()=>{j="paused",O=ne},stop:()=>{_=!0,j!=="idle"&&(j="idle",u&&u(),ie())},cancel:()=>{U!==null&&le(U),ie()},complete:()=>{j="finished"},sample:X=>(I=0,le(X))};return H}function xW(r){let e;return()=>(e===void 0&&(e=r()),e)}const _W=xW(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),wW=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Hv=10,bW=2e4,AW=(r,e)=>e.type==="spring"||r==="backgroundColor"||!VL(e.ease);function SW(r,e,{onUpdate:t,onComplete:n,...i}){if(!(_W()&&wW.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,a,l;const u=()=>{l=new Promise(C=>{a=C})};u();let{keyframes:h,duration:p=300,ease:g,times:y}=i;if(AW(e,i)){const C=_y({...i,repeat:0,delay:0});let E={done:!1,value:h[0]};const R=[];let L=0;for(;!E.done&&L<bW;)E=C.sample(L),R.push(E.value),L+=Hv;y=void 0,h=R,p=L-Hv,g="linear"}const _=NV(r.owner.current,e,h,{...i,duration:p,ease:g,times:y}),A=()=>_.cancel(),b=()=>{xr.update(A),a(),u()};return _.onfinish=()=>{r.set(BV(h,i)),n&&n(),b()},{then(C,E){return l.then(C,E)},attachTimeline(C){return _.timeline=C,_.onfinish=null,Lr},get time(){return Rl(_.currentTime||0)},set time(C){_.currentTime=Ld(C)},get speed(){return _.playbackRate},set speed(C){_.playbackRate=C},get duration(){return Rl(p)},play:()=>{o||(_.play(),Nl(A))},pause:()=>_.pause(),stop:()=>{if(o=!0,_.playState==="idle")return;const{currentTime:C}=_;if(C){const E=_y({...i,autoplay:!1});r.setWithVelocity(E.sample(C-Hv).value,E.sample(C).value,Hv)}b()},complete:()=>_.finish(),cancel:b}}function EW({keyframes:r,delay:e,onUpdate:t,onComplete:n}){const i=()=>(t&&t(r[r.length-1]),n&&n(),{time:0,speed:1,duration:0,play:Lr,pause:Lr,stop:Lr,then:s=>(s(),Promise.resolve()),cancel:Lr,complete:Lr});return e?_y({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const MW={type:"spring",stiffness:500,damping:25,restSpeed:10},CW=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),TW={type:"keyframes",duration:.8},RW={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},PW=(r,{keyframes:e})=>e.length>2?TW:Kd.has(r)?r.startsWith("scale")?CW(e[1]):MW:RW,Kb=(r,e)=>r==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(qc.test(e)||e==="0")&&!e.startsWith("url(")),IW=new Set(["brightness","contrast","saturate","opacity"]);function LW(r){const[e,t]=r.slice(0,-1).split("(");if(e==="drop-shadow")return r;const[n]=t.match(dx)||[];if(!n)return r;const i=t.replace(n,"");let s=IW.has(e)?1:0;return n!==t&&(s*=100),e+"("+s+i+")"}const NW=/([a-z-]*)\(.*?\)/g,Yb={...qc,getAnimatableNone:r=>{const e=r.match(NW);return e?e.map(LW).join(" "):r}},BW={...TL,color:ts,backgroundColor:ts,outlineColor:ts,fill:ts,stroke:ts,borderColor:ts,borderTopColor:ts,borderRightColor:ts,borderBottomColor:ts,borderLeftColor:ts,filter:Yb,WebkitFilter:Yb},Z1=r=>BW[r];function pN(r,e){let t=Z1(r);return t!==Yb&&(t=qc),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const mN=r=>/^0[^.\s]+$/.test(r);function kW(r){if(typeof r=="number")return r===0;if(r!==null)return r==="none"||r==="0"||mN(r)}function DW(r,e,t,n){const i=Kb(e,t);let s;Array.isArray(t)?s=[...t]:s=[null,t];const o=n.from!==void 0?n.from:r.get();let a;const l=[];for(let u=0;u<s.length;u++)s[u]===null&&(s[u]=u===0?o:s[u-1]),kW(s[u])&&l.push(u),typeof s[u]=="string"&&s[u]!=="none"&&s[u]!=="0"&&(a=s[u]);if(i&&l.length&&a)for(let u=0;u<l.length;u++){const h=l[u];s[h]=pN(e,a)}return s}function FW({when:r,delay:e,delayChildren:t,staggerChildren:n,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...h}){return!!Object.keys(h).length}function gN(r,e){return r[e]||r.default||r}const $1=(r,e,t,n={})=>i=>{const s=gN(n,r)||{},o=s.delay||n.delay||0;let{elapsed:a=0}=n;a=a-Ld(o);const l=DW(e,r,t,s),u=l[0],h=l[l.length-1],p=Kb(r,u),g=Kb(r,h);let y={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:_=>{e.set(_),s.onUpdate&&s.onUpdate(_)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(FW(s)||(y={...y,...PW(r,y)}),y.duration&&(y.duration=Ld(y.duration)),y.repeatDelay&&(y.repeatDelay=Ld(y.repeatDelay)),!p||!g||LV.current||s.type===!1)return EW(y);if(e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const _=SW(e,r,y);if(_)return _}return _y(y)};function wy(r){return!!(Ps(r)&&r.add)}const OW=r=>/^\-?\d*\.?\d+$/.test(r);function eS(r,e){r.indexOf(e)===-1&&r.push(e)}function tS(r,e){const t=r.indexOf(e);t>-1&&r.splice(t,1)}class nS{constructor(){this.subscriptions=[]}add(e){return eS(this.subscriptions,e),()=>tS(this.subscriptions,e)}notify(e,t,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,n);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const UW=r=>!isNaN(parseFloat(r));class jW{constructor(e,t={}){this.version="10.15.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,i=!0)=>{this.prev=this.current,this.current=n;const{delta:s,timestamp:o}=Ui;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,xr.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>xr.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=UW(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new nS);const n=this.events[e].add(t);return e==="change"?()=>{n(),xr.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,n){this.set(t),this.prev=e,this.timeDelta=n}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?dN(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function op(r,e){return new jW(r,e)}const vN=r=>e=>e.test(r),zW={test:r=>r==="auto",parse:r=>r},yN=[Yd,Kt,Da,Nc,W9,V9,zW],Mm=r=>yN.find(vN(r)),HW=[...yN,ts,qc],GW=r=>HW.find(vN(r));function VW(r,e,t){r.hasValue(e)?r.getValue(e).set(t):r.addValue(e,op(t))}function WW(r,e){const t=fx(r,e);let{transitionEnd:n={},transition:i={},...s}=t?r.makeTargetAnimatable(t,!1):{};s={...s,...n};for(const o in s){const a=oV(s[o]);VW(r,o,a)}}function JW(r,e,t){var n,i;const s=Object.keys(e).filter(a=>!r.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],u=e[l];let h=null;Array.isArray(u)&&(h=u[0]),h===null&&(h=(i=(n=t[l])!==null&&n!==void 0?n:r.readValue(l))!==null&&i!==void 0?i:e[l]),h!=null&&(typeof h=="string"&&(OW(h)||mN(h))?h=parseFloat(h):!GW(h)&&qc.test(u)&&(h=pN(l,u)),r.addValue(l,op(h,{owner:r})),t[l]===void 0&&(t[l]=h),h!==null&&r.setBaseTarget(l,h))}}function XW(r,e){return e?(e[r]||e.default||e).from:void 0}function KW(r,e,t){const n={};for(const i in r){const s=XW(i,e);if(s!==void 0)n[i]=s;else{const o=t.getValue(i);o&&(n[i]=o.get())}}return n}function YW({protectedKeys:r,needsAnimating:e},t){const n=r.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,n}function xN(r,e,{delay:t=0,transitionOverride:n,type:i}={}){let{transition:s=r.getDefaultTransition(),transitionEnd:o,...a}=r.makeTargetAnimatable(e);const l=r.getValue("willChange");n&&(s=n);const u=[],h=i&&r.animationState&&r.animationState.getState()[i];for(const p in a){const g=r.getValue(p),y=a[p];if(!g||y===void 0||h&&YW(h,p))continue;const _={delay:t,elapsed:0,...s};if(window.HandoffAppearAnimations&&!g.hasAnimated){const b=r.getProps()[IV];b&&(_.elapsed=window.HandoffAppearAnimations(b,p,g,xr))}g.start($1(p,g,y,r.shouldReduceMotion&&Kd.has(p)?{type:!1}:_));const A=g.animation;wy(l)&&(l.add(p),A.then(()=>l.remove(p))),u.push(A)}return o&&Promise.all(u).then(()=>{o&&WW(r,o)}),u}function qb(r,e,t={}){const n=fx(r,e,t.custom);let{transition:i=r.getDefaultTransition()||{}}=n||{};t.transitionOverride&&(i=t.transitionOverride);const s=n?()=>Promise.all(xN(r,n,t)):()=>Promise.resolve(),o=r.variantChildren&&r.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:p}=i;return qW(r,e,u+l,h,p,t)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,u]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>u())}else return Promise.all([s(),o(t.delay)])}function qW(r,e,t=0,n=0,i=1,s){const o=[],a=(r.variantChildren.size-1)*n,l=i===1?(u=0)=>u*n:(u=0)=>a-u*n;return Array.from(r.variantChildren).sort(QW).forEach((u,h)=>{u.notify("AnimationStart",e),o.push(qb(u,e,{...s,delay:t+l(h)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function QW(r,e){return r.sortNodePosition(e)}function ZW(r,e,t={}){r.notify("AnimationStart",e);let n;if(Array.isArray(e)){const i=e.map(s=>qb(r,s,t));n=Promise.all(i)}else if(typeof e=="string")n=qb(r,e,t);else{const i=typeof e=="function"?fx(r,e,t.custom):e;n=Promise.all(xN(r,i,t))}return n.then(()=>r.notify("AnimationComplete",e))}const $W=[...O1].reverse(),e7=O1.length;function t7(r){return e=>Promise.all(e.map(({animation:t,options:n})=>ZW(r,t,n)))}function n7(r){let e=t7(r);const t=i7();let n=!0;const i=(l,u)=>{const h=fx(r,u);if(h){const{transition:p,transitionEnd:g,...y}=h;l={...l,...y,...g}}return l};function s(l){e=l(r)}function o(l,u){const h=r.getProps(),p=r.getVariantContext(!0)||{},g=[],y=new Set;let _={},A=1/0;for(let w=0;w<e7;w++){const C=$W[w],E=t[C],R=h[C]!==void 0?h[C]:p[C],L=fg(R),D=C===u?E.isActive:null;D===!1&&(A=w);let j=R===p[C]&&R!==h[C]&&L;if(j&&n&&r.manuallyAnimateOnMount&&(j=!1),E.protectedKeys={..._},!E.isActive&&D===null||!R&&!E.prevProp||cx(R)||typeof R=="boolean")continue;const O=r7(E.prevProp,R);let I=O||C===u&&E.isActive&&!j&&L||w>A&&L;const U=Array.isArray(R)?R:[R];let V=U.reduce(i,{});D===!1&&(V={});const{prevResolvedValues:ee={}}=E,te={...ee,...V},ne=le=>{I=!0,y.delete(le),E.needsAnimating[le]=!0};for(const le in te){const de=V[le],ie=ee[le];_.hasOwnProperty(le)||(de!==ie?vy(de)&&vy(ie)?!HL(de,ie)||O?ne(le):E.protectedKeys[le]=!0:de!==void 0?ne(le):y.add(le):de!==void 0&&y.has(le)?ne(le):E.protectedKeys[le]=!0)}E.prevProp=R,E.prevResolvedValues=V,E.isActive&&(_={..._,...V}),n&&r.blockInitialAnimation&&(I=!1),I&&!j&&g.push(...U.map(le=>({animation:le,options:{type:C,...l}})))}if(y.size){const w={};y.forEach(C=>{const E=r.getBaseTarget(C);E!==void 0&&(w[C]=E)}),g.push({animation:w})}let b=!!g.length;return n&&h.initial===!1&&!r.manuallyAnimateOnMount&&(b=!1),n=!1,b?e(g):Promise.resolve()}function a(l,u,h){var p;if(t[l].isActive===u)return Promise.resolve();(p=r.variantChildren)===null||p===void 0||p.forEach(y=>{var _;return(_=y.animationState)===null||_===void 0?void 0:_.setActive(l,u)}),t[l].isActive=u;const g=o(h,l);for(const y in t)t[y].protectedKeys={};return g}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t}}function r7(r,e){return typeof e=="string"?e!==r:Array.isArray(e)?!HL(e,r):!1}function rd(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function i7(){return{animate:rd(!0),whileInView:rd(),whileHover:rd(),whileTap:rd(),whileDrag:rd(),whileFocus:rd(),exit:rd()}}class s7 extends au{constructor(e){super(e),e.animationState||(e.animationState=n7(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),cx(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let o7=0;class a7 extends au{constructor(){super(...arguments),this.id=o7++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:n??this.node.getProps().custom});t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const l7={animation:{Feature:s7},exit:{Feature:a7}},RT=(r,e)=>Math.abs(r-e);function c7(r,e){const t=RT(r.x,e.x),n=RT(r.y,e.y);return Math.sqrt(t**2+n**2)}class _N{constructor(e,t,{transformPagePoint:n}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const u=Rw(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,p=c7(u.offset,{x:0,y:0})>=3;if(!h&&!p)return;const{point:g}=u,{timestamp:y}=Ui;this.history.push({...g,timestamp:y});const{onStart:_,onMove:A}=this.handlers;h||(_&&_(this.lastMoveEvent,u),this.startEvent=this.lastMoveEvent),A&&A(this.lastMoveEvent,u)},this.handlePointerMove=(u,h)=>{this.lastMoveEvent=u,this.lastMoveEventInfo=Tw(h,this.transformPagePoint),xr.update(this.updatePoint,!0)},this.handlePointerUp=(u,h)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:p,onSessionEnd:g}=this.handlers,y=Rw(u.type==="pointercancel"?this.lastMoveEventInfo:Tw(h,this.transformPagePoint),this.history);this.startEvent&&p&&p(u,y),g&&g(u,y)},!FL(e))return;this.handlers=t,this.transformPagePoint=n;const i=hx(e),s=Tw(i,this.transformPagePoint),{point:o}=s,{timestamp:a}=Ui;this.history=[{...o,timestamp:a}];const{onSessionStart:l}=t;l&&l(e,Rw(s,this.history)),this.removeListeners=Gc(Tl(window,"pointermove",this.handlePointerMove),Tl(window,"pointerup",this.handlePointerUp),Tl(window,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Nl(this.updatePoint)}}function Tw(r,e){return e?{point:e(r.point)}:r}function PT(r,e){return{x:r.x-e.x,y:r.y-e.y}}function Rw({point:r},e){return{point:r,delta:PT(r,wN(e)),offset:PT(r,u7(e)),velocity:d7(e,.1)}}function u7(r){return r[0]}function wN(r){return r[r.length-1]}function d7(r,e){if(r.length<2)return{x:0,y:0};let t=r.length-1,n=null;const i=wN(r);for(;t>=0&&(n=r[t],!(i.timestamp-n.timestamp>Ld(e)));)t--;if(!n)return{x:0,y:0};const s=Rl(i.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-n.x)/s,y:(i.y-n.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function qs(r){return r.max-r.min}function Qb(r,e=0,t=.01){return Math.abs(r-e)<=t}function IT(r,e,t,n=.5){r.origin=n,r.originPoint=yr(e.min,e.max,r.origin),r.scale=qs(t)/qs(e),(Qb(r.scale,1,1e-4)||isNaN(r.scale))&&(r.scale=1),r.translate=yr(t.min,t.max,r.origin)-r.originPoint,(Qb(r.translate)||isNaN(r.translate))&&(r.translate=0)}function Ym(r,e,t,n){IT(r.x,e.x,t.x,n?n.originX:void 0),IT(r.y,e.y,t.y,n?n.originY:void 0)}function LT(r,e,t){r.min=t.min+e.min,r.max=r.min+qs(e)}function h7(r,e,t){LT(r.x,e.x,t.x),LT(r.y,e.y,t.y)}function NT(r,e,t){r.min=e.min-t.min,r.max=r.min+qs(e)}function qm(r,e,t){NT(r.x,e.x,t.x),NT(r.y,e.y,t.y)}function f7(r,{min:e,max:t},n){return e!==void 0&&r<e?r=n?yr(e,r,n.min):Math.max(r,e):t!==void 0&&r>t&&(r=n?yr(t,r,n.max):Math.min(r,t)),r}function BT(r,e,t){return{min:e!==void 0?r.min+e:void 0,max:t!==void 0?r.max+t-(r.max-r.min):void 0}}function p7(r,{top:e,left:t,bottom:n,right:i}){return{x:BT(r.x,t,i),y:BT(r.y,e,n)}}function kT(r,e){let t=e.min-r.min,n=e.max-r.max;return e.max-e.min<r.max-r.min&&([t,n]=[n,t]),{min:t,max:n}}function m7(r,e){return{x:kT(r.x,e.x),y:kT(r.y,e.y)}}function g7(r,e){let t=.5;const n=qs(r),i=qs(e);return i>n?t=mg(e.min,e.max-n,r.min):n>i&&(t=mg(r.min,r.max-i,e.min)),Yc(0,1,t)}function v7(r,e){const t={};return e.min!==void 0&&(t.min=e.min-r.min),e.max!==void 0&&(t.max=e.max-r.min),t}const Zb=.35;function y7(r=Zb){return r===!1?r=0:r===!0&&(r=Zb),{x:DT(r,"left","right"),y:DT(r,"top","bottom")}}function DT(r,e,t){return{min:FT(r,e),max:FT(r,t)}}function FT(r,e){return typeof r=="number"?r:r[e]||0}const OT=()=>({translate:0,scale:1,origin:0,originPoint:0}),Jf=()=>({x:OT(),y:OT()}),UT=()=>({min:0,max:0}),Vr=()=>({x:UT(),y:UT()});function Ma(r){return[r("x"),r("y")]}function bN({top:r,left:e,right:t,bottom:n}){return{x:{min:e,max:t},y:{min:r,max:n}}}function x7({x:r,y:e}){return{top:e.min,right:r.max,bottom:e.max,left:r.min}}function _7(r,e){if(!e)return r;const t=e({x:r.left,y:r.top}),n=e({x:r.right,y:r.bottom});return{top:t.y,left:t.x,bottom:n.y,right:n.x}}function Pw(r){return r===void 0||r===1}function $b({scale:r,scaleX:e,scaleY:t}){return!Pw(r)||!Pw(e)||!Pw(t)}function ld(r){return $b(r)||AN(r)||r.z||r.rotate||r.rotateX||r.rotateY}function AN(r){return jT(r.x)||jT(r.y)}function jT(r){return r&&r!=="0%"}function by(r,e,t){const n=r-t,i=e*n;return t+i}function zT(r,e,t,n,i){return i!==void 0&&(r=by(r,i,n)),by(r,t,n)+e}function eA(r,e=0,t=1,n,i){r.min=zT(r.min,e,t,n,i),r.max=zT(r.max,e,t,n,i)}function SN(r,{x:e,y:t}){eA(r.x,e.translate,e.scale,e.originPoint),eA(r.y,t.translate,t.scale,t.originPoint)}function w7(r,e,t,n=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=t[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Xf(r,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,SN(r,o)),n&&ld(s.latestValues)&&Xf(r,s.latestValues))}e.x=HT(e.x),e.y=HT(e.y)}function HT(r){return Number.isInteger(r)||r>1.0000000000001||r<.999999999999?r:1}function Bc(r,e){r.min=r.min+e,r.max=r.max+e}function GT(r,e,[t,n,i]){const s=e[i]!==void 0?e[i]:.5,o=yr(r.min,r.max,s);eA(r,e[t],e[n],o,e.scale)}const b7=["x","scaleX","originX"],A7=["y","scaleY","originY"];function Xf(r,e){GT(r.x,e,b7),GT(r.y,e,A7)}function EN(r,e){return bN(_7(r.getBoundingClientRect(),e))}function S7(r,e,t){const n=EN(r,t),{scroll:i}=e;return i&&(Bc(n.x,i.offset.x),Bc(n.y,i.offset.y)),n}const E7=new WeakMap;class M7{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Vr(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=l=>{this.stopAnimation(),t&&this.snapToCursor(hx(l,"page").point)},s=(l,u)=>{const{drag:h,dragPropagation:p,onDragStart:g}=this.getProps();if(h&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=UL(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ma(_=>{let A=this.getAxisMotionValue(_).get()||0;if(Da.test(A)){const{projection:b}=this.visualElement;if(b&&b.layout){const w=b.layout.layoutBox[_];w&&(A=qs(w)*(parseFloat(A)/100))}}this.originPoint[_]=A}),g&&xr.update(()=>g(l,u),!1,!0);const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(l,u)=>{const{dragPropagation:h,dragDirectionLock:p,onDirectionLock:g,onDrag:y}=this.getProps();if(!h&&!this.openGlobalLock)return;const{offset:_}=u;if(p&&this.currentDirection===null){this.currentDirection=C7(_),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",u.point,_),this.updateAxis("y",u.point,_),this.visualElement.render(),y&&y(l,u)},a=(l,u)=>this.stop(l,u);this.panSession=new _N(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&xr.update(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:i}=this.getProps();if(!n||!Gv(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=f7(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),{layout:n}=this.visualElement.projection||{},i=this.constraints;e&&Vf(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=p7(n.layoutBox,e):this.constraints=!1,this.elastic=y7(t),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Ma(s=>{this.getAxisMotionValue(s)&&(this.constraints[s]=v7(n.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Vf(e))return!1;const n=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=S7(n,i.root,this.visualElement.getTransformPagePoint());let o=m7(i.layout.layoutBox,s);if(t){const a=t(x7(o));this.hasMutatedConstraints=!!a,a&&(o=bN(a))}return o}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=Ma(h=>{if(!Gv(h,t,this.currentDirection))return;let p=l&&l[h]||{};o&&(p={min:0,max:0});const g=i?200:1e6,y=i?40:1e7,_={type:"inertia",velocity:n?e[h]:0,bounceStiffness:g,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(h,_)});return Promise.all(u).then(a)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return n.start($1(e,n,0,t))}stopAnimation(){Ma(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),i=n[t];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Ma(t=>{const{drag:n}=this.getProps();if(!Gv(t,n,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[t];s.set(e[t]-yr(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!Vf(t)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ma(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();i[o]=g7({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ma(o=>{if(!Gv(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(yr(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;E7.set(this.visualElement,this);const e=this.visualElement.current,t=Tl(e,"pointerdown",l=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();Vf(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),n();const o=El(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ma(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=l[h].translate,p.set(p.get()+l[h].translate))}),this.visualElement.render())}));return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Zb,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Gv(r,e,t){return(e===!0||e===r)&&(t===null||t===r)}function C7(r,e=10){let t=null;return Math.abs(r.y)>e?t="y":Math.abs(r.x)>e&&(t="x"),t}class T7 extends au{constructor(e){super(e),this.removeGroupControls=Lr,this.removeListeners=Lr,this.controls=new M7(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Lr}unmount(){this.removeGroupControls(),this.removeListeners()}}const VT=r=>(e,t)=>{r&&xr.update(()=>r(e,t))};class R7 extends au{constructor(){super(...arguments),this.removePointerDownListener=Lr}onPointerDown(e){this.session=new _N(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:VT(e),onStart:VT(t),onMove:n,onEnd:(s,o)=>{delete this.session,i&&xr.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=Tl(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function P7(){const r=F.useContext(F1);if(r===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:n}=r,i=F.useId();return F.useEffect(()=>n(i),[]),!e&&t?[!1,()=>t&&t(i)]:[!0]}const ty={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function WT(r,e){return e.max===e.min?0:r/(e.max-e.min)*100}const Cm={correct:(r,e)=>{if(!e.target)return r;if(typeof r=="string")if(Kt.test(r))r=parseFloat(r);else return r;const t=WT(r,e.target.x),n=WT(r,e.target.y);return`${t}% ${n}%`}},I7={correct:(r,{treeScale:e,projectionDelta:t})=>{const n=r,i=qc.parse(r);if(i.length>5)return n;const s=qc.createTransformer(r),o=typeof i[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const u=yr(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}};class L7 extends ns.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:i}=this.props,{projection:s}=e;F9(N7),s&&(t.group&&t.group.add(s),n&&n.register&&i&&n.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),ty.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:i,isPresent:s}=this.props,o=n.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||xr.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function MN(r){const[e,t]=P7(),n=F.useContext(bL);return ns.createElement(L7,{...r,layoutGroup:n,switchLayoutGroup:F.useContext(AL),isPresent:e,safeToRemove:t})}const N7={borderRadius:{...Cm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Cm,borderTopRightRadius:Cm,borderBottomLeftRadius:Cm,borderBottomRightRadius:Cm,boxShadow:I7},CN=["TopLeft","TopRight","BottomLeft","BottomRight"],B7=CN.length,JT=r=>typeof r=="string"?parseFloat(r):r,XT=r=>typeof r=="number"||Kt.test(r);function k7(r,e,t,n,i,s){i?(r.opacity=yr(0,t.opacity!==void 0?t.opacity:1,D7(n)),r.opacityExit=yr(e.opacity!==void 0?e.opacity:1,0,F7(n))):s&&(r.opacity=yr(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,n));for(let o=0;o<B7;o++){const a=`border${CN[o]}Radius`;let l=KT(e,a),u=KT(t,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||XT(l)===XT(u)?(r[a]=Math.max(yr(JT(l),JT(u),n),0),(Da.test(u)||Da.test(l))&&(r[a]+="%")):r[a]=u}(e.rotate||t.rotate)&&(r.rotate=yr(e.rotate||0,t.rotate||0,n))}function KT(r,e){return r[e]!==void 0?r[e]:r.borderRadius}const D7=TN(0,.5,Y1),F7=TN(.5,.95,Lr);function TN(r,e,t){return n=>n<r?0:n>e?1:t(mg(r,e,n))}function YT(r,e){r.min=e.min,r.max=e.max}function fo(r,e){YT(r.x,e.x),YT(r.y,e.y)}function qT(r,e,t,n,i){return r-=e,r=by(r,1/t,n),i!==void 0&&(r=by(r,1/i,n)),r}function O7(r,e=0,t=1,n=.5,i,s=r,o=r){if(Da.test(e)&&(e=parseFloat(e),e=yr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=yr(s.min,s.max,n);r===s&&(a-=e),r.min=qT(r.min,e,t,a,i),r.max=qT(r.max,e,t,a,i)}function QT(r,e,[t,n,i],s,o){O7(r,e[t],e[n],e[i],e.scale,s,o)}const U7=["x","scaleX","originX"],j7=["y","scaleY","originY"];function ZT(r,e,t,n){QT(r.x,e,U7,t?t.x:void 0,n?n.x:void 0),QT(r.y,e,j7,t?t.y:void 0,n?n.y:void 0)}function $T(r){return r.translate===0&&r.scale===1}function RN(r){return $T(r.x)&&$T(r.y)}function z7(r,e){return r.x.min===e.x.min&&r.x.max===e.x.max&&r.y.min===e.y.min&&r.y.max===e.y.max}function PN(r,e){return Math.round(r.x.min)===Math.round(e.x.min)&&Math.round(r.x.max)===Math.round(e.x.max)&&Math.round(r.y.min)===Math.round(e.y.min)&&Math.round(r.y.max)===Math.round(e.y.max)}function e2(r){return qs(r.x)/qs(r.y)}class H7{constructor(){this.members=[]}add(e){eS(this.members,e),e.scheduleRender()}remove(e){if(tS(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let n;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){n=s;break}}return n?(this.promote(n),!0):!1}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function t2(r,e,t){let n="";const i=r.x.translate/e.x,s=r.y.translate/e.y;if((i||s)&&(n=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:l,rotateX:u,rotateY:h}=t;l&&(n+=`rotate(${l}deg) `),u&&(n+=`rotateX(${u}deg) `),h&&(n+=`rotateY(${h}deg) `)}const o=r.x.scale*e.x,a=r.y.scale*e.y;return(o!==1||a!==1)&&(n+=`scale(${o}, ${a})`),n||"none"}const G7=(r,e)=>r.depth-e.depth;class V7{constructor(){this.children=[],this.isDirty=!1}add(e){eS(this.children,e),this.isDirty=!0}remove(e){tS(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(G7),this.isDirty=!1,this.children.forEach(e)}}function W7(r,e){const t=performance.now(),n=({timestamp:i})=>{const s=i-t;s>=e&&(Nl(n),r(s-e))};return xr.read(n,!0),()=>Nl(n)}function J7(r){window.MotionDebug&&window.MotionDebug.record(r)}function X7(r){return r instanceof SVGElement&&r.tagName!=="svg"}function K7(r,e,t){const n=Ps(r)?r:op(r);return n.start($1("",n,e,t)),n.animation}const n2=["","X","Y","Z"],r2=1e3;let Y7=0;const cd={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function IN({attachResizeListener:r,defaultParent:e,measureScroll:t,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(o={},a=e?.()){this.id=Y7++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{cd.totalNodes=cd.resolvedTargetDeltas=cd.recalculatedProjection=0,this.nodes.forEach(Z7),this.nodes.forEach(rJ),this.nodes.forEach(iJ),this.nodes.forEach($7),J7(cd)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new V7)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new nS),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=X7(o),this.instance=o;const{layoutId:l,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),r){let p;const g=()=>this.root.updateBlockedByResize=!1;r(o,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=W7(g,250),ty.hasAnimatedSinceResize&&(ty.hasAnimatedSinceResize=!1,this.nodes.forEach(s2))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||u)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:g,hasRelativeTargetChanged:y,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||h.getDefaultTransition()||cJ,{onLayoutAnimationStart:b,onLayoutAnimationComplete:w}=h.getProps(),C=!this.targetLayout||!PN(this.targetLayout,_)||y,E=!g&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||E||g&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(p,E);const R={...gN(A,"layout"),onPlay:b,onComplete:w};(h.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R)}else g||s2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Nl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(sJ),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(i2);return}this.isUpdating||this.nodes.forEach(tJ),this.isUpdating=!1,this.nodes.forEach(nJ),this.nodes.forEach(q7),this.nodes.forEach(Q7),this.clearAllSnapshots();const a=performance.now();Ui.delta=Yc(0,1e3/60,a-Ui.timestamp),Ui.timestamp=a,Ui.isProcessing=!0,_w.update.process(Ui),_w.preRender.process(Ui),_w.render.process(Ui),Ui.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(eJ),this.sharedNodes.forEach(oJ)}scheduleUpdateProjection(){xr.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){xr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Vr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:n(this.instance),offset:t(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!RN(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&(a||ld(this.latestValues)||h)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),uJ(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Vr();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Bc(a.x,l.offset.x),Bc(a.y,l.offset.y)),a}removeElementScroll(o){const a=Vr();fo(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:h,options:p}=u;if(u!==this.root&&h&&p.layoutScroll){if(h.isRoot){fo(a,o);const{scroll:g}=this.root;g&&(Bc(a.x,-g.offset.x),Bc(a.y,-g.offset.y))}Bc(a.x,h.offset.x),Bc(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const l=Vr();fo(l,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Xf(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),ld(h.latestValues)&&Xf(l,h.latestValues)}return ld(this.latestValues)&&Xf(l,this.latestValues),l}removeTransform(o){const a=Vr();fo(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!ld(u.latestValues))continue;$b(u.latestValues)&&u.updateSnapshot();const h=Vr(),p=u.measurePageBox();fo(h,p),ZT(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return ld(this.latestValues)&&ZT(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ui.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:p,layoutId:g}=this.options;if(!(!this.layout||!(p||g))){if(this.resolvedRelativeTargetAt=Ui.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Vr(),this.relativeTargetOrigin=Vr(),qm(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),fo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Vr(),this.targetWithTransforms=Vr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),h7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):fo(this.target,this.layout.layoutBox),SN(this.target,this.targetDelta)):fo(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Vr(),this.relativeTargetOrigin=Vr(),qm(this.relativeTargetOrigin,this.target,y.target),fo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}cd.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||$b(this.parent.latestValues)||AN(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Ui.timestamp&&(u=!1),u)return;const{layout:h,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||p))return;fo(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,y=this.treeScale.y;w7(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:_}=a;if(!_){this.projectionTransform&&(this.projectionDelta=Jf(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Jf(),this.projectionDeltaWithTransform=Jf());const A=this.projectionTransform;Ym(this.projectionDelta,this.layoutCorrected,_,this.latestValues),this.projectionTransform=t2(this.projectionDelta,this.treeScale),(this.projectionTransform!==A||this.treeScale.x!==g||this.treeScale.y!==y)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_)),cd.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},h={...this.latestValues},p=Jf();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const g=Vr(),y=l?l.source:void 0,_=this.layout?this.layout.source:void 0,A=y!==_,b=this.getStack(),w=!b||b.members.length<=1,C=!!(A&&!w&&this.options.crossfade===!0&&!this.path.some(lJ));this.animationProgress=0;let E;this.mixTargetDelta=R=>{const L=R/1e3;o2(p.x,o.x,L),o2(p.y,o.y,L),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(qm(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),aJ(this.relativeTarget,this.relativeTargetOrigin,g,L),E&&z7(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=Vr()),fo(E,this.relativeTarget)),A&&(this.animationValues=h,k7(h,u,this.latestValues,L,C,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Nl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=xr.update(()=>{ty.hasAnimatedSinceResize=!0,this.currentAnimation=K7(0,r2,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(r2),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:h}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&LN(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Vr();const p=qs(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+p;const g=qs(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+g}fo(a,l),Xf(a,h),Ym(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new H7),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const u={};for(let h=0;h<n2.length;h++){const p="rotate"+n2[h];l[p]&&(u[p]=l[p],o.setStaticValue(p,0))}o.render();for(const h in u)o.setStaticValue(h,u[h]);o.scheduleRender()}getProjectionStyles(o={}){var a,l;const u={};if(!this.instance||this.isSVG)return u;if(this.isVisible)u.visibility="";else return{visibility:"hidden"};const h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=ey(o.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const A={};return this.options.layoutId&&(A.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,A.pointerEvents=ey(o.pointerEvents)||""),this.hasProjected&&!ld(this.latestValues)&&(A.transform=h?h({},""):"none",this.hasProjected=!1),A}const g=p.animationValues||p.latestValues;this.applyTransformsToTarget(),u.transform=t2(this.projectionDeltaWithTransform,this.treeScale,g),h&&(u.transform=h(g,u.transform));const{x:y,y:_}=this.projectionDelta;u.transformOrigin=`${y.origin*100}% ${_.origin*100}% 0`,p.animationValues?u.opacity=p===this?(l=(a=g.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:u.opacity=p===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const A in my){if(g[A]===void 0)continue;const{correct:b,applyTo:w}=my[A],C=u.transform==="none"?g[A]:b(g[A],p);if(w){const E=w.length;for(let R=0;R<E;R++)u[w[R]]=C}else u[A]=C}return this.options.layoutId&&(u.pointerEvents=p===this?ey(o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(i2),this.root.sharedNodes.clear()}}}function q7(r){r.updateLayout()}function Q7(r){var e;const t=((e=r.resumeFrom)===null||e===void 0?void 0:e.snapshot)||r.snapshot;if(r.isLead()&&r.layout&&t&&r.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=r.layout,{animationType:s}=r.options,o=t.source!==r.layout.source;s==="size"?Ma(p=>{const g=o?t.measuredBox[p]:t.layoutBox[p],y=qs(g);g.min=n[p].min,g.max=g.min+y}):LN(s,t.layoutBox,n)&&Ma(p=>{const g=o?t.measuredBox[p]:t.layoutBox[p],y=qs(n[p]);g.max=g.min+y,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[p].max=r.relativeTarget[p].min+y)});const a=Jf();Ym(a,n,t.layoutBox);const l=Jf();o?Ym(l,r.applyTransform(i,!0),t.measuredBox):Ym(l,n,t.layoutBox);const u=!RN(a);let h=!1;if(!r.resumeFrom){const p=r.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:g,layout:y}=p;if(g&&y){const _=Vr();qm(_,t.layoutBox,g.layoutBox);const A=Vr();qm(A,n,y.layoutBox),PN(_,A)||(h=!0),p.options.layoutRoot&&(r.relativeTarget=A,r.relativeTargetOrigin=_,r.relativeParent=p)}}}r.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(r.isLead()){const{onExitComplete:n}=r.options;n&&n()}r.options.transition=void 0}function Z7(r){cd.totalNodes++,r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function $7(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function eJ(r){r.clearSnapshot()}function i2(r){r.clearMeasurements()}function tJ(r){r.isLayoutDirty=!1}function nJ(r){const{visualElement:e}=r.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),r.resetTransform()}function s2(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function rJ(r){r.resolveTargetDelta()}function iJ(r){r.calcProjection()}function sJ(r){r.resetRotation()}function oJ(r){r.removeLeadSnapshot()}function o2(r,e,t){r.translate=yr(e.translate,0,t),r.scale=yr(e.scale,1,t),r.origin=e.origin,r.originPoint=e.originPoint}function a2(r,e,t,n){r.min=yr(e.min,t.min,n),r.max=yr(e.max,t.max,n)}function aJ(r,e,t,n){a2(r.x,e.x,t.x,n),a2(r.y,e.y,t.y,n)}function lJ(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const cJ={duration:.45,ease:[.4,0,.1,1]},l2=r=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(r),c2=l2("applewebkit/")&&!l2("chrome/")?Math.round:Lr;function u2(r){r.min=c2(r.min),r.max=c2(r.max)}function uJ(r){u2(r.x),u2(r.y)}function LN(r,e,t){return r==="position"||r==="preserve-aspect"&&!Qb(e2(e),e2(t),.2)}const dJ=IN({attachResizeListener:(r,e)=>El(r,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Iw={current:void 0},NN=IN({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!Iw.current){const r=new dJ({});r.mount(window),r.setOptions({layoutScroll:!0}),Iw.current=r}return Iw.current},resetTransform:(r,e)=>{r.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),hJ={pan:{Feature:R7},drag:{Feature:T7,ProjectionNode:NN,MeasureLayout:MN}},fJ=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function pJ(r){const e=fJ.exec(r);if(!e)return[,];const[,t,n]=e;return[t,n]}function tA(r,e,t=1){const[n,i]=pJ(r);if(!n)return;const s=window.getComputedStyle(e).getPropertyValue(n);return s?s.trim():Vb(i)?tA(i,e,t+1):i}function mJ(r,{...e},t){const n=r.current;if(!(n instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),r.values.forEach(i=>{const s=i.get();if(!Vb(s))return;const o=tA(s,n);o&&i.set(o)});for(const i in e){const s=e[i];if(!Vb(s))continue;const o=tA(s,n);o&&(e[i]=o,t||(t={}),t[i]===void 0&&(t[i]=s))}return{target:e,transitionEnd:t}}const gJ=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),BN=r=>gJ.has(r),vJ=r=>Object.keys(r).some(BN),d2=r=>r===Yd||r===Kt,h2=(r,e)=>parseFloat(r.split(", ")[e]),f2=(r,e)=>(t,{transform:n})=>{if(n==="none"||!n)return 0;const i=n.match(/^matrix3d\((.+)\)$/);if(i)return h2(i[1],e);{const s=n.match(/^matrix\((.+)\)$/);return s?h2(s[1],r):0}},yJ=new Set(["x","y","z"]),xJ=kg.filter(r=>!yJ.has(r));function _J(r){const e=[];return xJ.forEach(t=>{const n=r.getValue(t);n!==void 0&&(e.push([t,n.get()]),n.set(t.startsWith("scale")?1:0))}),e.length&&r.render(),e}const ap={width:({x:r},{paddingLeft:e="0",paddingRight:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),height:({y:r},{paddingTop:e="0",paddingBottom:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),top:(r,{top:e})=>parseFloat(e),left:(r,{left:e})=>parseFloat(e),bottom:({y:r},{top:e})=>parseFloat(e)+(r.max-r.min),right:({x:r},{left:e})=>parseFloat(e)+(r.max-r.min),x:f2(4,13),y:f2(5,14)};ap.translateX=ap.x;ap.translateY=ap.y;const wJ=(r,e,t)=>{const n=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",r.display||"block"),t.forEach(u=>{a[u]=ap[u](n,s)}),e.render();const l=e.measureViewportBox();return t.forEach(u=>{const h=e.getValue(u);h&&h.jump(a[u]),r[u]=ap[u](l,s)}),r},bJ=(r,e,t={},n={})=>{e={...e},n={...n};const i=Object.keys(e).filter(BN);let s=[],o=!1;const a=[];if(i.forEach(l=>{const u=r.getValue(l);if(!r.hasValue(l))return;let h=t[l],p=Mm(h);const g=e[l];let y;if(vy(g)){const _=g.length,A=g[0]===null?1:0;h=g[A],p=Mm(h);for(let b=A;b<_&&g[b]!==null;b++)y?K1(Mm(g[b])===y):y=Mm(g[b])}else y=Mm(g);if(p!==y)if(d2(p)&&d2(y)){const _=u.get();typeof _=="string"&&u.set(parseFloat(_)),typeof g=="string"?e[l]=parseFloat(g):Array.isArray(g)&&y===Kt&&(e[l]=g.map(parseFloat))}else p?.transform&&y?.transform&&(h===0||g===0)?h===0?u.set(y.transform(h)):e[l]=p.transform(g):(o||(s=_J(r),o=!0),a.push(l),n[l]=n[l]!==void 0?n[l]:e[l],u.jump(g))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,u=wJ(e,r,a);return s.length&&s.forEach(([h,p])=>{r.getValue(h).set(p)}),r.render(),lx&&l!==null&&window.scrollTo({top:l}),{target:u,transitionEnd:n}}else return{target:e,transitionEnd:n}};function AJ(r,e,t,n){return vJ(e)?bJ(r,e,t,n):{target:e,transitionEnd:n}}const SJ=(r,e,t,n)=>{const i=mJ(r,e,n);return e=i.target,n=i.transitionEnd,AJ(r,e,t,n)},nA={current:null},kN={current:!1};function EJ(){if(kN.current=!0,!!lx)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),e=()=>nA.current=r.matches;r.addListener(e),e()}else nA.current=!1}function MJ(r,e,t){const{willChange:n}=e;for(const i in e){const s=e[i],o=t[i];if(Ps(s))r.addValue(i,s),wy(n)&&n.add(i);else if(Ps(o))r.addValue(i,op(s,{owner:r})),wy(n)&&n.remove(i);else if(o!==s)if(r.hasValue(i)){const a=r.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=r.getStaticValue(i);r.addValue(i,op(a!==void 0?a:s,{owner:r}))}}for(const i in t)e[i]===void 0&&r.removeValue(i);return e}const p2=new WeakMap,DN=Object.keys(pg),CJ=DN.length,m2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],TJ=U1.length;class RJ{constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>xr.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=t.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=ux(t),this.isVariantNode=wL(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(t,{});for(const p in h){const g=h[p];a[p]!==void 0&&Ps(g)&&(g.set(a[p],!1),wy(u)&&u.add(p))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,p2.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,n)=>this.bindToMotionValue(n,t)),kN.current||EJ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:nA.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){p2.delete(this.current),this.projection&&this.projection.unmount(),Nl(this.notifyUpdate),Nl(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const n=Kd.has(e),i=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&xr.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},n,i,s){let o,a;for(let l=0;l<CJ;l++){const u=DN[l],{isEnabled:h,Feature:p,ProjectionNode:g,MeasureLayout:y}=pg[u];g&&(o=g),h(t)&&(!this.features[u]&&p&&(this.features[u]=new p(this)),y&&(a=y))}if(!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:u,drag:h,dragConstraints:p,layoutScroll:g,layoutRoot:y}=t;this.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!h||p&&Vf(p),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:s,layoutScroll:g,layoutRoot:y})}return a}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Vr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<m2.length;n++){const i=m2[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=MJ(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const t={};for(let n=0;n<TJ;n++){const i=U1[n],s=this.props[i];(fg(s)||s===!1)&&(t[i]=s)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&t!==void 0&&(n=op(t,{owner:this}),this.addValue(e,n)),n}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props,i=typeof n=="string"||typeof n=="object"?(t=X1(this.props,n))===null||t===void 0?void 0:t[e]:void 0;if(n&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Ps(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new nS),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class FN extends RJ{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...n},{transformValues:i},s){let o=KW(n,e||{},this);if(i&&(t&&(t=i(t)),n&&(n=i(n)),o&&(o=i(o))),s){JW(this,n,o);const a=SJ(this,n,o,t);t=a.transitionEnd,n=a.target}return{transition:e,transitionEnd:t,...n}}}function PJ(r){return window.getComputedStyle(r)}class IJ extends FN{readValueFromInstance(e,t){if(Kd.has(t)){const n=Z1(t);return n&&n.default||0}else{const n=PJ(e),i=(ML(t)?n.getPropertyValue(t):n[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return EN(e,t)}build(e,t,n,i){z1(e,t,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,t){return J1(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ps(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,n,i){LL(e,t,n,i)}}class LJ extends FN{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Kd.has(t)){const n=Z1(t);return n&&n.default||0}return t=NL.has(t)?t:W1(t),e.getAttribute(t)}measureInstanceViewportBox(){return Vr()}scrapeMotionValuesFromProps(e,t){return kL(e,t)}build(e,t,n,i){G1(e,t,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,n,i){BL(e,t,n,i)}mount(e){this.isSVGTag=V1(e.tagName),super.mount(e)}}const NJ=(r,e)=>j1(r)?new LJ(e,{enableHardwareAcceleration:!1}):new IJ(e,{enableHardwareAcceleration:!0}),BJ={layout:{ProjectionNode:NN,MeasureLayout:MN}},kJ={...l7,...CV,...hJ,...BJ},zi=k9((r,e)=>dV(r,e,kJ,NJ)),tr={paddingX:"sm:px-16 px-6",paddingY:"sm:py-16 py-6",padding:"sm:px-16 px-6 sm:py-16 py-10",bodyText:"text-secondary text-[17px] leading-[30px]",paragraphSpacing:"mt-4",cardPadding:"p-5",heroHeadText:"font-black text-white lg:text-[80px] sm:text-[60px] xs:text-[50px] text-[40px] lg:leading-[98px] mt-2",heroSubText:"text-[#dfd9ff] font-medium lg:text-[30px] sm:text-[26px] xs:text-[20px] text-[16px] lg:leading-[40px]",sectionHeadText:"text-white font-black md:text-[60px] sm:text-[50px] xs:text-[40px] text-[30px]",sectionHeadTextSm:"text-white font-black md:text-[40px] sm:text-[32px] xs:text-[28px] text-[24px]",sectionSubText:"sm:text-[18px] text-[14px] text-secondary uppercase tracking-wider",resumeText:"text-white font-black md:text-[30px] sm:text-[50px] xs:text-[20px] text-[15px]",resumeSubText:"sm:text-[14px] text-[10px] text-secondary uppercase tracking-wider"};var Bf={},g2;function DJ(){if(g2)return Bf;g2=1,Object.defineProperty(Bf,"__esModule",{value:!0});var r=N2(),e=zd(),t=function(){return t=Object.assign||function(l){for(var u,h=1,p=arguments.length;h<p;h++)for(var g in u=arguments[h])Object.prototype.hasOwnProperty.call(u,g)&&(l[g]=u[g]);return l},t.apply(this,arguments)};function n(l,u){var h,p;switch(u.type){case"TYPE":return t(t({},l),{speed:u.speed,text:(h=u.payload)===null||h===void 0?void 0:h.substring(0,l.text.length+1)});case"DELAY":return t(t({},l),{speed:u.payload});case"DELETE":return t(t({},l),{speed:u.speed,text:(p=u.payload)===null||p===void 0?void 0:p.substring(0,l.text.length-1)});case"COUNT":return t(t({},l),{count:l.count+1});default:return l}}var i=function(l){var u=l.words,h=u===void 0?["Hello World!","This is","a simple Typewriter"]:u,p=l.loop,g=p===void 0?1:p,y=l.typeSpeed,_=y===void 0?80:y,A=l.deleteSpeed,b=A===void 0?50:A,w=l.delaySpeed,C=w===void 0?1500:w,E=l.onLoopDone,R=l.onType,L=l.onDelete,D=l.onDelay,j=e.useReducer(n,{speed:_,text:"",count:0}),O=j[0],I=O.speed,U=O.text,V=O.count,ee=j[1],te=e.useRef(0),ne=e.useRef(!1),le=e.useRef(!1),de=e.useRef(!1),ie=e.useRef(!1),J=e.useCallback((function(){var Q=V%h.length,H=h[Q];le.current?(ee({type:"DELETE",payload:H,speed:b}),U===""&&(le.current=!1,ee({type:"COUNT"}))):(ee({type:"TYPE",payload:H,speed:_}),de.current=!0,U===H&&(ee({type:"DELAY",payload:C}),de.current=!1,ie.current=!0,setTimeout((function(){ie.current=!1,le.current=!0}),C),g>0&&(te.current+=1,te.current/h.length===g&&(ie.current=!1,ne.current=!0)))),de.current&&R&&R(te.current),le.current&&L&&L(),ie.current&&D&&D()}),[V,C,b,g,_,h,U,R,L,D]);return e.useEffect((function(){var Q=setTimeout(J,I);return ne.current&&clearTimeout(Q),function(){return clearTimeout(Q)}}),[J,I]),e.useEffect((function(){E&&ne.current&&E()}),[E]),[U,{isType:de.current,isDelay:ie.current,isDelete:le.current,isDone:ne.current}]},s="styles-module_blinkingCursor__yugAC",o="styles-module_blinking__9VXRT";(function(l,u){u===void 0&&(u={});var h=u.insertAt;if(typeof document<"u"){var p=document.head||document.getElementsByTagName("head")[0],g=document.createElement("style");g.type="text/css",h==="top"&&p.firstChild?p.insertBefore(g,p.firstChild):p.appendChild(g),g.styleSheet?g.styleSheet.cssText=l:g.appendChild(document.createTextNode(l))}})(".styles-module_blinkingCursor__yugAC{color:inherit;font:inherit;left:3px;line-height:inherit;opacity:1;position:relative;top:0}.styles-module_blinking__9VXRT{animation-duration:.8s;animation-iteration-count:infinite;animation-name:styles-module_blink__rqfaf}@keyframes styles-module_blink__rqfaf{0%{opacity:1}to{opacity:0}}");var a=e.memo((function(l){var u=l.cursorBlinking,h=u===void 0||u,p=l.cursorStyle,g=p===void 0?"|":p,y=l.cursorColor,_=y===void 0?"inherit":y;return r.jsx("span",t({style:{color:_},className:"".concat(s," ").concat(h?o:"")},{children:g}))}));return Bf.Cursor=a,Bf.Typewriter=function(l){var u=l.words,h=u===void 0?["Hello World!","This is","a simple Typewriter"]:u,p=l.loop,g=p===void 0?1:p,y=l.typeSpeed,_=y===void 0?80:y,A=l.deleteSpeed,b=A===void 0?50:A,w=l.delaySpeed,C=w===void 0?1500:w,E=l.cursor,R=E!==void 0&&E,L=l.cursorStyle,D=L===void 0?"|":L,j=l.cursorColor,O=j===void 0?"inherit":j,I=l.cursorBlinking,U=I===void 0||I,V=l.onLoopDone,ee=l.onType,te=l.onDelay,ne=l.onDelete,le=i({words:h,loop:g,typeSpeed:_,deleteSpeed:b,delaySpeed:C,onLoopDone:V,onType:ee,onDelay:te,onDelete:ne})[0];return r.jsxs(r.Fragment,{children:[r.jsx("span",{children:le}),R&&r.jsx(a,{cursorStyle:D,cursorColor:O,cursorBlinking:U})]})},Bf.useTypewriter=i,Bf}var v2=DJ(),ON={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},y2=ns.createContext&&ns.createContext(ON),Vc=function(){return Vc=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Vc.apply(this,arguments)},FJ=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};function UN(r){return r&&r.map(function(e,t){return ns.createElement(e.tag,Vc({key:t},e.attr),UN(e.child))})}function Ug(r){return function(e){return ns.createElement(OJ,Vc({attr:Vc({},r.attr)},e),UN(r.child))}}function OJ(r){var e=function(t){var n=r.attr,i=r.size,s=r.title,o=FJ(r,["attr","size","title"]),a=i||t.size||"1em",l;return t.className&&(l=t.className),r.className&&(l=(l?l+" ":"")+r.className),ns.createElement("svg",Vc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,o,{className:l,style:Vc(Vc({color:r.color||t.color},t.style),r.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&ns.createElement("title",null,s),r.children)};return y2!==void 0?ns.createElement(y2.Consumer,null,function(t){return e(t)}):e(ON)}function UJ(r){return Ug({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"}}]})(r)}function jJ(r){return Ug({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M418.2 177.2c-5.4-1.8-10.8-3.5-16.2-5.1.9-3.7 1.7-7.4 2.5-11.1 12.3-59.6 4.2-107.5-23.1-123.3-26.3-15.1-69.2.6-112.6 38.4-4.3 3.7-8.5 7.6-12.5 11.5-2.7-2.6-5.5-5.2-8.3-7.7-45.5-40.4-91.1-57.4-118.4-41.5-26.2 15.2-34 60.3-23 116.7 1.1 5.6 2.3 11.1 3.7 16.7-6.4 1.8-12.7 3.8-18.6 5.9C38.3 196.2 0 225.4 0 255.6c0 31.2 40.8 62.5 96.3 81.5 4.5 1.5 9 3 13.6 4.3-1.5 6-2.8 11.9-4 18-10.5 55.5-2.3 99.5 23.9 114.6 27 15.6 72.4-.4 116.6-39.1 3.5-3.1 7-6.3 10.5-9.7 4.4 4.3 9 8.4 13.6 12.4 42.8 36.8 85.1 51.7 111.2 36.6 27-15.6 35.8-62.9 24.4-120.5-.9-4.4-1.9-8.9-3-13.5 3.2-.9 6.3-1.9 9.4-2.9 57.7-19.1 99.5-50 99.5-81.7 0-30.3-39.4-59.7-93.8-78.4zM282.9 92.3c37.2-32.4 71.9-45.1 87.7-36 16.9 9.7 23.4 48.9 12.8 100.4-.7 3.4-1.4 6.7-2.3 10-22.2-5-44.7-8.6-67.3-10.6-13-18.6-27.2-36.4-42.6-53.1 3.9-3.7 7.7-7.2 11.7-10.7zM167.2 307.5c5.1 8.7 10.3 17.4 15.8 25.9-15.6-1.7-31.1-4.2-46.4-7.5 4.4-14.4 9.9-29.3 16.3-44.5 4.6 8.8 9.3 17.5 14.3 26.1zm-30.3-120.3c14.4-3.2 29.7-5.8 45.6-7.8-5.3 8.3-10.5 16.8-15.4 25.4-4.9 8.5-9.7 17.2-14.2 26-6.3-14.9-11.6-29.5-16-43.6zm27.4 68.9c6.6-13.8 13.8-27.3 21.4-40.6s15.8-26.2 24.4-38.9c15-1.1 30.3-1.7 45.9-1.7s31 .6 45.9 1.7c8.5 12.6 16.6 25.5 24.3 38.7s14.9 26.7 21.7 40.4c-6.7 13.8-13.9 27.4-21.6 40.8-7.6 13.3-15.7 26.2-24.2 39-14.9 1.1-30.4 1.6-46.1 1.6s-30.9-.5-45.6-1.4c-8.7-12.7-16.9-25.7-24.6-39s-14.8-26.8-21.5-40.6zm180.6 51.2c5.1-8.8 9.9-17.7 14.6-26.7 6.4 14.5 12 29.2 16.9 44.3-15.5 3.5-31.2 6.2-47 8 5.4-8.4 10.5-17 15.5-25.6zm14.4-76.5c-4.7-8.8-9.5-17.6-14.5-26.2-4.9-8.5-10-16.9-15.3-25.2 16.1 2 31.5 4.7 45.9 8-4.6 14.8-10 29.2-16.1 43.4zM256.2 118.3c10.5 11.4 20.4 23.4 29.6 35.8-19.8-.9-39.7-.9-59.5 0 9.8-12.9 19.9-24.9 29.9-35.8zM140.2 57c16.8-9.8 54.1 4.2 93.4 39 2.5 2.2 5 4.6 7.6 7-15.5 16.7-29.8 34.5-42.9 53.1-22.6 2-45 5.5-67.2 10.4-1.3-5.1-2.4-10.3-3.5-15.5-9.4-48.4-3.2-84.9 12.6-94zm-24.5 263.6c-4.2-1.2-8.3-2.5-12.4-3.9-21.3-6.7-45.5-17.3-63-31.2-10.1-7-16.9-17.8-18.8-29.9 0-18.3 31.6-41.7 77.2-57.6 5.7-2 11.5-3.8 17.3-5.5 6.8 21.7 15 43 24.5 63.6-9.6 20.9-17.9 42.5-24.8 64.5zm116.6 98c-16.5 15.1-35.6 27.1-56.4 35.3-11.1 5.3-23.9 5.8-35.3 1.3-15.9-9.2-22.5-44.5-13.5-92 1.1-5.6 2.3-11.2 3.7-16.7 22.4 4.8 45 8.1 67.9 9.8 13.2 18.7 27.7 36.6 43.2 53.4-3.2 3.1-6.4 6.1-9.6 8.9zm24.5-24.3c-10.2-11-20.4-23.2-30.3-36.3 9.6.4 19.5.6 29.5.6 10.3 0 20.4-.2 30.4-.7-9.2 12.7-19.1 24.8-29.6 36.4zm130.7 30c-.9 12.2-6.9 23.6-16.5 31.3-15.9 9.2-49.8-2.8-86.4-34.2-4.2-3.6-8.4-7.5-12.7-11.5 15.3-16.9 29.4-34.8 42.2-53.6 22.9-1.9 45.7-5.4 68.2-10.5 1 4.1 1.9 8.2 2.7 12.2 4.9 21.6 5.7 44.1 2.5 66.3zm18.2-107.5c-2.8.9-5.6 1.8-8.5 2.6-7-21.8-15.6-43.1-25.5-63.8 9.6-20.4 17.7-41.4 24.5-62.9 5.2 1.5 10.2 3.1 15 4.7 46.6 16 79.3 39.8 79.3 58 0 19.6-34.9 44.9-84.8 61.4zm-149.7-15c25.3 0 45.8-20.5 45.8-45.8s-20.5-45.8-45.8-45.8c-25.3 0-45.8 20.5-45.8 45.8s20.5 45.8 45.8 45.8z"}}]})(r)}function zJ(r){return Ug({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"title",attr:{},child:[]},{tag:"path",attr:{d:"M11.9 1.036c-.015-.986-1.26-1.41-1.874-.637L.764 12.05C-.33 13.427.65 15.455 2.409 15.455h9.579l.113 7.51c.014.985 1.259 1.408 1.873.636l9.262-11.653c1.093-1.375.113-3.403-1.645-3.403h-9.642z"}}]})(r)}function HJ(r){return Ug({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"title",attr:{},child:[]},{tag:"path",attr:{d:"M12.001,4.8c-3.2,0-5.2,1.6-6,4.8c1.2-1.6,2.6-2.2,4.2-1.8c0.913,0.228,1.565,0.89,2.288,1.624 C13.666,10.618,15.027,12,18.001,12c3.2,0,5.2-1.6,6-4.8c-1.2,1.6-2.6,2.2-4.2,1.8c-0.913-0.228-1.565-0.89-2.288-1.624 C16.337,6.182,14.976,4.8,12.001,4.8z M6.001,12c-3.2,0-5.2,1.6-6,4.8c1.2-1.6,2.6-2.2,4.2-1.8c0.913,0.228,1.565,0.89,2.288,1.624 c1.177,1.194,2.538,2.576,5.512,2.576c3.2,0,5.2-1.6,6-4.8c-1.2,1.6-2.6,2.2-4.2,1.8c-0.913-0.228-1.565-0.89-2.288-1.624 C10.337,13.382,8.976,12,6.001,12z"}}]})(r)}function GJ(r){return Ug({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"}}]})(r)}function Ks(r,{select:e="*",orderBy:t,ascending:n=!0}={}){const[i,s]=F.useState(null),[o,a]=F.useState(!0),[l,u]=F.useState(null);return F.useEffect(()=>{let h=!1;async function p(){try{a(!0),u(null);let g=dt.from(r).select(e);t&&(g=g.order(t,{ascending:n}));const{data:y,error:_}=await g;if(_)throw _;h||s(y)}catch(g){h||u(g)}finally{h||a(!1)}}return p(),()=>{h=!0}},[r,e,t,n]),{data:i,loading:o,error:l}}function Qc(r){if(!r)return[];if(Array.isArray(r))return r;let e=null;try{e=JSON.parse(r)}catch{e=null}return Array.isArray(e)?e:typeof r=="string"?r.split(`
`).map(t=>t.trim()).filter(Boolean):[]}const VJ=()=>{const{data:r}=Ks("profile",{select:"*",orderBy:"id"}),{data:e}=Ks("hero_config",{select:"*",orderBy:"created_at"}),{blog:t}=bA(),n=Array.isArray(r)&&r.length>0?r[0]:null,i=Array.isArray(e)&&e.length>0?e[0]:null,s=Qc(i?.headline_words),o=Array.isArray(s)&&s.length>0?s:["Professional Coder.","Full Stack Developer.","UI Designer."],[a]=v2.useTypewriter({words:o,loop:!0,typeSpeed:20,deleteSpeed:10,delaySpeed:2e3}),l=n?.full_name||"Edwin",u=n?.github_url||"https://github.com/edwin-pedraza",h=n?.linkedin_url||"https://www.linkedin.com/in/edwin-y-pedraza-b-/";return x.jsxs("section",{className:"relative w-full min-h-screen mx-auto overflow-hidden",children:[x.jsxs("div",{className:`${tr.paddingX} max-w-7xl mx-auto flex flex-col lg:flex-row items-start gap-10 pt-28 pb-16`,children:[x.jsxs("div",{className:"hidden sm:flex flex-col justify-center items-center mt-4 sm:mt-12 mr-4",children:[x.jsx("div",{className:"w-5 h-5 rounded-full bg-[#915EFF]"}),x.jsx("div",{className:"w-1 h-40 sm:h-80 violet-gradient"})]}),x.jsxs("div",{className:"w-full lg:w-1/2 my-8 sm:my-14",children:[x.jsxs("h1",{className:`${tr.heroHeadText} text-white `,children:["Hi,"," I'm ","  ",x.jsxs("span",{className:"text-fourth",children:[" ",l]})]}),x.jsxs("p",{className:`${tr.heroSubText} mt-2 text-white-100`,children:[a,x.jsx(v2.Cursor,{cursorBlinking:"false",cursorStyle:"|",cursorColor:"#915EFF"})]}),x.jsxs("div",{className:"flex flex-col xl:flex-row sm:flex-col gap-8 lgl:gap-0 justify-between my-10 px-5",children:[x.jsxs("div",{children:[x.jsx("h2",{className:"text-base uppercase font-titleFont mb-4",children:"Find me in"}),x.jsxs("div",{className:"flex gap-4",children:[x.jsx("a",{className:"bannerIcon",href:u,target:"_blank",rel:"noreferrer",children:x.jsx(GJ,{})}),x.jsx("a",{className:"bannerIcon",href:h,target:"_blank",rel:"noreferrer",children:x.jsx(UJ,{className:"w-full h-full"})})]})]}),x.jsxs("div",{children:[x.jsx("h2",{className:"text-base uppercase mb-4",children:"BEST SKILL ON"}),x.jsxs("div",{className:"flex gap-4 ",children:[x.jsx("a",{className:"bannerIcon",href:"#tech",children:x.jsx(jJ,{size:100})}),x.jsx("a",{className:"bannerIcon",href:"#tech",children:x.jsx(zJ,{className:"w-full h-full"})}),x.jsx("a",{className:"bannerIcon",href:"#tech",children:x.jsx(HJ,{className:"w-full h-full"})})]})]})]})]}),x.jsx("div",{className:"w-full lg:w-1/2 my-8 sm:my-14 lg:my-10 flex justify-center",children:x.jsx(yL,{initialMode:"workspace",logoText:"EDWIN - DEV - DATA",deskLabels:t?.deskLabels})}),x.jsx(pL,{})]}),x.jsx("div",{className:"absolute xs:bottom-8 bottom-1 w-full flex justify-center items-center ",children:x.jsx("a",{href:"#about",children:x.jsx("div",{className:"w-[35px] h-[64px] rounded-3xl border-4 border-secondary flex justify-center items-start p-2",children:x.jsx(zi.div,{animate:{y:[0,24,0]},transition:{duration:1.5,repeat:1/0,repeatType:"loop"},className:"w-3 h-3 rounded-full bg-secondary mb-1"})})})})]})},WJ="/Edwin_portfolio/assets/backend-CjWBLzkI.jpeg",JJ="/Edwin_portfolio/assets/gamedev-CYaUbBRE.jpeg",XJ="/Edwin_portfolio/assets/web-Dp4ZL4F7.jpeg",KJ="/Edwin_portfolio/assets/github-BUfx7uqA.png",YJ="/Edwin_portfolio/assets/web_img-Ck-kbj4r.jpeg",qJ="data:image/svg+xml,%3csvg%20width='20'%20height='12'%20viewBox='0%200%2020%2012'%20fill='%23FFF'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9%202L19%202C19.2652%202%2019.5196%201.89464%2019.7071%201.70711C19.8946%201.51957%2020%201.26522%2020%201C20%200.734784%2019.8946%200.480429%2019.7071%200.292892C19.5196%200.105356%2019.2652%200%2019%200L9%200C8.73478%200%208.48043%200.105356%208.29289%200.292892C8.10536%200.480429%208%200.734784%208%201C8%201.26522%208.10536%201.51957%208.29289%201.70711C8.48043%201.89464%208.73478%202%209%202ZM19%2010L1%2010C0.734784%2010%200.480429%2010.1054%200.292892%2010.2929C0.105356%2010.4804%200%2010.7348%200%2011C0%2011.2652%200.105356%2011.5196%200.292892%2011.7071C0.480429%2011.8946%200.734784%2012%201%2012L19%2012C19.2652%2012%2019.5196%2011.8946%2019.7071%2011.7071C19.8946%2011.5196%2020%2011.2652%2020%2011C20%2010.7348%2019.8946%2010.4804%2019.7071%2010.2929C19.5196%2010.1054%2019.2652%2010%2019%2010V10ZM1%207L19%207C19.2652%207%2019.5196%206.89464%2019.7071%206.70711C19.8946%206.51957%2020%206.26522%2020%206C20%205.73478%2019.8946%205.48043%2019.7071%205.29289C19.5196%205.10536%2019.2652%205%2019%205L1%205C0.734784%205%200.480429%205.10536%200.292892%205.29289C0.105356%205.48043%200%205.73478%200%206C0%206.26522%200.105356%206.51957%200.292892%206.70711C0.480429%206.89464%200.734784%207%201%207Z'%20fill='%23FFFFFF'/%3e%3c/svg%3e",QJ="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='%23FFF'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M10.4099%209L16.7099%202.71C16.8982%202.5217%2017.004%202.2663%2017.004%202C17.004%201.7337%2016.8982%201.47831%2016.7099%201.29C16.5216%201.1017%2016.2662%200.995911%2015.9999%200.995911C15.7336%200.995911%2015.4782%201.1017%2015.2899%201.29L8.99994%207.59L2.70994%201.29C2.52164%201.1017%202.26624%200.995911%201.99994%200.995911C1.73364%200.995911%201.47824%201.1017%201.28994%201.29C1.10164%201.47831%200.995847%201.7337%200.995847%202C0.995847%202.2663%201.10164%202.5217%201.28994%202.71L7.58994%209L1.28994%2015.29C1.19621%2015.383%201.12182%2015.4936%201.07105%2015.6154C1.02028%2015.7373%200.994141%2015.868%200.994141%2016C0.994141%2016.132%201.02028%2016.2627%201.07105%2016.3846C1.12182%2016.5064%201.19621%2016.617%201.28994%2016.71C1.3829%2016.8037%201.4935%2016.8781%201.61536%2016.9289C1.73722%2016.9797%201.86793%2017.0058%201.99994%2017.0058C2.13195%2017.0058%202.26266%2016.9797%202.38452%2016.9289C2.50638%2016.8781%202.61698%2016.8037%202.70994%2016.71L8.99994%2010.41L15.2899%2016.71C15.3829%2016.8037%2015.4935%2016.8781%2015.6154%2016.9289C15.7372%2016.9797%2015.8679%2017.0058%2015.9999%2017.0058C16.132%2017.0058%2016.2627%2016.9797%2016.3845%2016.9289C16.5064%2016.8781%2016.617%2016.8037%2016.7099%2016.71C16.8037%2016.617%2016.8781%2016.5064%2016.9288%2016.3846C16.9796%2016.2627%2017.0057%2016.132%2017.0057%2016C17.0057%2015.868%2016.9796%2015.7373%2016.9288%2015.6154C16.8781%2015.4936%2016.8037%2015.383%2016.7099%2015.29L10.4099%209Z'%20fill='%23FFFFFF'/%3e%3c/svg%3e",ZJ="/Edwin_portfolio/assets/css-DlZE0Yf0.png",$J="/Edwin_portfolio/assets/figma-V-jssYD-.png",eX="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAYAAAA+VemSAAAACXBIWXMAAAsTAAALEwEAmpwYAAANG0lEQVR4nO2dX6xcRR2AD9QYgpYElEDv3fltqdUSHtSISNWIiIE09vbuzMKa+GBq4p/4hoIGEx/qSxOiL1T62Adj4kN90gegSXnQxAdCIiYkloQKSKKQpo3c7szeikrXzPZCW3r39uzdc2bOzPm+5Jc0t7t7dn4z386cc+bMFAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQFs415cdVqtHrJZjzqgTToudhFEn/N/8//nXxP6eAHAJIy13Oi3HnZFxqdBy3L+HJAJEZLy/e5016og1cr60vGvh3+Pf6z+DSgQIzGhZLVgjz80q7hUia/XC6mCHUIEAgfDCWS2vzCvvJRK/zrkxQILyIjFA4vIiMUDi8iIxQOLyIjFA4vIiMUDi8iIxQOLyIjFA4vIiMUDi8iIxQOLyIjFA4vIiMUDi8iIxQOLyIjFA4vIiMbSe1OVFYmgtuciLxNBKnJE/xJaucomNeu1cr7s9dm4Baie3HpieGFoHEgMkDhIDJA4SAyQOEgMkDhIDNASn5YDV8vis70NigMg4LT++eFsFibnFBMngjPzoynujSIzE0Hhsv/vo9AkOSIzE0Fj8vrtXn6WExEgMjcMa9cPyUw2RGImhMVijfjD7fGEkRmKIjtXq4c1P+kdiJIZojLR8z+9wP9+TO0iMxBAcp+W788qLxDyKCBFwRr5TlbxIjMQQENeTb1st71QpLxIjMSQ2bJ4qsVE/m/V7+SVs/FI2l/8YqDeslmecVof9ebYPp9Uhq9VTTqtTdZahwlywPA80v+etSmJn5EVn5Aln5DPjorhm2mvHB4prR8uLd1stB61Wb8YWFYmhVlxPfSuUvPNcnd4M46Vt1zsjjzmj3oot6/RcqNfP9WVHiHxAZjit9oeWN7TEntGgs2i1PB9bViSGynB9+WYseecZTs/ZGx+NLesGueCcGMphtfq6NfLfRjTcgD3xeFBssUY9HbvM03PBcBqugjUyaIq8MSRe2Ss3Oi0vxy4zEsPMDI081DR5Y0g87KkvxS4vEkOyw+ZpMdTdfqhqndxHbkCZp/6gcU4MKfS8lzTYf9t9t90SqtZGpnNX7DIjMVwV36tZrf7T/MYqvwtdnc7IycbnRXNhq7WMTNekIK+PkVbfD50fp9UvY5e73I+b4hZT2xhp1bNavR278ZUWeHnx7tA5clqWYpcbieEKRj21LyV5fQwHt94cuipX9nV2xi43EsNlONPZY7U6F7uxzRrjwR0fDF2Vp5d3bY1d7pkl1pwTZ4vrd7/mr+bGbmSbEnhp2/Wh8+VnZsUu96YkNpwTZ4fT6oEUe953Y7W3oELn7MyenTfELvemJdb0xNmQurwTgXX386Hz5h/ji13uuSQ29MTJY42632pZjd2Y5m6MWj0S42Jf7HIjcYuxPflqDvJeEFh+Hzx/Wv0idrmRuKXYfvcr1sgoduOpTmD1dsiplH5ZnhRmYrmy+WM4nQ621703J3nfC61+GvJ2W/TyInH7GPbli06Ljd1Y6gl11hnZFiKPq4MdYrW8Er/M1Ybl6nRzmTzHmq28a6HVb0Llc70la3MIy3C6eZztyRecUcPYjSNIA9Tq4VB5pSeG2mmTvBcElv9Z3flGqKZFTwy1MTLd3WvnhtHFCiqx3yVCq59stIh7lSAxVI7fhcAZ+VdsmaKGlj8Ol+WOEM2L4TRUvORLc3cUCH6PWKtfj3Tnc3U3MXpimJvRg+qzyLu+zGVz6Iz81hn1Vy/krPlHYtg0rtf9tDNyJnav19Qoncc59x5iOA0zg7zVC4zEst4pCRuqVY0z2z9Fz1uPwEgsSFwn9sHFTzojp2MPT3MWGIkFietg2O/e3vSNqHMRGIkFiZE3bYGRWJC4Cs4ub99ltXojdo/WRoGRWJAYedMWGIkFiTfV8+qFT1gj/4zdk6UaVQqMxILEM8nbX/w48jZLYCQWJEbedHvgeR+CX2/apb+2Mdl/WKvDfuNyH06rQ1arp5xWp2KPYlyN+cgSvweP1fKP2JWSQ5TNechG69/jjLzojDzhnyDb6BHI8YHiWr+Rm9VysOm3Dy0SF8Vqf3s3x2VbchQ49DRDv52MM/JYkx9csW2edom86Qkco9GOBp1Fq+X52LK6huSjEZzbJ7f5gsdOfm5RNv+pDR/XeuOjsfPrGpKPqIyW1QLD5rQFjiLxl4sPOC3HY8vqNsiHb9tFzoz3d6+zRp6Lnexco2w9pDp8XNkrNzotL8fOs5uejz/H2Ao2GNaoI7GTnHOUrYdKG23gntjvvBE7z27jfBwpcn0g32p5J3aCc47SdVF1ow3cE0/uIzcg3269XBg5P9JyZ5EbTT5/ySVK10Utx+/sKYIuahg/31NDy/EiJ1LfLDqVKFsfNRz7ZKg1qt/FGvVq7HxvFFndWrL97qOxE9qGKFsfVR/XGvXzelvQOmXQ6lDsfDdtU/basFqOxU5oG6JsfVR93FFP7au3Ba1TBi1LsfO9Ufg2X+SC0+ql2AltQ5SujwyGi34OvWtAzqeGVi8VudCmzcdiRvn6qPa4p5d3bS0C44/pGpDz6aGGRS4gcN4CjwfFliIw/pguuqRtEZghdN4C33/Lh4rAJNADnyhygYtYeQvMObDkfRHLX1KP/4uYf5StjxqOvbfeFpTiVWiVz22ktVUZoic19yhbH5UfW6tD9bag9cqgnoyd79ZM5PAwlTJfgf2sqCIwjZ6JpTObSunxE7z9RO/oyc04ytZFHcf285OLQDR5LrTN9WEGD48T5iuwf0KoCESzn0ZSeT5O6OGB/nwFXut97qt/w7vOPbEldW19oN/Dkjr5CuyfSloZdG6qq+34z3ZG/hZbVNfWJXXeZXWwQ6yWV2InPbcom/96v4d61q9fVcfMK2vU07Fz7NaJdq5Muc6q/UQOAk/iaJVDySavSmnbtCLl+6EnrrYxlc17oIb9F7/2d87rQts29rzvB4nzFHgSWqzf++jMnp03zNou/PzqJu/MYJH3IgynMxX4YmN/0+93NDLd3X7/ow33RjLd3U3fG8m2edg8DSTOV+DLQqtTk4tRl+9OeHjtb43fndAi73QYTrdA4ITDMmy+OkiMwLFFdcg7H0hMDxxbWEfPi8ShG1rZjMcWIqWwDJvpiRE4vogOeePAcJoeGHkTB4kZQtPzJg4Scw7MsDlxkJiLWJzzJg4ScxWaC1aJw7TL99/qkHesVk+VzZ9/LZuty8X8MT0yPEh8YQE1a+RXK1p9bNb8+ff497Z9oUGLvPFos8RWq7/bXvfeeXPoP8N/VuzyIG9LaeM58eQB90H31qpyOFza9lGn1Z/alUPFw/hNoU09sV/p4tTg5g9XnUP/mf6zW5LD13iet2G0QWL/kPtqb0HVlUP/2U1+kB55Myf34fTQyEN159AaGWQrr2bY3Hiy7YkD7reT4z5WlmFzOuTYE1uj7g+VP6fVA1nlTtPzJkdmPfHJcVFcEyp3/lj+mFnIa7hglSwZ9cRPhM6d3/M3eXk1PW/y5CDxsCcPhs6bv2AWu9zIC1kMp4f97u2hq9IfM3a5NxuWYXN+pNwTn9ULHwmdr8nsrBTl1QybsyXVnriO3f6uhj9mcvIaLlhlT4o9sd8nKHSeTi/v2pqUvJqetzWk1hPH2AFvZV9nZzLyGnre1pGYxHtD58dpWWpAuZEXMhhOa3UodD06o56MXu6rhGXYDClI7B+4D11T1qhXY5cbeSGb4fTIdO4KVZ3+WI2Wl3NeSK0ntlqeCVVrVsux5uaBq82QqsRG7qu78ob9zj2xy4m8kKXE/rzUz5Cqq3pXBp2bmvoUEj0vZCGxM+rZOmZmjQfFFmvU0/HLh7yQ/4Wto+OlbddXVdH+s/xnNqBcVwQXrCDLntivILna396dt3pHg87iZJnaJpaRC1aQs8ROi7VaHj+zZ+cNs5bLz692Rh5zRr0VvRzICy0eTk+Wm7VaDo5Md/f4QHHttHL4//Ov8a9t8vKxDJuhdRK/F1qdmlyM0uqw7519TP594W+non8/5IVYNHo4nUFwzgu1g8TIC4mDxPS8kDhIzLAZEgeJOeeFxEFiLlhB4iAxV5shcZCYW0WQOEjMfV5IHCRmkgYkDhIzwwoSB4mZHgmJ03aJmdsMydNWiZEXsqFtEiMvZEdbJEZeyJbcJUZeyJ5cJUZeaA25SYy80DpykRh5obWkLjHyQutJVWLkBUhUYuQFSFRi5AVIVGLkBUhUYuQFSFRi5AVIVGLkBUhUYuQFSFRi5AVIVGLkBUhUYuQFSFRi5AVIVGLkBUhUYuQFCMxoWS1YI89VIO8L/geBCgQIzHh/9zpr1BFr5PzM4ho579/rP4OKA4jISMudTsvx0gJrOe7fQ6UBNIhzfdlhtXrEajnmjDrhtNhJGHXC/83/n39N7O8JAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCE4v/t8177cNMPugAAAABJRU5ErkJggg==",tX="/Edwin_portfolio/assets/html-BlhLRGzY.png",nX="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAYAAAA+VemSAAAACXBIWXMAAAsTAAALEwEAmpwYAAAOgElEQVR4nO2dCdCVZRXHz8Pnwi4groElmijuK6m4YCqJpZmJqJla40qGWjgYZZQL5p4GJZlboKKTGzoouWSAiQsuqONY42Q1LVrZYlpZnebcy51B6uO7977LeZ/7/H4z/wGGmfve5zznf577vu+ziAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAtIW+JIqIQafkgKSGd8ARMVAMjIEpBBQCZQQmCSgEceeApIZ3wBExUAyMgSkEFAJlBCYJKARx54CkhnfAETFQDIyBKQQUAmUEJgkoBHHngKSGd8ARMVAMjIEpBBQCZQQmCSgEceeApIZ3wBExUAyMgSkEFAJlBCYJKARx54CkhnfAETFQDIyBKQQUAmUEJgkoBHHngKSGd8ARMVAMjIEpBBQCZQQmCSgEceeApIZ3wBExUAyMgSkEFAJlBCYJKARx54CkhnfAETFQDIyBKQQUAmUEJgkoBHHngKSGd8ARMVAMjIEpBBQCZQQmCSgEceeApIZ3wBExUAyMgSkEFAJlBCYJKARx54CkhnfAETFQDIyBKQQUAmUEJgkoBHHngKSGd8ARMVAMjIEpBBQCZQQmCSgEceeApIZ3wBExUAyMgSkEFAJlBCYJKARx54CkhnfAETFQDIyBKQQUAmUEJgkoBHHngKSGd8ARMVAMjIEpBBQCZQQmCSgEceeApIZ3wBExUAyMgSkEFAJlBCYJKARx54CkhnfAETFQDIyBKQQUAmUEJgkoBHHngKSGd8ARMVAMjIEpBBQCZQQmCSgEceeApIZ3wBExUAyMgSkEFAJlBCYJKARx54CkhnfAETFQDIyBKQQUAmUEJgkoBHHngKSGd8ARMVAMjIEpBBQCZQQmCSgEceeApIZ3wBExUAyMgSkEFAJlBCYJKARx54CkhnfAETFQDIyBKQQUAmUEJgkoBHHngKSGd8ARMVAMjIEpBBQCZQQmCSgEceeApIZ3wBExUAyMgSkEFAJlBCYJKARx54CkhnfAETFQDIyB/Sp+yKQJHwmlft+3l4kumiN62dmixx8WdJ9dg246LOjggUH79A4aQv3v79sg6Oab1P//pAlBL50iev9s0b8tq3bBkdTwDnjsisHA7zwj+v1viB62f9C+vbN9395rBx03JuhV00TfXFrF/kgM74DHriob+A8/EZ16YtChg7N9x+40oF/QyccGfXVhlfojMbwDHruqaOB3l4teMkV00IBijLuq1loz6PRJov94rgr9kRjeAY9dVTPwy/eJ7rZtOcZdVVtvHvSp2737IzG8DRC7qmTghdeWN+p2p769g94zEwNj4AqYMyYDz7tcdI0uX/PKCtn3mP01r/5IDG8DxK4qGPjumdUxr6yQvY6aezEGxsAVMGmVDWz3vAP7+xtWunnltGRu2f2RGN4GiF2eBranvttu4W9UWY3WHxL0tYcwMAaugFmrZuDzJ2e/fhkaN6a82WaSGt4GiF1eBv79Y6L9+/qbs1ndcCEGxsAVMGxVDDztZH9TtqIh64Ra0Sm+PxLD2wCxy8PANtNqw6H+pmxWgwcGvWZ6Wf2RGN4GiF0eBr732/nd+24/MugVU0WfuUP09cX11Ub259J5oldPE917l/oroXY//9hDgr6xpMz+SAxvA8QuDwNPOjq7cfv1qd+X/ufFnq9nr4J22LK1z990WKgtPyy/PxLD2wCxy8PANuc46/vZR29qfR3xxPE9f3ZXV9Azjwv61tNe/ZEY3gaIXWUb+O/PSs0kWa553ufba+u/losefuDqf44/eZt3fySGtwFiV9kGfnF+tmvarht/far99trIOmqz//3MGWeK/vP5KvRHYngHPHaVbeAHr8t2zQP2yD6pwh54NeZejx0d9JUFVeqPxPAOeOwq28C2cCHL9T57eD6zor46SfTa85p7CKal9kdieAc8dpVt4NuvzHZN28ius/sjMbwDHrvKNnDWd8AH7omBOwpvA8Susg38yA2S+f2v7VLZuf2RGN4Bj11lG9geGGW95qxzO7k/EsM74LGrbAPb6NmrV7Zrrjso6E/v79T+SAzvgMeusg1s2nJEtmuaRgwPtd08Oq8/EsM74LHLw8C2QCDrdU22Fc+NM6r3Kkgz9UdieAc8dnkY+KaL8t2Jw1YcPXZzp/RHYngHPHZ5GNiOTFlzjfwM3JAdZLZgduz9kRjeAY9dHgY2fXI1iwqyasetgt5yaTXmNmvL/ZEY3gGPXV4GtuWARRm4ITti1FYu/XZRTP2RGN4Bj11eBjbZrKqiTWxae62gnz406LN3xtAfieEd8NjlaeDn75LayYBlmHjl1UwPfLe6T64lNbwDHrs8DWz6+uk+e0NvNzLozZeI/vsF/z54b38khnfAY5e3gc1AB+9TvoEbsu19bruiSv2RGN4Bj13eBja9uVRqI6KXiUWCfvhD/mcDY+AKGCI2VcHApt8tzr7ZXVZ1dQX94gm+q50kNbwNELuqYmDTHx+X2mQMTxOLBN1qRNAnnDa3k9TwNkDsqpKBGycW2iiYdcVSVq3RFfSCM8p/Wi2p4W2A2FU1Azf0w+9JbSKG92h81MGhthUuBsbA7maNycAmO0zshMP8R+OD9irvvlhSw9sAsavKBl55G9j9Rvua+JCxobYxPAbGwO6mjc3ADc2fJbrLNn4mPuv44tsqqeFtgNgVk4EbWjRH9KP7Zjt1sB2FEGq7ahbbH4nhbYDYFaOBG3ruzvo9sh12VpaJN14/29EuPfdHYngbIHbFbOCVZ3JdeY7o+zcux8TnnlZcmyU1vJMndnWCgRt6d7norZeJ7jSqWAMP7B/0z08U1R+J4Z00sauTDLyyFl4rtfnNRZn4m18qqj8SwztRYlenGrghO+93/93zN/Do7Yppt6SGd4LErk43cEN3Xi26wbr5GbhXr6C/frSI/kgM78SIXakY2GR7Y+21c34mnnd5Ef2RGN5JEbtSMrDpradF99gxHwN/4YT82y6p4Z0QMcvm96ZmYNNrD0ntlMOsbT94HwyMgR0T+fXF1TSwLWIouu02LTJr27f5IAbGwE0m3M8flNrWqLboPa8kthP+sibxkQeFXN/jXnhGfXRcOq9YAy+Zm73t6w3BwBi4h0Sz0wVmnCnat3c9aU6ekF/S3Ped7El83Mfz+T7L737vQoVRmxW7DtemQ2Zte78+GBgD93CavW3vsuqE+rtn5pPENtplTeJTJ4bMo+75k6W2+fqqn33OScXeX2e9D+7qwsAYuJvXHXYEZ3erbQYPDPri/OwJvOdO2e8Dp3wm28buq5v2aNva2ESMIsxra3vt87O0vX9fDIyBV9kjeda5UjNoT8lj281kOaX+hXvy2VDdFhG0c1tgG7o3cyrDpsOCvrEkfwO/ujB7+zdaDwNj4BUJZXsS79riYvWhg4P+6Mb2Rp8xOYy+pjuuau3adj6RnR7YyjXGjs7/fvjqadkNvN1IDJy8gf+0VPRzx9Tvp9qd0jfp6FA7c7eZxH17mdQ2asvDvCZbk9vsqDt9UvvnAo/fO799qexzNt8ke9uPGIeBkzbw3ItFNxyaj5HsKfVJE0LtyfJfnnzvdWxr1JfvE71iqtR+kuZlXrumPYTqqZ3LfiC6fQ4nL9i+WLYBfNa4n35MddcFS2p4m7Bd/eyB7A9RVie7jx4xPOjwDetGK+Ia9hCsmbbuvkN+17T7zgWz24u5/QyffGx+3+XB6/LPC0kNbyNmkY2YRRm4DH3l1OYMvHiO5L5/1d671I8JbWanSNss/pZLpfZuOa/r9+1dzHtqSQ1vE2aRLUfLY06ul1o5DGzi+OJ+adi9qE12ue4CqW06d89M0RtnSO1khUP3C7ruoPyvO3E864GTN7Al9mVn+5yPm1X287yVY0dsAYFtReP9vfPSw9cXU9QlNbxH0awyE4wb45+QrcoKT6tttZ+x3t87D+00qrXihYE72MCm3/xYdP0h/onZrGwktddf7bT1xCP8v38VH17pCklqeJsvz3nPZe5vnEUXndV+O+09dB6vlLw0oeD1z5Ia3sbLU3d9q9hXS3nIJkBkffpqvzi2+IB/W1rVsA3yXc6JgTvMwCZ7elr2kSHNymZR5bVO95cP5zuppGj171vOod+SGt6GK0L2sKdPQZMvsuiqafkvKLCn2d7tkh5kSx3vb3PyCAZO0MAmq/Z2Do938jY07eRi7v1spZFNyvBun3SjQQPaWzCCgRMegRv61SP5rNnNIvs5bxMiimynzaf+8intL+goStuPDPrSveX2uaSGt8nKWCN8zfTm1gjnLZvBZBuil9XWx28t/lyjZrTWmkGnnljslj4YOBEDr7xLx6c+Vl8+WMaoa69L7Jplt9PmNl9/gc+9ca9eQT9xQNBXFvj1s6SGt7HKlu2kYdvt/L89pLLKfsIeMra1Oc5FydYP28O8Mu6P1xkQ9JQjQ23JpXe7JTW8A+4l2zvZTsjbd7f63lFZRh3bCcS2uPnFw/7t6u5p9SVT6mbOa7KLvdO1bXptR5F3ctooIA9JangHvAqyA65tIf9XJ4kefmDQnbcOtamZNrJYstpobffQm2xUX8NrezmbYefPqm/u7v39W5GZbdGc+t5hpx1VPx1hhy1DbWMEa2OjmA3oV//3ZsNDbfsgWz1kC/Bvv7K+Ftu7HdqNJDW8A46IgWJgDEwhoBAoIzBJQCGIOwckNbwDjoiBYmAMTCGgECgjMElAIYg7ByQ1vAOOiIFiYAxMIaAQKCMwSUAhiDsHJDW8A46IgWJgDEwhoBAoIzBJQCGIOwckNbwDjoiBYmAMTCGgECgjMElAIYg7ByQ1vAOOiIFiYAxMIaAQKCMwSUAhiDsHJDW8A46IgWJgDEwhoBBoiiMwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEg+/BceiofdqS/+vQAAAABJRU5ErkJggg==",rX="/Edwin_portfolio/assets/mongodb-DnU9EL9s.png",iX="/Edwin_portfolio/assets/nodejs-BctxLIqp.png",sX="/Edwin_portfolio/assets/reactjs-LYxsbuPE.png",oX="/Edwin_portfolio/assets/tailwind-CLR6e3yI.png",aX="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAYAAAA+VemSAAAACXBIWXMAAAsTAAALEwEAmpwYAAANMUlEQVR4nO2d+48V9RXAv//Gtw/balttayOpjVZr06TPqLRJ09Q+09Yaa01sapNWKqiAqCiU+MJXfSGC+ADxQa1AK0WMogJW2L3syrIvdpcL+95ln7B7mu8Y7GaD9N7ZmXvuzPl8kvOLMXsvZ87nnLkz852vcwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsfDX7BaCHOSlBpw1tBNOkAOPwAhMI6AReCYwRUAjyHYNOGtoJ5wgBx6BEZhGQCPwTGCKgEaQ7Rpw1tBOOEEOPAIjMI2ARuCZwBQBjSDbNeCsoZ1wghx4BEZgGgGNwDOBKQIaQbZrwFlDO+EEOfAIjMA0AhqBZwJTBDSCbNeAs4Z2wgly4BEYgWkENALPBKYIaATZrgFnDe2EE+TAIzAC0whoBJ4JTBHQCLJdA84a2gknyIFHYASmEdAIPBOYIqARZLsGnDW0E06QA4/ACEwjoBF4JjBFQCPIdg04a2gnnCAHHoERmEZAI/BMYIqARpDtGnDW0E44QQ48AiMwjYBG4JnAFAGNINs14KyhnXCCHHgERmAaAY3AM4EpAhpBtmvAWUM74QQ58AiMwDQCGoFnAlMENIJs14CzhnbCCXLgERiBaQQ0As8EpghoBNmuAWcN7YQT5MAjMALTCGgEnglMEdAIsl0DzhraCSfIgUdgBKYR0Ag8E5gioBFkuwacNbQTTpADj8AITCOgEXgmMEVAI8h2DThraCecIAcegRGYRkAj8ExgioBGkO0acNbQTjhBDjwCIzCNgEbgmcAUAY0g2zXgrKGdcIIceARGYBoBjcAzgSkCGkG2a8BZQzvhBDnwCIzANAIagWcCUwQ0gmzXgLOGdsIJcuARGIFpBDQCzwSmCGgE2a4BZw3thBPkwCMwAtMIaASeCUwR0AiyXQPOGtoJJ8iBR2AEphHQCDwTmCKgEWS7Bpw1tBNOkAOPwAhMI6AReCYwRUAjyHYNOGtoJ5wgBx6BEZhGQCPwTGCKgEaQ7Rpw1tBOOEEOPALnW+Dm7jEBkYUbOiqW81mLCvKjBxrl6qcPyF83FeXJt3tk275BebdtWJq6xqJj0jt0TPqG34+uI0ej/7bv8Gj0/2ypH5BndvbKfVs7ZcGLHXLlE61y0d0N8vkFtUzgJNGWE4GrQ+ALltbL3Ofa5eXafin2j6faL/uGj8nOliFZub1b5jzbJrOXN8ip82oS+Xc4a2jLicB6Ap97a100XeuLo6LNsYnJaHqv3dUrf17XJucsrkNgBM4XSQl88fIG+fue/kiaamXVm90IjMD5YqYCn3dbnWzY3SeT1evtBzz0WhcCI3C+iCvwR+bsjk5Lh8YmJCvc9cphBEbgfBFH4NOuq4kuTGWNpZuKCIzAtgU+a1FB9rQPSxa5MebZhrOG9hXmUoL7wOULfPoNtZmVN3Dt+nYERmCbAn/8L3vk9f1HJMtc/fQBBEZgmwIv23xIss4Vq1sQGIHtCXzhXfuq+v5uqfxqRTMCI7A9gbc1DEoeuOTBRgRGYFsC/+zhJskL37unAYER2JbAm/cOVOy7tHSPyT9q+qNHHu/d2im3bSxGz1U/uK0zWoUUvktrT/xVZN++Yx8CI7Adgc++ZW+qv33D395U6JdLH2uWMxcWSpbrjPm10bLEIPiOliEp9SuG1VHcB87JfeCfPNQol61sTiX+8NSBxIo8rKZJ63uGCM8yf1iOwprbtAjPT4cGkcSxPHNhQf74zAF5s+nkt7m+HPPznDW05dSOLywsJFbobzUNqf070jh9Hj82Kb9/sjW173zB0nr527ZOOXKCZ7TDcYnzN501tAXSjjwIHB7cGBxNdqFCONX93er05PXTTrPDKXb/8LEPPj/uAn9nDW2BtCMPAn9tab0kzYo34i3n8zMUOVwQC5P/o3Pi/Q1nDW2BtCMPAoeHHpIknNKWc6HKJxxxL2CFcNbQFkg78iBwuDqdJC/u7lM/Lj5mOGtoJ1w78iDwPf8+LEnyp7Vt6sfFxwxnDe2Ea0ceBH709S5JknDbTvu4+JjhrKGdcO3Ig8BP7eiRJJkd8zFGXwXhrKGdcO3Ig8DPvtMrSfLrmCuBfBWEs4Z2wrUjDwKvfrNbkiQ8XKF9XHzMcNbQTrh25EHgIFzSOyeEV/JoHxsfI5w1tBOuHXkQOOnbSIGwF5L2sfExwllDO+HakQeBw0KHNAgbk2kfH19mOGtoJ1w78iBwWKWUFkHi8Ky19nHyJYazhnbCtSMPAoc4NHBU0mJX69BJlzL6KgpnDe2Ea0deBF6f8K2k6QyMTERrjk+5trqnsbOGdsK1Iy8Cp/U7eDphc+/wWWG/Je1j5xEYgfMi8Kfm1UjP0P/W06bN7rbhaBVUtYnsrKGdcO3Ii8Ah7t6S7KKGUgjbt1y2sjn2+l0ERmAEnrKZ2YleT1MJ6oujctWaVvUr1s4a2h1TO/I0gUOEV7tq0tw9Fu1FrHWxy1lDu+C0I28Cf3LunujtmNp09I3L9S90yCfmVlZkZw3tgtOOvAkc4uLlDdF7paqBtt7xaKfBj1Xo1NpZQ7vYtCOPAoeY+1y7VBP1xVH56UNNCIzACFyqxPe/muwqpSR4/t0+mXVTMi+JP1E4a2hPCu3I6wQ+HmGvompjYGRC5jybznu3nDW0C0w78i5weNDikYTfmZXk2y9PT3jdsbOGdoFpR94FnrpmuBo3/m7qGpPv3BlvJ0IERmAzAof4wX37pXMwvVVLcRken4i9off0cNbQLirtsCRwiHMW18n2xpPvDKjByPiE/PzhmV+ldtbQLijtsCZwiPDc8rzn22VI6bHLDyPcu/7lozOT2FlDu5i0w6LAx+PcW+vklbrktyWdCeFZ7m/e/h4CIzAClypy+P1ZODgi1UJz95h85nq2F2UCM4FLljisIpq7vj3VV/OUw+Pbu2NNYWcN7dM47bB8Cn2iCIsPwmqiorLIE5MiF91d/hYvzhraBaMdCHzivJx2XY3c/NLBir7lYzqvNRxBYARG4Jk0uPBbdMnGovQP64h84V3lPeThrKE9AbWDCVxank6fXyu3//OQDI5W9tbTk2XuEOGsoS2QdiBw+fkKq5wqtd64f/hYWS8FcNbQFkg7EDhe3r66pF42FSpzD/mSMh6zdNbQFkg7EHhm+fvNymbpPpLuFetlmw8hMAIjcFpNcNaigrz63mBqAoenxZjATGAmcIpnMqdcu0c27O5LReDGzlEERmAErsTTXBtr+xMXOFwwK3UHCGcN7d+g2sFv4GTz+bkFtan8Jj51XmnPRjtraAukHQicfE6XbT6UuMBfvLGAwAiMwJV6L3XShEbLBGYCM4ErIPCXbt6buMBh90UERmAEroDA5y+pT1Te8DK+Uj/bWaMSB7SaIw+/gc+7rS5662Slti/5fzH7nobEH6cs9bOdNbQPtnbkQeCvL3t/4r3dPDSj19EkFQs3dEiS1HaMlPzZzhraB1s78iTw8dPN8CL3M0u86JNGvHNgWJIkPCBS6mc7a2gLpB15E3jqy+Hu/Neh6L5sJb/LLx5pkqRZvuVwyZ/vrKEtkHbkVeCp+xA98GpndGEp7e9x1qKCtPeOS9L8dlULAiOwTYGnvmMqLAq49LHmkm/JlBPnL6lPZWPxycnSH+II4ayhUXDVFFYEnn56Hbb5vGJVi3z6uppE3p01mNKbOuqKpV/AQuAqEAqB0xd4KuGiV6FjRNa81RNt+fndO/eddMfAcKsqbM9y5ROt0etuwil6moTX+CAwE5gJXCZh25XwgvW9B0fk3bbhaBK29oxV7FU6x0+fwz1uBEZgBM4gbzTyWll+A/MbOLNcEmPLUWcN7d+g2mHxIlZep69HYH2hEBiBx45OyjdiPhLqrKEtkHYwgauPhRs6Yh9PZw1tgbQDgauLTYX+aANyBEZgBM4YO1uGogdDZtKQnTW0J6B2MIGrg+2NR+SM+TNfeOGsoS2QdiCwPuvf6S1r/yMERmAErgIGRiaizcSTbMjOGtoTUDvyMIG/cmtd9OhjVpiYFFm7q1fOvmVv4rlw1tAWSDvyIHCIcAr64wcb5d6tnbKjZaiizyyXSvhOz/+nT751R3qv/XHW0BZIO/Ii8PQIOxn88P79smRjUbbUD1R8Y+6p1LSPyOKXizLrpuQnLgJXQbEhcPo5CPdWw6L7yx9viXZOeGlPv9QXR2X06GTiK4hausdk3a5euWZdW9mriRCYCVxWEeR1Ape7Pej3722Qq9a0yvwXO6I1uCve6IpOd7e+NxhtHTo9Nu8diNYDh/duXf9CR7Q+ePbyBvnsDcm/7aOccNbQLh6CHHgERmAaAY3AM4EpAhpBtmvAWUM74QQ58AiMwDQCGoFnAlMENIJs14CzhnbCCXLgERiBaQQ0As8EpghoBNmuAWcN7YQT5MAjMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4bf4LtvMh68AvCz8AAAAASUVORK5CYII=",lX="/Edwin_portfolio/assets/choucair-C2Laz2Im.png",cX="/Edwin_portfolio/assets/IqOuts-Bpvn2Jor.jpeg",uX="/Edwin_portfolio/assets/portfolio-CJUup-n-.png",dX="/Edwin_portfolio/assets/insutec-BH6Y2SEZ.png",hX="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAoHBwkHBgoJCAkLCwoMDxkQDw4ODx4WFxIZJCAmJSMgIyIoLTkwKCo2KyIjMkQyNjs9QEBAJjBGS0U+Sjk/QD3/2wBDAQsLCw8NDx0QEB09KSMpPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT3/wAARCAC0ALQDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwDlaWko6V9+api0UdaKDRMKKKKDRMKWkooLixaKM0UFxYUUUUFoKKKKBhRRRQAUUUUAFFFFABRRRQAtFJRQA2iiig8pSDNLSUZoLTFoozRQaJhRS0UFoSlFJS0FphRRRQaJhRRS0FpiUUUUDCiiigAooooAKKKKACiiigBtFFFK540WFFFFMtMKUUlFBomDEAEnoBmuki8AeIpoUlS1t9jqGGbkdD+FczJ/qX+hr3sXX2DwyLvbv8iz83bnG7bHnH6V5eZYuph+X2dtQcmeW/8ACuvEn/Pnb/8AgStJ/wAK68R/8+dv/wCBK1uj4tTHH/Eni/8AAk//ABNH/C2pf+gPH/4En/4muf22Zfyr+vmVeZhj4d+Ix/y6W/8A4Ej/AApf+Fd+JP8An0t//Akf4V0em/E6bUNWtLP+y44xcSrHv+0E7c55xtrqPFOut4c0c3qwC4PmrHsL7evfODWNTHY6nNU5JXY/aTTseaf8K78Sf8+kH/gSKjk8AeJIVLfYEYDslwpP5cVv/wDC2Zu+jxf+BJ/+JqzZfFW3kmVdQ097eMnmSOXzAv1GBWrr5lFXcEXz1V0PObi3ltZmhuIpIZR1SRSp/wA/So69r1fR9M8XaSHUxuXTdBcJ1U/WvHL2yn0+9mtLlds0LlGHr6H6HrXbgccsSnFq0l0NqdXm3K9FFFegbXCiiigAooooAKKKKAGUtJRSPCTFooooLTCiiig0TGyf6pvoa9zv/wDkR7n/ALBrf+iq8Mk/1TfQ17pff8iPc/8AYNb/ANFGvEzjen6/5DPDh0H0paaDwKWvaRsmaXhz/kadJ/6+0/rXpXxO/wCRTP8A18xV5p4c/wCRo0n/AK+0/rXpfxP/AORS/wC3mP8ArXi49f7bS/rqS/iR5JQDjpSUvWvcOhM774V6lILy70xmJiMfnop/hIIDY+uRVb4o2iQa7bXCjDXEPz47lTgfoaufCvSZDNdavIuIiv2eEnq3OWP04A/CqHxPvluPEMNshB+ywAPnszHdj8sV4FNr+0n7P5mcf4uhxtFFFe+ddwooooKQUUUUAFFFFADKKKKR88mFLSUUFpi0UUUGiY2X/VN9DXvkdqL7w0lqzFBPaCLcOq7kxn9a8ClH7pvoa95luJLTwg9xCQskNgZEJGcMI8g14edbU7b3f6Fo5QfCW2x/yGLz/viP/Cl/4VLbf9Bi8/74j/wrmR8RPEmB/pyf9+E/wo/4WJ4j/wCf5P8Avwn+FHsMy/nX9fIq7Ot0/wCGVvp+pWt2NUu5DbyCUKUQAkfhmui8SaCniPSvsUlxJbrvWTfGATkfWvPdG8da/e67p9tPeI0U1wqOPJUZBz6V23jnVrzRPD/2qwkWObz0TcV3cHOeK4MRTxSrwVSV5dA1uYX/AAqa2/6C93/37j/wqxZfCzTIJ1e7u7m8Qc+U+1VJ98Dn6VyP/Cw/En/P/H/4Dp/hUNz448Q3UZR9TkRT/wA8kVD+YGa7/q2Yy0dRf18jS0n1PSfEPiSw8KacIoxGbnZiC2T+Z9AK8durma9upbi5kMk0rFnY9zUbuZJWkdizt952JJP1JpK7sFgY4ZN7ye7NYLlCikpa7zZMKKKKC0wooooKQUUtFAyOikyfWjJpHzKYtFAooNEwpaSig0TEl/1TfQ17nd/N4FnxyTpjdP8ArlXhpAZcHjOa9r8GajFrfhK2Em1njj+zzrnuBg/mK8TOYtRhPomaxZ4oOgpa1fEegXPh3VGt5kbyGJMEx6SD/EelZXTknA9TXsUqkasFKDKTNLw0CfFGk4GT9sTj8816X8Tj/wAUl/28x/1rlvhx4cmvtVj1i4jZLS2yYSwx5rnjP0A/Wtb4p6oi21ppSNl2bz5R6KOF/M14uJmquPpxhrbcdzzbNFJSiveNVIKKKKC0wooooNExc0UlLQWmFFFFBomFFFFBRHSUtFI+XTClBpKKC0xaKM0UGiYVteGPEtx4avzLGDJby8TRZ6j1HoaxaKzq041YuEloy07HuFnrGheLLHyw8FwkgG63nA3A+hU9/pSJ4J8PQSCcaTa5U5+YZA/A8V4iCRgj7w6Edqe88zqVaWRlP8LOSPyzXjvKJR/h1Gl/XmaqVz2DX/HGl6HbtFbSRXd0owkMRBVD/tEcAe1eS399calfTXd3IZJpWyzHjHsKrY7DoKK78HgaeGWmr7lJhRRRXcWmKKKSloNEwooooNEwooooLTFopKWgtMKKKKCrkdFFFI+XTCiiig0TClFJRmgtMWikz70tBaYUUdaKDRMWikpaC0wooooLTCiiimaJi5ozSUZ96DRMWigUUFphRRRQWmLRRRQXciooopHywtOXG9BjPzrkHoQWAptKCQQepUggH2OaUtmaRep0Pjqzt7HxbJbWcEcMISHEca4XJ61L4tsbW18dx2ttBFHb5tf3ap8vJ5/OtHVP+Ee8T6pbavNrsVi7Knn2si5cbSMYPrWN4g1m31bxsNQhOy2WeFVZ+MqhGW/nXj0JVJcsdfdi777/AKnU+p10tvo114vl8Or4YiSLGPtkMeNvy5z0x1OK5Pw3otnfeNBp16TJaRySKAT/AKwqSFB+orT8UeO9Rk1a8g0nUU/s9sCNo0HTaM/N165rntAOlnWYzrYc2bZy6uQUf+9kc+tFClWhQlJ3V1tq36/8ApyTkjpPEEdimm3kd/4YbRriM/6JPCgdZPZmXt9aztDsILrwT4iuWtUlvInjSBtnzKTtAAPuTWydWsdL8Parbz+JG1sXMRit7cofkJGBk9vX8KxNC1C2s/BniC2kulivLho2hUE7mxjkflUUnU9g7J/Eu/l/TLbXMi3qGn2XhHQ/s93BBd69ervbzF3C2Q+n6/jVXQ7K2m8D+I7qWCN7iBoxHIyDcvC9DVq71TT/ABToAOpXMVprNkNscspwLlfQnHX+tU9F1G0t/BPiCzmnjS5uWjMMRPzOAF6flWq9p7J81+bmV/v6eVir6jrextT8Nrq+8hDdDUPLExX5wuRxn0rBtVDX1qjqGVriJWUjIILgYrqdFl0y78DXGlXmr29hNJe+cN+WIUY7d+lYd1aWem6xZra6pBewiSKR5kUqFw4J/QVtRm1KpB3vd237FIu+OLS3sfFl3BaQpBAgj2oi4A+UVoeBrG2ubDWZ5tJi1Oa3SMxQMgJY/NwCan8T2uh65rdzqUXiazTeo2w7CxJVcdfwqr4L1CztdN1qCfVY9PmukiSKYk5BG7JHHvXPKpKeDUVe6tfRlJ6lXxUz/Z7ff4ZGhks2GAGZePati6udG0TQ9D87w/aXjXdqJJJcBWyAB6c9awvEgXyICPEn9sEs3yfNmPjrya2L2PRdb0nQo5/EVrZvaWixyJjc3QZ/lSl/Dp817Xd7c3/Dl3MvxPpFjbWunapo+5dP1BCUjJz5bDqB7f1zXP10PijV7G4t7DSdH3HT9PQhJGGDIx6ke1c7Xo4Ln9iue/z7dCosWijNFdRqmLRRiigq5FRRRSPmQpaSigdxxYnvSZxRRQVFhS56UlFBopC54wQCPSjdwBTaWg0TFB6fr70DikpaC0xefU/nRk9uKSikWmLknqTS5OMZptFM0THZPrRkkEZPNJRQaJhRRRTLTClzSUZoNEx1FJmigfMR0UUUj54KKKKAClpKKAFooooLTEpaKKDRMSloooLTFzRSUCg0TFooooLTClpKKDRMWiiigtMKKKKZaYUUUUFXG0UUUjwgooooAKKKKACiiigaAUUUUFoKKKKDRBQKKKDRC0UUUFoKWiigtCUtFFBogooopotBRRRQUf/Z",fX="/Edwin_portfolio/assets/ECCI-DkHNS5TL.jpeg",pX=[{id:"about",title:"About"},{id:"resume",title:"Resume"},{id:"projects",title:"Projects"},{id:"contact",title:"Contact"},{id:"service",title:"Service"}],rS=[{title:"Web Developer",slug:"web-developer",icon:XJ,shortDescription:"Responsive interfaces crafted with accessibility, performance, and maintainability in mind.",focusAreas:["Pixel-perfect UI implementation with React, Tailwind, and Framer Motion animations.","Design system stewardship to keep typography, spacing, and colors consistent.","Performance budgets, Core Web Vitals tracking, and Lighthouse-driven optimizations."],toolset:["React","Vite","Tailwind CSS","TypeScript","Framer Motion","Storybook"]},{title:"Backend Developer",slug:"backend-developer",icon:WJ,shortDescription:"Robust APIs, secure data flows, and cloud-native deployments that scale.",focusAreas:["REST and GraphQL API design with proper validation, rate limiting, and observability.","Database schema design plus migration strategies across PostgreSQL, MongoDB, and Supabase.","CI/CD pipelines that automate testing, container builds, and blue/green deployments."],toolset:["Node.js","Express","Supabase","PostgreSQL","MongoDB","Docker"]},{title:"Game Developer",slug:"game-developer",icon:JJ,shortDescription:"Gameplay prototypes that balance mechanics, narrative, and player feedback loops.",focusAreas:["Rapid prototyping of mechanics, level design, and UI flows for early playtesting.","Shader and particle experimentation to bring environments and characters to life.","Build automation for multi-platform exports plus telemetry hooks for balancing data."],toolset:["Unity","C#","Blender","Three.js","WebGL","Figma"]}],mX=[{name:"HTML 5",icon:tX},{name:"CSS 3",icon:ZJ},{name:"JavaScript",icon:nX},{name:"TypeScript",icon:aX},{name:"React JS",icon:sX},{name:"Tailwind CSS",icon:oX},{name:"Node JS",icon:iX},{name:"MongoDB",icon:rX},{name:"git",icon:eX},{name:"figma",icon:$J}],gX=[{title:"Certificate IV in Information Technology,",company_name:"Upskilled Pty Ltd, Australia",icon:hX,iconBg:"#383E56",date:"2023 - Currently",Achievement:{subtitle:"Achievements",point:["Developed business requirement templates aimed to collect input for an implementation project to automate processes in a major local bank.","Developed an UAT procedure from scratch","Documented UAT which had to be signed and agreed by clients."]}},{title:"Bachelor Degree of Systems Engineer",company_name:"ECCI University, Bogota, Colombia",icon:fX,iconBg:"#383E56",date:"2010 - 2014",Achievement:{subtitle:"Achievements",point:["Developed business requirement templates aimed to collect input for an implementation project to automate processes in a major local bank.","Developed an UAT procedure from scratch","Documented UAT which had to be signed and agreed by clients."]}},{title:"Professional Technician in Systems Engineering",company_name:"INSUTEC. Bogota, Colombia",icon:dX,iconBg:"#383E56",date:"2005 - 2008",Achievement:{subtitle:"Achievements",point:["Developed business requirement templates aimed to collect input for an implementation project to automate processes in a major local bank.","Developed an UAT procedure from scratch","Documented UAT which had to be signed and agreed by clients."]}}],vX=[{title:"System Test Analyst",company_name:"Choucair Testing, Colombia",icon:lX,iconBg:"#383E56",date:"June 2015 - July 2016",Achievement:{subtitle:"Achievements",point:["Developed business requirement templates aimed to collect input for an implementation project to automate processes in a major local bank.","Developed an UAT procedure from scratch","Documented UAT which had to be signed and agreed by clients."]},respon:{subtitle:"Responsibilities",point:["Identifying and breaking down the necessary tasks to test new or existed product.","Designing tests, either alone or as part of a team","Setting up automated tests.","Performing functional tests of clients web page.","Analysing the customers IT Quality Assurance Area."]}},{title:"IT Support Officer",company_name:"IQ Outsourcing, Colombia",icon:cX,iconBg:"#E6DEDD",date:"September 2013 - May 2015",Achievement:{subtitle:"Achievements",point:["Proposed, prepared and facilitated training for new team members, this included developing training information packages and knowledge assessment test. This initiative increased team productivity by 20%.","Designed and implemented an operational status report using SQL to pull information out of different systems and consolidating it in a company dashboard","Utilised SQL to identify errors in data bases, escalating errors to correct areas. This process allowed the business to fix errors in a timely manner saving time and money"]},respon:{subtitle:"Responsibilities",point:["Monitoring and maintaining computer systems and networks.","Ensuring that new technologies and processes are adapted to current systems effectively.","Supervising installation of software and hardware modules and ensuring that upgrades are performed timely.","Validating errors and proposing solutions to applications.","Ensuring that computer hardware and software is updated and maintained correctly.","Repairing and replacing equipment as necessary."," Diagnosing and troubleshooting technical problems."," Identifying priority issues and ensuring that they are handled first."," Responding on time to service issues and requests."," Providing technical support to customers IT staff."]}}],yX=[{name:"Portfolio",description:"I'm thrilled to present my front-end web portfolio, created using cutting-edge technologies like Vite and React. This portfolio showcases my ability to design and develop captivating, responsive user experiences. Notable features include user-centric design, seamless responsiveness across various devices, meticulous performance optimization, and a steadfast commitment to accessibility.",tags:[{name:"react",color:"blue-text-gradient"},{name:"CSS",color:"green-text-gradient"}],image:uX,source_code_link:"https://github.com/edwin-pedraza/React_portafoliopapp",source_link_web:"https://edwin-pedraza.github.io/Edwin_portfolio/Project/portfolio/build/index.html"}],xX=(r="")=>r.toString().trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,""),jN=()=>{const[r,e]=F.useState(""),[t,n]=F.useState(!1),[i,s]=F.useState(!1),[o,a]=F.useState(!1),l=F.useRef(null),u=F.useRef(null),h=$c(),p=kl(),{data:g}=Ks("nav_link",{orderBy:"order"}),{data:y}=Ks("service",{orderBy:"order"}),_=Array.isArray(g)&&g.length>0?g.map(E=>({id:E.id,title:E.title,path:E.path||E.href||null})):pX,A=F.useMemo(()=>(Array.isArray(y)&&y.length>0?y:rS).map(R=>({title:R.title,slug:R.slug||xX(R.title||"")})),[y]);F.useEffect(()=>{const E=()=>{window.scrollY>100?s(!0):s(!1)};return window.addEventListener("scroll",E),()=>window.removeEventListener("scroll",E)},[]);const b=E=>{const R=document.getElementById(E);if(R){R.scrollIntoView({behavior:"smooth",block:"start"});const L=AE==="/"?`#${E}`:`${AE}#${E}`;window.history.replaceState(null,"",L)}},w=E=>{if(E.id==="service"){a(R=>!R);return}if(e(E.title),n(!1),E.path||E.id==="service"){p(E.path||"/services/web-developer");return}if(h.pathname!=="/"){p(`/#${E.id}`);return}b(E.id)},C=E=>{a(!1),n(!1),p(`/services/${E}`)};return F.useEffect(()=>{const E=R=>{l.current&&l.current.contains(R.target)||u.current&&u.current.contains(R.target)||a(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]),F.useEffect(()=>{a(!1)},[h.pathname,h.hash]),x.jsx("nav",{className:`${tr.paddingX} w-full flex items-center py-5 fixed top-0 z-20 ${i?"bg-primary":"bg-transparent"}`,children:x.jsxs("div",{className:"w-full flex justify-between items-center max-w-7xl mx-auto",children:[x.jsxs(bd,{to:"/",className:"flex items-center gap-2",onClick:()=>{e(""),window.scrollTo(0,0)},children:[x.jsx("img",{src:sy,alt:"logo",className:"w-14 h-14 object-contain bg-primary rounded-xl border-2 border-secondary"}),x.jsxs("p",{className:"text-white text-[18px] font-bold cursor-pointer flex ",children:["Edwin ",x.jsx("span",{className:"sm:block hidden",children:" | Web Developer"})]})]}),x.jsxs("ul",{className:"list-none hidden sm:flex flex-row gap-10",children:[_.map(E=>x.jsxs("li",{className:`${r===E.title?"text-white":"text-secondary"} hover:text-white text-[18px] font-medium cursor-pointer relative`,ref:E.id==="service"?l:void 0,children:[x.jsx("button",{type:"button",className:"bg-transparent border-0 outline-none text-current",onClick:()=>w(E),children:E.title}),E.id==="service"&&o&&x.jsxs("div",{className:"absolute top-full left-0 mt-3 bg-tertiary rounded-2xl shadow-lg border border-white/10 min-w-[200px] p-4 z-30",children:[x.jsx("p",{className:"text-secondary text-sm mb-3",children:"Choose a service"}),x.jsx("ul",{className:"space-y-2",children:A.map(R=>x.jsx("li",{children:x.jsx("button",{type:"button",className:"text-left w-full text-white hover:text-[#915EFF] transition-colors",onClick:()=>C(R.slug),children:R.title})},R.slug))})]})]},E.id)),x.jsx(bd,{to:"/blog",className:`${r===!0?"text-white":"text-secondary"} hover:text-white text-[18px] font-medium cursor-pointer`,children:"Blog"})]}),x.jsxs("div",{className:"sm:hidden flex flex-1 justify-end items-center",children:[x.jsx("img",{src:t?QJ:qJ,alt:"menu",className:"w-[20px] h-[20px] object-contain cursor-pointer",onClick:()=>n(!t)}),x.jsx("div",{className:`${t?"flex":"hidden"} p-6 black-gradient absolute top-20 right-0 mx-4 my-2 min-w-[140px] z-10 rounded-xl`,children:x.jsxs("ul",{className:"list-none flex justify-end items-start flex-col gap-4",children:[_.map(E=>x.jsx("li",{className:`font-poppins font-medium cursor-pointer text-[16px] ${r===E.title?"text-white":"text-secondary"}`,ref:E.id==="service"?u:void 0,children:E.id==="service"?x.jsxs("div",{className:"w-full",children:[x.jsx("button",{type:"button",className:"bg-transparent border-0 outline-none text-left text-current",onClick:()=>w(E),children:E.title}),o&&x.jsx("ul",{className:"mt-3 space-y-2 pl-3 border-l border-white/10",children:A.map(R=>x.jsx("li",{children:x.jsx("button",{type:"button",className:"text-left text-secondary hover:text-white",onClick:()=>C(R.slug),children:R.title})},R.slug))})]}):x.jsx("button",{type:"button",className:"bg-transparent border-0 outline-none text-left text-current",onClick:()=>w(E),children:E.title})},E.id)),x.jsx("li",{children:x.jsx(bd,{to:"/blog",className:`font-poppins font-medium cursor-pointer text-[16px] ${r==="Blog"?"text-white":"text-secondary"}`,onClick:()=>n(!1),children:"Blog"})})]})})]})]})})};var _X=Object.defineProperty,wX=Object.defineProperties,bX=Object.getOwnPropertyDescriptors,x2=Object.getOwnPropertySymbols,AX=Object.prototype.hasOwnProperty,SX=Object.prototype.propertyIsEnumerable,_2=(r,e,t)=>e in r?_X(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Tm=(r,e)=>{for(var t in e||(e={}))AX.call(e,t)&&_2(r,t,e[t]);if(x2)for(var t of x2(e))SX.call(e,t)&&_2(r,t,e[t]);return r},Rm=(r,e)=>wX(r,bX(e)),iS=class extends F.Component{constructor(r){super(r),this.ref=ns.createRef(),this.state={style:{}};const e={reverse:!1,max:35,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:"1.1",speed:"1000",transition:!0,axis:null,reset:!0};this.width=null,this.height=null,this.left=null,this.top=null,this.transitionTimeout=null,this.updateCall=null,this.element=null,this.settings=Object.assign({},e,this.props.options),this.reverse=this.settings.reverse?-1:1,this.onMouseEnter=this.onMouseEnter.bind(this,this.props.onMouseEnter),this.onMouseMove=this.onMouseMove.bind(this,this.props.onMouseMove),this.onMouseLeave=this.onMouseLeave.bind(this,this.props.onMouseLeave)}componentDidMount(){this.element=this.ref.current,setTimeout(()=>{this.element.parentElement.querySelector(":hover")===this.element&&this.onMouseEnter()},0)}componentWillUnmount(){clearTimeout(this.transitionTimeout),cancelAnimationFrame(this.updateCall)}onMouseEnter(r=()=>{},e){return this.updateElementPosition(),this.setState(Object.assign({},this.state,{style:Rm(Tm({},this.state.style),{willChange:"transform"})})),this.setTransition(),r(e)}reset(){window.requestAnimationFrame(()=>{this.setState(Object.assign({},this.state,{style:Rm(Tm({},this.state.style),{transform:`perspective(${this.settings.perspective}px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)`})}))})}onMouseMove(r=()=>{},e){return e.persist(),this.updateCall!==null&&window.cancelAnimationFrame(this.updateCall),this.event=e,this.updateCall=requestAnimationFrame(this.update.bind(this,e)),r(e)}setTransition(){clearTimeout(this.transitionTimeout),this.setState(Object.assign({},this.state,{style:Rm(Tm({},this.state.style),{transition:`${this.settings.speed}ms ${this.settings.easing}`})})),this.transitionTimeout=setTimeout(()=>{this.setState(Object.assign({},this.state,{style:Rm(Tm({},this.state.style),{transition:""})}))},this.settings.speed)}onMouseLeave(r=()=>{},e){return this.setTransition(),this.settings.reset&&this.reset(),r(e)}getValues(r){const e=(r.nativeEvent.clientX-this.left)/this.width,t=(r.nativeEvent.clientY-this.top)/this.height,n=Math.min(Math.max(e,0),1),i=Math.min(Math.max(t,0),1),s=(this.reverse*(this.settings.max/2-n*this.settings.max)).toFixed(2),o=(this.reverse*(i*this.settings.max-this.settings.max/2)).toFixed(2),a=n*100,l=i*100;return{tiltX:s,tiltY:o,percentageX:a,percentageY:l}}updateElementPosition(){const r=this.element.getBoundingClientRect();this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=r.left,this.top=r.top}update(r){const e=this.getValues(r);this.setState(Object.assign({},this.state,{style:Rm(Tm({},this.state.style),{transform:`perspective(${this.settings.perspective}px) rotateX(${this.settings.axis==="x"?0:e.tiltY}deg) rotateY(${this.settings.axis==="y"?0:e.tiltX}deg) scale3d(${this.settings.scale}, ${this.settings.scale}, ${this.settings.scale})`})})),this.updateCall=null}render(){const r=Object.assign({},this.props.style,this.state.style);return x.jsx("div",{style:r,ref:this.ref,className:this.props.className,onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,children:this.props.children})}};const sS=r=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1.25,delay:r}}}),Zc=(r,e,t,n)=>({hidden:{x:r==="left"?100:r==="right"?-100:0,y:r==="up"?100:r==="down"?-100:0,opacity:0},show:{x:0,y:0,opacity:1,transition:{type:e,delay:t,duration:n,ease:"easeOut"}}}),EX=(r,e,t,n)=>({hidden:{x:r==="left"?"-100%":r==="right"?"100%":0,y:r==="up"||r==="down"?"100%":0},show:{x:0,y:0,transition:{type:e,delay:t,duration:n,ease:"easeOut"}}}),MX=(r,e)=>({hidden:{},show:{transition:{staggerChildren:r,delayChildren:e||0}}}),qd=(r,e)=>function(){return x.jsxs(zi.section,{variants:MX(),initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.25},className:`${tr.padding} max-w-7xl mx-auto relative z-0`,children:[x.jsx("span",{className:"hash-span",id:e,children:""}),x.jsx(r,{})]})},CX="/Edwin_portfolio/assets/foto_edwin-BVC8sZNw.png",rA=(r="")=>r.toString().trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,""),zN=({index:r,title:e,icon:t,slug:n})=>{const i=n||rA(e||"");return x.jsx(iS,{className:"sm:w-[250px] w-full flex-wrap justify-center",children:x.jsx(zi.div,{variants:Zc("right","spring",.5*r,.75),initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.45},className:"w-full green-pink-gradient p-[1px] rounded-[20px] shadow-card",children:x.jsx(bd,{to:`/services/${i}`,className:"block focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[#915EFF] rounded-[20px]",children:x.jsxs("div",{className:"bg-tertiary rounded-[20px] py-5 px-12 min-h-[280px] flex justify-evenly items-center flex-col",children:[t?x.jsx("img",{src:t,alt:"service-icon",className:"w-20 h-20 object-contain rounded-full"}):x.jsx("div",{className:"w-20 h-20 rounded-full bg-black-200 flex items-center justify-center text-white text-xl",children:e?.charAt(0)||"?"}),x.jsx("h3",{className:"text-white text-[20px] font-bold text-center mt-4",children:e}),x.jsx("p",{className:"text-secondary text-center text-sm mt-2",children:"Tap to explore the full service"})]})})})})},TX=()=>{const{data:r}=Ks("service",{orderBy:"order"}),{data:e}=Ks("profile",{select:"*",orderBy:"id"}),t=Array.isArray(r)&&r.length>0?r.map(o=>({title:o.title,icon:o.icon_url||void 0,slug:o.slug||rA(o.title||"")})):rS.map(o=>({...o,slug:o.slug||rA(o.title)})),n=Array.isArray(e)&&e.length>0?e[0]:null,i=(Qc(n?.about_text)||[]).length?Qc(n?.about_text):["I'm a Colombian System Engineer with a strong software testing and IT support background. Transitioning seamlessly into a skilled Frontend Developer, I'm passionate about crafting user-friendly web applications with CSS, HTML, and React.js.","My standout feature is merging frontend finesse with backend proficiency. Python and Node.js fortify my server-side work, ensuring smooth user experiences by bridging the gap between front and backend.","I excel in API management and thorough testing through tools like Postman, guaranteeing seamless integration of frontend and backend functionalities. Versatility defines me  SQL, MySQL, SQLite, MongoDB  I architect data-driven apps with scalable solutions for diverse project needs.","Driven by meticulousness and problem-solving, I deliver uncompromising quality, exceeding expectations in dynamic environments. With my frontend prowess and robust backend/database foundation, I'm poised to elevate innovative projects in growth-focused organizations."],s=n?.photo_url||CX;return x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"flex sm:flex-row gap-10 flex-col-reverse",children:[x.jsxs("div",{children:[x.jsxs(zi.div,{variants:sS(),children:[x.jsx("p",{className:tr.sectionSubText,children:"Introduction"}),x.jsx("h2",{className:tr.sectionHeadTextSm,children:"Overview."})]}),x.jsx(zi.div,{variants:Zc("","",.1,1),className:"mt-4 text-secondary text-[17px] max-w-lg leading-[30px] space-y-4",children:i.map((o,a)=>x.jsx("p",{children:o},a))})]}),x.jsx("div",{className:"m-auto w-full sm:w-[360px]",children:x.jsx(iS,{className:"w-full",children:x.jsx(zi.div,{variants:Zc("left","spring",.5,.75),className:"w-full green-pink-gradient p-[1px] rounded-[20px] shadow-card",children:x.jsx("div",{className:"bg-tertiary rounded-[20px] m-2 py-5 px-8  flex flex-wrap justify-center flex-col",children:x.jsx("img",{src:s,alt:"foto",className:"w-full h-full object-contain"})})})})})]}),x.jsx("div",{className:"mt-28 sm:mt-32 lg:mt-40 mx-10 flex flex-wrap gap-14 justify-center ",children:t.map((o,a)=>x.jsx(zN,{index:a,...o},o.title))})]})},RX=qd(TX,"about");zN.propTypes={index:Ve.number.isRequired,title:Ve.string,icon:Ve.string,slug:Ve.string};const PX=100;function IX(){if(typeof window>"u")return!1;try{const r=document.createElement("canvas");return!!(r.getContext("webgl")||r.getContext("experimental-webgl"))}catch{return!1}}const LX=()=>{const{data:r}=Ks("technology",{orderBy:"order"}),e=F.useMemo(()=>Array.isArray(r)&&r.length>0?r.map(i=>({name:i.name,icon:i.icon_url||void 0})):mX,[r]),[t,n]=F.useState(!0);return F.useEffect(()=>{n(IX())},[]),x.jsx("div",{id:"tech",className:"mx-auto max-w-6xl flex flex-wrap justify-center gap-8",children:e.map((i,s)=>x.jsx("div",{className:"w-24 h-24 sm:w-28 sm:h-28",children:t&&s<PX?x.jsx(fL,{icon:i.icon}):x.jsx("div",{className:"w-full h-full rounded-full bg-black-200 flex items-center justify-center",children:i.icon&&x.jsx("img",{src:i.icon,alt:i.name,className:"w-3/4 h-3/4 object-contain rounded-full"})})},i.name))})},NX=qd(LX,"tech");var Pm={},Lw={exports:{}};var w2;function HN(){return w2||(w2=1,(function(r){(function(){var e={}.hasOwnProperty;function t(){for(var n=[],i=0;i<arguments.length;i++){var s=arguments[i];if(s){var o=typeof s;if(o==="string"||o==="number")n.push(s);else if(Array.isArray(s)){if(s.length){var a=t.apply(null,s);a&&n.push(a)}}else if(o==="object"){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){n.push(s.toString());continue}for(var l in s)e.call(s,l)&&s[l]&&n.push(l)}}}return n.join(" ")}r.exports?(t.default=t,r.exports=t):window.classNames=t})()})(Lw)),Lw.exports}var b2;function BX(){if(b2)return Pm;b2=1,Pm.__esModule=!0,Pm.default=void 0;var r=n(zd()),e=n(_A()),t=n(HN());function n(o){return o&&o.__esModule?o:{default:o}}const i=({animate:o=!0,className:a="",layout:l="2-columns",lineColor:u="#FFF",children:h})=>(typeof window=="object"&&document.documentElement.style.setProperty("--line-color",u),r.default.createElement("div",{className:(0,t.default)(a,"vertical-timeline",{"vertical-timeline--animate":o,"vertical-timeline--two-columns":l==="2-columns","vertical-timeline--one-column-left":l==="1-column"||l==="1-column-left","vertical-timeline--one-column-right":l==="1-column-right"})},h));i.propTypes={children:e.default.oneOfType([e.default.arrayOf(e.default.node),e.default.node]).isRequired,className:e.default.string,animate:e.default.bool,layout:e.default.oneOf(["1-column-left","1-column","2-columns","1-column-right"]),lineColor:e.default.string};var s=i;return Pm.default=s,Pm}var Im={};function iA(){return iA=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},iA.apply(this,arguments)}function kX(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,sA(r,e)}function sA(r,e){return sA=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},sA(r,e)}function DX(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}var oA=new Map,Vv=new WeakMap,A2=0,GN=void 0;function FX(r){GN=r}function OX(r){return r?(Vv.has(r)||(A2+=1,Vv.set(r,A2.toString())),Vv.get(r)):"0"}function UX(r){return Object.keys(r).sort().filter(function(e){return r[e]!==void 0}).map(function(e){return e+"_"+(e==="root"?OX(r.root):r[e])}).toString()}function jX(r){var e=UX(r),t=oA.get(e);if(!t){var n=new Map,i,s=new IntersectionObserver(function(o){o.forEach(function(a){var l,u=a.isIntersecting&&i.some(function(h){return a.intersectionRatio>=h});r.trackVisibility&&typeof a.isVisible>"u"&&(a.isVisible=u),(l=n.get(a.target))==null||l.forEach(function(h){h(u,a)})})},r);i=s.thresholds||(Array.isArray(r.threshold)?r.threshold:[r.threshold||0]),t={id:e,observer:s,elements:n},oA.set(e,t)}return t}function oS(r,e,t,n){if(t===void 0&&(t={}),n===void 0&&(n=GN),typeof window.IntersectionObserver>"u"&&n!==void 0){var i=r.getBoundingClientRect();return e(n,{isIntersecting:n,target:r,intersectionRatio:typeof t.threshold=="number"?t.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),function(){}}var s=jX(t),o=s.id,a=s.observer,l=s.elements,u=l.get(r)||[];return l.has(r)||l.set(r,u),u.push(e),a.observe(r),function(){u.splice(u.indexOf(e),1),u.length===0&&(l.delete(r),a.unobserve(r)),l.size===0&&(a.disconnect(),oA.delete(o))}}var zX=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function S2(r){return typeof r.children!="function"}var Ay=(function(r){kX(e,r);function e(n){var i;return i=r.call(this,n)||this,i.node=null,i._unobserveCb=null,i.handleNode=function(s){i.node&&(i.unobserve(),!s&&!i.props.triggerOnce&&!i.props.skip&&i.setState({inView:!!i.props.initialInView,entry:void 0})),i.node=s||null,i.observeNode()},i.handleChange=function(s,o){s&&i.props.triggerOnce&&i.unobserve(),S2(i.props)||i.setState({inView:s,entry:o}),i.props.onChange&&i.props.onChange(s,o)},i.state={inView:!!n.initialInView,entry:void 0},i}var t=e.prototype;return t.componentDidUpdate=function(i){(i.rootMargin!==this.props.rootMargin||i.root!==this.props.root||i.threshold!==this.props.threshold||i.skip!==this.props.skip||i.trackVisibility!==this.props.trackVisibility||i.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())},t.componentWillUnmount=function(){this.unobserve(),this.node=null},t.observeNode=function(){if(!(!this.node||this.props.skip)){var i=this.props,s=i.threshold,o=i.root,a=i.rootMargin,l=i.trackVisibility,u=i.delay,h=i.fallbackInView;this._unobserveCb=oS(this.node,this.handleChange,{threshold:s,root:o,rootMargin:a,trackVisibility:l,delay:u},h)}},t.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},t.render=function(){if(!S2(this.props)){var i=this.state,s=i.inView,o=i.entry;return this.props.children({inView:s,entry:o,ref:this.handleNode})}var a=this.props,l=a.children,u=a.as,h=DX(a,zX);return F.createElement(u||"div",iA({ref:this.handleNode},h),l)},e})(F.Component);Ay.displayName="InView";Ay.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1};function HX(r){var e=r===void 0?{}:r,t=e.threshold,n=e.delay,i=e.trackVisibility,s=e.rootMargin,o=e.root,a=e.triggerOnce,l=e.skip,u=e.initialInView,h=e.fallbackInView,p=F.useRef(),g=F.useState({inView:!!u}),y=g[0],_=g[1],A=F.useCallback(function(w){p.current!==void 0&&(p.current(),p.current=void 0),!l&&w&&(p.current=oS(w,function(C,E){_({inView:C,entry:E}),E.isIntersecting&&a&&p.current&&(p.current(),p.current=void 0)},{root:o,rootMargin:s,threshold:t,trackVisibility:i,delay:n},h))},[Array.isArray(t)?t.toString():t,o,s,a,l,i,h,n]);F.useEffect(function(){!p.current&&y.entry&&!a&&!l&&_({inView:!!u})});var b=[A,y.inView,y.entry];return b.ref=b[0],b.inView=b[1],b.entry=b[2],b}const GX=Object.freeze(Object.defineProperty({__proto__:null,InView:Ay,default:Ay,defaultFallbackInView:FX,observe:oS,useInView:HX},Symbol.toStringTag,{value:"Module"})),VX=L2(GX);var E2;function WX(){if(E2)return Im;E2=1,Im.__esModule=!0,Im.default=void 0;var r=i(zd()),e=i(_A()),t=i(HN()),n=VX;function i(a){return a&&a.__esModule?a:{default:a}}const s=({children:a="",className:l="",contentArrowStyle:u=null,contentStyle:h=null,date:p="",dateClassName:g="",icon:y=null,iconClassName:_="",iconOnClick:A=null,onTimelineElementClick:b=null,iconStyle:w=null,id:C="",position:E="",style:R=null,textClassName:L="",intersectionObserverProps:D={rootMargin:"0px 0px -40px 0px",triggerOnce:!0},visible:j=!1})=>r.default.createElement(n.InView,D,({inView:O,ref:I})=>r.default.createElement("div",{ref:I,id:C,className:(0,t.default)(l,"vertical-timeline-element",{"vertical-timeline-element--left":E==="left","vertical-timeline-element--right":E==="right","vertical-timeline-element--no-children":a===""}),style:R},r.default.createElement(r.default.Fragment,null,r.default.createElement("span",{style:w,onClick:A,className:(0,t.default)(_,"vertical-timeline-element-icon",{"bounce-in":O||j,"is-hidden":!(O||j)})},y),r.default.createElement("div",{style:h,onClick:b,className:(0,t.default)(L,"vertical-timeline-element-content",{"bounce-in":O||j,"is-hidden":!(O||j)})},r.default.createElement("div",{style:u,className:"vertical-timeline-element-content-arrow"}),a,r.default.createElement("span",{className:(0,t.default)(g,"vertical-timeline-element-date")},p)))));s.propTypes={children:e.default.oneOfType([e.default.arrayOf(e.default.node),e.default.node]),className:e.default.string,contentArrowStyle:e.default.shape({}),contentStyle:e.default.shape({}),date:e.default.node,dateClassName:e.default.string,icon:e.default.element,iconClassName:e.default.string,iconStyle:e.default.shape({}),iconOnClick:e.default.func,onTimelineElementClick:e.default.func,id:e.default.string,position:e.default.string,style:e.default.shape({}),textClassName:e.default.string,visible:e.default.bool,intersectionObserverProps:e.default.shape({root:e.default.object,rootMargin:e.default.string,threshold:e.default.number,triggerOnce:e.default.bool})};var o=s;return Im.default=o,Im}var Nw,M2;function JX(){return M2||(M2=1,Nw={VerticalTimeline:BX().default,VerticalTimelineElement:WX().default}),Nw}var px=JX();const XX=({experience:r})=>x.jsxs(px.VerticalTimelineElement,{contentStyle:{background:"#1d1836",color:"#fff"},contentArrowStyle:{borderRight:"7px solid  #232631"},date:r.date,iconStyle:{background:r.iconBg},icon:x.jsx("div",{className:"flex justify-center items-center w-full h-full ",children:x.jsx("img",{src:r.icon,alt:r.company_name,className:"w-[90%] h-[90%] object-contain "})}),children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-white text-[24px] font-bold",children:r.title}),x.jsx("p",{className:"text-secondary text-[16px] font-semibold",style:{margin:0},children:r.company_name}),x.jsx("p",{className:"text-secondary text-[16px] font-semibold my-2",children:r.Achievement.subtitle})]}),x.jsx("ul",{className:"mt-5 list-disc ml-5 space-y-2",children:r.Achievement.point.map((e,t)=>x.jsx("li",{className:"text-white-100 text-[14px] pl-1 tracking-wider",children:e},`experience-point-${t}`))}),x.jsxs("div",{children:[x.jsx("p",{className:"text-secondary text-[16px] font-semibold my-2",children:r.respon.subtitle}),x.jsx("ul",{className:"mt-5 list-disc ml-5 space-y-2",children:r.respon.point.map((e,t)=>x.jsx("li",{className:"text-white-100 text-[14px] pl-1 tracking-wider",children:e},`experience-point-${t}`))})]})]}),KX=()=>{const{data:r}=Ks("experience",{orderBy:"order"}),e=Array.isArray(r)&&r.length>0?r.map(t=>({title:t.title,company_name:t.company_name,icon:t.icon_url||t.icon||void 0,iconBg:t.icon_bg||"#383E56",date:t.date,Achievement:{subtitle:t.achievement_subtitle||"Achievements",point:Qc(t.achievement_points)},respon:{subtitle:t.respon_subtitle||"Responsibilities",point:Qc(t.respon_points)}})):vX;return x.jsxs(x.Fragment,{children:[x.jsxs(zi.div,{children:[x.jsx("p",{className:`${tr.resumeSubText} text-center`,children:"What I have done so far"}),x.jsx("h2",{className:`${tr.resumeText} text-center`,children:"Work Experience."})]}),x.jsx("div",{className:"mt-20 flex flex-col",children:x.jsx(px.VerticalTimeline,{children:e.map((t,n)=>x.jsx(XX,{experience:t},`experience-${n}`))})})]})},YX=qd(KX,"work");function VN({url:r}){const e=Fl(r);return x.jsx("primitive",{object:e.scene})}VN.propTypes={url:Ve.string.isRequired};function WN({url:r,className:e=""}){return r?x.jsxs(Lg,{className:e,frameloop:"demand",dpr:[1,2],gl:{preserveDrawingBuffer:!0},camera:{position:[3,2,4],fov:40},children:[x.jsxs(F.Suspense,{fallback:x.jsx(D1,{}),children:[x.jsx("ambientLight",{intensity:.6}),x.jsx("directionalLight",{position:[5,5,2],intensity:1.2}),x.jsx(uL,{preset:"city"}),x.jsx(VN,{url:r}),x.jsx(ix,{enableZoom:!1})]}),x.jsx(ox,{all:!0})]}):null}WN.propTypes={url:Ve.string,className:Ve.string};const C2=r=>{if(!r)return;const e=r.startsWith("/react/")?r.replace("/react",""):r;e.startsWith("/blog/")?window.location.href=My(e):window.open(r,"_blank","noopener,noreferrer")};function JN({index:r,name:e,description:t,tags:n=[],image:i,model_url:s,source_code_link:o,source_link_web:a}){return x.jsx(zi.div,{variants:Zc("up","spring",r*.5,.75),children:x.jsx(iS,{options:{max:45,scale:1,speed:450},className:`${tr.cardPadding} rounded-2xl sm:w-[360px] w-full`,children:x.jsxs("div",{className:"relative w-full h-full",children:[s?x.jsx("div",{className:`w-full h-[260px] rounded-2xl overflow-hidden bg-tertiary ${tr.cardPadding}`,children:x.jsx(WN,{url:s,className:"w-full h-full"})}):x.jsx("img",{src:i,alt:`${e} preview`,className:`w-full h-full object-cover rounded-2xl bg-tertiary ${tr.cardPadding}`}),x.jsxs("div",{className:"absolute inset-0 flex gap-2 justify-end m-3 card-img_hover",children:[o&&o!==a&&x.jsx("button",{type:"button",onClick:()=>C2(o),className:"black-gradient w-10 h-10 rounded-full flex justify-center items-center cursor-pointer","aria-label":"View source code",children:x.jsx("img",{src:KJ,alt:"GitHub",className:"w-1/2 h-1/2 object-contain"})}),a&&x.jsx("button",{type:"button",onClick:()=>C2(a),className:"black-gradient w-10 h-10 rounded-full flex justify-center items-center cursor-pointer text-white text-sm font-semibold","aria-label":"Open project",children:a.startsWith("/react/blog/")||a.startsWith("/blog/")?x.jsxs("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[x.jsx("path",{d:"M10 13a4 4 0 0 1 0-5.66l2.12-2.12a4 4 0 0 1 5.66 5.66l-1.2 1.2"}),x.jsx("path",{d:"M14 11a4 4 0 0 1 0 5.66l-2.12 2.12a4 4 0 0 1-5.66-5.66l1.2-1.2"})]}):x.jsx("img",{src:YJ,alt:"Open link",className:"w-1/2 h-1/2 object-contain rounded-full"})})]}),x.jsxs("div",{className:"mt-5",children:[x.jsx("h3",{className:"text-white font-bold text-[24px]",children:e}),x.jsx("p",{className:"mt-2 text-secondary text-[14px]",children:t})]}),x.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:n.map(l=>x.jsxs("p",{className:`text-[14px] ${l.color}`,children:["#",l.name]},`${e}-${l.name}`))})]})})})}JN.propTypes={index:Ve.number.isRequired,name:Ve.string.isRequired,description:Ve.string,tags:Ve.arrayOf(Ve.shape({name:Ve.string,color:Ve.string})),image:Ve.string,model_url:Ve.string,source_code_link:Ve.string,source_link_web:Ve.string};const qX=()=>{const{data:r}=Ks("project",{orderBy:"order"}),{data:e}=Ks("project_tag",{select:"project_id, tag:tag(name,color)"}),{data:t}=Ks("post",{select:"id,title,excerpt,cover_url,project_url,tech_tags,tag,portfolio_featured,portfolio_order",orderBy:"portfolio_order"}),n=(e||[]).reduce((l,u)=>(l[u.project_id]||(l[u.project_id]=[]),u.tag&&l[u.project_id].push({name:u.tag.name,color:u.tag.color}),l),{}),i=Array.isArray(r)&&r.length>0?r.map(l=>({name:l.name,description:l.description,tags:n[l.id]||[],image:l.image_url||void 0,model_url:l.model_url||void 0,source_code_link:l.source_code_link,source_link_web:l.source_link_web,sort:l.order??999})):[],o=[...Array.isArray(t)?t.filter(l=>l.portfolio_featured).map(l=>{const u=Cy(l.tag,l.tech_tags).map(p=>({name:p,color:"text-secondary"})),h=`/blog/blog-detail/${l.id}`;return{name:l.title,description:l.excerpt||"Featured blog project",tags:u,image:l.cover_url||void 0,model_url:void 0,source_code_link:h,source_link_web:l.project_url||h,sort:l.portfolio_order??999}}):[],...i].sort((l,u)=>(l.sort??999)-(u.sort??999)),a=o.length>0?o:yX;return x.jsxs(x.Fragment,{children:[x.jsxs(zi.div,{variants:sS(),children:[x.jsx("p",{className:`${tr.sectionSubText} `,children:"My work"}),x.jsx("h2",{className:`${tr.sectionHeadText}`,children:"Projects."})]}),x.jsx("div",{className:"w-full flex",children:x.jsx(zi.p,{variants:Zc("","",.1,1),className:`${tr.paragraphSpacing} ${tr.bodyText} max-w-3xl`,children:"Following projects showcases my skills and experience through real-world examples of my work. Each project is briefly described with links to code repositories and live demos in it. It reflects my ability to solve complex problems, work with different technologies, and manage projects effectively."})}),x.jsx("div",{className:"my-20 flex  gap-7 flex-wrap justify-center",children:a.map((l,u)=>x.jsx(JN,{index:u,...l},`project-${u}`))})]})},QX=qd(qX,"projects"),ZX=()=>{const r=F.useRef(),[e,t]=F.useState({name:"",email:"",message:""}),[n,i]=F.useState(!1),s=a=>{const{target:l}=a,{name:u,value:h}=l;t({...e,[u]:h})},o=a=>{a.preventDefault(),i(!0),bR.send("service_8g0wdmb","template_vzrlzhc",{from_name:e.name,to_name:"JavaScript Mastery",from_email:e.email,to_email:"edw.pedraza@gmail.com",message:e.message},"3a4LTokkbFElR1C_h").then(()=>{i(!1),alert("Thank you. I will get back to you as soon as possible."),t({name:"",email:"",message:""})},l=>{i(!1),console.error(l),alert("Ahh, something went wrong. Please try again.")})};return x.jsxs("div",{className:"xl:mt-1 flex xl:flex-row flex-col-reverse gap-10 relative z-10",children:[x.jsxs(zi.div,{variants:EX("left","tween",.1,1),className:"flex-1 flex-col bg-black-100 p-8 rounded-2xl",children:[x.jsx("p",{className:tr.sectionSubText,children:"Get in touch"}),x.jsx("h3",{className:tr.sectionHeadText,children:"Contact."}),x.jsxs("form",{ref:r,onSubmit:o,className:"mt-4 flex flex-col gap-4",children:[x.jsxs("label",{className:"flex flex-col",children:[x.jsx("span",{className:"text-white font-medium mb-4",children:"Your Name"}),x.jsx("input",{type:"text",name:"name",value:e.name,onChange:s,placeholder:"What's your good name?",className:"bg-tertiary py-2 px-6 placeholder:text-secondary text-white rounded-lg outline-none border-none font-medium"})]}),x.jsxs("label",{className:"flex flex-col",children:[x.jsx("span",{className:"text-white font-medium mb-4",children:"Your email"}),x.jsx("input",{type:"email",name:"email",value:e.email,onChange:s,placeholder:"What's your web address?",className:"bg-tertiary py-2 px-6 placeholder:text-secondary text-white rounded-lg outline-none border-none font-medium"})]}),x.jsxs("label",{className:"flex flex-col",children:[x.jsx("span",{className:"text-white font-normal mb-4",children:"Your Message"}),x.jsx("textarea",{rows:4,name:"message",value:e.message,onChange:s,placeholder:"What you want to say?",className:"bg-tertiary py-2 px-6 placeholder:text-secondary text-white rounded-lg outline-none border-none font-medium"})]}),x.jsx("button",{type:"submit",className:"bg-tertiary py-3 px-8 rounded-xl outline-none w-fit text-white font-bold shadow-md shadow-primary",children:n?"Sending...":"Send"})]})]}),x.jsx(zi.div,{variants:Zc("","",.4,1),className:" xl:h-auto xl:flex-1 md:h-[550px] h-[350px]",children:x.jsx(g9,{})})]})},$X=qd(ZX,"contact"),eK=({education:r})=>x.jsxs(px.VerticalTimelineElement,{contentStyle:{background:"#1d1836",color:"#fff"},contentArrowStyle:{borderRight:"7px solid  #232631"},date:r.date,iconStyle:{background:r.iconBg},icon:x.jsx("div",{className:"flex justify-center items-center w-full h-full",children:x.jsx("img",{src:r.icon,alt:r.company_name,className:"w-[90%] h-[90%] object-contain rounded-full"})}),children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-white text-[24px] font-bold",children:r.title}),x.jsx("p",{className:"text-secondary text-[16px] font-semibold",style:{margin:0},children:r.company_name}),x.jsx("p",{className:"text-secondary text-[16px] font-semibold my-2",children:r.Achievement.subtitle})]}),x.jsx("ul",{className:"mt-5 list-disc ml-5 space-y-2",children:r.Achievement.point.map((e,t)=>x.jsx("li",{className:"text-white-100 text-[14px] pl-1 tracking-wider",children:e},`education-point-${t}`))})]}),tK=()=>{const{data:r}=Ks("education",{orderBy:"order"}),e=Array.isArray(r)&&r.length>0?r.map(t=>({title:t.title,company_name:t.company_name,icon:t.icon_url||t.icon||void 0,iconBg:t.icon_bg||"#383E56",date:t.date,Achievement:{subtitle:t.achievement_subtitle||"Achievements",point:Qc(t.achievement_points)}})):gX;return x.jsxs(x.Fragment,{children:[x.jsxs(zi.div,{children:[x.jsx("p",{className:`${tr.resumeSubText} text-center`,children:"My Background"}),x.jsx("h2",{className:`${tr.resumeText} text-center`,children:"Education."})]}),x.jsx("div",{className:"mt-20 flex flex-col",children:x.jsx(px.VerticalTimeline,{children:e.map((t,n)=>x.jsx(eK,{education:t},`education-${n}`))})})]})},nK=qd(tK,"Education"),rK=()=>{const[r,e]=F.useState(!0),[t,n]=F.useState(!1);return x.jsxs(x.Fragment,{children:[x.jsx("p",{className:`${tr.sectionSubText} text-center`,children:"What I have done"}),x.jsx("h2",{className:`${tr.sectionHeadText} text-center`,children:"Resume."}),x.jsxs(zi.div,{variants:sS(0),children:[x.jsxs("div",{className:"w-full flex justify-around my-12",children:[x.jsx("a",{onClick:()=>{e(!0),n(!1)},className:`${r?"border-2 p-2 rounded-lg text-2xl ":"border-transparent text-xl cursor-pointer"} resumeLi`,children:"Education"}),x.jsx("a",{onClick:()=>{e(!1),n(!0)},className:`${t?"border-2 p-2 rounded-lg text-2xl":"border-transparent text-xl cursor-pointer"} resumeLi`,children:"Experience"})]}),r&&x.jsx(nK,{}),t&&x.jsx(YX,{})]})]})},iK=qd(rK,"resume"),sK=()=>{const r=$c();return F.useEffect(()=>{if(!r.hash)return;const e=r.hash.replace("#",""),t=setTimeout(()=>{const n=document.getElementById(e);n&&n.scrollIntoView({behavior:"smooth",block:"start"})},0);return()=>clearTimeout(t)},[r]),x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"relative z-0 bg-primary",children:[x.jsxs("div",{children:[x.jsx(jN,{}),x.jsx(VJ,{})]}),x.jsx(RX,{}),x.jsx(iK,{}),x.jsx(NX,{}),x.jsx(QX,{})]}),x.jsxs("div",{className:"relative",children:[x.jsx($X,{}),x.jsx(pL,{})]})]})};function oK(){const r={order:"",title:"",company_name:"",icon_url:"",icon_bg:"#383E56",date:"",achievement_subtitle:"Achievements",achievement_points:""},[e,t]=F.useState([]),[n,i]=F.useState(!0),[s,o]=F.useState(r),[a,l]=F.useState(null),[u,h]=F.useState(""),[p,g]=F.useState(!1);async function y(){i(!0);const{data:C,error:E}=await dt.from("education").select("*").order("order");E||t(C||[]),i(!1)}F.useEffect(()=>{y()},[]);function _(C){return(C||"").split(`
`).map(E=>E.trim()).filter(Boolean)}async function A(C){C.preventDefault(),h(""),g(!0);const E={order:s.order?Number(s.order):null,title:s.title,company_name:s.company_name,icon_url:s.icon_url||null,icon_bg:s.icon_bg||"#383E56",date:s.date,achievement_subtitle:s.achievement_subtitle||"Achievements",achievement_points:_(s.achievement_points)};if(a){const{error:R}=await dt.from("education").update(E).eq("id",a);R?h(`Update failed: ${R.message}`):(h("Updated"),l(null),o(r),y())}else{const{error:R}=await dt.from("education").insert(E);R?h(`Insert failed: ${R.message}`):(h("Inserted"),o(r),y())}g(!1)}function b(C){l(C.id),o({order:C.order??"",title:C.title||"",company_name:C.company_name||"",icon_url:C.icon_url||"",icon_bg:C.icon_bg||"#383E56",date:C.date||"",achievement_subtitle:C.achievement_subtitle||"Achievements",achievement_points:Array.isArray(C.achievement_points)?C.achievement_points.join(`
`):C.achievement_points||""})}async function w(C){if(!confirm("Delete this item?"))return;const{error:E}=await dt.from("education").delete().eq("id",C);E?h(`Delete failed: ${E.message}`):y()}return x.jsxs("div",{className:"p-4",children:[x.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Education"}),x.jsxs("form",{onSubmit:A,className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-white/60 p-5 rounded-xl border border-slate-200 shadow-sm",children:[x.jsx("input",{className:"rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100",placeholder:"Order",value:s.order,onChange:C=>o({...s,order:C.target.value})}),x.jsx("input",{className:"rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100",placeholder:"Title",value:s.title,onChange:C=>o({...s,title:C.target.value}),required:!0}),x.jsx("input",{className:"rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100",placeholder:"Company Name",value:s.company_name,onChange:C=>o({...s,company_name:C.target.value})}),x.jsx("div",{className:"md:col-span-2",children:x.jsx(rs,{label:"Icon",pathPrefix:"education",value:s.icon_url,onChange:C=>o({...s,icon_url:C})})}),x.jsx("input",{className:"rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100",placeholder:"Icon BG (#383E56)",value:s.icon_bg,onChange:C=>o({...s,icon_bg:C.target.value})}),x.jsx("input",{className:"rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100",placeholder:"Date (e.g., 2010 - 2014)",value:s.date,onChange:C=>o({...s,date:C.target.value})}),x.jsx("input",{className:"rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 md:col-span-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100",placeholder:"Achievement subtitle",value:s.achievement_subtitle,onChange:C=>o({...s,achievement_subtitle:C.target.value})}),x.jsx("textarea",{className:"rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 md:col-span-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100",rows:4,placeholder:"One achievement per line",value:s.achievement_points,onChange:C=>o({...s,achievement_points:C.target.value})}),x.jsxs("div",{className:"md:col-span-2 flex gap-2",children:[x.jsx("button",{disabled:p,className:"bg-blue-600 hover:bg-blue-500 disabled:bg-blue-600/50 text-white px-4 py-2 rounded",type:"submit",children:a?p?"Updating":"Update":p?"Creating":"Create"}),a&&x.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-600 text-white",onClick:()=>{l(null),o(r)},children:"Cancel"}),u&&x.jsx("div",{className:"self-center text-sm opacity-80",children:u})]})]}),x.jsx("div",{className:"mt-6",children:n?x.jsx("div",{children:"Loading"}):x.jsxs("table",{className:"w-full text-sm rounded-xl overflow-hidden",children:[x.jsx("thead",{className:"text-left opacity-80",children:x.jsxs("tr",{children:[x.jsx("th",{className:"p-2",children:"Order"}),x.jsx("th",{className:"p-2",children:"Title"}),x.jsx("th",{className:"p-2",children:"Icon"}),x.jsx("th",{className:"p-2",children:"Company"}),x.jsx("th",{className:"p-2",children:"Date"}),x.jsx("th",{className:"p-2",children:"Actions"})]})}),x.jsx("tbody",{children:e.map(C=>x.jsxs("tr",{className:"border-t border-white/10",children:[x.jsx("td",{className:"p-2",children:C.order}),x.jsx("td",{className:"p-2",children:C.title}),x.jsx("td",{className:"p-2",children:C.icon_url?x.jsx("img",{src:C.icon_url,alt:"icon",className:"w-9 h-9 rounded object-cover"}):x.jsx("span",{className:"opacity-60",children:""})}),x.jsx("td",{className:"p-2",children:C.company_name}),x.jsx("td",{className:"p-2",children:C.date}),x.jsxs("td",{className:"p-2 flex gap-2",children:[x.jsx("button",{className:"px-3 py-1 rounded bg-amber-600 text-white",onClick:()=>b(C),children:"Edit"}),x.jsx("button",{className:"px-3 py-1 rounded bg-rose-600 text-white",onClick:()=>w(C.id),children:"Delete"})]})]},C.id))})]})})]})}function aK(){const r={order:"",title:"",company_name:"",icon_url:"",icon_bg:"#383E56",date:"",achievement_subtitle:"Achievements",achievement_points:"",respon_subtitle:"Responsibilities",respon_points:""},[e,t]=F.useState([]),[n,i]=F.useState(!0),[s,o]=F.useState(r),[a,l]=F.useState(null),[u,h]=F.useState(""),[p,g]=F.useState(!1),y="w-full rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 focus:border-slate-400 focus:outline-none focus:ring-2",_="block text-sm font-medium text-slate-700",A="mt-1 text-xs text-slate-500";async function b(){i(!0);const{data:L,error:D}=await dt.from("experience").select("*").order("order");D||t(L||[]),i(!1)}F.useEffect(()=>{b()},[]);function w(L){return(L||"").split(`
`).map(D=>D.trim()).filter(Boolean)}async function C(L){L.preventDefault(),h(""),g(!0);const D={order:s.order?Number(s.order):null,title:s.title,company_name:s.company_name,icon_url:s.icon_url||null,icon_bg:s.icon_bg||"#383E56",date:s.date,achievement_subtitle:s.achievement_subtitle||"Achievements",achievement_points:w(s.achievement_points),respon_subtitle:s.respon_subtitle||"Responsibilities",respon_points:w(s.respon_points)};if(a){const{error:j}=await dt.from("experience").update(D).eq("id",a);j?h(`Update failed: ${j.message}`):(h("Updated"),l(null),o(r),b())}else{const{error:j}=await dt.from("experience").insert(D);j?h(`Insert failed: ${j.message}`):(h("Inserted"),o(r),b())}g(!1)}function E(L){l(L.id),o({order:L.order??"",title:L.title||"",company_name:L.company_name||"",icon_url:L.icon_url||"",icon_bg:L.icon_bg||"#383E56",date:L.date||"",achievement_subtitle:L.achievement_subtitle||"Achievements",achievement_points:Array.isArray(L.achievement_points)?L.achievement_points.join(`
`):L.achievement_points||"",respon_subtitle:L.respon_subtitle||"Responsibilities",respon_points:Array.isArray(L.respon_points)?L.respon_points.join(`
`):L.respon_points||""})}async function R(L){if(!confirm("Delete this item?"))return;const{error:D}=await dt.from("experience").delete().eq("id",L);D?h(`Delete failed: ${D.message}`):b()}return x.jsxs("div",{className:"p-4",children:[x.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Experience"}),x.jsxs("form",{onSubmit:C,className:"grid grid-cols-1 md:grid-cols-2 gap-6 bg-white/60 p-6 rounded-xl border border-slate-200 shadow-sm",children:[x.jsxs("div",{children:[x.jsx("label",{className:_,htmlFor:"experience-order",children:"Order"}),x.jsx("input",{id:"experience-order",className:y,placeholder:"1, 2, 3",value:s.order,onChange:L=>o({...s,order:L.target.value})}),x.jsx("p",{className:A,children:"Lower numbers appear first in the experience timeline."})]}),x.jsxs("div",{children:[x.jsx("label",{className:_,htmlFor:"experience-title",children:"Title"}),x.jsx("input",{id:"experience-title",className:y,placeholder:"Senior QA Engineer",value:s.title,onChange:L=>o({...s,title:L.target.value}),required:!0}),x.jsx("p",{className:A,children:"Used as the headline for this experience card."})]}),x.jsxs("div",{children:[x.jsx("label",{className:_,htmlFor:"experience-company",children:"Company Name"}),x.jsx("input",{id:"experience-company",className:y,placeholder:"Company",value:s.company_name,onChange:L=>o({...s,company_name:L.target.value})})]}),x.jsxs("div",{children:[x.jsx("label",{className:_,htmlFor:"experience-date",children:"Date Range"}),x.jsx("input",{id:"experience-date",className:y,placeholder:"2015  2016",value:s.date,onChange:L=>o({...s,date:L.target.value})}),x.jsx("p",{className:A,children:"Shown under the company name (use any text that fits)."})]}),x.jsxs("div",{className:"md:col-span-2 space-y-2",children:[x.jsx(rs,{label:"Upload company icon",pathPrefix:"experience",value:s.icon_url,onChange:L=>o({...s,icon_url:L})}),x.jsx("p",{className:A,children:"Upload a square image or paste a URL. Leave empty to fall back to initials."})]}),x.jsxs("div",{children:[x.jsx("label",{className:_,htmlFor:"experience-icon-bg",children:"Icon Background"}),x.jsx("input",{id:"experience-icon-bg",className:y,placeholder:"#383E56",value:s.icon_bg,onChange:L=>o({...s,icon_bg:L.target.value})}),x.jsx("p",{className:A,children:"Hex color behind the icon. Defaults to #383E56."})]}),x.jsxs("div",{className:"md:col-span-2",children:[x.jsx("label",{className:_,htmlFor:"experience-achievement-sub",children:"Achievements heading"}),x.jsx("input",{id:"experience-achievement-sub",className:y,placeholder:"Achievements",value:s.achievement_subtitle,onChange:L=>o({...s,achievement_subtitle:L.target.value})})]}),x.jsxs("div",{className:"md:col-span-2",children:[x.jsx("label",{className:_,htmlFor:"experience-achievement-points",children:"Achievements list"}),x.jsx("textarea",{id:"experience-achievement-points",className:`${y} min-h-[120px] resize-y`,placeholder:"One achievement per line",value:s.achievement_points,onChange:L=>o({...s,achievement_points:L.target.value})}),x.jsx("p",{className:A,children:"Press Enter between bullet points. Lists render as bullet points on the site."})]}),x.jsxs("div",{className:"md:col-span-2",children:[x.jsx("label",{className:_,htmlFor:"experience-respon-sub",children:"Responsibilities heading"}),x.jsx("input",{id:"experience-respon-sub",className:y,placeholder:"Responsibilities",value:s.respon_subtitle,onChange:L=>o({...s,respon_subtitle:L.target.value})})]}),x.jsxs("div",{className:"md:col-span-2",children:[x.jsx("label",{className:_,htmlFor:"experience-respon-points",children:"Responsibilities list"}),x.jsx("textarea",{id:"experience-respon-points",className:`${y} min-h-[120px] resize-y`,placeholder:"One responsibility per line",value:s.respon_points,onChange:L=>o({...s,respon_points:L.target.value})}),x.jsx("p",{className:A,children:"Optional section for daily tasks or scope. Leave empty to hide."})]}),x.jsxs("div",{className:"md:col-span-2 flex gap-2",children:[x.jsx("button",{disabled:p,className:"bg-blue-600 hover:bg-blue-500 disabled:bg-blue-600/50 text-white px-4 py-2 rounded",type:"submit",children:a?p?"Updating":"Update":p?"Creating":"Create"}),a&&x.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-600 text-white",onClick:()=>{l(null),o(r)},children:"Cancel"}),u&&x.jsx("div",{className:"self-center text-sm opacity-80",children:u})]})]}),x.jsx("div",{className:"mt-6",children:n?x.jsx("div",{children:"Loading"}):x.jsxs("table",{className:"w-full text-sm rounded-xl overflow-hidden",children:[x.jsx("thead",{className:"text-left opacity-80",children:x.jsxs("tr",{children:[x.jsx("th",{className:"p-2",children:"Order"}),x.jsx("th",{className:"p-2",children:"Title"}),x.jsx("th",{className:"p-2",children:"Icon"}),x.jsx("th",{className:"p-2",children:"Company"}),x.jsx("th",{className:"p-2",children:"Date"}),x.jsx("th",{className:"p-2",children:"Actions"})]})}),x.jsx("tbody",{children:e.map(L=>x.jsxs("tr",{className:"border-t border-white/10",children:[x.jsx("td",{className:"p-2",children:L.order}),x.jsx("td",{className:"p-2",children:L.title}),x.jsx("td",{className:"p-2",children:L.icon_url?x.jsx("img",{src:L.icon_url,alt:"icon",className:"w-9 h-9 rounded object-cover"}):x.jsx("span",{className:"opacity-60",children:""})}),x.jsx("td",{className:"p-2",children:L.company_name}),x.jsx("td",{className:"p-2",children:L.date}),x.jsxs("td",{className:"p-2 flex gap-2",children:[x.jsx("button",{className:"px-3 py-1 rounded bg-amber-600 text-white",onClick:()=>E(L),children:"Edit"}),x.jsx("button",{className:"px-3 py-1 rounded bg-rose-600 text-white",onClick:()=>R(L.id),children:"Delete"})]})]},L.id))})]})})]})}const Wv={order:"",title:"",slug:"",icon_url:"",short_description:"",focus_areas:"",toolset_list:"",cta_text:""},lK=(r="")=>r.toString().trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"");function cK(){const[r,e]=F.useState([]),[t,n]=F.useState(!0),[i,s]=F.useState({...Wv}),[o,a]=F.useState(null),[l,u]=F.useState(""),[h,p]=F.useState(!1);async function g(){n(!0);const{data:w}=await dt.from("service").select("*").order("order");e(w||[]),n(!1)}F.useEffect(()=>{g()},[]);const y=F.useMemo(()=>i.slug||lK(i.title),[i.slug,i.title]);async function _(w){w.preventDefault(),u(""),p(!0);const C={order:i.order?Number(i.order):null,title:i.title,slug:y||null,icon_url:i.icon_url||null,short_description:i.short_description||null,focus_areas:i.focus_areas||null,toolset_list:i.toolset_list||null,cta_text:i.cta_text||null};if(o){const{error:E}=await dt.from("service").update(C).eq("id",o);E?u(`Update failed: ${E.message}`):(u("Updated"),a(null),s({...Wv}),g())}else{const{error:E}=await dt.from("service").insert(C);E?u(`Insert failed: ${E.message}`):(u("Inserted"),s({...Wv}),g())}p(!1)}function A(w){a(w.id),s({order:w.order??"",title:w.title||"",slug:w.slug||"",icon_url:w.icon_url||"",short_description:w.short_description||"",focus_areas:w.focus_areas||"",toolset_list:w.toolset_list||"",cta_text:w.cta_text||""})}async function b(w){if(!confirm("Delete this item?"))return;const{error:C}=await dt.from("service").delete().eq("id",w);C?u(`Delete failed: ${C.message}`):g()}return x.jsxs("div",{className:"p-4",children:[x.jsx("h2",{className:"text-2xl font-semibold mb-4 flex items-center",children:"Services"}),x.jsxs("form",{onSubmit:_,className:"grid grid-cols-1 md:grid-cols-3 gap-4 bg-white/60 p-5 rounded-xl border border-slate-200 shadow-sm",children:[x.jsx("input",{className:"rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100",placeholder:"Order",value:i.order,onChange:w=>s({...i,order:w.target.value})}),x.jsx("input",{className:"rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100",placeholder:"Title",value:i.title,onChange:w=>s({...i,title:w.target.value}),required:!0}),x.jsx("input",{className:"rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100",placeholder:"Slug (optional)",value:i.slug,onChange:w=>s({...i,slug:w.target.value})}),x.jsx("div",{className:"md:col-span-3",children:x.jsx(rs,{label:"Icon",pathPrefix:"service",value:i.icon_url,onChange:w=>s({...i,icon_url:w})})}),x.jsx("textarea",{className:"md:col-span-3 rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100",rows:3,placeholder:"Short description",value:i.short_description,onChange:w=>s({...i,short_description:w.target.value})}),x.jsx("textarea",{className:"md:col-span-3 rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100",rows:3,placeholder:"Focus areas (one per line)",value:i.focus_areas,onChange:w=>s({...i,focus_areas:w.target.value})}),x.jsx("textarea",{className:"md:col-span-3 rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100",rows:2,placeholder:"Toolset (one per line)",value:i.toolset_list,onChange:w=>s({...i,toolset_list:w.target.value})}),x.jsx("textarea",{className:"md:col-span-3 rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100",rows:2,placeholder:"Call to action",value:i.cta_text,onChange:w=>s({...i,cta_text:w.target.value})}),x.jsxs("div",{className:"md:col-span-3 flex gap-2 flex-wrap",children:[x.jsx("button",{disabled:h,className:"bg-blue-600 hover:bg-blue-500 disabled:bg-blue-600/50 text-white px-4 py-2 rounded",type:"submit",children:o?h?"Updating":"Update":h?"Creating":"Create"}),o&&x.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-600 text-white",onClick:()=>{a(null),s({...Wv})},children:"Cancel"}),l&&x.jsx("div",{className:"self-center text-sm opacity-80",children:l}),x.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Slug preview: ",x.jsx("span",{className:"font-mono",children:y||"n/a"})]})]})]}),x.jsx("div",{className:"mt-6",children:t?x.jsx("div",{children:"Loading"}):x.jsxs("table",{className:"w-full text-sm rounded-xl overflow-hidden",children:[x.jsx("thead",{className:"text-left opacity-80",children:x.jsxs("tr",{children:[x.jsx("th",{className:"p-2",children:"Order"}),x.jsx("th",{className:"p-2",children:"Title"}),x.jsx("th",{className:"p-2",children:"Icon"}),x.jsx("th",{className:"p-2",children:"Slug"}),x.jsx("th",{className:"p-2",children:"Actions"})]})}),x.jsx("tbody",{children:r.map(w=>x.jsxs("tr",{className:"border-t border-white/10",children:[x.jsx("td",{className:"p-2",children:w.order}),x.jsx("td",{className:"p-2",children:w.title}),x.jsx("td",{className:"p-2",children:w.icon_url?x.jsx("img",{src:w.icon_url,alt:"icon",className:"w-9 h-9 rounded object-cover"}):x.jsx("span",{className:"opacity-60",children:""})}),x.jsx("td",{className:"p-2 font-mono text-xs text-slate-500",children:w.slug||"auto"}),x.jsxs("td",{className:"p-2 flex gap-2",children:[x.jsx("button",{className:"px-3 py-1 rounded bg-amber-600 text-white",onClick:()=>A(w),children:"Edit"}),x.jsx("button",{className:"px-3 py-1 rounded bg-rose-600 text-white",onClick:()=>b(w.id),children:"Delete"})]})]},w.id))})]})})]})}function uK(){const r={order:"",name:"",icon_url:""},[e,t]=F.useState([]),[n,i]=F.useState(!0),[s,o]=F.useState(r),[a,l]=F.useState(null),[u,h]=F.useState(""),[p,g]=F.useState(!1);async function y(){i(!0);const{data:w}=await dt.from("technology").select("*").order("order");t(w||[]),i(!1)}F.useEffect(()=>{y()},[]);async function _(w){w.preventDefault(),h(""),g(!0);const C={order:s.order?Number(s.order):null,name:s.name,icon_url:s.icon_url||null};if(a){const{error:E}=await dt.from("technology").update(C).eq("id",a);E?h(`Update failed: ${E.message}`):(h("Updated"),l(null),o(r),y())}else{const{error:E}=await dt.from("technology").insert(C);E?h(`Insert failed: ${E.message}`):(h("Inserted"),o(r),y())}g(!1)}function A(w){l(w.id),o({order:w.order??"",name:w.name||"",icon_url:w.icon_url||""})}async function b(w){if(!confirm("Delete this item?"))return;const{error:C}=await dt.from("technology").delete().eq("id",w);C?h(`Delete failed: ${C.message}`):y()}return x.jsxs("div",{className:"p-4",children:[x.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Technologies"}),x.jsxs("form",{onSubmit:_,className:"grid grid-cols-1 md:grid-cols-3 gap-4 bg-white/60 p-5 rounded-xl border border-slate-200 shadow-sm",children:[x.jsx("input",{className:"rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100",placeholder:"Order",value:s.order,onChange:w=>o({...s,order:w.target.value})}),x.jsx("input",{className:"rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 md:col-span-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100",placeholder:"Name",value:s.name,onChange:w=>o({...s,name:w.target.value}),required:!0}),x.jsx("div",{className:"md:col-span-3",children:x.jsx(rs,{label:"Icon",pathPrefix:"technology",value:s.icon_url,onChange:w=>o({...s,icon_url:w})})}),x.jsxs("div",{className:"md:col-span-3 flex gap-2",children:[x.jsx("button",{disabled:p,className:"bg-blue-600 hover:bg-blue-500 disabled:bg-blue-600/50 text-white px-4 py-2 rounded",type:"submit",children:a?p?"Updating":"Update":p?"Creating":"Create"}),a&&x.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-600 text-white",onClick:()=>{l(null),o(r)},children:"Cancel"}),u&&x.jsx("div",{className:"self-center text-sm opacity-80",children:u})]})]}),x.jsx("div",{className:"mt-6",children:n?x.jsx("div",{children:"Loading"}):x.jsxs("table",{className:"w-full text-sm rounded-xl overflow-hidden",children:[x.jsx("thead",{className:"text-left opacity-80",children:x.jsxs("tr",{children:[x.jsx("th",{className:"p-2",children:"Order"}),x.jsx("th",{className:"p-2",children:"Name"}),x.jsx("th",{className:"p-2",children:"Icon"}),x.jsx("th",{className:"p-2",children:"Actions"})]})}),x.jsx("tbody",{children:e.map(w=>x.jsxs("tr",{className:"border-t border-white/10",children:[x.jsx("td",{className:"p-2",children:w.order}),x.jsx("td",{className:"p-2",children:w.name}),x.jsx("td",{className:"p-2",children:w.icon_url?x.jsx("img",{src:w.icon_url,alt:"icon",className:"w-9 h-9 rounded object-cover"}):x.jsx("span",{className:"opacity-60",children:""})}),x.jsxs("td",{className:"p-2 flex gap-2",children:[x.jsx("button",{className:"px-3 py-1 rounded bg-amber-600 text-white",onClick:()=>A(w),children:"Edit"}),x.jsx("button",{className:"px-3 py-1 rounded bg-rose-600 text-white",onClick:()=>b(w.id),children:"Delete"})]})]},w.id))})]})})]})}function dK(){const r={order:"",name:"",description:"",image_url:"",model_url:"",source_code_link:"",source_link_web:""},[e,t]=F.useState([]),[n,i]=F.useState(!0),[s,o]=F.useState(r),[a,l]=F.useState(null),[u,h]=F.useState(""),[p,g]=F.useState(!1),[y,_]=F.useState([]),[A,b]=F.useState([]);async function w(){i(!0);const{data:O}=await dt.from("project").select("*").order("order");t(O||[]);const{data:I}=await dt.from("tag").select("*").order("name");_(I||[]),i(!1)}F.useEffect(()=>{w()},[]);async function C(O){O.preventDefault(),h(""),g(!0);const I={order:s.order?Number(s.order):null,name:s.name,description:s.description||null,image_url:s.image_url||null,model_url:s.model_url||null,source_code_link:s.source_code_link||null,source_link_web:s.source_link_web||null};if(a){const{error:U}=await dt.from("project").update(I).eq("id",a);U?h(`Update failed: ${U.message}`):(await j(a,A),h("Updated"),l(null),o(r),b([]),w())}else{const{data:U,error:V}=await dt.from("project").insert(I).select("id").single();V?h(`Insert failed: ${V.message}`):(await j(U.id,A),h("Inserted"),o(r),b([]),w())}g(!1)}function E(O){l(O.id),o({order:O.order??"",name:O.name||"",description:O.description||"",image_url:O.image_url||"",model_url:O.model_url||"",source_code_link:O.source_code_link||"",source_link_web:O.source_link_web||""}),D(O.id)}async function R(O){if(!confirm("Delete this item?"))return;const{error:I}=await dt.from("project").delete().eq("id",O);I?h(`Delete failed: ${I.message}`):w()}function L(O){b(I=>I.includes(O)?I.filter(U=>U!==O):[...I,O])}async function D(O){const{data:I}=await dt.from("project_tag").select("tag_id").eq("project_id",O);b((I||[]).map(U=>U.tag_id))}async function j(O,I){if(await dt.from("project_tag").delete().eq("project_id",O),I.length){const U=I.map(V=>({project_id:O,tag_id:V}));await dt.from("project_tag").insert(U)}}return x.jsxs("div",{className:"p-4",children:[x.jsx("div",{className:"flex justify-between items-center mb-4",children:x.jsx("h2",{className:"text-xl font-semibold",children:"Projects"})}),x.jsxs("form",{onSubmit:C,className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-white/60 p-5 rounded-xl border border-slate-200 shadow-sm",children:[x.jsx("input",{className:"rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 focus:border-slate-400 focus:outline-none focus:ring-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100",placeholder:"Order",value:s.order,onChange:O=>o({...s,order:O.target.value})}),x.jsx("input",{className:"rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 focus:border-slate-400 focus:outline-none focus:ring-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100",placeholder:"Name",value:s.name,onChange:O=>o({...s,name:O.target.value}),required:!0}),x.jsx("div",{className:"md:col-span-2",children:x.jsx(rs,{label:"Project image",pathPrefix:"project",value:s.image_url,onChange:O=>o({...s,image_url:O})})}),x.jsx("input",{className:"rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 md:col-span-2 focus:border-slate-400 focus:outline-none focus:ring-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100",placeholder:"3D model GLB/GLTF URL (optional)",value:s.model_url,onChange:O=>o({...s,model_url:O.target.value})}),x.jsx("input",{className:"rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 focus:border-slate-400 focus:outline-none focus:ring-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100",placeholder:"Source code link",value:s.source_code_link,onChange:O=>o({...s,source_code_link:O.target.value})}),x.jsx("input",{className:"rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 md:col-span-2 focus:border-slate-400 focus:outline-none focus:ring-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100",placeholder:"Live link",value:s.source_link_web,onChange:O=>o({...s,source_link_web:O.target.value})}),x.jsx("textarea",{className:"rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 md:col-span-2 focus:border-slate-400 focus:outline-none focus:ring-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100",rows:4,placeholder:"Description",value:s.description,onChange:O=>o({...s,description:O.target.value})}),x.jsxs("div",{className:"md:col-span-2",children:[x.jsx("div",{className:"text-sm opacity-80 mb-1",children:"Tags"}),x.jsx("div",{className:"flex flex-wrap gap-2",children:y.map(O=>x.jsx("button",{type:"button",onClick:()=>L(O.id),className:`px-2 py-1 rounded-full border ${A.includes(O.id)?"bg-emerald-600 border-emerald-500":"bg-white/10 border-white/10"}`,children:O.name},O.id))})]}),x.jsxs("div",{className:"md:col-span-2 flex gap-2",children:[x.jsx("button",{disabled:p,className:"bg-blue-600 hover:bg-blue-500 disabled:bg-blue-600/50 text-white px-4 py-2 rounded",type:"submit",children:a?p?"Updating":"Update":p?"Creating":"Create"}),a&&x.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-600 text-white",onClick:()=>{l(null),o(r)},children:"Cancel"}),u&&x.jsx("div",{className:"self-center text-sm opacity-80",children:u})]})]}),x.jsx("div",{className:"mt-6",children:n?x.jsx("div",{children:"Loading"}):x.jsxs("table",{className:"w-full text-sm rounded-xl overflow-hidden",children:[x.jsx("thead",{className:"text-left opacity-80",children:x.jsxs("tr",{children:[x.jsx("th",{className:"p-2",children:"Order"}),x.jsx("th",{className:"p-2",children:"Name"}),x.jsx("th",{className:"p-2",children:"Image"}),x.jsx("th",{className:"p-2",children:"Actions"})]})}),x.jsx("tbody",{children:e.map(O=>x.jsxs("tr",{className:"border-t border-white/10",children:[x.jsx("td",{className:"p-2",children:O.order}),x.jsx("td",{className:"p-2",children:O.name}),x.jsx("td",{className:"p-2",children:O.image_url?x.jsx("img",{src:O.image_url,alt:"img",className:"w-12 h-9 object-cover rounded"}):x.jsx("span",{className:"opacity-60",children:""})}),x.jsxs("td",{className:"p-2 flex gap-2",children:[x.jsx("button",{className:"px-3 py-1 rounded bg-amber-600 text-white",onClick:()=>E(O),children:"Edit"}),x.jsx("button",{className:"px-3 py-1 rounded bg-rose-600 text-white",onClick:()=>R(O.id),children:"Delete"})]})]},O.id))})]})}),x.jsxs("div",{className:"mt-3 text-xs opacity-80",children:["Tip: Click tags to toggle selection. Add new tags in table ",x.jsx("code",{children:"tag"}),"."]})]})}function hK(){const r={order:"",testimonial:"",name:"",designation:"",company:"",image_url:""},[e,t]=F.useState([]),[n,i]=F.useState(!0),[s,o]=F.useState(r),[a,l]=F.useState(null),[u,h]=F.useState(""),[p,g]=F.useState(!1);async function y(){i(!0);const{data:w}=await dt.from("testimonial").select("*").order("order");t(w||[]),i(!1)}F.useEffect(()=>{y()},[]);async function _(w){w.preventDefault(),h(""),g(!0);const C={order:s.order?Number(s.order):null,testimonial:s.testimonial||null,name:s.name||null,designation:s.designation||null,company:s.company||null,image_url:s.image_url||null};if(a){const{error:E}=await dt.from("testimonial").update(C).eq("id",a);E?h(`Update failed: ${E.message}`):(h("Updated"),l(null),o(r),y())}else{const{error:E}=await dt.from("testimonial").insert(C);E?h(`Insert failed: ${E.message}`):(h("Inserted"),o(r),y())}g(!1)}function A(w){l(w.id),o({order:w.order??"",testimonial:w.testimonial||"",name:w.name||"",designation:w.designation||"",company:w.company||"",image_url:w.image_url||""})}async function b(w){if(!confirm("Delete this item?"))return;const{error:C}=await dt.from("testimonial").delete().eq("id",w);C?h(`Delete failed: ${C.message}`):y()}return x.jsxs("div",{className:"p-4",children:[x.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Testimonials"}),x.jsxs("form",{onSubmit:_,className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-white/60 p-5 rounded-xl border border-slate-200 shadow-sm",children:[x.jsx("input",{className:"rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800",placeholder:"Order",value:s.order,onChange:w=>o({...s,order:w.target.value})}),x.jsx("input",{className:"rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800",placeholder:"Name",value:s.name,onChange:w=>o({...s,name:w.target.value})}),x.jsx("input",{className:"rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800",placeholder:"Designation",value:s.designation,onChange:w=>o({...s,designation:w.target.value})}),x.jsx("input",{className:"rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800",placeholder:"Company",value:s.company,onChange:w=>o({...s,company:w.target.value})}),x.jsx("div",{className:"md:col-span-2",children:x.jsx(rs,{label:"Avatar",pathPrefix:"testimonial",value:s.image_url,onChange:w=>o({...s,image_url:w})})}),x.jsx("textarea",{className:"rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 md:col-span-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100",rows:3,placeholder:"Testimonial",value:s.testimonial,onChange:w=>o({...s,testimonial:w.target.value})}),x.jsxs("div",{className:"md:col-span-2 flex gap-2",children:[x.jsx("button",{disabled:p,className:"bg-blue-600 hover:bg-blue-500 disabled:bg-blue-600/50 text-white px-4 py-2 rounded",type:"submit",children:a?p?"Updating":"Update":p?"Creating":"Create"}),a&&x.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-600 text-white",onClick:()=>{l(null),o(r)},children:"Cancel"}),u&&x.jsx("div",{className:"self-center text-sm opacity-80",children:u})]})]}),x.jsx("div",{className:"mt-6",children:n?x.jsx("div",{children:"Loading"}):x.jsxs("table",{className:"w-full text-sm rounded-xl overflow-hidden",children:[x.jsx("thead",{className:"text-left opacity-80",children:x.jsxs("tr",{children:[x.jsx("th",{className:"p-2",children:"Order"}),x.jsx("th",{className:"p-2",children:"Name"}),x.jsx("th",{className:"p-2",children:"Company"}),x.jsx("th",{className:"p-2",children:"Avatar"}),x.jsx("th",{className:"p-2",children:"Actions"})]})}),x.jsx("tbody",{children:e.map(w=>x.jsxs("tr",{className:"border-t border-white/10",children:[x.jsx("td",{className:"p-2",children:w.order}),x.jsx("td",{className:"p-2",children:w.name}),x.jsx("td",{className:"p-2",children:w.company}),x.jsx("td",{className:"p-2",children:w.image_url?x.jsx("img",{src:w.image_url,alt:"avatar",className:"w-9 h-9 rounded-full object-cover"}):x.jsx("span",{className:"opacity-60",children:""})}),x.jsxs("td",{className:"p-2 flex gap-2",children:[x.jsx("button",{className:"px-3 py-1 rounded bg-amber-600 text-white",onClick:()=>A(w),children:"Edit"}),x.jsx("button",{className:"px-3 py-1 rounded bg-rose-600 text-white",onClick:()=>b(w.id),children:"Delete"})]})]},w.id))})]})})]})}const Ic=3,aA=8;function fK(r=""){return r.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function T2(r){if(!r)return"";const e=r.trim();return e?/^https?:\/\//i.test(e)?e:`https://${e}`:""}function lA(r){const e=[],t=new Set;if(!Array.isArray(r))return e;const n=i=>{const s=String(i||"").trim();if(!s)return;const o=s.toLowerCase();t.has(o)||e.length>=aA||(t.add(o),e.push(s))};return r.forEach(i=>{typeof i=="string"&&i.includes(",")?i.split(",").forEach(n):n(i)}),e}function pK(r){return r?lA(String(r).split(",")):[]}function XN({accent:r}){const e={title:"",excerpt:"",content:"",cover_url:"",project_url:"",download_label:"",download_url:"",gallery_urls:[],tech_tags:[],portfolio_featured:!1,portfolio_order:999},[t,n]=F.useState([]),[i,s]=F.useState(!0),[o,a]=F.useState(e),[l,u]=F.useState(null),[h,p]=F.useState(""),[g,y]=F.useState(!1),[_,A]=F.useState("");async function b(){s(!0);const I=await lR();n(I),s(!1)}F.useEffect(()=>{b()},[]);function w(){a(e),A("")}async function C(I){I.preventDefault(),p(""),y(!0);const U=Array.isArray(o.gallery_urls)?o.gallery_urls.map(ie=>(ie||"").trim()).filter(Boolean):[],V=T2(o.project_url||""),ee=T2(o.download_url||""),te=lA(o.tech_tags||[]),ne=te.join(", "),de={slug:(o.title?fK(o.title):"")||null,title:o.title||null,excerpt:o.excerpt||null,content:fd(o.content)||null,tag:ne||null,cover_url:o.cover_url||null,project_url:V||null,download_label:o.download_label||null,download_url:ee||null,gallery_urls:U,tech_tags:te,portfolio_featured:!!o.portfolio_featured,portfolio_order:Number.isFinite(o.portfolio_order)?o.portfolio_order:999};try{l?(await ID(l,de),p("Updated"),u(null),w(),b()):(await PD(de),p("Inserted"),w(),b())}catch(ie){p(ie.message||"Operation failed")}y(!1)}function E(I){u(I.id);const U=lA(I.tech_tags||[]);a({title:I.title||"",excerpt:I.excerpt||"",content:fd(I.content||""),cover_url:I.cover_url||"",project_url:I.project_url||"",download_label:I.download_label||"",download_url:I.download_url||"",gallery_urls:Array.isArray(I.gallery_urls)?I.gallery_urls.slice(0,Ic):[],tech_tags:U,portfolio_featured:!!I.portfolio_featured,portfolio_order:typeof I.portfolio_order=="number"?I.portfolio_order:999}),A(U.join(", "))}async function R(I){if(confirm("Delete this post?"))try{await LD(I),b()}catch(U){p(`Delete failed: ${U.message}`)}}const L=Array.isArray(o.gallery_urls)?o.gallery_urls.slice(0,Ic):[];function D(){a(I=>{const U=Array.isArray(I.gallery_urls)?I.gallery_urls.slice(0,Ic):[];return U.length>=Ic?I:{...I,gallery_urls:[...U,""]}})}function j(I,U){a(V=>{const ee=Array.isArray(V.gallery_urls)?V.gallery_urls.slice(0,Ic):[];if(I<0||I>=ee.length)return V;const te=[...ee];return te[I]=U,{...V,gallery_urls:te}})}function O(I){a(U=>{const V=Array.isArray(U.gallery_urls)?U.gallery_urls.slice(0,Ic):[];if(I<0||I>=V.length)return U;const ee=V.filter((te,ne)=>ne!==I);return{...U,gallery_urls:ee}})}return x.jsxs("div",{className:"p-4",children:[x.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Blog Posts"}),x.jsxs("form",{onSubmit:C,className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-white/60 p-5 rounded-xl border border-slate-200 shadow-sm",children:[x.jsx("input",{className:"rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800",placeholder:"Title",value:o.title,onChange:I=>a({...o,title:I.target.value}),required:!0}),x.jsx("div",{className:"md:col-span-2",children:x.jsx(rs,{label:"Cover image",bucket:"Postimg",pathPrefix:"covers",value:o.cover_url,onChange:I=>a({...o,cover_url:I})})}),x.jsx("input",{className:"rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 md:col-span-2",placeholder:"Excerpt",value:o.excerpt,onChange:I=>a({...o,excerpt:I.target.value})}),x.jsx("input",{className:"rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 md:col-span-2",placeholder:"Project link (https://...)",value:o.project_url,onChange:I=>a({...o,project_url:I.target.value})}),x.jsx("input",{className:"rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800",placeholder:"Download label (e.g. Deck, Resume)",value:o.download_label,onChange:I=>a({...o,download_label:I.target.value})}),x.jsx("div",{className:"md:col-span-2",children:x.jsx(ER,{label:"Download file URL",value:o.download_url,onChange:I=>a({...o,download_url:I})})}),x.jsxs("div",{className:"md:col-span-2 rounded-2xl border border-slate-200 bg-white/70 p-4 shadow-sm",children:[x.jsxs("div",{className:"flex items-center justify-between gap-3",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Show in portfolio projects"}),x.jsx("p",{className:"text-xs text-slate-500",children:"Feature this post as a project card on your portfolio page."})]}),x.jsxs("label",{className:"inline-flex items-center gap-2 text-xs font-semibold text-slate-600",children:[x.jsx("input",{type:"checkbox",checked:!!o.portfolio_featured,onChange:I=>a(U=>({...U,portfolio_featured:I.target.checked})),className:"h-4 w-4 rounded border-slate-300"}),"Featured"]})]}),o.portfolio_featured&&x.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[x.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Display order"}),x.jsx("input",{type:"number",min:1,className:"w-24 rounded-2xl border border-slate-300 bg-white px-3 py-1.5 text-sm text-slate-800 focus:border-slate-400 focus:outline-none focus:ring-2",value:o.portfolio_order??999,onChange:I=>a(U=>({...U,portfolio_order:Number(I.target.value)||999}))})]})]}),x.jsxs("div",{className:"md:col-span-2 space-y-2",children:[x.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Technologies used"}),x.jsx("input",{className:"w-full rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 focus:border-slate-400 focus:outline-none focus:ring-2",placeholder:"e.g. React, Supabase",value:_,onChange:I=>{const U=I.target.value;A(U);const V=pK(U);a(ee=>({...ee,tech_tags:V}))}}),x.jsxs("p",{className:"text-xs text-slate-500",children:["Separate technologies with commas. Up to ",aA," entries."]})]}),x.jsxs("div",{className:"md:col-span-2 space-y-3",children:[x.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[x.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Additional gallery images"}),x.jsx("button",{type:"button",onClick:D,disabled:L.length>=Ic,className:"rounded-full border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-700 transition hover:bg-slate-100 disabled:opacity-50",children:"Add image"})]}),L.length===0&&x.jsxs("p",{className:"text-sm text-slate-500",children:["Add up to ",Ic," supporting screenshots for this project."]}),L.map((I,U)=>x.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-sm",children:[x.jsx(rs,{label:`Gallery image ${U+1}`,bucket:"Postimg",pathPrefix:"post-gallery",value:I,onChange:V=>j(U,V)}),x.jsx("div",{className:"mt-2 flex justify-end",children:x.jsx("button",{type:"button",onClick:()=>O(U),className:"text-xs font-semibold text-rose-500",children:"Remove"})})]},`admin-gallery-${U}`))]}),x.jsxs("div",{className:"md:col-span-2 space-y-2",children:[x.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Post body"}),x.jsx(Ty,{value:o.content,onChange:I=>a({...o,content:I}),accent:r,placeholder:"Write, format, and link content. Use the toolbar above to style your post."})]}),x.jsxs("div",{className:"md:col-span-2 flex gap-2",children:[x.jsx("button",{disabled:g,className:"bg-blue-600 hover:bg-blue-500 disabled:bg-blue-600/50 text-white px-4 py-2 rounded",type:"submit",children:l?g?"Updating":"Update":g?"Creating":"Create"}),l&&x.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-600 text-white",onClick:()=>{u(null),w()},children:"Cancel"}),h&&x.jsx("div",{className:"self-center text-sm opacity-80",children:h})]})]}),x.jsx("div",{className:"mt-6",children:i?x.jsx("div",{children:"Loading"}):x.jsxs("table",{className:"w-full text-sm rounded-xl overflow-hidden",children:[x.jsx("thead",{className:"text-left opacity-80",children:x.jsxs("tr",{children:[x.jsx("th",{className:"p-2",children:"Published"}),x.jsx("th",{className:"p-2",children:"Title"}),x.jsx("th",{className:"p-2",children:"Tag & stack"}),x.jsx("th",{className:"p-2",children:"Actions"})]})}),x.jsx("tbody",{children:t.map(I=>x.jsxs("tr",{className:"border-t border-white/10",children:[x.jsx("td",{className:"p-2 whitespace-nowrap",children:new Date(I.published_at||I.created_at).toLocaleDateString()}),x.jsx("td",{className:"p-2",children:I.title}),x.jsxs("td",{className:"p-2",children:[x.jsx("div",{children:I.tag}),Array.isArray(I.tech_tags)&&I.tech_tags.length>0&&x.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:I.tech_tags.slice(0,aA).map(U=>x.jsx("span",{className:"rounded-full bg-slate-900/5 px-2 py-0.5 text-[11px] font-semibold text-slate-600",children:U},`${I.id}-${U}`))})]}),x.jsxs("td",{className:"p-2 flex gap-2",children:[x.jsx("button",{className:"px-3 py-1 rounded bg-amber-600 text-white",onClick:()=>E(I),children:"Edit"}),x.jsx("button",{className:"px-3 py-1 rounded bg-rose-600 text-white",onClick:()=>R(I.id),children:"Delete"})]})]},I.id))})]})})]})}XN.propTypes={accent:Ve.object};function mK(){const r={full_name:"",github_url:"",linkedin_url:"",about_text:"",photo_url:""},[e,t]=F.useState(null),[n,i]=F.useState(r),[s,o]=F.useState(!0),[a,l]=F.useState(!1),[u,h]=F.useState("");async function p(){o(!0);const{data:y}=await dt.from("profile").select("*").order("id").limit(1),_=Array.isArray(y)&&y.length>0?y[0]:null;t(_),i({full_name:_?.full_name||"",github_url:_?.github_url||"",linkedin_url:_?.linkedin_url||"",about_text:_?.about_text||"",photo_url:_?.photo_url||""}),o(!1)}F.useEffect(()=>{p()},[]);async function g(y){y.preventDefault(),l(!0),h("");const _={full_name:n.full_name||null,github_url:n.github_url||null,linkedin_url:n.linkedin_url||null,about_text:n.about_text||null,photo_url:n.photo_url||null};try{if(e?.id){const{error:A}=await dt.from("profile").update(_).eq("id",e.id);if(A)throw A;h("Updated")}else{const{error:A}=await dt.from("profile").insert(_);if(A)throw A;h("Inserted")}p()}catch(A){h(`Save failed: ${A.message}`)}finally{l(!1)}}return x.jsxs("div",{className:"p-4",children:[x.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Profile"}),s?x.jsx("div",{children:"Loading..."}):x.jsxs("form",{onSubmit:g,className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-white/60 p-5 rounded-xl border border-slate-200 shadow-sm",children:[x.jsx("div",{className:"md:col-span-2",children:x.jsx(rs,{label:"Photo",pathPrefix:"profile",value:n.photo_url,onChange:y=>i({...n,photo_url:y})})}),x.jsx("textarea",{className:"rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 md:col-span-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100",rows:6,placeholder:"About text (one paragraph per line)",value:n.about_text,onChange:y=>i({...n,about_text:y.target.value})}),x.jsxs("div",{className:"md:col-span-2 flex gap-2",children:[x.jsx("button",{disabled:a,className:"bg-blue-600 hover:bg-blue-500 disabled:bg-blue-600/50 text-white px-4 py-2 rounded",type:"submit",children:a?"Saving...":e?.id?"Update":"Create"}),u&&x.jsx("div",{className:"self-center text-sm opacity-80",children:u})]})]})]})}const R2={headline_words:`Professional Coder.
Full Stack Developer.
UI Designer.`},gK={full_name:"",github_url:"",linkedin_url:""};function vK({items:r,onChange:e}){function t(s,o,a){const l=(r||[]).map((u,h)=>h===s?{...u,[o]:a}:u);e(l)}function n(){e([...r||[],{mesh:"",label:""}])}function i(s){e((r||[]).filter((o,a)=>a!==s))}return x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("h4",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Desk labels"}),x.jsx("button",{type:"button",onClick:n,className:"rounded-full border border-slate-200 px-3 py-1 text-xs text-slate-600 hover:bg-slate-100 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800",children:"Add label"})]}),(r||[]).map((s,o)=>x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-2 items-center",children:[x.jsx("input",{className:"md:col-span-2 rounded-2xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 focus:border-slate-400 focus:outline-none focus:ring-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-200",placeholder:"GLTF mesh name (exact e.g., plane002_1)",value:s.mesh,onChange:a=>t(o,"mesh",a.target.value)}),x.jsx("input",{className:"md:col-span-3 rounded-2xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 focus:border-slate-400 focus:outline-none focus:ring-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-200",placeholder:"Label text (shown on hover)",value:s.label,onChange:a=>t(o,"label",a.target.value)}),x.jsx("button",{type:"button",onClick:()=>i(o),className:"rounded-full border border-slate-200 px-3 py-1 text-xs text-slate-600 hover:bg-slate-100 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800",children:"Remove"})]},`${s.mesh||"mesh"}-${o}`))]})}function yK(){const[r,e]=F.useState(!0),[t,n]=F.useState(Dn.deskLabels),[i,s]=F.useState(null),[o,a]=F.useState(Dn),[l,u]=F.useState({saving:!1,message:"",error:""}),[h,p]=F.useState(null),[g,y]=F.useState({headline_words:R2.headline_words}),[_,A]=F.useState(""),[b,w]=F.useState(""),[C,E]=F.useState(!1),[R,L]=F.useState(null),[D,j]=F.useState(gK),[O,I]=F.useState(""),[U,V]=F.useState(""),[ee,te]=F.useState(!1);F.useEffect(()=>{let ie=!1;async function J(){e(!0);const[{data:Q,error:H},{data:X,error:Z},{data:ye,error:be}]=await Promise.all([dt.from("settings").select("id, blog").limit(1).maybeSingle(),dt.from("hero_config").select("*").order("created_at").limit(1),dt.from("profile").select("*").order("id").limit(1)]);if(ie)return;if(H){u(je=>({...je,error:H.message||"Could not load desk labels"})),e(!1);return}if(Z){w(Z.message||"Could not load hero settings"),e(!1);return}if(be){V(be.message||"Could not load profile info"),e(!1);return}const Le=Pa(Q?.blog||Dn);a(Le),n(Le.deskLabels||[]),s(Q?.id||null);const pe=Array.isArray(X)&&X.length>0?X[0]:null;p(pe),y({headline_words:Array.isArray(pe?.headline_words)?pe.headline_words.join(`
`):pe?.headline_words||R2.headline_words});const Ae=Array.isArray(ye)&&ye.length>0?ye[0]:null;L(Ae),j({full_name:Ae?.full_name||"",github_url:Ae?.github_url||"",linkedin_url:Ae?.linkedin_url||""}),e(!1)}return J(),()=>{ie=!0}},[]);async function ne(ie){ie.preventDefault(),u({saving:!0,message:"",error:""});const J=Pa({...o,deskLabels:t});try{if(i){const{error:Q}=await dt.from("settings").update({blog:J}).eq("id",i);if(Q)throw Q}else{const{data:Q,error:H}=await dt.from("settings").insert({blog:J}).select("id").single();if(H)throw H;Q?.id&&s(Q.id)}a(J),u({saving:!1,message:"Desk labels saved",error:""})}catch(Q){u({saving:!1,message:"",error:Q.message||"Could not save desk labels"})}}async function le(ie){ie.preventDefault(),E(!0),A(""),w("");const J={headline_words:g.headline_words?g.headline_words.split(`
`).map(Q=>Q.trim()).filter(Boolean):null};try{if(h?.id){const{error:Q}=await dt.from("hero_config").update(J).eq("id",h.id);if(Q)throw Q;A("Hero settings updated")}else{const{data:Q,error:H}=await dt.from("hero_config").insert(J).select("*").single();if(H)throw H;p(Q),A("Hero settings saved")}}catch(Q){w(Q.message||"Could not save hero settings")}finally{E(!1)}}async function de(ie){ie.preventDefault(),te(!0),I(""),V("");const J={full_name:D.full_name||null,github_url:D.github_url||null,linkedin_url:D.linkedin_url||null};try{if(R?.id){const{error:Q}=await dt.from("profile").update(J).eq("id",R.id);if(Q)throw Q;I("Profile links updated")}else{const{data:Q,error:H}=await dt.from("profile").insert(J).select("*").single();if(H)throw H;L(Q),I("Profile links saved")}}catch(Q){V(Q.message||"Could not save profile links")}finally{te(!1)}}return x.jsxs("div",{className:"p-4",children:[x.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Hero"}),r?x.jsx("div",{children:"Loading..."}):x.jsxs("div",{className:"space-y-6",children:[x.jsxs("form",{onSubmit:de,className:"space-y-4 bg-white/60 p-5 rounded-xl border border-slate-200 shadow-sm",children:[x.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[x.jsx("input",{value:D.full_name,onChange:ie=>j(J=>({...J,full_name:ie.target.value})),placeholder:"Name",className:"rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100"}),x.jsx("input",{value:D.github_url,onChange:ie=>j(J=>({...J,github_url:ie.target.value})),placeholder:"GitHub URL",className:"rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100"})]}),x.jsx("input",{value:D.linkedin_url,onChange:ie=>j(J=>({...J,linkedin_url:ie.target.value})),placeholder:"LinkedIn URL",className:"w-full rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-800 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100"}),x.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[x.jsx("button",{type:"submit",disabled:ee,className:"rounded-full bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-500 disabled:bg-blue-600/50",children:ee?"Saving":"Save hero links"}),(O||U)&&x.jsx("span",{className:`text-sm ${U?"text-rose-500":"text-emerald-600"}`,children:U||O})]})]}),x.jsxs("form",{onSubmit:le,className:"space-y-4 bg-white/60 p-5 rounded-xl border border-slate-200 shadow-sm",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300",children:"Headline words (typewriter)  one per line"}),x.jsx("textarea",{rows:4,value:g.headline_words,onChange:ie=>y(J=>({...J,headline_words:ie.target.value})),className:"w-full rounded-2xl border border-slate-300 bg-white px-4 py-3 text-sm text-slate-800 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100",placeholder:"Business Analytics\\nProcess Automation"})]}),x.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[x.jsx("button",{type:"submit",disabled:C,className:"rounded-full bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-500 disabled:bg-blue-600/50",children:C?"Saving":"Save hero settings"}),(_||b)&&x.jsx("span",{className:`text-sm ${b?"text-rose-500":"text-emerald-600"}`,children:b||_})]})]}),x.jsxs("form",{onSubmit:ne,className:"space-y-4 bg-white/60 p-5 rounded-xl border border-slate-200 shadow-sm",children:[x.jsx("p",{className:"text-sm text-slate-600",children:"Map the GLTF mesh names from your 3D desk model to the hover labels that appear in the hero section. Use the same mesh names you see in Blender or the GLB inspector."}),x.jsx(vK,{items:t,onChange:n}),x.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[x.jsx("button",{type:"submit",disabled:l.saving,className:"rounded-full bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-500 disabled:bg-blue-600/50",children:l.saving?"Saving":"Save desk labels"}),(l.message||l.error)&&x.jsx("span",{className:`text-sm ${l.error?"text-rose-500":"text-emerald-600"}`,children:l.error||l.message})]})]})]})]})}const xK=["#38bdf8","#6366f1","#0ea5e9","#22c55e","#f97316","#ef4444","#d946ef","#14b8a6","#eab308"],P2={base:ji,button:"",logo:"",lightShell:fn.lightShell,darkShell:fn.darkShell,heroOverlay:fn.heroOverlay,heroCard:fn.heroCard,heroChip:fn.heroChip};function _K({themeColors:r,accent:e,loading:t,saving:n,message:i,error:s,onPreview:o,onSave:a,onReset:l}){const[u,h]=F.useState(P2),[p,g]=F.useState(!1),[y,_]=F.useState(!1);F.useEffect(()=>{h({base:r.base,button:r.button||"",logo:r.logo||"",lightShell:r.lightShell,darkShell:r.darkShell,heroOverlay:r.heroOverlay,heroCard:r.heroCard,heroChip:r.heroChip}),g(!!r.button),_(!!r.logo)},[r]);const A=F.useMemo(()=>Go(u.base),[u.base]),b=F.useMemo(()=>!p||Go(u.button),[p,u.button]),w=F.useMemo(()=>!y||Go(u.logo),[y,u.logo]),C=F.useMemo(()=>Go(u.lightShell),[u.lightShell]),E=F.useMemo(()=>Go(u.darkShell),[u.darkShell]),R=F.useMemo(()=>Go(u.heroOverlay),[u.heroOverlay]),L=F.useMemo(()=>Go(u.heroCard),[u.heroCard]),D=F.useMemo(()=>Go(u.heroChip),[u.heroChip]),j=A&&b&&w&&C&&E&&R&&L&&D&&!t;function O(V={},ee={}){const te=ee.buttonCustom??p,ne=ee.logoCustom??y,le=V.base??u.base;if(!Go(le))return;const de=kn(le,ji),ie={base:de,button:"",logo:"",lightShell:kn(V.lightShell??u.lightShell,fn.lightShell),darkShell:kn(V.darkShell??u.darkShell,fn.darkShell)};if(te){const J=V.button??u.button;Go(J)&&(ie.button=kn(J,de))}if(ne){const J=V.logo??u.logo;Go(J)&&(ie.logo=kn(J,de))}ie.heroOverlay=kn(V.heroOverlay??u.heroOverlay,fn.heroOverlay),ie.heroCard=kn(V.heroCard??u.heroCard,ie.heroOverlay),ie.heroChip=kn(V.heroChip??u.heroChip,de),o(ie)}function I(V){V.preventDefault(),j&&a({base:kn(u.base,ji),button:p?kn(u.button,u.base||ji):"",logo:y?kn(u.logo,u.base||ji):"",lightShell:kn(u.lightShell,fn.lightShell),darkShell:kn(u.darkShell,fn.darkShell),heroOverlay:kn(u.heroOverlay,fn.heroOverlay),heroCard:kn(u.heroCard,u.heroOverlay||fn.heroCard),heroChip:kn(u.heroChip,u.base||fn.heroChip)})}function U(V,ee){h(te=>({...te,[V]:ee})),O({[V]:ee})}return x.jsxs("form",{onSubmit:I,className:"space-y-6",children:[x.jsxs("section",{className:"space-y-4",children:[x.jsxs("div",{className:"grid gap-4 sm:grid-cols-[160px,1fr] sm:items-center",children:[x.jsx("label",{htmlFor:"theme-base",className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Primary accent"}),x.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[x.jsx("input",{id:"theme-base",type:"color",value:kn(u.base,ji),onChange:V=>{h(ee=>({...ee,base:V.target.value})),O({base:V.target.value})},className:"h-12 w-12 cursor-pointer rounded-xl border border-slate-200 bg-transparent p-1 shadow-sm dark:border-slate-700","aria-label":"Pick primary accent color"}),x.jsx("input",{type:"text",value:u.base,onChange:V=>{h(ee=>({...ee,base:V.target.value})),O({base:V.target.value})},placeholder:"#38bdf8",className:"min-w-[160px] flex-1 rounded-2xl border border-slate-200 bg-white px-4 py-2 text-sm text-slate-700 focus:border-slate-400 focus:outline-none focus:ring-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-200",style:{"--tw-ring-color":e.soft},"aria-invalid":!A}),x.jsx("button",{type:"button",onClick:()=>{h({...P2}),g(!1),_(!1),l()},className:"rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:bg-slate-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800",style:{"--tw-ring-color":e.soft},children:"Reset to default"})]})]}),x.jsxs("div",{children:[x.jsx("p",{className:"mb-3 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Quick picks"}),x.jsx("div",{className:"flex flex-wrap gap-2",children:xK.map(V=>x.jsx("button",{type:"button",onClick:()=>{h(ee=>({...ee,base:V})),O({base:V})},className:"h-9 w-9 rounded-full border border-white/60 shadow-sm transition hover:scale-105 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",style:{backgroundColor:V,"--tw-ring-color":V},"aria-label":`Use ${V}`},V))})]})]}),x.jsxs("section",{className:"space-y-5",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Hero spotlight"}),x.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Control the tint, card, and chip colors used on featured post overlays."})]}),x.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[x.jsxs("div",{children:[x.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Overlay tint"}),x.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[x.jsx("input",{type:"color",value:kn(u.heroOverlay,fn.heroOverlay),onChange:V=>U("heroOverlay",V.target.value),className:"h-12 w-12 cursor-pointer rounded-xl border border-slate-200 bg-transparent p-1 shadow-sm dark:border-slate-700","aria-label":"Pick hero overlay color"}),x.jsx("input",{type:"text",value:u.heroOverlay,onChange:V=>U("heroOverlay",V.target.value),className:"flex-1 rounded-2xl border border-slate-200 bg-white px-4 py-2 text-sm text-slate-700 focus:border-slate-400 focus:outline-none focus:ring-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-200",style:{"--tw-ring-color":e.soft},"aria-invalid":!R})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Card background"}),x.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[x.jsx("input",{type:"color",value:kn(u.heroCard,fn.heroCard),onChange:V=>U("heroCard",V.target.value),className:"h-12 w-12 cursor-pointer rounded-xl border border-slate-200 bg-transparent p-1 shadow-sm dark:border-slate-700","aria-label":"Pick hero card color"}),x.jsx("input",{type:"text",value:u.heroCard,onChange:V=>U("heroCard",V.target.value),className:"flex-1 rounded-2xl border border-slate-200 bg-white px-4 py-2 text-sm text-slate-700 focus:border-slate-400 focus:outline-none focus:ring-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-200",style:{"--tw-ring-color":e.soft},"aria-invalid":!L})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Chip background"}),x.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[x.jsx("input",{type:"color",value:kn(u.heroChip,fn.heroChip),onChange:V=>U("heroChip",V.target.value),className:"h-12 w-12 cursor-pointer rounded-xl border border-slate-200 bg-transparent p-1 shadow-sm dark:border-slate-700","aria-label":"Pick hero chip color"}),x.jsx("input",{type:"text",value:u.heroChip,onChange:V=>U("heroChip",V.target.value),className:"flex-1 rounded-2xl border border-slate-200 bg-white px-4 py-2 text-sm text-slate-700 focus:border-slate-400 focus:outline-none focus:ring-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-200",style:{"--tw-ring-color":e.soft},"aria-invalid":!D})]})]})]})]}),x.jsxs("section",{className:"space-y-4",children:[x.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4 dark:border-slate-700",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Buttons & call-to-actions"}),x.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:"Override the primary accent just for buttons."})]}),x.jsxs("label",{className:"inline-flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400",children:[x.jsx("input",{type:"checkbox",checked:p,onChange:V=>{if(g(V.target.checked),V.target.checked){const ee=u.button||u.base||ji;h(te=>({...te,button:ee})),O({button:ee},{buttonCustom:!0})}else h(ee=>({...ee,button:""})),O({button:""},{buttonCustom:!1})},className:"h-4 w-4 rounded border-slate-300 accent-[var(--admin-accent-base)] focus:ring-[var(--admin-accent-soft)]"}),"Use custom color"]})]}),p&&x.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-4",children:[x.jsx("input",{type:"color",value:kn(u.button,u.base||ji),onChange:V=>{h(ee=>({...ee,button:V.target.value})),O({button:V.target.value})},className:"h-12 w-12 cursor-pointer rounded-xl border border-slate-200 bg-transparent p-1 shadow-sm dark:border-slate-700","aria-label":"Pick button accent color"}),x.jsx("input",{type:"text",value:u.button,onChange:V=>{h(ee=>({...ee,button:V.target.value})),O({button:V.target.value})},placeholder:u.base,className:"min-w-[160px] flex-1 rounded-2xl border border-slate-200 bg-white px-4 py-2 text-sm text-slate-700 focus:border-slate-400 focus:outline-none focus:ring-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-200",style:{"--tw-ring-color":e.soft},"aria-invalid":!b})]})]}),x.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4 dark:border-slate-700",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Logo halo"}),x.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:"Adjust the glow behind your logo badge."})]}),x.jsxs("label",{className:"inline-flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400",children:[x.jsx("input",{type:"checkbox",checked:y,onChange:V=>{if(_(V.target.checked),V.target.checked){const ee=u.logo||u.base||ji;h(te=>({...te,logo:ee})),O({logo:ee},{logoCustom:!0})}else h(ee=>({...ee,logo:""})),O({logo:""},{logoCustom:!1})},className:"h-4 w-4 rounded border-slate-300 accent-[var(--admin-accent-base)] focus:ring-[var(--admin-accent-soft)]"}),"Use custom color"]})]}),y&&x.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-4",children:[x.jsx("input",{type:"color",value:kn(u.logo,u.base||ji),onChange:V=>{h(ee=>({...ee,logo:V.target.value})),O({logo:V.target.value})},className:"h-12 w-12 cursor-pointer rounded-xl border border-slate-200 bg-transparent p-1 shadow-sm dark:border-slate-700","aria-label":"Pick logo accent color"}),x.jsx("input",{type:"text",value:u.logo,onChange:V=>{h(ee=>({...ee,logo:V.target.value})),O({logo:V.target.value})},placeholder:u.base,className:"min-w-[160px] flex-1 rounded-2xl border border-slate-200 bg-white px-4 py-2 text-sm text-slate-700 focus:border-slate-400 focus:outline-none focus:ring-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-200",style:{"--tw-ring-color":e.soft},"aria-invalid":!w})]})]})]}),x.jsxs("section",{className:"space-y-4",children:[x.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Page background"}),x.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[x.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4 dark:border-slate-700",children:[x.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400 dark:text-slate-500",children:"Light mode"}),x.jsxs("div",{className:"mt-4 flex items-center gap-4",children:[x.jsx("input",{type:"color",value:kn(u.lightShell,fn.lightShell),onChange:V=>{h(ee=>({...ee,lightShell:V.target.value})),O({lightShell:V.target.value})},className:"h-12 w-12 cursor-pointer rounded-xl border border-slate-200 bg-transparent p-1 shadow-sm dark:border-slate-700","aria-label":"Pick light mode background color"}),x.jsx("input",{type:"text",value:u.lightShell,onChange:V=>{h(ee=>({...ee,lightShell:V.target.value})),O({lightShell:V.target.value})},placeholder:fn.lightShell,className:"flex-1 rounded-2xl border border-slate-200 bg-white px-4 py-2 text-sm text-slate-700 focus:border-slate-400 focus:outline-none focus:ring-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-200",style:{"--tw-ring-color":e.soft},"aria-invalid":!C})]})]}),x.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4 dark:border-slate-700",children:[x.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400 dark:text-slate-500",children:"Dark mode"}),x.jsxs("div",{className:"mt-4 flex items-center gap-4",children:[x.jsx("input",{type:"color",value:kn(u.darkShell,fn.darkShell),onChange:V=>{h(ee=>({...ee,darkShell:V.target.value})),O({darkShell:V.target.value})},className:"h-12 w-12 cursor-pointer rounded-xl border border-slate-200 bg-transparent p-1 shadow-sm dark:border-slate-700","aria-label":"Pick dark mode background color"}),x.jsx("input",{type:"text",value:u.darkShell,onChange:V=>{h(ee=>({...ee,darkShell:V.target.value})),O({darkShell:V.target.value})},placeholder:fn.darkShell,className:"flex-1 rounded-2xl border border-slate-200 bg-white px-4 py-2 text-sm text-slate-700 focus:border-slate-400 focus:outline-none focus:ring-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-200",style:{"--tw-ring-color":e.soft},"aria-invalid":!E})]})]})]})]}),x.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[x.jsx("button",{type:"submit",disabled:!j||n,className:"inline-flex items-center justify-center rounded-full px-5 py-2 text-sm font-semibold shadow-sm transition hover:brightness-105 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",style:{backgroundColor:e.button,color:e.buttonContrast,"--tw-ring-color":e.soft,opacity:j?1:.6},children:n?"Saving...":"Save changes"}),x.jsx("span",{className:"text-xs text-slate-400 dark:text-slate-500",children:"Changes apply instantly, saving keeps them for next time."})]}),(i||s)&&x.jsx("div",{className:`rounded-2xl px-4 py-3 text-sm ${s?"bg-rose-500/10 text-rose-500":"bg-emerald-500/10 text-emerald-500"}`,children:s||i})]})}function wK({links:r,onChange:e}){function t(n,i,s){const o=r.map((a,l)=>l===n?{...a,[i]:s}:a);e(o)}return x.jsxs("div",{className:"space-y-3",children:[r.map((n,i)=>x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[x.jsx("input",{value:n.label,onChange:s=>t(i,"label",s.target.value),placeholder:"Label (LinkedIn, Portfolio, etc.)",className:"rounded-2xl border border-slate-200 bg-white px-4 py-2 text-sm text-slate-700 focus:border-slate-400 focus:outline-none focus:ring-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-200"}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("input",{value:n.url,onChange:s=>t(i,"url",s.target.value),placeholder:"https://",className:"flex-1 rounded-2xl border border-slate-200 bg-white px-4 py-2 text-sm text-slate-700 focus:border-slate-400 focus:outline-none focus:ring-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-200"}),x.jsx("button",{type:"button",onClick:()=>e(r.filter((s,o)=>o!==i)),className:"rounded-full border border-slate-200 px-3 py-2 text-xs text-slate-500 hover:bg-slate-100 dark:border-slate-700 dark:text-slate-400 dark:hover:bg-slate-800",children:"Remove"})]})]},i)),x.jsx("button",{type:"button",onClick:()=>e([...r,{label:"",url:""}]),className:"rounded-full border border-dashed border-slate-300 px-4 py-2 text-xs text-slate-500 hover:bg-slate-100 dark:border-slate-600 dark:text-slate-400 dark:hover:bg-slate-800",children:"Add link"})]})}function bK({blogSettings:r,saving:e,accent:t,onPreview:n,onSave:i,onReset:s}){const[o,a]=F.useState(Dn);F.useEffect(()=>{a(r)},[r]);function l(h){const p={...o,...h};a(p),n(p)}function u(h){h.preventDefault(),i(Pa(o))}return x.jsxs("form",{onSubmit:u,className:"space-y-8",children:[x.jsxs("section",{className:"space-y-4",children:[x.jsx("h3",{className:"text-sm font-semibold text-slate-600 dark:text-slate-300 uppercase tracking-wide",children:"Blog hero"}),x.jsx(rs,{label:"Banner image",bucket:"Postimg",pathPrefix:"blog-banner",value:o.bannerUrl,deletePrevious:!0,onChange:h=>l({bannerUrl:h})}),x.jsxs("div",{className:"space-y-3",children:[x.jsx("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400",htmlFor:"blog-hero-heading",children:"Banner heading"}),x.jsx("input",{id:"blog-hero-heading",value:o.bannerHeading,onChange:h=>l({bannerHeading:h.target.value}),placeholder:"Banner heading",className:"w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-base text-slate-800 placeholder:text-slate-400 focus:border-slate-400 focus:outline-none focus:ring-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100",style:{"--tw-ring-color":t.soft}})]}),x.jsxs("div",{className:"space-y-3",children:[x.jsx("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400",htmlFor:"blog-hero-subheading",children:"Banner subheading"}),x.jsx("textarea",{id:"blog-hero-subheading",value:o.bannerSubheading,onChange:h=>l({bannerSubheading:h.target.value}),placeholder:"Banner subheading",rows:2,className:"w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-base text-slate-800 placeholder:text-slate-400 focus:border-slate-400 focus:outline-none focus:ring-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100",style:{"--tw-ring-color":t.soft}})]})]}),x.jsxs("section",{className:"space-y-4",children:[x.jsx("h3",{className:"text-sm font-semibold text-slate-600 dark:text-slate-300 uppercase tracking-wide",children:"Author block"}),x.jsx(rs,{label:"Author avatar",bucket:"Postimg",pathPrefix:"author",value:o.authorAvatarUrl,deletePrevious:!0,onChange:h=>l({authorAvatarUrl:h})}),x.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[x.jsx("input",{value:o.authorName,onChange:h=>l({authorName:h.target.value}),placeholder:"Author name",className:"rounded-2xl border border-slate-200 bg-white px-4 py-2 text-sm text-slate-700 focus:border-slate-400 focus:outline-none focus:ring-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-200"}),x.jsx("input",{value:o.authorTitle,onChange:h=>l({authorTitle:h.target.value}),placeholder:"Author title",className:"rounded-2xl border border-slate-200 bg-white px-4 py-2 text-sm text-slate-700 focus:border-slate-400 focus:outline-none focus:ring-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-200"})]}),x.jsx("textarea",{value:o.authorBio,onChange:h=>l({authorBio:h.target.value}),placeholder:"Short author bio",className:"w-full rounded-2xl border border-slate-200 bg-white px-4 py-2 text-sm text-slate-700 focus:border-slate-400 focus:outline-none focus:ring-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-200",rows:4}),x.jsxs("div",{className:"flex flex-wrap gap-3 text-xs text-slate-500 dark:text-slate-400",children:[x.jsxs("label",{className:"flex items-center gap-2",children:[x.jsx("input",{type:"radio",name:"categoryStrategy",value:"tag",checked:o.categoryStrategy==="tag",onChange:h=>l({categoryStrategy:h.target.value})}),"Use post tag for categories"]}),x.jsxs("label",{className:"flex items-center gap-2",children:[x.jsx("input",{type:"radio",name:"categoryStrategy",value:"title",checked:o.categoryStrategy==="title",onChange:h=>l({categoryStrategy:h.target.value})}),"Derive from post title"]})]})]}),x.jsxs("section",{className:"space-y-4",children:[x.jsx("h3",{className:"text-sm font-semibold text-slate-600 dark:text-slate-300 uppercase tracking-wide",children:"About page"}),x.jsx(rs,{label:"About image (optional)",bucket:"Postimg",pathPrefix:"about",value:o.aboutImageUrl,deletePrevious:!0,onChange:h=>l({aboutImageUrl:h})}),x.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Uses Supabase Storage bucket Postimg. Ensure it exists and is public (or add policies)."}),x.jsx("input",{value:o.aboutTitle,onChange:h=>l({aboutTitle:h.target.value}),placeholder:"About page heading",className:"rounded-2xl border border-slate-200 bg-white px-4 py-2 text-sm text-slate-700 focus:border-slate-400 focus:outline-none focus:ring-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-200"}),x.jsx(Ty,{value:o.aboutContent,onChange:h=>l({aboutContent:h}),accent:t,placeholder:"Tell your story  format with the toolbar above"}),x.jsxs("div",{className:"space-y-3",children:[x.jsx("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Emphasis keywords (comma separated)"}),x.jsx("input",{value:(o.aboutEmphasis||[]).join(", "),onChange:h=>l({aboutEmphasis:h.target.value.split(",").map(p=>p.trim()).filter(Boolean)}),placeholder:"Power BI, React, Supabase",className:"w-full rounded-2xl border border-slate-200 bg-white px-4 py-2 text-sm text-slate-700 focus:border-slate-400 focus:outline-none focus:ring-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-200"}),x.jsxs("div",{className:"flex gap-4 text-sm",children:[x.jsxs("label",{className:"inline-flex items-center gap-2",children:[x.jsx("input",{type:"checkbox",checked:!!o.aboutLargeText,onChange:h=>l({aboutLargeText:h.target.checked})}),"Large intro text"]}),x.jsxs("label",{className:"inline-flex items-center gap-2",children:[x.jsx("input",{type:"checkbox",checked:!!o.aboutAccentBackground,onChange:h=>l({aboutAccentBackground:h.target.checked})}),"Accent background"]})]})]})]}),x.jsxs("section",{className:"space-y-4",children:[x.jsx("h3",{className:"text-sm font-semibold text-slate-600 dark:text-slate-300 uppercase tracking-wide",children:"Contact"}),x.jsx("input",{value:o.contactHeadline,onChange:h=>l({contactHeadline:h.target.value}),placeholder:"Headline",className:"rounded-2xl border border-slate-200 bg-white px-4 py-2 text-sm text-slate-700 focus:border-slate-400 focus:outline-none focus:ring-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-200"}),x.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[x.jsx("input",{value:o.contactEmail,onChange:h=>l({contactEmail:h.target.value}),placeholder:"Contact email",className:"rounded-2xl border border-slate-200 bg-white px-4 py-2 text-sm text-slate-700 focus:border-slate-400 focus:outline-none focus:ring-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-200"}),x.jsx("input",{value:o.contactLocation,onChange:h=>l({contactLocation:h.target.value}),placeholder:"Location",className:"rounded-2xl border border-slate-200 bg-white px-4 py-2 text-sm text-slate-700 focus:border-slate-400 focus:outline-none focus:ring-2 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-200"})]}),x.jsx(wK,{links:o.contactLinks||[],onChange:h=>l({contactLinks:h})})]}),x.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[x.jsx("button",{type:"submit",disabled:e,className:"inline-flex items-center justify-center rounded-full px-5 py-2 text-sm font-semibold shadow-sm transition hover:brightness-105 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",style:{backgroundColor:t.button,color:t.buttonContrast,"--tw-ring-color":t.soft},children:e?"Saving...":"Save blog settings"}),x.jsx("button",{type:"button",onClick:()=>{a(Dn),s()},className:"rounded-full border border-slate-200 px-4 py-2 text-sm text-slate-600 hover:bg-slate-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800",children:"Revert to default"})]})]})}function AK({themeColors:r,blogSettings:e,accent:t,loading:n,saving:i,message:s,error:o,onPreviewTheme:a,onPreviewBlog:l,onSaveTheme:u,onSaveBlog:h,onResetTheme:p,onResetBlog:g}){const[y,_]=F.useState("theme");return x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("h2",{className:"text-xl font-semibold",children:"Settings"}),x.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Fine-tune the blog experience and the admin theme."})]}),x.jsxs("div",{className:"inline-flex rounded-full border border-slate-200 bg-white/70 p-1 text-xs font-medium shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[x.jsx("button",{type:"button",className:`px-3 py-1.5 rounded-full transition ${y==="theme"?"bg-blue-500 text-white":"text-slate-500 dark:text-slate-300"}`,onClick:()=>_("theme"),children:"Theme"}),x.jsx("button",{type:"button",className:`px-3 py-1.5 rounded-full transition ${y==="blog"?"bg-blue-500 text-white":"text-slate-500 dark:text-slate-300"}`,onClick:()=>_("blog"),children:"Blog"})]})]}),y==="theme"?x.jsx(_K,{themeColors:r,accent:t,loading:n,saving:i,message:s,error:o,onPreview:a,onSave:u,onReset:p}):x.jsx(bK,{blogSettings:e,saving:i,accent:t,onPreview:l,onSave:h,onReset:()=>{g(),l(Dn)}}),(s||o)&&y==="blog"&&x.jsx("div",{className:`rounded-2xl px-4 py-3 text-sm ${o?"bg-rose-500/10 text-rose-500":"bg-emerald-500/10 text-emerald-500"}`,children:o||s})]})}const Lm="edw.pedraza@gmail.com".split(",").map(r=>r.trim().toLowerCase()).filter(Boolean),SK=[{key:"dashboard",label:"Dashboard",description:"Overview & quick access",category:"both",actions:["Jump to section"]},{key:"hero",label:"Hero",description:"Headline + desk labels",category:"portfolio",actions:["Edit hero"]},{key:"profile",label:"About",description:"Personal and contact info",category:"portfolio",actions:["Edit profile","Social links"]},{key:"service",label:"Services",description:"What you do",category:"portfolio",actions:["Add service","Edit copy"]},{key:"education",label:"Education",description:"Resume - Education",category:"portfolio",actions:["Add school","Reorder items"]},{key:"experience",label:"Experience",description:"Resume - Experience",category:"portfolio",actions:["Add role","Reorder items"]},{key:"technology",label:"Technologies",description:"Manage tech icons",category:"portfolio",actions:["Add icon","Reorder grid"]},{key:"project",label:"Projects",description:"Manage and update projects",category:"portfolio",actions:["Add project","Update links"]},{key:"testimonial",label:"Testimonials",description:"Client feedback",category:"portfolio",actions:["Add testimonial","Reorder items"]},{key:"posts",label:"Blog Posts",description:"Write and publish posts",category:"blog",actions:["Write post","Manage tags"]},{key:"settings",label:"Settings",description:"Adjust branding colors",category:"both",actions:["Theme colors","Blog settings"]}];function I2({name:r,className:e}){const t="h-5 w-5";switch(r){case"dashboard":return x.jsx("svg",{className:`${t} ${e||""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:x.jsx("path",{d:"M3 13h8V3H3v10zM13 21h8v-8h-8v8zM13 3v6h8V3h-8zM3 21h8v-6H3v6z"})});case"profile":return x.jsxs("svg",{className:`${t} ${e||""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[x.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),x.jsx("circle",{cx:"12",cy:"7",r:"4"})]});case"hero":return x.jsxs("svg",{className:`${t} ${e||""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[x.jsx("path",{d:"M3 8h18M7 4h10M6 20h12"}),x.jsx("rect",{x:"5",y:"8",width:"14",height:"10",rx:"2"})]});case"education":return x.jsxs("svg",{className:`${t} ${e||""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[x.jsx("path",{d:"M22 10L12 5 2 10l10 5 10-5z"}),x.jsx("path",{d:"M6 12v5c3 1.5 9 1.5 12 0v-5"})]});case"experience":return x.jsxs("svg",{className:`${t} ${e||""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[x.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2"}),x.jsx("path",{d:"M16 7V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2"})]});case"service":return x.jsx("svg",{className:`${t} ${e||""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:x.jsx("path",{d:"M12 1v4M12 19v4M4.22 4.22l2.83 2.83M16.95 16.95l2.83 2.83M1 12h4M19 12h4M4.22 19.78l2.83-2.83M16.95 7.05l2.83-2.83"})});case"technology":return x.jsxs("svg",{className:`${t} ${e||""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[x.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2"}),x.jsx("path",{d:"M2 13h20M6 21v-4M18 21v-4"})]});case"project":return x.jsxs("svg",{className:`${t} ${e||""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[x.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),x.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),x.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),x.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]});case"posts":return x.jsx("svg",{className:`${t} ${e||""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:x.jsx("path",{d:"M3 4h18M3 8h18M7 12h14M7 16h10M7 20h6"})});case"testimonial":return x.jsx("svg",{className:`${t} ${e||""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:x.jsx("path",{d:"M21 15a4 4 0 0 1-4 4H7l-4 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"})});case"settings":return x.jsxs("svg",{className:`${t} ${e||""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[x.jsx("circle",{cx:"12",cy:"12",r:"3"}),x.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06A2 2 0 1 1 7.04 3.7l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9c0 .66.39 1.26 1 1.51.3.12.62.18.95.18H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]});default:return null}}const EK={light:{shell:"text-slate-900 bg-white",sidebar:"bg-white/90 border border-slate-200 text-slate-600 shadow-sm",sidebarNavButton:"text-slate-600 hover:bg-slate-100",header:"bg-white/90 border border-slate-200 text-slate-900 shadow-sm",headerDescription:"text-slate-500",mobileSelect:"bg-white border-slate-300 text-slate-600 focus:border-slate-400 focus:ring-slate-200",card:"border-slate-200 bg-white text-slate-900",cardTitle:"text-slate-900",cardDescription:"text-slate-500",contentPanel:"bg-white/95 border border-slate-200 text-slate-900 shadow-sm",signedInPanel:"bg-slate-50 border border-slate-200 text-slate-500",logoRing:"border-slate-100",muted:"text-slate-500",segmented:"border-slate-200 bg-white/80",segmentedButton:"text-slate-500 hover:bg-slate-100"},dark:{shell:"text-slate-100 bg-slate-900",sidebar:"bg-slate-900/60 border border-slate-800 text-slate-300 shadow-lg shadow-black/20 backdrop-blur",sidebarNavButton:"text-slate-300 hover:bg-slate-800/60",header:"bg-slate-900/60 border border-slate-800 text-slate-100 shadow-lg shadow-black/20 backdrop-blur",headerDescription:"text-slate-400",mobileSelect:"bg-slate-900/70 border-slate-700 text-slate-200 focus:border-slate-600 focus:ring-slate-700",card:"border-slate-800 bg-slate-900/60 text-slate-100",cardTitle:"text-white",cardDescription:"text-slate-300",contentPanel:"bg-slate-900/70 border border-slate-800 text-slate-100 shadow-lg shadow-black/20 backdrop-blur",signedInPanel:"bg-slate-900/40 border border-slate-800 text-slate-400",logoRing:"border-slate-800",muted:"text-slate-400",segmented:"border-slate-700 bg-slate-900/40",segmentedButton:"text-slate-400 hover:bg-slate-800/70"}};function MK(r,e){const t=$o(r),{base:n,button:i,logo:s,lightShell:o,darkShell:a}=t,l=Ia(n),u=s?Ia(s):l,h=$f(n),p=$f(i||n),g=l?Rn(l,e==="light"?.18:.3):"rgba(56, 189, 248, 0.18)",y=l?Rn(l,e==="light"?.08:.18):"rgba(56, 189, 248, 0.08)",_=l?Rn(l,e==="light"?.35:.45):"rgba(56, 189, 248, 0.35)",A=l?e==="light"?`0 22px 45px -28px ${Rn(l,.5)}`:`0 26px 55px -30px ${Rn(l,.55)}`:void 0,b=u?e==="light"?`linear-gradient(135deg, ${Rn(u,.9)} 0%, ${Rn(u,.35)} 60%, ${Rn(u,.08)} 100%)`:`linear-gradient(135deg, ${Rn(u,.7)} 0%, ${Rn(u,.3)} 55%, ${Rn(u,.08)} 100%)`:void 0,w=u?e==="light"?`0 20px 45px -26px ${Rn(u,.5)}`:`0 22px 55px -32px ${Rn(u,.55)}`:void 0;return{base:n,button:i||n,logo:s||n,lightShell:o,darkShell:a,baseContrast:h,buttonContrast:p,soft:g,softer:y,border:_,cardGlow:A,logoGradient:b,logoShadow:w,cssVars:{"--admin-accent-base":n,"--admin-accent-base-contrast":h,"--admin-accent-button":i||n,"--admin-accent-button-contrast":p,"--admin-accent-soft":g,"--admin-accent-softer":y,"--admin-shell-light":o,"--admin-shell-dark":a}}}function CK(){const[r,e]=F.useState(null),[t,n]=F.useState("dashboard"),[i,s]=F.useState(()=>localStorage.getItem("admin-space")||"portfolio"),[o,a]=F.useState(""),[l,u]=F.useState(""),[h,p]=F.useState(!1),[g,y]=F.useState("light"),[_,A]=F.useState(fn),[b,w]=F.useState(Dn),[C,E]=F.useState(null),[R,L]=F.useState(!0),[D,j]=F.useState(!1),[O,I]=F.useState(""),[U,V]=F.useState(""),[ee,te]=F.useState({}),ne=r?.user?.email?.toLowerCase()||"",le=Lm.includes(ne),de=EK[g],ie=F.useMemo(()=>MK(_,g),[_,g]),J=F.useMemo(()=>{const ge=Ia(ie.buttonContrast);return ge?{color:ie.buttonContrast,borderColor:Rn(ge,g==="light"?.35:.45),backgroundColor:Rn(ge,g==="light"?.14:.25)}:{color:ie.buttonContrast}},[ie.buttonContrast,g]),Q=F.useMemo(()=>SK.filter(ge=>i==="portfolio"?ge.category==="portfolio"||ge.category==="both":ge.category==="blog"||ge.category==="both"),[i]),H=F.useMemo(()=>Q.map(({key:ge,label:we})=>({key:ge,label:we})),[Q]),X=F.useMemo(()=>Q.filter(ge=>ge.key!=="dashboard"),[Q]),Z={profile:x.jsx(mK,{}),hero:x.jsx(yK,{}),education:x.jsx(oK,{}),experience:x.jsx(aK,{}),service:x.jsx(cK,{}),technology:x.jsx(uK,{}),project:x.jsx(dK,{}),posts:x.jsx(XN,{accent:ie}),testimonial:x.jsx(hK,{})};F.useEffect(()=>{dt.auth.getSession().then(({data:we})=>e(we.session));const{data:ge}=dt.auth.onAuthStateChange((we,De)=>e(De));return()=>ge.subscription.unsubscribe()},[]),F.useEffect(()=>{localStorage.setItem("admin-space",i),Q.some(ge=>ge.key===t)||n("dashboard")},[i,Q,t]),F.useEffect(()=>{if(!r||!le)return;let ge=!1;async function we(){try{L(!0),V("");const{data:De,error:Fe}=await dt.from("settings").select("id, theme, blog, theme_color").limit(1);if(Fe)throw Fe;const Qe=De?.[0];if(!ge)if(Qe)if(E(Qe.id),Qe.theme||Qe.blog)A($o(Qe.theme||fn)),w(Pa(Qe.blog||Dn));else{const st=uR(Qe.theme_color);A(st.theme),w(st.blog)}else E(null),A({...fn})}catch(De){ge||V(De.message||"Could not load settings")}finally{ge||L(!1)}}return we(),()=>{ge=!0}},[r,le]),F.useEffect(()=>{if(!r||!le)return;let ge=!1;async function we(Qe){try{const{count:st}=await dt.from(Qe).select("id",{count:"exact",head:!0});return st||0}catch{return 0}}async function De(Qe,st="image_url"){try{const{data:lt}=await dt.from(Qe).select(`id, ${st}`).order("created_at",{ascending:!1}).limit(1),Et=lt?.[0];if(!Et)return"";const Ut=["image_url","cover_url","icon_url","photo_url","banner_url"].find(dn=>Object.prototype.hasOwnProperty.call(Et,dn)&&Et[dn]);return Ut&&Et[Ut]||""}catch{return""}}async function Fe(){const[Qe,st,lt,Et,Ut,dn,se,Y,Ce,et,Ke,qe]=await Promise.all([dt.from("profile").select("full_name, photo_url").limit(1).maybeSingle(),we("project"),De("project"),we("post"),De("post","cover_url"),we("technology"),De("technology","icon_url"),we("service"),De("service","icon_url"),we("education"),we("experience"),we("testimonial")]);if(ge)return;const xt=Qe?.data||null;te({profile:{count:xt?1:0,previewUrl:xt?.photo_url||"",subtitle:xt?.full_name||""},project:{count:st,previewUrl:lt},posts:{count:Et,previewUrl:Ut},technology:{count:dn,previewUrl:se},service:{count:Y,previewUrl:Ce},education:{count:et},experience:{count:Ke},testimonial:{count:qe}})}return Fe(),()=>{ge=!0}},[r,le]),F.useEffect(()=>{r&&!le&&(u("This account is not authorized to access the admin console"),dt.auth.signOut())},[r,le]);async function ye(){p(!0),u("");const ge=o.trim().toLowerCase();if(!Lm.length){u("Admin access is not configured. Set VITE_ADMIN_EMAILS and reload the page."),p(!1);return}if(!Lm.includes(ge)){u("This email is not authorized to access the admin console"),p(!1);return}const we=window.location.origin+My("/admin"),{error:De}=await dt.auth.signInWithOtp({email:ge,options:{emailRedirectTo:we}});u(De?"Could not send login link":"Check your email for the login link"),p(!1)}function be(ge){I(""),V(""),A(we=>$o({...we,...ge}))}function Le(ge){I(""),V(""),w(we=>Pa({...we,...ge}))}async function pe(ge){const we=$o(ge);A(we),j(!0),I(""),V("");try{const De=CE({theme:we,blog:b});if(C){const{error:Fe}=await dt.from("settings").update({theme:we,blog:b,theme_color:De}).eq("id",C);if(Fe)throw Fe;I("Theme updated")}else{const{data:Fe,error:Qe}=await dt.from("settings").insert({theme:we,blog:b,theme_color:De}).select("id").single();if(Qe)throw Qe;Fe?.id&&E(Fe.id),I("Theme saved")}}catch(De){V(De.message||"Could not save theme settings")}finally{j(!1)}}async function Ae(ge){const we=Pa(ge);w(we),j(!0),I(""),V("");try{const De=CE({theme:_,blog:we});if(C){const{error:Fe}=await dt.from("settings").update({theme:_,blog:we,theme_color:De}).eq("id",C);if(Fe)throw Fe;I("Blog settings updated")}else{const{data:Fe,error:Qe}=await dt.from("settings").insert({theme:_,blog:we,theme_color:De}).select("id").single();if(Qe)throw Qe;Fe?.id&&E(Fe.id),I("Blog settings saved")}}catch(De){V(De.message||"Could not save blog settings")}finally{j(!1)}}function je(){const ge={...fn};A(ge),I(""),V("")}function ft(){const ge={...Dn};w(ge),I(""),V("")}function St(ge){y(ge)}function Xe(){const ge=r?.user?.user_metadata||{},we=r?.user?.email||"",Fe=(ge.full_name||ge.name||we||"").replace(/[^a-zA-Z ]/g," ").split(" ").filter(Boolean).slice(0,2).map(Qe=>Qe[0]?.toUpperCase()).join("")||"EP";return{avatarUrl:ge.avatar_url||ge.picture||"",initials:Fe,email:we}}if(!r||!le){const ge=l.toLowerCase().includes("could not")||l.toLowerCase().includes("not authorized")||l.toLowerCase().includes("not configured");return x.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-800 flex items-center justify-center p-6",children:x.jsxs("div",{className:"max-w-md w-full bg-white/10 backdrop-blur-md border border-white/15 p-8 rounded-2xl text-white shadow-2xl",children:[x.jsxs("div",{className:"flex flex-col items-center text-center mb-8",children:[x.jsx("img",{src:sy,alt:"Portfolio logo",className:"w-16 h-16 mb-4 rounded-2xl border border-white/20 shadow-lg"}),x.jsx("h1",{className:"text-2xl font-light tracking-[0.2em] uppercase",children:"Admin Login"}),x.jsx("p",{className:"mt-3 text-sm font-light text-white/80 max-w-xs",children:"Enter your email to receive a magic login link."}),!Lm.length&&x.jsx("p",{className:"mt-4 text-xs text-amber-200/80",children:"Admin access is disabled until VITE_ADMIN_EMAILS is configured with your authorized address."})]}),x.jsx("label",{className:"text-xs uppercase tracking-wide text-white/60 mb-2 block",children:"Email address"}),x.jsx("input",{type:"email",value:o,onChange:we=>a(we.target.value),placeholder:"you@example.com",className:"w-full px-4 py-3 rounded-xl bg-white/15 text-white placeholder:text-white/50 focus:outline-none focus:ring-2 focus:ring-sky-400 focus:bg-white/20 transition-all",autoFocus:!0}),x.jsx("button",{disabled:!o||h||!Lm.length,onClick:ye,className:"mt-6 w-full px-4 py-3 rounded-xl bg-sky-500 hover:bg-sky-400 transition-colors disabled:bg-sky-500/40 disabled:cursor-not-allowed font-medium tracking-wide uppercase",children:h?"Sending...":"Send link"}),l&&x.jsx("div",{className:`mt-6 text-sm font-light text-center ${ge?"text-rose-300":"text-emerald-300"}`,children:l})]})})}const ce=g==="light"?ie.lightShell:ie.darkShell;return x.jsx("div",{className:`min-h-screen transition-colors duration-300 ${de.shell}`,style:{...ie.cssVars,backgroundColor:ce,background:ce,backgroundImage:"none"},children:x.jsxs("div",{className:"mx-auto flex min-h-screen max-w-7xl flex-col gap-6 px-4 py-10 sm:px-6 lg:grid lg:grid-cols-[260px,1fr] lg:px-8",children:[x.jsxs("aside",{className:`hidden h-full rounded-3xl p-6 lg:flex lg:flex-col lg:gap-8 lg:sticky lg:top-10 ${de.sidebar}`,children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:`relative flex h-12 w-12 items-center justify-center rounded-2xl border p-2 shadow-sm ${de.logoRing}`,style:{background:ie.logoGradient,boxShadow:ie.logoShadow},children:x.jsx("img",{src:sy,alt:"logo",className:"h-full w-full object-contain opacity-90"})}),x.jsxs("div",{children:[x.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.28em]",children:"Admin Console"}),x.jsx("p",{className:`text-sm ${de.muted}`,children:"Manage your portfolio content"})]})]}),x.jsx("nav",{className:"flex flex-col gap-2",role:"navigation","aria-label":"Admin sections",children:H.map(({key:ge,label:we})=>{const De=t===ge;return x.jsxs("button",{onClick:()=>n(ge),className:`flex w-full items-center justify-between rounded-2xl border border-transparent px-4 py-3 text-sm font-medium transition focus:outline-none focus-visible:ring-2 ${de.sidebarNavButton}`,style:{"--tw-ring-color":ie.soft,backgroundColor:De?ie.base:void 0,color:De?ie.baseContrast:void 0,boxShadow:De?ie.cardGlow:void 0,borderColor:De?ie.border:void 0},"aria-current":De?"page":void 0,children:[x.jsxs("span",{className:"inline-flex items-center gap-3",children:[x.jsx("span",{className:"inline-flex h-7 w-7 items-center justify-center rounded-xl",style:{background:De?"rgba(255,255,255,0.15)":"transparent",color:De?ie.baseContrast:void 0},children:x.jsx(I2,{name:ge})}),we]}),De&&x.jsx("span",{style:{color:ie.baseContrast,opacity:.8,fontSize:"0.7rem",letterSpacing:"0.2em"},children:"Active"})]},ge)})}),x.jsxs("div",{className:`mt-auto rounded-2xl p-4 text-xs ${de.signedInPanel}`,children:[x.jsx("p",{className:"font-semibold",children:"Signed in"}),x.jsx("p",{className:"mt-1 truncate",children:r?.user?.email})]})]}),x.jsxs("div",{className:"flex flex-1 flex-col gap-6",children:[x.jsx("header",{className:`rounded-3xl p-6 ${de.header}`,children:x.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[x.jsxs("div",{children:[x.jsx("h1",{className:"text-2xl font-semibold",children:"Admin Console"}),x.jsx("p",{className:`mt-1 text-sm ${de.headerDescription}`,children:"A focused workspace to curate your portfolio content."})]}),x.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-4",children:[x.jsx("div",{className:`flex items-center gap-1 rounded-full border px-1 py-1 text-xs font-medium shadow-sm transition ${de.segmented}`,style:{"--tw-ring-color":ie.soft},children:[{key:"light",label:"Light mode",icon:"sun"},{key:"dark",label:"Dark mode",icon:"moon"}].map(({key:ge,label:we,icon:De})=>{const Fe=g===ge;return x.jsxs("button",{type:"button",onClick:()=>St(ge),className:`inline-flex items-center gap-2 rounded-full px-3 py-2 transition ${de.segmentedButton}`,style:{backgroundColor:Fe?ie.base:"transparent",color:Fe?ie.baseContrast:void 0},"aria-pressed":Fe,"aria-label":we,children:[De==="sun"?x.jsxs("svg",{"aria-hidden":"true",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",viewBox:"0 0 24 24",children:[x.jsx("circle",{cx:"12",cy:"12",r:"5"}),x.jsx("path",{d:"M12 1v2m0 18v2m11-11h-2M5 12H3m15.95 7.95-1.41-1.41M6.46 6.46 5.05 5.05m12.9 0-1.41 1.41M6.46 17.54l-1.41 1.41"})]}):x.jsx("svg",{"aria-hidden":"true",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",viewBox:"0 0 24 24",children:x.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),x.jsx("span",{children:we})]},ge)})}),x.jsx("div",{className:`flex items-center gap-1 rounded-full border px-1 py-1 text-xs font-medium shadow-sm transition ${de.segmented}`,style:{"--tw-ring-color":ie.soft},children:[{key:"portfolio",label:"Portfolio"},{key:"blog",label:"Blog"}].map(({key:ge,label:we})=>{const De=i===ge;return x.jsx("button",{type:"button",onClick:()=>s(ge),className:`inline-flex items-center gap-2 rounded-full px-3 py-2 transition ${de.segmentedButton}`,style:{backgroundColor:De?ie.base:"transparent",color:De?ie.baseContrast:void 0},"aria-pressed":De,"aria-label":we,children:we},ge)})}),(()=>{const{email:ge}=Xe();return x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsxs("div",{className:"text-left text-xs sm:text-right",children:[x.jsx("p",{className:`uppercase tracking-wide ${de.headerDescription}`,children:"Signed in as"}),x.jsx("p",{className:"font-semibold truncate max-w-[200px] sm:max-w-[260px]",title:ge,children:ge})]}),x.jsxs("button",{onClick:()=>dt.auth.signOut(),className:"inline-flex items-center justify-center rounded-full px-5 py-2 text-sm font-semibold shadow-sm transition hover:opacity-90 focus:outline-none focus-visible:ring-2",style:{backgroundColor:ie.button,color:ie.buttonContrast,boxShadow:ie.cardGlow},"aria-label":"Sign out",children:[x.jsxs("svg",{"aria-hidden":"true",className:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",style:{color:"currentColor"},children:[x.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),x.jsx("path",{d:"M16 17l5-5-5-5"}),x.jsx("path",{d:"M21 12H9"})]}),"Sign out"]})]})})()]})]})}),x.jsxs("div",{className:"lg:hidden",children:[x.jsx("label",{className:`mb-2 block text-sm font-medium ${de.headerDescription}`,htmlFor:"admin-section",children:"Navigate"}),x.jsx("select",{id:"admin-section",value:t,onChange:ge=>n(ge.target.value),className:`w-full rounded-2xl border px-4 py-2 text-sm focus:outline-none focus:ring-2 ${de.mobileSelect}`,style:{"--tw-ring-color":ie.soft},children:H.map(({key:ge,label:we})=>x.jsx("option",{value:ge,children:we},ge))})]}),x.jsx("main",{className:"flex-1 space-y-6 pb-10",children:t==="dashboard"?x.jsxs("section",{className:`rounded-3xl p-0 ${de.contentPanel}`,children:[x.jsxs("div",{className:"border-b px-6 py-5",children:[x.jsx("h2",{className:"text-lg font-semibold",children:"Overview"}),x.jsx("p",{className:`mt-1 text-sm ${de.cardDescription}`,children:"Quick access to every section, with actions."})]}),x.jsx("div",{className:"divide-y",children:X.map(({key:ge,label:we,description:De,actions:Fe})=>{const Qe=ee[ge]||{},st=!!Qe.previewUrl;return x.jsxs("div",{className:"grid grid-cols-1 gap-4 px-6 py-5 sm:grid-cols-[1fr,220px,auto] sm:items-center",children:[x.jsxs("div",{className:"flex items-start gap-3",children:[x.jsx("span",{className:"inline-flex h-10 w-10 shrink-0 items-center justify-center rounded-2xl",style:{background:ie.softer,color:ie.base},children:x.jsx(I2,{name:ge})}),x.jsxs("div",{children:[x.jsx("div",{className:"text-sm font-medium uppercase tracking-wide",style:{color:ie.base},children:we}),x.jsx("div",{className:`text-base font-semibold ${de.cardTitle}`,children:we}),x.jsx("p",{className:`mt-0.5 text-sm ${de.cardDescription}`,children:De}),typeof Qe.count=="number"&&x.jsxs("div",{className:"mt-1 text-xs opacity-70",children:[Qe.count," item",Qe.count===1?"":"s"]}),Array.isArray(Fe)&&Fe.length>0&&x.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:Fe.slice(0,4).map(lt=>x.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border px-2.5 py-1 text-xs",style:{borderColor:ie.border,color:ie.base},title:lt,children:[x.jsx("svg",{"aria-hidden":"true",className:"h-3.5 w-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:x.jsx("path",{d:"M12 5v14M5 12h14"})}),lt]},lt))})]})]}),x.jsx("div",{className:"flex items-center justify-center",children:st?x.jsx("img",{src:Qe.previewUrl,alt:`${we} preview`,className:"h-24 w-36 rounded-xl object-cover shadow"}):x.jsx("div",{className:"h-24 w-36 rounded-xl border border-dashed flex items-center justify-center text-xs opacity-60",children:"No preview"})}),x.jsx("div",{className:"sm:text-right",children:x.jsxs("button",{type:"button",onClick:()=>n(ge),className:"group inline-flex items-center gap-3 rounded-full px-4 py-2 text-sm font-semibold shadow-sm transition focus:outline-none focus-visible:ring-2",style:{backgroundColor:ie.button,color:ie.buttonContrast,boxShadow:ie.cardGlow,"--tw-ring-color":ie.soft},children:[x.jsx("span",{children:"Open"}),x.jsx("span",{"aria-hidden":"true",className:"flex h-8 w-8 items-center justify-center rounded-full border transition-all duration-200 group-hover:-translate-y-0.5 group-hover:translate-x-0.5 group-hover:shadow-md",style:J,children:x.jsxs("svg",{className:"h-3.5 w-3.5",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.2",viewBox:"0 0 24 24",children:[x.jsx("path",{d:"M5 12h14"}),x.jsx("path",{d:"M12 5l7 7-7 7"})]})})]})})]},ge)})})]}):x.jsx("section",{className:`rounded-3xl p-6 ${de.contentPanel}`,children:t==="settings"?x.jsx(AK,{themeColors:_,blogSettings:b,accent:ie,loading:R,saving:D,message:O,error:U,onPreviewTheme:be,onPreviewBlog:Le,onSaveTheme:pe,onSaveBlog:Ae,onResetTheme:je,onResetBlog:ft}):Z[t]??null})})]})]})})}const TK=(r="")=>r.toString().trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,""),RK=(r={})=>{const e=r.title||"Service";return{title:e,slug:r.slug||TK(e),icon:r.icon||r.icon_url||"",shortDescription:r.shortDescription||r.short_description||r.description||"Detailed information coming soon.",focusAreas:Qc(r.focusAreas||r.focus_areas||r.highlights),toolset:Qc(r.toolset||r.tools||r.toolset_list),cta:r.cta||r.cta_text||"Lets build something great together."}},PK=()=>{const{slug:r}=j2(),{data:e,loading:t,error:n}=Ks("service",{orderBy:"order"}),i=F.useMemo(()=>(Array.isArray(e)&&e.length>0?e:rS).map(RK).reduce((l,u)=>(l[u.slug]||(l[u.slug]=u),l),{}),[e]),s=r?i[r]:null,o=()=>t?x.jsx("p",{className:"text-secondary mt-6",children:"Loading service..."}):n?x.jsx("p",{className:"text-red-400 mt-6",children:"Unable to load this service right now."}):s?x.jsxs("div",{className:"mt-10 grid gap-12 lg:grid-cols-[2fr_1fr] items-start",children:[x.jsxs(zi.div,{variants:Zc("","",.1,1),initial:"hidden",animate:"show",className:"space-y-8",children:[x.jsx("p",{className:"text-secondary text-lg",children:s.shortDescription}),s.focusAreas.length>0&&x.jsxs("div",{children:[x.jsx("h3",{className:"text-white text-xl font-semibold",children:"What I focus on"}),x.jsx("ul",{className:"mt-4 list-disc list-inside space-y-2 text-secondary",children:s.focusAreas.map((a,l)=>x.jsx("li",{children:a},l))})]}),s.toolset.length>0&&x.jsxs("div",{children:[x.jsx("h3",{className:"text-white text-xl font-semibold",children:"Primary toolset"}),x.jsx("div",{className:"mt-4 flex flex-wrap gap-3",children:s.toolset.map(a=>x.jsx("span",{className:"text-sm bg-black-200/60 text-white px-3 py-1 rounded-full border border-white/10",children:a},a))})]}),x.jsx("div",{className:"green-pink-gradient p-[1px] rounded-[20px] shadow-card",children:x.jsxs("div",{className:"bg-tertiary rounded-[20px] p-6",children:[x.jsx("p",{className:"text-white font-semibold text-lg mb-2",children:"Ready when you are"}),x.jsx("p",{className:"text-secondary",children:s.cta})]})})]}),x.jsxs(zi.aside,{variants:Zc("left","spring",.2,.75),initial:"hidden",animate:"show",className:"bg-tertiary rounded-2xl p-8 flex flex-col items-center gap-6 text-center",children:[s.icon?x.jsx("img",{src:s.icon,alt:s.title,className:"h-24 w-24 object-contain"}):x.jsx("div",{className:"h-24 w-24 rounded-full bg-black-200 flex items-center justify-center text-4xl font-bold",children:s.title.charAt(0)}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-white text-2xl font-bold",children:s.title}),x.jsx("p",{className:"text-secondary mt-2",children:"Service overview"})]}),x.jsx(bd,{to:"/#contact",className:"w-full text-center py-3 rounded-full bg-gradient-to-r from-[#915EFF] to-[#70FFAE] text-white font-semibold",children:"Talk to me"})]})]}):x.jsxs("div",{className:"mt-10 space-y-6",children:[x.jsx("p",{className:"text-secondary",children:"We couldnt find the service youre looking for."}),x.jsx(bd,{to:"/",className:"text-sm text-white underline underline-offset-4",children:"Return to the homepage"})]});return x.jsxs("div",{className:"relative z-0 bg-primary min-h-screen",children:[x.jsx(jN,{}),x.jsx("section",{className:`${tr.paddingX} ${tr.paddingY} pt-32 pb-20`,children:x.jsxs("div",{className:"max-w-6xl mx-auto",children:[x.jsxs("div",{className:"mt-6",children:[x.jsx("p",{className:tr.sectionSubText,children:"Services"}),x.jsx("h1",{className:tr.sectionHeadTextSm,children:s?s.title:"Service Detail"})]}),o()]})})]})},IK=()=>x.jsx(x.Fragment,{children:x.jsxs(H2,{children:[x.jsx(Zo,{path:"/",element:x.jsx(sK,{})}),x.jsx(Zo,{path:"/blog/*",element:x.jsx(YD,{})}),x.jsx(Zo,{path:"/blog/blog-detail/:id",element:x.jsx(ZD,{})}),x.jsx(Zo,{path:"/admin",element:x.jsx(CK,{})}),x.jsx(Zo,{path:"/services/:slug",element:x.jsx(PK,{})})]})}),LK=F.createContext({}),NK=({children:r})=>x.jsx(LK.Provider,{value:{},children:r});kG.createRoot(document.getElementById("root")).render(x.jsx(pk,{basename:"/Edwin_portfolio/",children:x.jsx(NK,{children:x.jsx(IK,{})})}));
